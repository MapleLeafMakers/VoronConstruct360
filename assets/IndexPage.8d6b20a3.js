var Jr=Object.defineProperty;var Vr=(e,a,t)=>a in e?Jr(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t;var Xe=(e,a,t)=>(Vr(e,typeof a!="symbol"?a+"":a,t),t);import{c as Ee,a as te,h as ee,n as Kt,d as Fe,G as tt,H as Zr,I as nt,J as Qr,r as oe,g as Re,K as Wt,L as Be,M as Gr,P as Yr,N as Ot,F as kt,O as Me,w as _e,y as lt,z as Ge,Q as Qe,C as on,R as wn,S as Ue,k as Xr,T as Jn,U as Vn,V as Zn,W as _t,X as qt,Y as Qn,Z as Gn,$ as Yn,a0 as ei,a1 as mt,a2 as ti,a3 as kn,B as Xn,a4 as ni,a5 as Ht,a6 as ri,a7 as ii,a8 as ai,i as Bt,e as Ve,l as oi,f as si,a9 as dn,aa as li,ab as ui,ac as ci,m as ft,ad as di,q as rt,ae as er,af as fn,ag as tr,ah as Ae,ai as we,aj as nr,ak as ze,al as fi,am as rr,an as hi,ao as vi,ap as hn,p as pi,aq as ir,ar,A as or,as as sr,at as ht,au as mi,av as gi,aw as bi,ax as yi,ay as _i,az as be,aA as wi,aB as ki,aC as xi,aD as Si,t as pe,aE as ye,x as ue,v as ve,aF as qe,aG as Ne,aH as ce,aI as vt,aJ as Se,u as Te,aK as Ze,aL as at,aM as xt,aN as St,aO as gt,aP as Jt,aQ as Ct,aR as pt,aS as lr,aT as It,aU as Ci,aV as Ti,aW as zi,aX as xn,aY as Xt,aZ as Ei,a_ as en,a$ as Sn,b0 as ur,b1 as cr,b2 as dr,b3 as Ai,b4 as Ri}from"./index.a2b1500f.js";import{a as Ke}from"./axios.7331a07d.js";import{a as sn,Q as Pi}from"./QResizeObserver.3d6710cb.js";const Oi=["top","middle","bottom"];var ln=Ee({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Oi.includes(e)}},setup(e,{slots:a}){const t=te(()=>e.align!==void 0?{verticalAlign:e.align}:null),s=te(()=>{const r=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(r!==void 0?` text-${r}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>ee("div",{class:s.value,style:t.value,role:"status","aria-label":e.label},Kt(a.default,e.label!==void 0?[e.label]:[]))}}),je=Ee({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:a}){const t=te(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>ee("div",{class:t.value},Fe(a.default))}}),ct=Ee({name:"QItem",props:{...tt,...Zr,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:a,emit:t}){const{proxy:{$q:s}}=Re(),r=nt(e,s),{hasLink:n,linkAttrs:i,linkClass:o,linkTag:u,navigateOnClick:c}=Qr(),v=oe(null),g=oe(null),b=te(()=>e.clickable===!0||n.value===!0||e.tag==="label"),l=te(()=>e.disable!==!0&&b.value===!0),m=te(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(r.value===!0?" q-item--dark":"")+(n.value===!0&&e.active===null?o.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(l.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),h=te(()=>{if(e.insetLevel===void 0)return null;const S=s.lang.rtl===!0?"Right":"Left";return{["padding"+S]:16+e.insetLevel*56+"px"}});function y(S){l.value===!0&&(g.value!==null&&(S.qKeyEvent!==!0&&document.activeElement===v.value?g.value.focus():document.activeElement===g.value&&v.value.focus()),c(S))}function p(S){if(l.value===!0&&Wt(S,13)===!0){Be(S),S.qKeyEvent=!0;const E=new MouseEvent("click",S);E.qKeyEvent=!0,v.value.dispatchEvent(E)}t("keyup",S)}function w(){const S=Gr(a.default,[]);return l.value===!0&&S.unshift(ee("div",{class:"q-focus-helper",tabindex:-1,ref:g})),S}return()=>{const S={ref:v,class:m.value,style:h.value,role:"listitem",onClick:y,onKeyup:p};return l.value===!0?(S.tabindex=e.tabindex||"0",Object.assign(S,i.value)):b.value===!0&&(S["aria-disabled"]="true"),ee(u.value,S,w())}}}),qi=Ee({name:"QList",props:{...tt,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:a}){const t=Re(),s=nt(e,t.proxy.$q),r=te(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(s.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>ee(e.tag,{class:r.value},Fe(a.default))}});function wt(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),Yr.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const fr={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function hr({showing:e,avoidEmit:a,configureAnchorEl:t}){const{props:s,proxy:r,emit:n}=Re(),i=oe(null);let o=null;function u(l){return i.value===null?!1:l===void 0||l.touches===void 0||l.touches.length<=1}const c={};t===void 0&&(Object.assign(c,{hide(l){r.hide(l)},toggle(l){r.toggle(l),l.qAnchorHandled=!0},toggleKey(l){Wt(l,13)===!0&&c.toggle(l)},contextClick(l){r.hide(l),Ot(l),kt(()=>{r.show(l),l.qAnchorHandled=!0})},prevent:Ot,mobileTouch(l){if(c.mobileCleanup(l),u(l)!==!0)return;r.hide(l),i.value.classList.add("non-selectable");const m=l.target;Me(c,"anchor",[[m,"touchmove","mobileCleanup","passive"],[m,"touchend","mobileCleanup","passive"],[m,"touchcancel","mobileCleanup","passive"],[i.value,"contextmenu","prevent","notPassive"]]),o=setTimeout(()=>{o=null,r.show(l),l.qAnchorHandled=!0},300)},mobileCleanup(l){i.value.classList.remove("non-selectable"),o!==null&&(clearTimeout(o),o=null),e.value===!0&&l!==void 0&&wt()}}),t=function(l=s.contextMenu){if(s.noParentEvent===!0||i.value===null)return;let m;l===!0?r.$q.platform.is.mobile===!0?m=[[i.value,"touchstart","mobileTouch","passive"]]:m=[[i.value,"mousedown","hide","passive"],[i.value,"contextmenu","contextClick","notPassive"]]:m=[[i.value,"click","toggle","passive"],[i.value,"keyup","toggleKey","passive"]],Me(c,"anchor",m)});function v(){Qe(c,"anchor")}function g(l){for(i.value=l;i.value.classList.contains("q-anchor--skip");)i.value=i.value.parentNode;t()}function b(){if(s.target===!1||s.target===""||r.$el.parentNode===null)i.value=null;else if(s.target===!0)g(r.$el.parentNode);else{let l=s.target;if(typeof s.target=="string")try{l=document.querySelector(s.target)}catch{l=void 0}l!=null?(i.value=l.$el||l,t()):(i.value=null,console.error(`Anchor: target "${s.target}" not found`))}}return _e(()=>s.contextMenu,l=>{i.value!==null&&(v(),t(l))}),_e(()=>s.target,()=>{i.value!==null&&v(),b()}),_e(()=>s.noParentEvent,l=>{i.value!==null&&(l===!0?v():t())}),lt(()=>{b(),a!==!0&&s.modelValue===!0&&i.value===null&&n("update:modelValue",!1)}),Ge(()=>{o!==null&&clearTimeout(o),v()}),{anchorEl:i,canShow:u,anchorEvents:c}}function vr(e,a){const t=oe(null);let s;function r(o,u){const c=`${u!==void 0?"add":"remove"}EventListener`,v=u!==void 0?u:s;o!==window&&o[c]("scroll",v,on.passive),window[c]("scroll",v,on.passive),s=u}function n(){t.value!==null&&(r(t.value),t.value=null)}const i=_e(()=>e.noParentEvent,()=>{t.value!==null&&(n(),a())});return Ge(i),{localScrollTarget:t,unconfigureScrollTarget:n,changeScrollEvent:r}}const{notPassiveCapture:Nt}=on,ot=[];function Dt(e){const a=e.target;if(a===void 0||a.nodeType===8||a.classList.contains("no-pointer-events")===!0)return;let t=wn.length-1;for(;t>=0;){const s=wn[t].$;if(s.type.name==="QTooltip"){t--;continue}if(s.type.name!=="QDialog")break;if(s.props.seamless!==!0)return;t--}for(let s=ot.length-1;s>=0;s--){const r=ot[s];if((r.anchorEl.value===null||r.anchorEl.value.contains(a)===!1)&&(a===document.body||r.innerRef.value!==null&&r.innerRef.value.contains(a)===!1))e.qClickOutside=!0,r.onClickOutside(e);else return}}function pr(e){ot.push(e),ot.length===1&&(document.addEventListener("mousedown",Dt,Nt),document.addEventListener("touchstart",Dt,Nt))}function $t(e){const a=ot.findIndex(t=>t===e);a>-1&&(ot.splice(a,1),ot.length===0&&(document.removeEventListener("mousedown",Dt,Nt),document.removeEventListener("touchstart",Dt,Nt)))}let Cn,Tn;function Mt(e){const a=e.split(" ");return a.length!==2?!1:["top","center","bottom"].includes(a[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(a[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function mr(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const un={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{un[`${e}#ltr`]=e,un[`${e}#rtl`]=e});function Lt(e,a){const t=e.split(" ");return{vertical:t[0],horizontal:un[`${t[1]}#${a===!0?"rtl":"ltr"}`]}}function Bi(e,a){let{top:t,left:s,right:r,bottom:n,width:i,height:o}=e.getBoundingClientRect();return a!==void 0&&(t-=a[1],s-=a[0],n+=a[1],r+=a[0],i+=a[0],o+=a[1]),{top:t,bottom:n,height:o,left:s,right:r,width:i,middle:s+(r-s)/2,center:t+(n-t)/2}}function Ii(e,a,t){let{top:s,left:r}=e.getBoundingClientRect();return s+=a.top,r+=a.left,t!==void 0&&(s+=t[1],r+=t[0]),{top:s,bottom:s+1,height:1,left:r,right:r+1,width:1,middle:r,center:s}}function Ni(e,a){return{top:0,center:a/2,bottom:a,left:0,middle:e/2,right:e}}function zn(e,a,t,s){return{top:e[t.vertical]-a[s.vertical],left:e[t.horizontal]-a[s.horizontal]}}function vn(e,a=0){if(e.targetEl===null||e.anchorEl===null||a>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{vn(e,a+1)},10);return}const{targetEl:t,offset:s,anchorEl:r,anchorOrigin:n,selfOrigin:i,absoluteOffset:o,fit:u,cover:c,maxHeight:v,maxWidth:g}=e;if(Ue.is.ios===!0&&window.visualViewport!==void 0){const R=document.body.style,{offsetLeft:A,offsetTop:M}=window.visualViewport;A!==Cn&&(R.setProperty("--q-pe-left",A+"px"),Cn=A),M!==Tn&&(R.setProperty("--q-pe-top",M+"px"),Tn=M)}const{scrollLeft:b,scrollTop:l}=t,m=o===void 0?Bi(r,c===!0?[0,0]:s):Ii(r,o,s);Object.assign(t.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:g||"100vw",maxHeight:v||"100vh",visibility:"visible"});const{offsetWidth:h,offsetHeight:y}=t,{elWidth:p,elHeight:w}=u===!0||c===!0?{elWidth:Math.max(m.width,h),elHeight:c===!0?Math.max(m.height,y):y}:{elWidth:h,elHeight:y};let S={maxWidth:g,maxHeight:v};(u===!0||c===!0)&&(S.minWidth=m.width+"px",c===!0&&(S.minHeight=m.height+"px")),Object.assign(t.style,S);const E=Ni(p,w);let C=zn(m,E,n,i);if(o===void 0||s===void 0)tn(C,m,E,n,i);else{const{top:R,left:A}=C;tn(C,m,E,n,i);let M=!1;if(C.top!==R){M=!0;const q=2*s[1];m.center=m.top-=q,m.bottom-=q+2}if(C.left!==A){M=!0;const q=2*s[0];m.middle=m.left-=q,m.right-=q+2}M===!0&&(C=zn(m,E,n,i),tn(C,m,E,n,i))}S={top:C.top+"px",left:C.left+"px"},C.maxHeight!==void 0&&(S.maxHeight=C.maxHeight+"px",m.height>C.maxHeight&&(S.minHeight=S.maxHeight)),C.maxWidth!==void 0&&(S.maxWidth=C.maxWidth+"px",m.width>C.maxWidth&&(S.minWidth=S.maxWidth)),Object.assign(t.style,S),t.scrollTop!==l&&(t.scrollTop=l),t.scrollLeft!==b&&(t.scrollLeft=b)}function tn(e,a,t,s,r){const n=t.bottom,i=t.right,o=Xr(),u=window.innerHeight-o,c=document.body.clientWidth;if(e.top<0||e.top+n>u)if(r.vertical==="center")e.top=a[s.vertical]>u/2?Math.max(0,u-n):0,e.maxHeight=Math.min(n,u);else if(a[s.vertical]>u/2){const v=Math.min(u,s.vertical==="center"?a.center:s.vertical===r.vertical?a.bottom:a.top);e.maxHeight=Math.min(n,v),e.top=Math.max(0,v-n)}else e.top=Math.max(0,s.vertical==="center"?a.center:s.vertical===r.vertical?a.top:a.bottom),e.maxHeight=Math.min(n,u-e.top);if(e.left<0||e.left+i>c)if(e.maxWidth=Math.min(i,c),r.horizontal==="middle")e.left=a[s.horizontal]>c/2?Math.max(0,c-i):0;else if(a[s.horizontal]>c/2){const v=Math.min(c,s.horizontal==="middle"?a.middle:s.horizontal===r.horizontal?a.right:a.left);e.maxWidth=Math.min(i,v),e.left=Math.max(0,v-e.maxWidth)}else e.left=Math.max(0,s.horizontal==="middle"?a.middle:s.horizontal===r.horizontal?a.left:a.right),e.maxWidth=Math.min(i,c-e.left)}var Di=Ee({name:"QMenu",inheritAttrs:!1,props:{...fr,...Jn,...tt,...Vn,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Mt},self:{type:String,validator:Mt},offset:{type:Array,validator:mr},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Zn,"click","escapeKey"],setup(e,{slots:a,emit:t,attrs:s}){let r=null,n,i,o;const u=Re(),{proxy:c}=u,{$q:v}=c,g=oe(null),b=oe(!1),l=te(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),m=nt(e,v),{registerTick:h,removeTick:y}=_t(),{registerTimeout:p}=qt(),{transitionProps:w,transitionStyle:S}=Qn(e),{localScrollTarget:E,changeScrollEvent:C,unconfigureScrollTarget:R}=vr(e,J),{anchorEl:A,canShow:M}=hr({showing:b}),{hide:q}=Gn({showing:b,canShow:M,handleShow:de,handleHide:L,hideOnRouteChange:l,processOnMount:!0}),{showPortal:W,hidePortal:Y,renderPortal:z}=Yn(u,g,N,"menu"),D={anchorEl:A,innerRef:g,onClickOutside(F){if(e.persistent!==!0&&b.value===!0)return q(F),(F.type==="touchstart"||F.target.classList.contains("q-dialog__backdrop"))&&Be(F),!0}},f=te(()=>Lt(e.anchor||(e.cover===!0?"center middle":"bottom start"),v.lang.rtl)),j=te(()=>e.cover===!0?f.value:Lt(e.self||"top start",v.lang.rtl)),Q=te(()=>(e.square===!0?" q-menu--square":"")+(m.value===!0?" q-menu--dark q-dark":"")),K=te(()=>e.autoClose===!0?{onClick:k}:{}),se=te(()=>b.value===!0&&e.persistent!==!0);_e(se,F=>{F===!0?(ri(I),pr(D)):(kn(I),$t(D))});function X(){ii(()=>{let F=g.value;F&&F.contains(document.activeElement)!==!0&&(F=F.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||F.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||F.querySelector("[autofocus], [data-autofocus]")||F,F.focus({preventScroll:!0}))})}function de(F){if(r=e.noRefocus===!1?document.activeElement:null,ei(B),W(),J(),n=void 0,F!==void 0&&(e.touchPosition||e.contextMenu)){const ie=mt(F);if(ie.left!==void 0){const{top:fe,left:ae}=A.value.getBoundingClientRect();n={left:ie.left-ae,top:ie.top-fe}}}i===void 0&&(i=_e(()=>v.screen.width+"|"+v.screen.height+"|"+e.self+"|"+e.anchor+"|"+v.lang.rtl,H)),e.noFocus!==!0&&document.activeElement.blur(),h(()=>{H(),e.noFocus!==!0&&X()}),p(()=>{v.platform.is.ios===!0&&(o=e.autoClose,g.value.click()),H(),W(!0),t("show",F)},e.transitionDuration)}function L(F){y(),Y(),T(!0),r!==null&&(F===void 0||F.qClickOutside!==!0)&&(((F&&F.type.indexOf("key")===0?r.closest('[tabindex]:not([tabindex^="-"])'):void 0)||r).focus(),r=null),p(()=>{Y(!0),t("hide",F)},e.transitionDuration)}function T(F){n=void 0,i!==void 0&&(i(),i=void 0),(F===!0||b.value===!0)&&(ti(B),R(),$t(D),kn(I)),F!==!0&&(r=null)}function J(){(A.value!==null||e.scrollTarget!==void 0)&&(E.value=Xn(A.value,e.scrollTarget),C(E.value,H))}function k(F){o!==!0?(ni(c,F),t("click",F)):o=!1}function B(F){se.value===!0&&e.noFocus!==!0&&ai(g.value,F.target)!==!0&&X()}function I(F){t("escapeKey"),q(F)}function H(){vn({targetEl:g.value,offset:e.offset,anchorEl:A.value,anchorOrigin:f.value,selfOrigin:j.value,absoluteOffset:n,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function N(){return ee(Ht,w.value,()=>b.value===!0?ee("div",{role:"menu",...s,ref:g,tabindex:-1,class:["q-menu q-position-engine scroll"+Q.value,s.class],style:[s.style,S.value],...K.value},Fe(a.default)):null)}return Ge(T),Object.assign(c,{focus:X,updatePosition:H}),z}}),$i=Ee({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:a}){const t=te(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>ee("div",{class:t.value,role:"toolbar"},Fe(a.default))}}),Mi=Ee({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:a}){const{proxy:{$q:t}}=Re(),s=Bt(oi,Ve);if(s===Ve)return console.error("QPage needs to be a deep child of QLayout"),Ve;if(Bt(si,Ve)===Ve)return console.error("QPage needs to be child of QPageContainer"),Ve;const n=te(()=>{const o=(s.header.space===!0?s.header.size:0)+(s.footer.space===!0?s.footer.size:0);if(typeof e.styleFn=="function"){const u=s.isContainer.value===!0?s.containerHeight.value:t.screen.height;return e.styleFn(o,u)}return{minHeight:s.isContainer.value===!0?s.containerHeight.value-o+"px":t.screen.height===0?o!==0?`calc(100vh - ${o}px)`:"100vh":t.screen.height-o+"px"}}),i=te(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>ee("main",{class:i.value,style:n.value},Fe(a.default))}});function En(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const a=parseInt(e,10);return isNaN(a)?0:a}var yt=dn({name:"close-popup",beforeMount(e,{value:a}){const t={depth:En(a),handler(s){t.depth!==0&&setTimeout(()=>{const r=li(e);r!==void 0&&ui(r,s,t.depth)})},handlerKey(s){Wt(s,13)===!0&&t.handler(s)}};e.__qclosepopup=t,e.addEventListener("click",t.handler),e.addEventListener("keyup",t.handlerKey)},updated(e,{value:a,oldValue:t}){a!==t&&(e.__qclosepopup.depth=En(a))},beforeUnmount(e){const a=e.__qclosepopup;e.removeEventListener("click",a.handler),e.removeEventListener("keyup",a.handlerKey),delete e.__qclosepopup}});const et="https://api.github.com";let st={data:{},async clear(){this.data={}},async get(e,a){return this.data[e]===void 0?a:JSON.parse(this.data[e])},async set(e,a){this.data[e]=JSON.stringify(a)}};function Li(e){st=e}const We=(e,a=null)=>({...{Accept:"application/vnd.github+json",Authorization:`Bearer ${e}`},...a}),gr=e=>{var a,t;if((a=e==null?void 0:e.response)!=null&&a.status){const s=(t=e.response)==null?void 0:t.data;throw s.message?new Error(s.message):s.toString()}throw e};async function Fi({input:e,token:a}){e.startsWith("https://github.com/")&&(e=e.substring(19));let t=e.match(/^[^\/]+\/[^\/#]+/)[0];e=e.substring(t.length),e.startsWith("/")&&(e=e.substring(1));let s;s=await pn({repo:t,token:a});let[r,n]=e.split("#");return n&&(n=(await gn({repo:t,branch:n,token:a})).name),{repr:`${s.full_name}${r?`/${r}`:""}${n?`#${n}`:""}`,repo:s.full_name,path:r,branch:n}}async function br({repo:e,branch:a,token:t,files:s,message:r,progressCallback:n}){const i=s.reduce((l,m)=>l+m.content.length,0);let o=0;n&&n(0,i),s=await Promise.all(s.map(async l=>{let m=await Ke.post(`${et}/repos/${e}/git/blobs`,{content:l.content,encoding:l.encoding},{onUploadProgress:h=>{n&&n(o+h.loaded,i)},headers:We(t,{"Content-Type":"application/json"})});return o+=l.content.length,n&&n(o,i),{mode:"100644",type:"blob",sha:m.data.sha,path:l.path}}));const u=await gn({repo:e,branch:a,token:t}),c=u.commit.commit.tree.sha;let v=await Ke.post(`${et}/repos/${e}/git/trees`,{base_tree:c,tree:s},{headers:We(t,{"Content-Type":"application/json"})});const g=v.data.sha;v=await Ke.post(`${et}/repos/${e}/git/commits`,{message:r,tree:g,parents:[u.commit.sha]},{headers:We(t,{"Content-Type":"application/json"})});const b=v.data.sha;v=await Ke.patch(`${et}/repos/${e}/git/refs/heads/${u.name}`,{sha:b},{headers:We(t,{"Content-Type":"application/json"})})}async function pn({repo:e,token:a}){return(await Ke.get(`${et}/repos/${e}`,{headers:We(a)})).data}async function yr({url:e,token:a}){let t=await st.get(`cache:blob:${e}`,null);return t===null&&(t=(await Ke.get(e,{headers:We(a)})).data,await st.set(`cache:blob:${e}`,t)),t}async function _r({url:e,token:a}){const t=await Ke.get(e,{headers:We(a,{Accept:"application/vnd.github.raw"})});return new Blob([t.data])}async function An({url:e,token:a}){const t=await yr({url:e,token:a});let s=t.content;return t.encoding==="base64"&&(s=atob(s)),JSON.parse(s)}async function mn({url:e,token:a}){return`data:image/png;base64,${(await yr({url:e,token:a})).content}`}async function gn({repo:e,branch:a,token:t}){a||(a=(await pn({repo:e,token:t})).default_branch);try{const s=new Date;return s.setSeconds(s.getSeconds()-30),(await Ke.get(`${et}/repos/${e}/branches/${a}`,{headers:We(t,{"If-Modified-Since":s.toUTCString()})})).data}catch(s){gr(s)}}function ji(e,a){return(a.type==="tree")-(e.type==="tree")||e.path.localeCompare(a.path)}function Ui(e){let a=e.match(/^.*?(\.[^\.]*)?$/)[1];if(!a)return null;if(a=a.toLowerCase(),a==".stp"&&(a=".step"),[".step",".f3d",".svg",".dxf"].indexOf(a)!==-1)return a.substring(1);if(a===".png")return"thumb";if(a===".json")return"meta"}function wr(e,a){return{...e,content_types:{...e.content_types,...a.content_types}}}function kr(e,a){const t=[...e];return a.forEach(s=>{let r=e.filter(n=>n.name==s.name&&n.type==s.type)[0];if(!r){t.push(s);return}r.sha=[...r.sha,...s.sha],r.type==="tree"?r.children=kr(r.children,s.children):(t.splice(t.indexOf(r),1),r=wr(r,s),t.push(r))}),t}function xr(e){const a=[];return e.forEach(t=>{if(t.type==="tree")t.children=xr(t.children),t.children.length&&a.push(t);else{const s=t.content_types;(s.step||s.f3d||s.dxf||s.svg)&&a.push(t)}}),a}function Sr(e){return e.filter(a=>a.type==="tree").forEach(a=>{Sr(a.children)}),e.sort(ji),e}function Ki(e,a){if(a){for(const t of a.split("/"))if(Array.isArray(e)?e=e.filter(s=>s.name===t)[0]:e=e.children.filter(s=>s.name===t)[0],!e)return null}return e}function Wi(e,a){e=e||[],a=a||[],e=Array.isArray(e)?e:e.split(/\s+/),a=Array.isArray(a)?a:a.split(/\s+/);const t=e.map(s=>s.toLowerCase());return[...e,...a.filter(s=>t.indexOf(s.toLowerCase())===-1)].join(" ")||void 0}function Hi(e,a){var t;console.log("Applying DirMeta",e,a);for(const[s,r]of Object.entries(a)){const n=Ki(e,s);n.meta={...(n==null?void 0:n.meta)||{},...r||{},keywords:Wi((t=n==null?void 0:n.meta)==null?void 0:t.keywords,r==null?void 0:r.keywords)}}}async function Cr({tree:e,token:a,treeShas:t,perNodeFunc:s}){let r=await st.get(`cache:meta:${t.join(":")}`,null),n=[];for(let o of e){if(s(o),o.type==="tree"){n.push({...o,children:await Cr({tree:o.children,token:a,treeShas:o.sha,perNodeFunc:s})});continue}let u;r?u=r[o.name]||{}:o.content_types.meta&&(u=await An({url:o.content_types.meta.url,token:a})),n.push({...o,meta:u})}const i=n.filter(o=>{var u;return o.name=="_meta"&&((u=o==null?void 0:o.content_types)==null?void 0:u.meta)})[0];if(i){if(!r){console.log("Downloading meta",i.content_types.meta.url);const o=await An({url:i.content_types.meta.url,token:a});Hi(n,o)}n=n.filter(o=>o.id!==i.id)}if(!r){const o={};n.forEach(u=>{Object.keys((u==null?void 0:u.meta)||{}).length!=0&&(o[u.name]=u.meta)}),Object.keys(o).length!=0&&st.set(`cache:meta:${t.join(":")}`,o)}return n}function Tr({tree:e,root:a,id_prefix:t,repo:s,branch:r}){const n=[];for(;e.length>0;){let i=e[0];if(!i.path.startsWith(a))break;if(e.shift(),i.id=`${t}|${i.path}`,i.name=i.path.split("/").pop(),i.name=i.name.match(/^(.*?)(\.[^\.]*)?$/)[1],delete i.mode,i.sha=Array.isArray(i.sha)?i.sha:[i.sha],i.type=="tree"){if(i.children=Tr({tree:e,root:`${i.path}/`,id_prefix:t,repo:s,branch:r}),i.children.length===0)continue}else if(i.type=="blob"){let o=Ui(i.path);if(!o)continue;if(i.content_types={[o]:{url:i.url,size:i.size,path:i.path,repo:s,branch:r}},i.path=i.path.match(/^(.*?)(\.[^\.]*)?$/)[1],delete i.url,delete i.size,n.length>0){const u=n[n.length-1];u.type==="blob"&&u.path===i.path&&(n.pop(),i=wr(u,i))}}n.push(i)}return n}async function Ji({repo:e,branch:a,path:t,token:s}){return(await Ke.get(`${et}/repos/${e}/commits`,{headers:We(s),params:{sha:a,path:t,per_page:"1",page:"1"}})).data[0]}async function Vi({repo:e,branch:a,token:t,id_prefix:s,noCache:r}){r=!!r,a=await gn({repo:e,branch:a,token:t});let n=r?null:await st.get(`cache:tree:${e}:${a.name}`);if(!n||n.sha!==a.commit.commit.tree.sha){console.log("cache miss",e,a.commit.commit);try{n=(await Ke.get(`${et}/repos/${e}/git/trees/${a.commit.commit.tree.sha}?recursive=1`,{headers:We(t)})).data}catch(i){gr(i)}r||await st.set(`cache:tree:${e}:${a.name}`,n)}return[Tr({tree:n.tree,root:"",id_prefix:s,repo:e,branch:a.name}),a.commit.commit.tree.sha]}function Zi(e,a){a=a.replace(/^\//,"").replace("//$",""),a.split("/").forEach(s=>{var r;if(e=(r=e.filter(n=>n.name===s&&n.type=="tree")[0])==null?void 0:r.children,e===void 0)throw Error("Invalid repository path")});function t(s,r){const n=[];for(let i of s){const o={...i};o.path=o.path.substring(r.length+1);let[u,c]=o.id.split("|");c=c.substring(r.length+1),o.id=`${u}|${c}`,o.type===e&&(o.children=t(o.children,r)),n.push(o)}return n}return e=t(e,a),e}function Qi(e){let a=0;function t(s){if(a++,s.children)for(let r of s.children)t(r)}for(let s of e)t(s);return a}async function Gi({repositories:e,token:a,id_prefix:t,index:s,setLoadingMessage:r,noCache:n}){n=!!n;let i=[],o=[];for(let u of e){r&&r(`Loading ${u}...`);const c=u.match(/^([\w-]+)\/([\w-]+)((?:\/[\w-]+)*)(#.*)?$/);if(c!=null){let[,v,g,b,l]=c;l?l=l.substring(1):l=(await pn({repo:`${v}/${g}`,token:a})).default_branch,r&&r(`Loading ${u}#${l}...`);let[m,h]=await Vi({repo:`${v}/${g}`,branch:l,token:a,id_prefix:t,noCache:n});o.push(h),b&&(m=Zi(m,b)),i=kr(i,m)}}if(s){let u=0;const c=Qi(i);i=await Cr({tree:i,token:a,treeShas:o,perNodeFunc:()=>{u++,r&&r(`Indexing trees (${u}/${c})...`)}})}return console.log("Merged trees",i),Sr(xr(i))}var ke=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Rt(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var zr={},Vt={},Tt={};(function(e){var a=ke&&ke.__extends||function(){var l=function(m,h){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,p){y.__proto__=p}||function(y,p){for(var w in p)Object.prototype.hasOwnProperty.call(p,w)&&(y[w]=p[w])},l(m,h)};return function(m,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");l(m,h);function y(){this.constructor=m}m.prototype=h===null?Object.create(h):(y.prototype=h.prototype,new y)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.createJSONRPCNotification=e.createJSONRPCRequest=e.createJSONRPCSuccessResponse=e.createJSONRPCErrorResponse=e.JSONRPCErrorCode=e.JSONRPCErrorException=e.isJSONRPCResponses=e.isJSONRPCResponse=e.isJSONRPCRequests=e.isJSONRPCRequest=e.isJSONRPCID=e.JSONRPC=void 0,e.JSONRPC="2.0";var t=function(l){return typeof l=="string"||typeof l=="number"||l===null};e.isJSONRPCID=t;var s=function(l){return l.jsonrpc===e.JSONRPC&&l.method!==void 0&&l.result===void 0&&l.error===void 0};e.isJSONRPCRequest=s;var r=function(l){return Array.isArray(l)&&l.every(e.isJSONRPCRequest)};e.isJSONRPCRequests=r;var n=function(l){return l.jsonrpc===e.JSONRPC&&l.id!==void 0&&(l.result!==void 0||l.error!==void 0)};e.isJSONRPCResponse=n;var i=function(l){return Array.isArray(l)&&l.every(e.isJSONRPCResponse)};e.isJSONRPCResponses=i;var o=function(l,m,h){var y={code:l,message:m};return h!=null&&(y.data=h),y},u=function(l){a(m,l);function m(h,y,p){var w=l.call(this,h)||this;return Object.setPrototypeOf(w,m.prototype),w.code=y,w.data=p,w}return m.prototype.toObject=function(){return o(this.code,this.message,this.data)},m}(Error);e.JSONRPCErrorException=u,function(l){l[l.ParseError=-32700]="ParseError",l[l.InvalidRequest=-32600]="InvalidRequest",l[l.MethodNotFound=-32601]="MethodNotFound",l[l.InvalidParams=-32602]="InvalidParams",l[l.InternalError=-32603]="InternalError"}(e.JSONRPCErrorCode||(e.JSONRPCErrorCode={}));var c=function(l,m,h,y){return{jsonrpc:e.JSONRPC,id:l,error:o(m,h,y)}};e.createJSONRPCErrorResponse=c;var v=function(l,m){return{jsonrpc:e.JSONRPC,id:l,result:m!=null?m:null}};e.createJSONRPCSuccessResponse=v;var g=function(l,m,h){return{jsonrpc:e.JSONRPC,id:l,method:m,params:h}};e.createJSONRPCRequest=g;var b=function(l,m){return{jsonrpc:e.JSONRPC,method:l,params:m}};e.createJSONRPCNotification=b})(Tt);var zt={};Object.defineProperty(zt,"__esModule",{value:!0});zt.DefaultErrorCode=void 0;zt.DefaultErrorCode=0;var Rn=ke&&ke.__awaiter||function(e,a,t,s){function r(n){return n instanceof t?n:new t(function(i){i(n)})}return new(t||(t=Promise))(function(n,i){function o(v){try{c(s.next(v))}catch(g){i(g)}}function u(v){try{c(s.throw(v))}catch(g){i(g)}}function c(v){v.done?n(v.value):r(v.value).then(o,u)}c((s=s.apply(e,a||[])).next())})},Pn=ke&&ke.__generator||function(e,a){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,r,n,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(v){return u([c,v])}}function u(c){if(s)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(t=0)),t;)try{if(s=1,r&&(n=c[0]&2?r.return:c[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,c[1])).done)return n;switch(r=0,n&&(c=[c[0]&2,n.value]),c[0]){case 0:case 1:n=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){t.label=c[1];break}if(c[0]===6&&t.label<n[1]){t.label=n[1],n=c;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(c);break}n[2]&&t.ops.pop(),t.trys.pop();continue}c=a.call(e,t)}catch(v){c=[6,v],r=0}finally{s=n=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.JSONRPCClient=void 0;var ut=Tt,nn=zt,Yi=function(){function e(a,t){this._send=a,this.createID=t,this.idToResolveMap=new Map,this.id=0}return e.prototype._createID=function(){return this.createID?this.createID():++this.id},e.prototype.timeout=function(a,t){var s=this;t===void 0&&(t=function(i){return(0,ut.createJSONRPCErrorResponse)(i,nn.DefaultErrorCode,"Request timeout")});var r=function(i,o){var u=setTimeout(function(){i.forEach(function(c){var v=s.idToResolveMap.get(c);v&&(s.idToResolveMap.delete(c),v(t(c)))})},a);return o().then(function(c){return clearTimeout(u),c},function(c){return clearTimeout(u),Promise.reject(c)})},n=function(i,o){var u=(Array.isArray(i)?i:[i]).map(function(c){return c.id}).filter(On);return r(u,function(){return s.requestAdvanced(i,o)})};return{request:function(i,o,u){var c=s._createID();return r([c],function(){return s.requestWithID(i,o,u,c)})},requestAdvanced:function(i,o){return n(i,o)}}},e.prototype.request=function(a,t,s){return this.requestWithID(a,t,s,this._createID())},e.prototype.requestWithID=function(a,t,s,r){return Rn(this,void 0,void 0,function(){var n,i;return Pn(this,function(o){switch(o.label){case 0:return n=(0,ut.createJSONRPCRequest)(r,a,t),[4,this.requestAdvanced(n,s)];case 1:return i=o.sent(),i.result!==void 0&&!i.error?[2,i.result]:i.result===void 0&&i.error?[2,Promise.reject(new ut.JSONRPCErrorException(i.error.message,i.error.code,i.error.data))]:[2,Promise.reject(new Error("An unexpected error occurred"))]}})})},e.prototype.requestAdvanced=function(a,t){var s=this,r=Array.isArray(a);Array.isArray(a)||(a=[a]);var n=a.filter(function(u){return On(u.id)}),i=n.map(function(u){return new Promise(function(c){return s.idToResolveMap.set(u.id,c)})}),o=Promise.all(i).then(function(u){return r||!u.length?u:u[0]});return this.send(r?a:a[0],t).then(function(){return o},function(u){return n.forEach(function(c){s.receive((0,ut.createJSONRPCErrorResponse)(c.id,nn.DefaultErrorCode,u&&u.message||"Failed to send a request"))}),o})},e.prototype.notify=function(a,t,s){var r=(0,ut.createJSONRPCNotification)(a,t);this.send(r,s).then(void 0,function(){})},e.prototype.send=function(a,t){return Rn(this,void 0,void 0,function(){return Pn(this,function(s){return[2,this._send(a,t)]})})},e.prototype.rejectAllPendingRequests=function(a){this.idToResolveMap.forEach(function(t,s){return t((0,ut.createJSONRPCErrorResponse)(s,nn.DefaultErrorCode,a))}),this.idToResolveMap.clear()},e.prototype.receive=function(a){var t=this;Array.isArray(a)||(a=[a]),a.forEach(function(s){var r=t.idToResolveMap.get(s.id);r&&(t.idToResolveMap.delete(s.id),r(s))})},e}();Vt.JSONRPCClient=Yi;var On=function(e){return e!=null},Er={};Object.defineProperty(Er,"__esModule",{value:!0});var Zt={},Ft=ke&&ke.__assign||function(){return Ft=Object.assign||function(e){for(var a,t=1,s=arguments.length;t<s;t++){a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ft.apply(this,arguments)},qn=ke&&ke.__awaiter||function(e,a,t,s){function r(n){return n instanceof t?n:new t(function(i){i(n)})}return new(t||(t=Promise))(function(n,i){function o(v){try{c(s.next(v))}catch(g){i(g)}}function u(v){try{c(s.throw(v))}catch(g){i(g)}}function c(v){v.done?n(v.value):r(v.value).then(o,u)}c((s=s.apply(e,a||[])).next())})},Bn=ke&&ke.__generator||function(e,a){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,r,n,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(v){return u([c,v])}}function u(c){if(s)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(t=0)),t;)try{if(s=1,r&&(n=c[0]&2?r.return:c[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,c[1])).done)return n;switch(r=0,n&&(c=[c[0]&2,n.value]),c[0]){case 0:case 1:n=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){t.label=c[1];break}if(c[0]===6&&t.label<n[1]){t.label=n[1],n=c;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(c);break}n[2]&&t.ops.pop(),t.trys.pop();continue}c=a.call(e,t)}catch(v){c=[6,v],r=0}finally{s=n=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Xi=ke&&ke.__spreadArray||function(e,a,t){if(t||arguments.length===2)for(var s=0,r=a.length,n;s<r;s++)(n||!(s in a))&&(n||(n=Array.prototype.slice.call(a,0,s)),n[s]=a[s]);return e.concat(n||Array.prototype.slice.call(a))};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.JSONRPCServer=void 0;var De=Tt,ea=zt,ta=function(){return(0,De.createJSONRPCErrorResponse)(null,De.JSONRPCErrorCode.ParseError,"Parse error")},na=function(e){return(0,De.createJSONRPCErrorResponse)((0,De.isJSONRPCID)(e.id)?e.id:null,De.JSONRPCErrorCode.InvalidRequest,"Invalid Request")},ra=function(e){return(0,De.createJSONRPCErrorResponse)(e,De.JSONRPCErrorCode.MethodNotFound,"Method not found")},ia=function(){function e(a){a===void 0&&(a={});var t;this.mapErrorToJSONRPCErrorResponse=la,this.nameToMethodDictionary={},this.middleware=null,this.errorListener=(t=a.errorListener)!==null&&t!==void 0?t:console.warn}return e.prototype.hasMethod=function(a){return!!this.nameToMethodDictionary[a]},e.prototype.addMethod=function(a,t){this.addMethodAdvanced(a,this.toJSONRPCMethod(t))},e.prototype.toJSONRPCMethod=function(a){return function(t,s){var r=a(t.params,s);return Promise.resolve(r).then(function(n){return sa(t.id,n)})}},e.prototype.addMethodAdvanced=function(a,t){var s;this.nameToMethodDictionary=Ft(Ft({},this.nameToMethodDictionary),(s={},s[a]=t,s))},e.prototype.receiveJSON=function(a,t){var s=this.tryParseRequestJSON(a);return s?this.receive(s,t):Promise.resolve(ta())},e.prototype.tryParseRequestJSON=function(a){try{return JSON.parse(a)}catch{return null}},e.prototype.receive=function(a,t){return Array.isArray(a)?this.receiveMultiple(a,t):this.receiveSingle(a,t)},e.prototype.receiveMultiple=function(a,t){return qn(this,void 0,void 0,function(){var s,r=this;return Bn(this,function(n){switch(n.label){case 0:return[4,Promise.all(a.map(function(i){return r.receiveSingle(i,t)}))];case 1:return s=n.sent().filter(aa),s.length===1?[2,s[0]]:s.length?[2,s]:[2,null]}})})},e.prototype.receiveSingle=function(a,t){return qn(this,void 0,void 0,function(){var s,r;return Bn(this,function(n){switch(n.label){case 0:return s=this.nameToMethodDictionary[a.method],(0,De.isJSONRPCRequest)(a)?[3,1]:[2,na(a)];case 1:return[4,this.callMethod(s,a,t)];case 2:return r=n.sent(),[2,ua(a,r)]}})})},e.prototype.applyMiddleware=function(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];this.middleware?this.middleware=this.combineMiddlewares(Xi([this.middleware],a,!0)):this.middleware=this.combineMiddlewares(a)},e.prototype.combineMiddlewares=function(a){return a.length?a.reduce(this.middlewareReducer):null},e.prototype.middlewareReducer=function(a,t){return function(s,r,n){return a(function(i,o){return t(s,i,o)},r,n)}},e.prototype.callMethod=function(a,t,s){var r=this,n=function(o,u){return a?a(o,u):o.id!==void 0?Promise.resolve(ra(o.id)):Promise.resolve(null)},i=function(o){return r.errorListener('An unexpected error occurred while executing "'.concat(t.method,'" JSON-RPC method:'),o),Promise.resolve(r.mapErrorToJSONRPCErrorResponseIfNecessary(t.id,o))};try{return(this.middleware||oa)(n,t,s).then(void 0,i)}catch(o){return i(o)}},e.prototype.mapErrorToJSONRPCErrorResponseIfNecessary=function(a,t){return a!==void 0?this.mapErrorToJSONRPCErrorResponse(a,t):null},e}();Zt.JSONRPCServer=ia;var aa=function(e){return e!==null},oa=function(e,a,t){return e(a,t)},sa=function(e,a){return e!==void 0?(0,De.createJSONRPCSuccessResponse)(e,a):null},la=function(e,a){var t,s=(t=a==null?void 0:a.message)!==null&&t!==void 0?t:"An unexpected error occurred",r=ea.DefaultErrorCode,n;return a instanceof De.JSONRPCErrorException&&(r=a.code,n=a.data),(0,De.createJSONRPCErrorResponse)(e,r,s,n)},ua=function(e,a){return a||(e.id!==void 0?(0,De.createJSONRPCErrorResponse)(e.id,De.JSONRPCErrorCode.InternalError,"Internal error"):null)},Qt={},ca=ke&&ke.__awaiter||function(e,a,t,s){function r(n){return n instanceof t?n:new t(function(i){i(n)})}return new(t||(t=Promise))(function(n,i){function o(v){try{c(s.next(v))}catch(g){i(g)}}function u(v){try{c(s.throw(v))}catch(g){i(g)}}function c(v){v.done?n(v.value):r(v.value).then(o,u)}c((s=s.apply(e,a||[])).next())})},da=ke&&ke.__generator||function(e,a){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,r,n,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(v){return u([c,v])}}function u(c){if(s)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(t=0)),t;)try{if(s=1,r&&(n=c[0]&2?r.return:c[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,c[1])).done)return n;switch(r=0,n&&(c=[c[0]&2,n.value]),c[0]){case 0:case 1:n=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){t.label=c[1];break}if(c[0]===6&&t.label<n[1]){t.label=n[1],n=c;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(c);break}n[2]&&t.ops.pop(),t.trys.pop();continue}c=a.call(e,t)}catch(v){c=[6,v],r=0}finally{s=n=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.JSONRPCServerAndClient=void 0;var Pt=Tt,fa=function(){function e(a,t,s){s===void 0&&(s={});var r;this.server=a,this.client=t,this.errorListener=(r=s.errorListener)!==null&&r!==void 0?r:console.warn}return e.prototype.applyServerMiddleware=function(){for(var a,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];(a=this.server).applyMiddleware.apply(a,t)},e.prototype.hasMethod=function(a){return this.server.hasMethod(a)},e.prototype.addMethod=function(a,t){this.server.addMethod(a,t)},e.prototype.addMethodAdvanced=function(a,t){this.server.addMethodAdvanced(a,t)},e.prototype.timeout=function(a){return this.client.timeout(a)},e.prototype.request=function(a,t,s){return this.client.request(a,t,s)},e.prototype.requestAdvanced=function(a,t){return this.client.requestAdvanced(a,t)},e.prototype.notify=function(a,t,s){this.client.notify(a,t,s)},e.prototype.rejectAllPendingRequests=function(a){this.client.rejectAllPendingRequests(a)},e.prototype.receiveAndSend=function(a,t,s){return ca(this,void 0,void 0,function(){var r,n;return da(this,function(i){switch(i.label){case 0:return(0,Pt.isJSONRPCResponse)(a)||(0,Pt.isJSONRPCResponses)(a)?(this.client.receive(a),[3,4]):[3,1];case 1:return(0,Pt.isJSONRPCRequest)(a)||(0,Pt.isJSONRPCRequests)(a)?[4,this.server.receive(a,t)]:[3,3];case 2:return r=i.sent(),r?[2,this.client.send(r,s)]:[3,4];case 3:return n="Received an invalid JSON-RPC message",this.errorListener(n,a),[2,Promise.reject(new Error(n))];case 4:return[2]}})})},e}();Qt.JSONRPCServerAndClient=fa;(function(e){var a=ke&&ke.__createBinding||(Object.create?function(s,r,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(r,n);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(s,i,o)}:function(s,r,n,i){i===void 0&&(i=n),s[i]=r[n]}),t=ke&&ke.__exportStar||function(s,r){for(var n in s)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&a(r,s,n)};Object.defineProperty(e,"__esModule",{value:!0}),t(Vt,e),t(Er,e),t(Tt,e),t(Zt,e),t(Qt,e)})(zr);const Pe=new zr.JSONRPCClient(e=>{window.adsk.fusionSendData("jsonrpc",JSON.stringify(e))});window.fusionJavaScriptHandler={handle:function(e,a){try{e=="jsonrpc"&&Pe.receive(JSON.parse(a))}catch{console.log("exception caught with command: "+e+", data: "+a)}return"OK"}};class ha{constructor(){Xe(this,"isFusion360");Xe(this,"version");Xe(this,"latestVersion",3);Xe(this,"updateUrl","https://github.com/MapleLeafMakers/VoronConstruct360/releases");this.isFusion360=!0,this.version=-1}async get_version(){if(this.version===-1)try{this.version=await Pe.request("get_version",{})}catch{this.version=1}return this.version}async kv_get({key:a,or:t=null}){const s=await Pe.request("kv_get",{key:a});return s===null?t:s}async kv_mget({keys:a,pattern:t}){return await Pe.request("kv_mget",{keys:a,pattern:t})}async kv_set({key:a,value:t}){await Pe.request("kv_set",{key:a,value:t})}async kv_mset(a){await Pe.request("kv_mset",{obj:a})}async kv_keys({pattern:a}){return await Pe.request("kv_keys",{pattern:a})}async kv_del({key:a}){await Pe.request("kv_del",{key:a})}async kv_mdel({keys:a,pattern:t}){await Pe.request("kv_mdel",{keys:a,pattern:t})}async get_screenshot({width:a,height:t,transparent:s,antialias:r}){return await Pe.request("get_screenshot",{width:a,height:t,transparent:s,antialias:r})}async open_model({url:a,token:t,content_type:s,filename:r}){await Pe.request("open_model",{url:a,token:t,content_type:s,filename:this._version<2?void 0:r})}async import_model({url:a,token:t,content_type:s,filename:r}){await Pe.request("import_model",{url:a,token:t,content_type:s,filename:this._version<2?void 0:r})}async export_model({step:a,f3d:t}){return await Pe.request("export_model",{step:a,f3d:t})}async close(){await Pe.request("close",{})}async autothumb({url:a,content_type:t,token:s,width:r,height:n,transparent:i,antialias:o}){return await Pe.request("autothumb",{url:a,content_type:t,token:s,width:r,height:n,transparent:i,antialias:o})}}function va(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}class pa{constructor(){Xe(this,"isFusion360");Xe(this,"version",1);Xe(this,"latestVersion",1);this.isFusion360=!1}async get_version(){return this.version}async kv_get({key:a,or:t}){const s=localStorage.getItem(a);return s===null?t:JSON.parse(s)}async kv_mget({keys:a,pattern:t}){const s={},r=[...a||[]];t&&r.push(...await this.kv_keys({pattern:t}));for(const n of r)s[n]=await this.kv_get({key:n});return s}async kv_set({key:a,value:t}){localStorage.setItem(a,JSON.stringify(t))}async kv_mset(a){for(const[t,s]of Object.entries(a))localStorage.setItem(t,JSON.stringify(s))}async kv_keys({pattern:a}){const t=new RegExp(`^${a.split("%").map(va).join(".*")}$`),s=[];for(let r=0;r<localStorage.length;r++){const n=localStorage.key(r);n&&n.match(t)&&s.push(n)}return s}async kv_del({key:a}){localStorage.removeItem(a)}async kv_mdel({keys:a,pattern:t}){const s=[...a||[]];t&&s.push(...await this.kv_keys({pattern:t}));for(const r of s)localStorage.removeItem(r)}get_screenshot({}){throw new Error("Method not implemented.")}async open_model({url:a,token:t,content_type:s,filename:r}){const n=await _r({url:a,token:t}),i=URL.createObjectURL(n);r||(r="model");const o=document.createElement("a");o.href=i,o.download=`${r}.${s}`,o.setAttribute("target","_blank"),o.click(),URL.revokeObjectURL(i)}import_model({}){throw new Error("Method not implemented.")}export_model({}){throw new Error("Method not implemented.")}close(){throw new Error("Method not implemented.")}autothumb({}){throw new Error("Method not implemented.")}}const ma=async()=>{if(window.adsk===void 0&&(await new Promise(a=>setTimeout(a,100)),window.adsk===void 0))return new pa;const e=new ha;try{console.log("Backend Version: ",await e.get_version())}catch(a){console.error(a)}return e};function Ar(e){for(const a of e)a.type==="repo"?a.icon="mdi-github":a.type==="tree"?a.icon="mdi-folder":a.type==="blob"&&(a.icon="mdi-cube-outline"),a.selectable=a.type==="blob",a.expandable=a.type==="repo"||a.type==="tree",a.children&&Ar(a.children)}const Ye=ci("core",{state:()=>({globalCursor:"",search:"",tree:ft([]),token:"",backend:{},preferences:{showThumbnails:!1,previewSize:128,showManagementUI:!1,interfaceUrl:""}}),getters:{},actions:{getTopLevelNode(e){return this.tree.filter(a=>a.id===e)[0]},async loadState(){this.backend=await ma();const{token:e,collections:a,preferences:t}=await this.backend.kv_mget({keys:["token","collections","preferences"]});if(e&&(this.token=e),a){const s=a;for(const r of s)r.selectable=!1,r.icon="mdi-github",Array.isArray(r.repositories)&&r.repositories.length>0&&(r.repositories=r.repositories.map(n=>typeof n=="string"?{repr:n,repo:n.split("/").slice(0,2).join("/"),path:n.split("/").slice(2).join("/"),branch:n.split("#")[1]||null}:n));this.tree=ft(s),this.tree.forEach(r=>this.reloadCollection({nodeId:r.id}))}t&&Object.assign(this.preferences,t)},async saveToken(){this.backend.kv_set({key:"token",value:this.token})},async saveCollections(){this.backend.kv_set({key:"collections",value:this.tree.map(e=>({...e,children:[]}))})},async savePreferences(){return this.backend.kv_set({key:"preferences",value:{...this.preferences}})},async reloadCollection({nodeId:e}){const a=this.tree.filter(s=>s.id===e)[0];a.lazy="loading";const t=await Gi({repositories:a==null?void 0:a.repositories.map(s=>s.repr),token:this.token,index:!0,id_prefix:a.id,noCache:!1,setLoadingMessage:console.log});a.lazy=!1,Ar(t),a.children=ft(t)},async setNodeThumbnail(e){var t,s;const a=await mn({url:(s=(t=e==null?void 0:e.content_types)==null?void 0:t.thumb)==null?void 0:s.url,token:this.token});e.img=a}}});var Rr=Ee({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:a,emit:t}){let s=!1,r,n,i=null,o=null,u,c;function v(){r&&r(),r=null,s=!1,i!==null&&(clearTimeout(i),i=null),o!==null&&(clearTimeout(o),o=null),n!==void 0&&n.removeEventListener("transitionend",u),u=null}function g(h,y,p){y!==void 0&&(h.style.height=`${y}px`),h.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,s=!0,r=p}function b(h,y){h.style.overflowY=null,h.style.height=null,h.style.transition=null,v(),y!==c&&t(y)}function l(h,y){let p=0;n=h,s===!0?(v(),p=h.offsetHeight===h.scrollHeight?0:void 0):(c="hide",h.style.overflowY="hidden"),g(h,p,y),i=setTimeout(()=>{i=null,h.style.height=`${h.scrollHeight}px`,u=w=>{o=null,(Object(w)!==w||w.target===h)&&b(h,"show")},h.addEventListener("transitionend",u),o=setTimeout(u,e.duration*1.1)},100)}function m(h,y){let p;n=h,s===!0?v():(c="show",h.style.overflowY="hidden",p=h.scrollHeight),g(h,p,y),i=setTimeout(()=>{i=null,h.style.height=0,u=w=>{o=null,(Object(w)!==w||w.target===h)&&b(h,"hide")},h.addEventListener("transitionend",u),o=setTimeout(u,e.duration*1.1)},100)}return Ge(()=>{s===!0&&v()}),()=>ee(Ht,{css:!1,appear:e.appear,onEnter:l,onLeave:m},a.default)}}),ga=Ee({name:"QTooltip",inheritAttrs:!1,props:{...fr,...Jn,...Vn,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Mt},self:{type:String,default:"top middle",validator:Mt},offset:{type:Array,default:()=>[14,14],validator:mr},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...Zn],setup(e,{slots:a,emit:t,attrs:s}){let r,n;const i=Re(),{proxy:{$q:o}}=i,u=oe(null),c=oe(!1),v=te(()=>Lt(e.anchor,o.lang.rtl)),g=te(()=>Lt(e.self,o.lang.rtl)),b=te(()=>e.persistent!==!0),{registerTick:l,removeTick:m}=_t(),{registerTimeout:h}=qt(),{transitionProps:y,transitionStyle:p}=Qn(e),{localScrollTarget:w,changeScrollEvent:S,unconfigureScrollTarget:E}=vr(e,de),{anchorEl:C,canShow:R,anchorEvents:A}=hr({showing:c,configureAnchorEl:X}),{show:M,hide:q}=Gn({showing:c,canShow:R,handleShow:D,handleHide:f,hideOnRouteChange:b,processOnMount:!0});Object.assign(A,{delayShow:K,delayHide:se});const{showPortal:W,hidePortal:Y,renderPortal:z}=Yn(i,u,T,"tooltip");if(o.platform.is.mobile===!0){const J={anchorEl:C,innerRef:u,onClickOutside(B){return q(B),B.target.classList.contains("q-dialog__backdrop")&&Be(B),!0}},k=te(()=>e.modelValue===null&&e.persistent!==!0&&c.value===!0);_e(k,B=>{(B===!0?pr:$t)(J)}),Ge(()=>{$t(J)})}function D(J){W(),l(()=>{n=new MutationObserver(()=>Q()),n.observe(u.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),Q(),de()}),r===void 0&&(r=_e(()=>o.screen.width+"|"+o.screen.height+"|"+e.self+"|"+e.anchor+"|"+o.lang.rtl,Q)),h(()=>{W(!0),t("show",J)},e.transitionDuration)}function f(J){m(),Y(),j(),h(()=>{Y(!0),t("hide",J)},e.transitionDuration)}function j(){n!==void 0&&(n.disconnect(),n=void 0),r!==void 0&&(r(),r=void 0),E(),Qe(A,"tooltipTemp")}function Q(){vn({targetEl:u.value,offset:e.offset,anchorEl:C.value,anchorOrigin:v.value,selfOrigin:g.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function K(J){if(o.platform.is.mobile===!0){wt(),document.body.classList.add("non-selectable");const k=C.value,B=["touchmove","touchcancel","touchend","click"].map(I=>[k,I,"delayHide","passiveCapture"]);Me(A,"tooltipTemp",B)}h(()=>{M(J)},e.delay)}function se(J){o.platform.is.mobile===!0&&(Qe(A,"tooltipTemp"),wt(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),h(()=>{q(J)},e.hideDelay)}function X(){if(e.noParentEvent===!0||C.value===null)return;const J=o.platform.is.mobile===!0?[[C.value,"touchstart","delayShow","passive"]]:[[C.value,"mouseenter","delayShow","passive"],[C.value,"mouseleave","delayHide","passive"]];Me(A,"anchor",J)}function de(){if(C.value!==null||e.scrollTarget!==void 0){w.value=Xn(C.value,e.scrollTarget);const J=e.noParentEvent===!0?Q:q;S(w.value,J)}}function L(){return c.value===!0?ee("div",{...s,ref:u,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",s.class],style:[s.style,p.value],role:"tooltip"},Fe(a.default)):null}function T(){return ee(Ht,y.value,L)}return Ge(j),Object.assign(i.proxy,{updatePosition:Q}),z}});const ba=["none","strict","leaf","leaf-filtered"];function In(e,a,t,s){return Object.defineProperty(e,a,{get:t,set:s,enumerable:!0}),e}var ya=di(rt({name:"RepoTree",props:{...tt,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:e=>ba.includes(e)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String,showThumbnails:Boolean,showManagementUI:Boolean,isFusionBackend:Boolean},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide","action:import","action:open","action:upload","action:folder-download"],setup(e,{slots:a,emit:t}){const{proxy:s}=Re(),{$q:r}=s,n=nt(e,r),i=oe({}),o=oe(e.ticked||[]),u=oe(e.expanded||[]);let c={};er(()=>{c={}});const v=te(()=>`q-tree q-tree--${e.dense===!0?"dense":"standard"}`+(e.noConnectors===!0?" q-tree--no-connectors":"")+(n.value===!0?" q-tree--dark":"")+(e.color!==void 0?` text-${e.color}`:"")),g=te(()=>e.selected!==void 0),b=te(()=>e.icon||r.iconSet.tree.icon),l=te(()=>e.controlColor||e.color),m=te(()=>e.textColor!==void 0?` text-${e.textColor}`:""),h=te(()=>{const k=e.selectedColor||e.color;return k?` text-${k}`:""}),y=te(()=>e.filterMethod!==void 0?e.filterMethod:(k,B)=>{const I=B.toLowerCase();return k[e.labelKey]&&k[e.labelKey].toLowerCase().indexOf(I)>-1}),p=te(()=>{const k={},B=(I,H)=>{const N=I.tickStrategy||(H?H.tickStrategy:e.tickStrategy),F=I[e.nodeKey],ie=I[e.childrenKey]&&Array.isArray(I[e.childrenKey])&&I[e.childrenKey].length!==0,fe=I.disabled!==!0&&g.value===!0&&I.selectable!==!1,ae=I.disabled!==!0&&I.expandable!==!1,ge=N!=="none",d=N==="strict",V=N==="leaf-filtered",U=N==="leaf"||N==="leaf-filtered";let x=I.disabled!==!0&&I.tickable!==!1;U===!0&&x===!0&&H&&H.tickable!==!0&&(x=!1);let _=I.lazy;_===!0&&i.value[F]!==void 0&&Array.isArray(I[e.childrenKey])===!0&&(_=i.value[F]);const P={key:F,parent:H,isParent:ie,lazy:_,disabled:I.disabled,link:I.disabled!==!0&&(fe===!0||ae===!0&&(ie===!0||_===!0)),children:[],matchesFilter:e.filter?y.value(I,e.filter):!0,selected:F===e.selected&&fe===!0,selectable:fe,expanded:ie===!0?u.value.includes(F):!1,expandable:ae,noTick:I.noTick===!0||d!==!0&&_&&_!=="loaded",tickable:x,tickStrategy:N,hasTicking:ge,strictTicking:d,leafFilteredTicking:V,leafTicking:U,ticked:d===!0?o.value.includes(F):ie===!0?!1:o.value.includes(F)};if(k[F]=P,ie===!0&&(P.children=I[e.childrenKey].map(Z=>B(Z,P)),e.filter&&(P.matchesFilter!==!0?P.matchesFilter=P.children.some(Z=>Z.matchesFilter):P.noTick!==!0&&P.disabled!==!0&&P.tickable===!0&&V===!0&&P.children.every(Z=>Z.matchesFilter!==!0||Z.noTick===!0||Z.tickable!==!0)===!0&&(P.tickable=!1)),P.matchesFilter===!0&&(P.noTick!==!0&&d!==!0&&P.children.every(Z=>Z.noTick)===!0&&(P.noTick=!0),U))){if(P.ticked=!1,P.indeterminate=P.children.some(Z=>Z.indeterminate===!0),P.tickable=P.tickable===!0&&P.children.some(Z=>Z.tickable),P.indeterminate!==!0){const Z=P.children.reduce(($,O)=>O.ticked===!0?$+1:$,0);Z===P.children.length?P.ticked=!0:Z>0&&(P.indeterminate=!0)}P.indeterminate===!0&&(P.indeterminateNextState=P.children.every(Z=>Z.tickable!==!0||Z.ticked!==!0))}return P};return e.nodes.forEach(I=>B(I,null)),k});_e(()=>e.ticked,k=>{o.value=k}),_e(()=>e.expanded,k=>{u.value=k});function w(k){const B=[].reduce,I=(H,N)=>{if(H||!N)return H;if(Array.isArray(N)===!0)return B.call(Object(N),I,H);if(N[e.nodeKey]===k)return N;if(N[e.childrenKey])return I(null,N[e.childrenKey])};return I(null,e.nodes)}function S(){return o.value.map(k=>w(k))}function E(){return u.value.map(k=>w(k))}function C(k){return k&&p.value[k]?p.value[k].expanded:!1}function R(){e.expanded!==void 0?t("update:expanded",[]):u.value=[]}function A(){const k=[],B=I=>{I[e.childrenKey]&&I[e.childrenKey].length!==0&&I.expandable!==!1&&I.disabled!==!0&&(k.push(I[e.nodeKey]),I[e.childrenKey].forEach(B))};e.nodes.forEach(B),e.expanded!==void 0?t("update:expanded",k):u.value=k}function M(k,B,I=w(k),H=p.value[k]){if(H.lazy&&H.lazy!=="loaded"){if(H.lazy==="loading")return;i.value[k]="loading",Array.isArray(I[e.childrenKey])!==!0&&(I[e.childrenKey]=[]),t("lazyLoad",{node:I,key:k,done:N=>{i.value[k]="loaded",I[e.childrenKey]=Array.isArray(N)===!0?N:[],kt(()=>{const F=p.value[k];F&&F.isParent===!0&&q(k,!0)})},fail:()=>{delete i.value[k],I[e.childrenKey].length===0&&delete I[e.childrenKey]}})}else H.isParent===!0&&H.expandable===!0&&q(k,B)}function q(k,B){let I=u.value;const H=e.expanded!==void 0;if(H===!0&&(I=I.slice()),B){if(e.accordion&&p.value[k]){const N=[];p.value[k].parent?p.value[k].parent.children.forEach(F=>{F.key!==k&&F.expandable===!0&&N.push(F.key)}):e.nodes.forEach(F=>{const ie=F[e.nodeKey];ie!==k&&N.push(ie)}),N.length!==0&&(I=I.filter(F=>N.includes(F)===!1))}I=I.concat([k]).filter((N,F,ie)=>ie.indexOf(N)===F)}else I=I.filter(N=>N!==k);H===!0?t("update:expanded",I):u.value=I}function W(k){return k&&p.value[k]?p.value[k].ticked:!1}function Y(k,B){let I=o.value;const H=e.ticked!==void 0;H===!0&&(I=I.slice()),B?I=I.concat(k).filter((N,F,ie)=>ie.indexOf(N)===F):I=I.filter(N=>k.includes(N)===!1),H===!0&&t("update:ticked",I)}function z(k,B,I){const H={tree:s,node:k,key:I,color:e.color,dark:n.value};return In(H,"expanded",()=>B.expanded,N=>{N!==B.expanded&&M(I,N)}),In(H,"ticked",()=>B.ticked,N=>{N!==B.ticked&&Y([I],N)}),H}function D(k){return(e.filter?k.filter(B=>p.value[B[e.nodeKey]].matchesFilter):k).map(B=>X(B))}function f(k,B,I,H){return ee(ze,{onClick:N=>{Be(N),t(k,{nodeId:B})},tabindex:-1,size:"xs",padding:"none",style:{margin:0},flat:!0,stretch:!0},()=>[ee(Ae,{size:"xs",name:H}),ee(ga,{anchor:"center left",self:"center right",transitionShow:"jump-left",transitionHide:"jump-right"},()=>I)])}function j(k){const B=[];return k.type==="blob"?e.isFusionBackend?(B.push(f("action:import",k.id,"Import","mdi-import")),B.push(f("action:open",k.id,"Open","mdi-open-in-new"))):B.push(f("action:open",k.id,"Download","mdi-download")):k.type==="repo"?(B.push(f("action:edit",k.id,"Edit","mdi-pencil")),B.push(f("action:reload",k.id,"Reload","mdi-reload"))):k.type=="tree"&&!e.isFusionBackend&&B.push(f("action:folder-download",k.id,"Download","mdi-folder-download")),(k.type==="repo"||k.type==="tree")&&e.showManagementUI&&B.push(f("action:upload",k.id,"Upload","mdi-upload")),B}function Q(k){const B=k.img||k.avatar;if(B&&e.showThumbnails)return ee("img",{class:`q-tree__${k.img?"img":"avatar"} q-mr-sm`,src:B});if(k.icon!==void 0)return ee(Ae,{class:"q-tree__icon q-mr-sm",name:k.icon,color:k.iconColor,size:k.type==="blob"?e.showThumbnails?"42px":"24px":void 0})}function K(){t("afterShow")}function se(){t("afterHide")}function X(k){const B=k[e.nodeKey],I=p.value[B],H=k.header&&a[`header-${k.header}`]||a["default-header"],N=I.isParent===!0?D(k[e.childrenKey]):[],F=N.length!==0||I.lazy&&I.lazy!=="loaded";let ie=k.body&&a[`body-${k.body}`]||a["default-body"];const fe=H!==void 0||ie!==void 0?z(k,I,B):null;return ie!==void 0&&(ie=ee("div",{class:"q-tree__node-body relative-position"},[ee("div",{class:m.value},[ie(fe)])])),ee("div",{key:B,class:`q-tree__node relative-position q-tree__node--${F===!0?"parent":"child"}`},[ee("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(I.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(I.selected===!0?" q-tree__node--selected":"")+(I.disabled===!0?" q-tree__node--disabled":""),tabindex:I.link===!0?0:-1,onClick:ae=>{L(k,I,ae)},onKeypress(ae){fn(ae)!==!0&&(ae.keyCode===13?L(k,I,ae,!0):ae.keyCode===32&&T(k,I,ae,!0))}},[ee("div",{class:"q-focus-helper",tabindex:-1,ref:ae=>{c[I.key]=ae}}),I.lazy==="loading"?ee(tr,{class:"q-tree__spinner",color:l.value}):F===!0?ee(Ae,{class:"q-tree__arrow"+(I.expanded===!0?" q-tree__arrow--rotate":""),name:b.value,onClick(ae){T(k,I,ae)}}):null,I.hasTicking===!0&&I.noTick!==!0?ee(QCheckbox,{class:"q-tree__tickbox",modelValue:I.indeterminate===!0?null:I.ticked,color:l.value,dark:n.value,dense:!0,keepColor:!0,disable:I.tickable!==!0,onKeydown:Be,"onUpdate:modelValue":ae=>{J(I,ae)}}):null,ee("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(I.selected===!0?h.value:m.value)},[H?H(fe):[Q(k),ee("div",k[e.labelKey])],ee("div",{style:{flex:1}}),ee("div",{class:"q-tree__hovercontrol"},j(k))])]),F===!0?e.noTransition===!0?ee("div",{class:"q-tree__node-collapsible"+m.value,key:`${B}__q`},[ie,ee("div",{class:"q-tree__children"+(I.disabled===!0?" q-tree__node--disabled":"")},I.expanded?N:null)]):ee(Rr,{duration:e.duration,onShow:K,onHide:se},()=>we(ee("div",{class:"q-tree__node-collapsible"+m.value,key:`${B}__q`},[ie,ee("div",{class:"q-tree__children"+(I.disabled===!0?" q-tree__node--disabled":"")},N)]),[[nr,I.expanded]])):ie])}function de(k){const B=c[k];B&&B.focus()}function L(k,B,I,H){H!==!0&&B.selectable!==!1&&de(B.key),g.value&&B.selectable?e.noSelectionUnset===!1?t("update:selected",B.key!==e.selected?B.key:null):B.key!==e.selected&&t("update:selected",B.key===void 0?null:B.key):T(k,B,I,H),typeof k.handler=="function"&&k.handler(k)}function T(k,B,I,H){I!==void 0&&Be(I),H!==!0&&B.selectable!==!1&&de(B.key),M(B.key,!B.expanded,k,B)}function J(k,B){if(k.indeterminate===!0&&(B=k.indeterminateNextState),k.strictTicking)Y([k.key],B);else if(k.leafTicking){const I=[],H=N=>{N.isParent?(B!==!0&&N.noTick!==!0&&N.tickable===!0&&I.push(N.key),N.leafTicking===!0&&N.children.forEach(H)):N.noTick!==!0&&N.tickable===!0&&(N.leafFilteredTicking!==!0||N.matchesFilter===!0)&&I.push(N.key)};H(k),Y(I,B)}}return e.defaultExpandAll===!0&&A(),Object.assign(s,{getNodeByKey:w,getTickedNodes:S,getExpandedNodes:E,isExpanded:C,collapseAll:R,expandAll:A,setExpanded:M,isTicked:W,setTicked:Y}),()=>{const k=D(e.nodes);return ee("div",{class:v.value},k.length===0?e.filter?e.noResultsLabel||r.lang.tree.noResults:e.noNodesLabel||r.lang.tree.noNodes:k)}}}));function Pr(){return Bt(fi)}let _a=0;const wa=["click","keydown"],ka={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${_a++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function xa(e,a,t,s){const r=Bt(rr,Ve);if(r===Ve)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Ve;const{proxy:n}=Re(),i=oe(null),o=oe(null),u=oe(null),c=te(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),v=te(()=>r.currentModel.value===e.name),g=te(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(v.value===!0?" q-tab--active"+(r.tabProps.value.activeClass?" "+r.tabProps.value.activeClass:"")+(r.tabProps.value.activeColor?` text-${r.tabProps.value.activeColor}`:"")+(r.tabProps.value.activeBgColor?` bg-${r.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&r.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||r.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(s!==void 0?s.linkClass.value:"")),b=te(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(r.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),l=te(()=>e.disable===!0||r.hasFocus.value===!0||v.value===!1&&r.hasActiveTab.value===!0?-1:e.tabindex||0);function m(S,E){if(E!==!0&&i.value!==null&&i.value.focus(),e.disable===!0){s!==void 0&&s.hasRouterLink.value===!0&&Be(S);return}if(s===void 0){r.updateModel({name:e.name}),t("click",S);return}if(s.hasRouterLink.value===!0){const C=(R={})=>{let A;const M=R.to===void 0||vi(R.to,e.to)===!0?r.avoidRouteWatcher=hn():null;return s.navigateToRouterLink(S,{...R,returnRouterError:!0}).catch(q=>{A=q}).then(q=>{if(M===r.avoidRouteWatcher&&(r.avoidRouteWatcher=!1,A===void 0&&(q===void 0||q.message.startsWith("Avoided redundant navigation")===!0)&&r.updateModel({name:e.name})),R.returnRouterError===!0)return A!==void 0?Promise.reject(A):q})};t("click",S,C),S.defaultPrevented!==!0&&C();return}t("click",S)}function h(S){Wt(S,[13,32])?m(S,!0):fn(S)!==!0&&S.keyCode>=35&&S.keyCode<=40&&S.altKey!==!0&&S.metaKey!==!0&&r.onKbdNavigate(S.keyCode,n.$el)===!0&&Be(S),t("keydown",S)}function y(){const S=r.tabProps.value.narrowIndicator,E=[],C=ee("div",{ref:u,class:["q-tab__indicator",r.tabProps.value.indicatorClass]});e.icon!==void 0&&E.push(ee(Ae,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&E.push(ee("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&E.push(e.alertIcon!==void 0?ee(Ae,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):ee("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),S===!0&&E.push(C);const R=[ee("div",{class:"q-focus-helper",tabindex:-1,ref:i}),ee("div",{class:b.value},Kt(a.default,E))];return S===!1&&R.push(C),R}const p={name:te(()=>e.name),rootRef:o,tabIndicatorRef:u,routeData:s};Ge(()=>{r.unregisterTab(p)}),lt(()=>{r.registerTab(p)});function w(S,E){const C={ref:o,class:g.value,tabindex:l.value,role:"tab","aria-selected":v.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:m,onKeydown:h,...E};return we(ee(S,C,y()),[[hi,c.value]])}return{renderTab:w,$tabs:r}}var Sa=Ee({name:"QTab",props:ka,emits:wa,setup(e,{slots:a,emit:t}){const{renderTab:s}=xa(e,a,t);return()=>s("div")}});const Ca=ee("div",{class:"q-space"});var Or=Ee({name:"QSpace",setup(){return()=>Ca}});let qr=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const a=document.createElement("div");Object.assign(a.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(a),e.scrollLeft=-1e3,qr=e.scrollLeft>=0,e.remove()}function Ta(e,a,t){const s=t===!0?["left","right"]:["top","bottom"];return`absolute-${a===!0?s[0]:s[1]}${e?` text-${e}`:""}`}const za=["left","center","right","justify"];var Ea=Ee({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>za.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:a,emit:t}){const{proxy:s}=Re(),{$q:r}=s,{registerTick:n}=_t(),{registerTick:i}=_t(),{registerTick:o}=_t(),{registerTimeout:u,removeTimeout:c}=qt(),{registerTimeout:v,removeTimeout:g}=qt(),b=oe(null),l=oe(null),m=oe(e.modelValue),h=oe(!1),y=oe(!0),p=oe(!1),w=oe(!1),S=[],E=oe(0),C=oe(!1);let R=null,A=null,M;const q=te(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:Ta(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),W=te(()=>{const $=E.value,O=m.value;for(let G=0;G<$;G++)if(S[G].name.value===O)return!0;return!1}),Y=te(()=>`q-tabs__content--align-${h.value===!0?"left":w.value===!0?"justify":e.align}`),z=te(()=>`q-tabs row no-wrap items-center q-tabs--${h.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),D=te(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+Y.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),f=te(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),j=te(()=>e.vertical!==!0&&r.lang.rtl===!0),Q=te(()=>qr===!1&&j.value===!0);_e(j,T),_e(()=>e.modelValue,$=>{K({name:$,setCurrent:!0,skipEmit:!0})}),_e(()=>e.outsideArrows,se);function K({name:$,setCurrent:O,skipEmit:G}){m.value!==$&&(G!==!0&&e["onUpdate:modelValue"]!==void 0&&t("update:modelValue",$),(O===!0||e["onUpdate:modelValue"]===void 0)&&(de(m.value,$),m.value=$))}function se(){n(()=>{X({width:b.value.offsetWidth,height:b.value.offsetHeight})})}function X($){if(f.value===void 0||l.value===null)return;const O=$[f.value.container],G=Math.min(l.value[f.value.scroll],Array.prototype.reduce.call(l.value.children,(ne,le)=>ne+(le[f.value.content]||0),0)),re=O>0&&G>O;h.value=re,re===!0&&i(T),w.value=O<parseInt(e.breakpoint,10)}function de($,O){const G=$!=null&&$!==""?S.find(ne=>ne.name.value===$):null,re=O!=null&&O!==""?S.find(ne=>ne.name.value===O):null;if(G&&re){const ne=G.tabIndicatorRef.value,le=re.tabIndicatorRef.value;R!==null&&(clearTimeout(R),R=null),ne.style.transition="none",ne.style.transform="none",le.style.transition="none",le.style.transform="none";const he=ne.getBoundingClientRect(),me=le.getBoundingClientRect();le.style.transform=e.vertical===!0?`translate3d(0,${he.top-me.top}px,0) scale3d(1,${me.height?he.height/me.height:1},1)`:`translate3d(${he.left-me.left}px,0,0) scale3d(${me.width?he.width/me.width:1},1,1)`,o(()=>{R=setTimeout(()=>{R=null,le.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",le.style.transform="none"},70)})}re&&h.value===!0&&L(re.rootRef.value)}function L($){const{left:O,width:G,top:re,height:ne}=l.value.getBoundingClientRect(),le=$.getBoundingClientRect();let he=e.vertical===!0?le.top-re:le.left-O;if(he<0){l.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(he),T();return}he+=e.vertical===!0?le.height-ne:le.width-G,he>0&&(l.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(he),T())}function T(){const $=l.value;if($===null)return;const O=$.getBoundingClientRect(),G=e.vertical===!0?$.scrollTop:Math.abs($.scrollLeft);j.value===!0?(y.value=Math.ceil(G+O.width)<$.scrollWidth-1,p.value=G>0):(y.value=G>0,p.value=e.vertical===!0?Math.ceil(G+O.height)<$.scrollHeight:Math.ceil(G+O.width)<$.scrollWidth)}function J($){A!==null&&clearInterval(A),A=setInterval(()=>{F($)===!0&&I()},5)}function k(){J(Q.value===!0?Number.MAX_SAFE_INTEGER:0)}function B(){J(Q.value===!0?0:Number.MAX_SAFE_INTEGER)}function I(){A!==null&&(clearInterval(A),A=null)}function H($,O){const G=Array.prototype.filter.call(l.value.children,me=>me===O||me.matches&&me.matches(".q-tab.q-focusable")===!0),re=G.length;if(re===0)return;if($===36)return L(G[0]),G[0].focus(),!0;if($===35)return L(G[re-1]),G[re-1].focus(),!0;const ne=$===(e.vertical===!0?38:37),le=$===(e.vertical===!0?40:39),he=ne===!0?-1:le===!0?1:void 0;if(he!==void 0){const me=j.value===!0?-1:1,Ce=G.indexOf(O)+he*me;return Ce>=0&&Ce<re&&(L(G[Ce]),G[Ce].focus({preventScroll:!0})),!0}}const N=te(()=>Q.value===!0?{get:$=>Math.abs($.scrollLeft),set:($,O)=>{$.scrollLeft=-O}}:e.vertical===!0?{get:$=>$.scrollTop,set:($,O)=>{$.scrollTop=O}}:{get:$=>$.scrollLeft,set:($,O)=>{$.scrollLeft=O}});function F($){const O=l.value,{get:G,set:re}=N.value;let ne=!1,le=G(O);const he=$<le?-1:1;return le+=he*5,le<0?(ne=!0,le=0):(he===-1&&le<=$||he===1&&le>=$)&&(ne=!0,le=$),re(O,le),T(),ne}function ie($,O){for(const G in $)if($[G]!==O[G])return!1;return!0}function fe(){let $=null,O={matchedLen:0,queryDiff:9999,hrefLen:0};const G=S.filter(he=>he.routeData!==void 0&&he.routeData.hasRouterLink.value===!0),{hash:re,query:ne}=s.$route,le=Object.keys(ne).length;for(const he of G){const me=he.routeData.exact.value===!0;if(he.routeData[me===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Ce,query:He,matched:$e,href:it}=he.routeData.resolvedLink.value,xe=Object.keys(He).length;if(me===!0){if(Ce!==re||xe!==le||ie(ne,He)===!1)continue;$=he.name.value;break}if(Ce!==""&&Ce!==re||xe!==0&&ie(He,ne)===!1)continue;const Ie={matchedLen:$e.length,queryDiff:le-xe,hrefLen:it.length-Ce.length};if(Ie.matchedLen>O.matchedLen){$=he.name.value,O=Ie;continue}else if(Ie.matchedLen!==O.matchedLen)continue;if(Ie.queryDiff<O.queryDiff)$=he.name.value,O=Ie;else if(Ie.queryDiff!==O.queryDiff)continue;Ie.hrefLen>O.hrefLen&&($=he.name.value,O=Ie)}$===null&&S.some(he=>he.routeData===void 0&&he.name.value===m.value)===!0||K({name:$,setCurrent:!0})}function ae($){if(c(),C.value!==!0&&b.value!==null&&$.target&&typeof $.target.closest=="function"){const O=$.target.closest(".q-tab");O&&b.value.contains(O)===!0&&(C.value=!0,h.value===!0&&L(O))}}function ge(){u(()=>{C.value=!1},30)}function d(){_.avoidRouteWatcher===!1?v(fe):g()}function V(){if(M===void 0){const $=_e(()=>s.$route.fullPath,d);M=()=>{$(),M=void 0}}}function U($){S.push($),E.value++,se(),$.routeData===void 0||s.$route===void 0?v(()=>{if(h.value===!0){const O=m.value,G=O!=null&&O!==""?S.find(re=>re.name.value===O):null;G&&L(G.rootRef.value)}}):(V(),$.routeData.hasRouterLink.value===!0&&d())}function x($){S.splice(S.indexOf($),1),E.value--,se(),M!==void 0&&$.routeData!==void 0&&(S.every(O=>O.routeData===void 0)===!0&&M(),d())}const _={currentModel:m,tabProps:q,hasFocus:C,hasActiveTab:W,registerTab:U,unregisterTab:x,verifyRouteModel:d,updateModel:K,onKbdNavigate:H,avoidRouteWatcher:!1};pi(rr,_);function P(){R!==null&&clearTimeout(R),I(),M!==void 0&&M()}let Z;return Ge(P),ir(()=>{Z=M!==void 0,P()}),ar(()=>{Z===!0&&V(),se()}),()=>ee("div",{ref:b,class:z.value,role:"tablist",onFocusin:ae,onFocusout:ge},[ee(sn,{onResize:X}),ee("div",{ref:l,class:D.value,onScroll:T},Fe(a.default)),ee(Ae,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(y.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||r.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:k,onTouchstartPassive:k,onMouseupPassive:I,onMouseleavePassive:I,onTouchendPassive:I}),ee(Ae,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(p.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||r.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:B,onTouchstartPassive:B,onMouseupPassive:I,onMouseleavePassive:I,onTouchendPassive:I})])}});const bn={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Aa=Object.keys(bn);bn.all=!0;function jt(e){const a={};for(const t of Aa)e[t]===!0&&(a[t]=!0);return Object.keys(a).length===0?bn:(a.horizontal===!0?a.left=a.right=!0:a.left===!0&&a.right===!0&&(a.horizontal=!0),a.vertical===!0?a.up=a.down=!0:a.up===!0&&a.down===!0&&(a.vertical=!0),a.horizontal===!0&&a.vertical===!0&&(a.all=!0),a)}const Ra=["INPUT","TEXTAREA"];function Ut(e,a){return a.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof a.handler=="function"&&Ra.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(a.uid)===-1)}function Pa(e){const a=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((t,s)=>{const r=parseFloat(t);r&&(a[s]=r)}),a}var Oa=dn({name:"touch-swipe",beforeMount(e,{value:a,arg:t,modifiers:s}){if(s.mouse!==!0&&Ue.has.touch!==!0)return;const r=s.mouseCapture===!0?"Capture":"",n={handler:a,sensitivity:Pa(t),direction:jt(s),noop:or,mouseStart(i){Ut(i,n)&&sr(i)&&(Me(n,"temp",[[document,"mousemove","move",`notPassive${r}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(i,!0))},touchStart(i){if(Ut(i,n)){const o=i.target;Me(n,"temp",[[o,"touchmove","move","notPassiveCapture"],[o,"touchcancel","end","notPassiveCapture"],[o,"touchend","end","notPassiveCapture"]]),n.start(i)}},start(i,o){Ue.is.firefox===!0&&ht(e,!0);const u=mt(i);n.event={x:u.left,y:u.top,time:Date.now(),mouse:o===!0,dir:!1}},move(i){if(n.event===void 0)return;if(n.event.dir!==!1){Be(i);return}const o=Date.now()-n.event.time;if(o===0)return;const u=mt(i),c=u.left-n.event.x,v=Math.abs(c),g=u.top-n.event.y,b=Math.abs(g);if(n.event.mouse!==!0){if(v<n.sensitivity[1]&&b<n.sensitivity[1]){n.end(i);return}}else if(window.getSelection().toString()!==""){n.end(i);return}else if(v<n.sensitivity[2]&&b<n.sensitivity[2])return;const l=v/o,m=b/o;n.direction.vertical===!0&&v<b&&v<100&&m>n.sensitivity[0]&&(n.event.dir=g<0?"up":"down"),n.direction.horizontal===!0&&v>b&&b<100&&l>n.sensitivity[0]&&(n.event.dir=c<0?"left":"right"),n.direction.up===!0&&v<b&&g<0&&v<100&&m>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&v<b&&g>0&&v<100&&m>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&v>b&&c<0&&b<100&&l>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&v>b&&c>0&&b<100&&l>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(Be(i),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),wt(),n.styleCleanup=h=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const y=()=>{document.body.classList.remove("no-pointer-events--children")};h===!0?setTimeout(y,50):y()}),n.handler({evt:i,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:o,distance:{x:v,y:b}})):n.end(i)},end(i){n.event!==void 0&&(Qe(n,"temp"),Ue.is.firefox===!0&&ht(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),i!==void 0&&n.event.dir!==!1&&Be(i),n.event=void 0)}};if(e.__qtouchswipe=n,s.mouse===!0){const i=s.mouseCapture===!0||s.mousecapture===!0?"Capture":"";Me(n,"main",[[e,"mousedown","mouseStart",`passive${i}`]])}Ue.has.touch===!0&&Me(n,"main",[[e,"touchstart","touchStart",`passive${s.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const t=e.__qtouchswipe;t!==void 0&&(a.oldValue!==a.value&&(typeof a.value!="function"&&t.end(),t.handler=a.value),t.direction=jt(a.modifiers))},beforeUnmount(e){const a=e.__qtouchswipe;a!==void 0&&(Qe(a,"main"),Qe(a,"temp"),Ue.is.firefox===!0&&ht(e,!1),a.styleCleanup!==void 0&&a.styleCleanup(),delete e.__qtouchswipe)}});function qa(){const e=new Map;return{getCache:function(a,t){return e[a]===void 0?e[a]=t:e[a]},getCacheWithFn:function(a,t){return e[a]===void 0?e[a]=t():e[a]}}}const Ba={name:{required:!0},disable:Boolean},Nn={setup(e,{slots:a}){return()=>ee("div",{class:"q-panel scroll",role:"tabpanel"},Fe(a.default))}},Ia={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Na=["update:modelValue","beforeTransition","transition"];function Da(){const{props:e,emit:a,proxy:t}=Re(),{getCacheWithFn:s}=qa();let r,n;const i=oe(null),o=oe(null);function u(D){const f=e.vertical===!0?"up":"left";A((t.$q.lang.rtl===!0?-1:1)*(D.direction===f?1:-1))}const c=te(()=>[[Oa,u,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),v=te(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),g=te(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),b=te(()=>`--q-transition-duration: ${e.transitionDuration}ms`),l=te(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),m=te(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),h=te(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);_e(()=>e.modelValue,(D,f)=>{const j=S(D)===!0?E(D):-1;n!==!0&&R(j===-1?0:j<E(f)?-1:1),i.value!==j&&(i.value=j,a("beforeTransition",D,f),kt(()=>{a("transition",D,f)}))});function y(){A(1)}function p(){A(-1)}function w(D){a("update:modelValue",D)}function S(D){return D!=null&&D!==""}function E(D){return r.findIndex(f=>f.props.name===D&&f.props.disable!==""&&f.props.disable!==!0)}function C(){return r.filter(D=>D.props.disable!==""&&D.props.disable!==!0)}function R(D){const f=D!==0&&e.animated===!0&&i.value!==-1?"q-transition--"+(D===-1?v.value:g.value):null;o.value!==f&&(o.value=f)}function A(D,f=i.value){let j=f+D;for(;j>-1&&j<r.length;){const Q=r[j];if(Q!==void 0&&Q.props.disable!==""&&Q.props.disable!==!0){R(D),n=!0,a("update:modelValue",Q.props.name),setTimeout(()=>{n=!1});return}j+=D}e.infinite===!0&&r.length!==0&&f!==-1&&f!==r.length&&A(D,D===-1?r.length:-1)}function M(){const D=E(e.modelValue);return i.value!==D&&(i.value=D),!0}function q(){const D=S(e.modelValue)===!0&&M()&&r[i.value];return e.keepAlive===!0?[ee(gi,m.value,[ee(h.value===!0?s(l.value,()=>({...Nn,name:l.value})):Nn,{key:l.value,style:b.value},()=>D)])]:[ee("div",{class:"q-panel scroll",style:b.value,key:l.value,role:"tabpanel"},[D])]}function W(){if(r.length!==0)return e.animated===!0?[ee(Ht,{name:o.value},q)]:q()}function Y(D){return r=mi(Fe(D.default,[])).filter(f=>f.props!==null&&f.props.slot===void 0&&S(f.props.name)===!0),r.length}function z(){return r}return Object.assign(t,{next:y,previous:p,goTo:w}),{panelIndex:i,panelDirectives:c,updatePanelsList:Y,updatePanelIndex:M,getPanelContent:W,getEnabledPanels:C,getPanels:z,isValidPanelName:S,keepAliveProps:m,needsUniqueKeepAliveWrapper:h,goToPanelByOffset:A,goToPanel:w,nextPanel:y,previousPanel:p}}var $a=Ee({name:"QTabPanel",props:Ba,setup(e,{slots:a}){return()=>ee("div",{class:"q-tab-panel",role:"tabpanel"},Fe(a.default))}}),Ma=Ee({name:"QTabPanels",props:{...Ia,...tt},emits:Na,setup(e,{slots:a}){const t=Re(),s=nt(e,t.proxy.$q),{updatePanelsList:r,getPanelContent:n,panelDirectives:i}=Da(),o=te(()=>"q-tab-panels q-panel-parent"+(s.value===!0?" q-tab-panels--dark q-dark":""));return()=>(r(a),bi("div",{class:o.value},n(),"pan",e.swipeable,()=>i.value))}});function Br(e){return yi()?(_i(e),!0):!1}function Ir(e){return typeof e=="function"?e():be(e)}const Gt=typeof window!="undefined",Nr=()=>{};function La(...e){if(e.length!==1)return wi(...e);const a=e[0];return typeof a=="function"?ki(xi(()=>({get:a,set:Nr}))):oe(a)}function Fa(e,a=!0){Re()?lt(e):a?e():kt(e)}function Dr(e){var a;const t=Ir(e);return(a=t==null?void 0:t.$el)!=null?a:t}const Et=Gt?window:void 0;Gt&&window.document;Gt&&window.navigator;Gt&&window.location;function Oe(...e){let a,t,s,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,s,r]=e,a=Et):[a,t,s,r]=e,!a)return Nr;Array.isArray(t)||(t=[t]),Array.isArray(s)||(s=[s]);const n=[],i=()=>{n.forEach(v=>v()),n.length=0},o=(v,g,b,l)=>(v.addEventListener(g,b,l),()=>v.removeEventListener(g,b,l)),u=_e(()=>[Dr(a),Ir(r)],([v,g])=>{i(),v&&n.push(...t.flatMap(b=>s.map(l=>o(v,b,l,g))))},{immediate:!0,flush:"post"}),c=()=>{u(),i()};return Br(c),c}function ja(){const e=oe(!1);return Re()&&lt(()=>{e.value=!0}),e}function Ua(e){const a=ja();return te(()=>(a.value,Boolean(e())))}function Ka(e,a={}){const{window:t=Et}=a,s=Ua(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function");let r;const n=oe(!1),i=()=>{!r||("removeEventListener"in r?r.removeEventListener("change",o):r.removeListener(o))},o=()=>{!s.value||(i(),r=t.matchMedia(La(e).value),n.value=!!(r!=null&&r.matches),r&&("addEventListener"in r?r.addEventListener("change",o):r.addListener(o)))};return Si(o),Br(()=>i()),n}const Wa={page:e=>[e.pageX,e.pageY],client:e=>[e.clientX,e.clientY],screen:e=>[e.screenX,e.screenY],movement:e=>e instanceof Touch?null:[e.movementX,e.movementY]};function Ha(e={}){const{type:a="page",touch:t=!0,resetOnTouchEnds:s=!1,initialValue:r={x:0,y:0},window:n=Et,target:i=n,eventFilter:o}=e,u=oe(r.x),c=oe(r.y),v=oe(null),g=typeof a=="function"?a:Wa[a],b=p=>{const w=g(p);w&&([u.value,c.value]=w,v.value="mouse")},l=p=>{if(p.touches.length>0){const w=g(p.touches[0]);w&&([u.value,c.value]=w,v.value="touch")}},m=()=>{u.value=r.x,c.value=r.y},h=o?p=>o(()=>b(p),{}):p=>b(p),y=o?p=>o(()=>l(p),{}):p=>l(p);return i&&(Oe(i,"mousemove",h,{passive:!0}),Oe(i,"dragover",h,{passive:!0}),t&&a!=="movement"&&(Oe(i,"touchstart",y,{passive:!0}),Oe(i,"touchmove",y,{passive:!0}),s&&Oe(i,"touchend",m,{passive:!0}))),{x:u,y:c,sourceType:v}}function Ja(e={}){const{touch:a=!0,drag:t=!0,initialValue:s=!1,window:r=Et}=e,n=oe(s),i=oe(null);if(!r)return{pressed:n,sourceType:i};const o=v=>()=>{n.value=!0,i.value=v},u=()=>{n.value=!1,i.value=null},c=te(()=>Dr(e.target)||r);return Oe(c,"mousedown",o("mouse"),{passive:!0}),Oe(r,"mouseleave",u,{passive:!0}),Oe(r,"mouseup",u,{passive:!0}),t&&(Oe(c,"dragstart",o("mouse"),{passive:!0}),Oe(r,"drop",u,{passive:!0}),Oe(r,"dragend",u,{passive:!0})),a&&(Oe(c,"touchstart",o("touch"),{passive:!0}),Oe(r,"touchend",u,{passive:!0}),Oe(r,"touchcancel",u,{passive:!0})),{pressed:n,sourceType:i}}function Va(e={}){const{window:a=Et,initialWidth:t=1/0,initialHeight:s=1/0,listenOrientation:r=!0,includeScrollbar:n=!0}=e,i=oe(t),o=oe(s),u=()=>{a&&(n?(i.value=a.innerWidth,o.value=a.innerHeight):(i.value=a.document.documentElement.clientWidth,o.value=a.document.documentElement.clientHeight))};if(u(),Fa(u),Oe("resize",u,{passive:!0}),r){const c=Ka("(orientation: portrait)");_e(c,()=>u())}return{width:i,height:o}}const Za=rt({__name:"PanelResizer",props:{maxSize:{},minSize:{},setSize:{type:Function}},setup(e){const a=e,t=Ye(),s=oe(),{pressed:r}=Ja({target:s}),{y:n}=Ha(),{height:i}=Va();return _e(()=>r,o=>{t.globalCursor=o?"ns-resize":""}),_e(n,o=>{if(r.value){let u=i.value-o-3;u>a.maxSize&&(u=a.maxSize),u<a.minSize&&(u=a.minSize),a.setSize(u)}}),(o,u)=>(pe(),ye("div",{ref_key:"el",ref:s,style:{height:"3px",cursor:"ns-resize",marginTop:"-3px"}}," \xA0 ",512))}});var Dn=Ee({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:a}){const t=te(()=>parseInt(e.lines,10)),s=te(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(t.value===1?" ellipsis":"")),r=te(()=>e.lines!==void 0&&t.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":t.value}:null);return()=>ee("div",{style:r.value,class:s.value},Fe(a.default))}});const $n=["B","KB","MB","GB","TB","PB"];function Qa(e){let a=0;for(;parseInt(e,10)>=1024&&a<$n.length-1;)e/=1024,++a;return`${e.toFixed(1)}${$n[a]}`}function Ga(e){return e.charAt(0).toUpperCase()+e.slice(1)}function dt(e,a,t){return t<=a?a:Math.min(t,Math.max(a,e))}function Ya(e,a,t){if(t<=a)return a;const s=t-a+1;let r=a+(e-a)%s;return r<a&&(r=s+r),r===0?0:r}function Xa(e,a=2,t="0"){if(e==null)return e;const s=""+e;return s.length>=a?s:new Array(a-s.length+1).join(t)+s}var $r={humanStorageSize:Qa,capitalize:Ga,between:dt,normalizeToInterval:Ya,pad:Xa};const eo={class:"row"},to=["href"],no=rt({__name:"NodePreviewTab",props:{label:{},info:{}},setup(e){const a=e,{humanStorageSize:t}=$r,s=Ye(),r=oe(null),n=async i=>{r.value=(await Ji({...i,token:s.token})).commit};return _e(()=>a.info,n),lt(()=>{n(a.info)}),(i,o)=>(pe(),ye("div",eo,[ue(ct,{dense:"",class:"col-xs-12"},{default:ve(()=>[ue(je,null,{default:ve(()=>[ue(Dn,null,{default:ve(()=>[qe(Ne(i.info.path)+" ["+Ne(be(t)(i.info.size))+"]",1)]),_:1}),ue(Dn,null,{default:ve(()=>[ce("a",{href:`https://github.com/${i.info.repo}/tree/${i.info.branch}/${i.info.path}`},[ue(Ae,{name:"mdi-github",size:"15px",style:{"vertical-align":"baseline"}}),qe(Ne(i.info.repo),1)],8,to)]),_:1})]),_:1})]),_:1})]))}}),ro={class:"thumbnail"},io=["src"],ao={style:{display:"flex","flex-direction":"column",flex:"1"}},oo=rt({__name:"NodePreview",props:{node:{},showManagementUI:{type:Boolean}},emits:["action:import","action:open","action:edit"],setup(e,{emit:a}){const t=e,s=Ye(),r=oe(""),n=oe("step"),i=async u=>{var c,v,g,b;(c=u.meta)!=null&&c.thumb?r.value=(v=u==null?void 0:u.meta)==null?void 0:v.thumb:(g=u.content_types)!=null&&g.thumb?mn({url:(b=u==null?void 0:u.content_types)==null?void 0:b.thumb.url,token:s.token}).then(l=>r.value=l):r.value=""},o=u=>{var c;if(((c=u.content_types)==null?void 0:c[n.value])===void 0){const v=u.content_types;n.value=v!=null&&v.step?"step":v!=null&&v.f3d?"f3d":v!=null&&v.dxf?"dxf":v!=null&&v.svg?"svg":n.value}};return lt(()=>{i(t.node),o(t.node)}),_e(()=>t.node,i),_e(()=>t.node,o),(u,c)=>(pe(),ye("div",{class:"previewPane shadow-up-2",style:vt([{"z-index":"2"},{maxHeight:`${be(s).preferences.previewSize}px`}])},[ue(Za,{setSize:v=>be(s).preferences.previewSize=v,minSize:64,maxSize:256},null,8,["setSize"]),ce("div",{class:"row",style:vt({display:"flex",flexDirection:"row",flexWrap:"nowrap",height:`${be(s).preferences.previewSize}px`})},[ce("div",ro,[r.value?(pe(),ye("img",{key:0,src:r.value,style:vt({width:`${be(s).preferences.previewSize}px`,height:`${be(s).preferences.previewSize}px`,objectFit:"contain"})},null,12,io)):Se("",!0),r.value?Se("",!0):(pe(),Te(Ae,{key:1,name:u.node.icon,size:`${be(s).preferences.previewSize}px`},null,8,["name","size"]))]),ce("div",ao,[ue(Ea,{breakpoint:50,modelValue:n.value,"onUpdate:modelValue":c[4]||(c[4]=v=>n.value=v),dense:"","narrow-indicator":"",align:"left",class:"shadow-2"},{default:ve(()=>{var v,g,b,l,m,h,y;return[(pe(!0),ye(Ze,null,at(Object.keys(((v=u.node)==null?void 0:v.content_types)||{}).filter(p=>p!=="meta"&&p!=="thumb"),p=>(pe(),Te(Sa,{name:p,key:p,dense:"",label:`.${p.toUpperCase()}`},null,8,["name","label"]))),128)),ue(Or),be(s).backend.isFusion360?(pe(),ye(Ze,{key:0},[ue(ze,{icon:"mdi-import",size:"sm",dense:"",rounded:"",unelevated:"",label:"Import",class:"q-pr-sm q-mr-sm",onClick:c[0]||(c[0]=p=>{p.stopPropagation(),p.preventDefault(),a("action:import",{nodeId:u.node.id,contentType:n.value})})}),((g=u.node.content_types)==null?void 0:g.step)||((b=u.node.content_types)==null?void 0:b.f3d)?(pe(),Te(ze,{key:0,icon:"mdi-open-in-new",size:"sm",dense:"",rounded:"",unelevated:"",label:"Open",class:"q-pr-sm q-mr-sm",onClick:c[1]||(c[1]=p=>{p.stopPropagation(),p.preventDefault(),a("action:open",{nodeId:u.node.id,contentType:n.value})})})):Se("",!0)],64)):(pe(),ye(Ze,{key:1},[((l=u.node.content_types)==null?void 0:l.step)||((m=u.node.content_types)==null?void 0:m.f3d)?(pe(),Te(ze,{key:0,icon:"mdi-download",size:"sm",dense:"",rounded:"",unelevated:"",label:"Download",class:"q-pr-sm q-mr-sm",onClick:c[2]||(c[2]=p=>{p.stopPropagation(),p.preventDefault(),a("action:open",{nodeId:u.node.id,contentType:n.value})})})):Se("",!0)],64)),t.showManagementUI&&(((h=u.node.content_types)==null?void 0:h.step)||((y=u.node.content_types)==null?void 0:y.f3d))?(pe(),Te(ze,{key:2,icon:"mdi-pencil",size:"sm",dense:"",rounded:"",unelevated:"",label:"edit",class:"q-mr-sm",onClick:c[3]||(c[3]=p=>{p.stopPropagation(),p.preventDefault(),a("action:edit",{nodeId:u.node.id})})})):Se("",!0)]}),_:1},8,["modelValue"]),ue(Ma,{animated:"",modelValue:n.value,"onUpdate:modelValue":c[5]||(c[5]=v=>n.value=v),style:{flex:"1","overflow-y":"auto",height:"1px"}},{default:ve(()=>{var v;return[(pe(!0),ye(Ze,null,at(Object.keys(((v=u.node)==null?void 0:v.content_types)||{}).filter(g=>g!=="meta"&&g!=="thumb"),g=>(pe(),Te($a,{class:"q-pa-xs",key:g,name:g},{default:ve(()=>{var b,l;return[ue(no,{label:g.toUpperCase(),info:(l=(b=u.node)==null?void 0:b.content_types)==null?void 0:l[g]},null,8,["label","info"])]}),_:2},1032,["name"]))),128))]}),_:1},8,["modelValue"])])],4)],4))}}),so=()=>!0;function lo(e){const a={};return e.forEach(t=>{a[t]=so}),a}function Le(){const{emit:e,proxy:a}=Re(),t=oe(null);function s(){t.value.show()}function r(){t.value.hide()}function n(o){e("ok",o),r()}function i(){e("hide")}return Object.assign(a,{show:s,hide:r}),{dialogRef:t,onDialogHide:i,onDialogOK:n,onDialogCancel:r}}const Mr=["ok","hide"];Le.emits=Mr;Le.emitsObject=lo(Mr);const uo={class:"row q-mb-sm"},co=ce("label",{for:"token"},"Github API Key: ",-1),fo={class:"row q-mb-sm"},ho=ce("label",{for:"token"},"Interface URL: ",-1),vo={class:"row q-mb-sm"},po={style:{"margin-left":"17px"}},mo={class:"row q-mb-sm"},go={style:{"margin-left":"17px"}},bo={__name:"SettingsDialog",emits:[...Le.emits],setup(e){const a=Ye(),t=oe(a.token),s={...a.preferences},{dialogRef:r,onDialogHide:n,onDialogOK:i,onDialogCancel:o}=Le();function u(){s.interfaceUrl,a.token=t,a.saveToken(),Object.assign(a.preferences,s),a.savePreferences(),i()}return(c,v)=>(pe(),Te(xt,{ref_key:"dialogRef",ref:r,onHide:be(n),square:""},{default:ve(()=>[ue(Ct,{class:"q-dialog-plugin"},{default:ve(()=>[ue(St,null,{default:ve(()=>[ce("div",uo,[co,we(ce("input",{id:"token","bg-color":"white",style:{flex:1},"onUpdate:modelValue":v[0]||(v[0]=g=>t.value=g)},null,512),[[gt,t.value]])]),ce("div",fo,[ho,we(ce("input",{id:"token","bg-color":"white",style:{flex:1},placeholder:"https://mapleleafmakers.github.io/VoronConstruct360/","onUpdate:modelValue":v[1]||(v[1]=g=>s.interfaceUrl=g)},null,512),[[gt,s.interfaceUrl]])]),ce("div",vo,[ce("label",po,[qe(" Show Thumbnails: "),we(ce("input",{type:"checkbox","onUpdate:modelValue":v[2]||(v[2]=g=>s.showThumbnails=g)},null,512),[[pt,s.showThumbnails]])])]),ce("div",mo,[ce("label",go,[qe(" Mgmt. Controls: "),we(ce("input",{type:"checkbox","onUpdate:modelValue":v[3]||(v[3]=g=>s.showManagementUI=g)},null,512),[[pt,s.showManagementUI]])])])]),_:1}),ue(Jt,{align:"right"},{default:ve(()=>[ue(ze,{size:"sm",square:"",color:"negative","text-color":"white",label:"Cancel",onClick:be(o)},null,8,["onClick"]),ue(ze,{color:"positive","text-color":"white",label:"OK",size:"sm",square:"",onClick:u})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var yo=Ee({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:a}){const t=te(()=>{const s=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(r=>e[r]===!0).map(r=>`q-btn-group--${r}`).join(" ");return`q-btn-group row no-wrap${s.length!==0?" "+s:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>ee("div",{class:t.value},Fe(a.default))}});const _o={class:"row q-mb-sm"},wo=ce("label",null,"Display Name: ",-1),ko={class:"row q-mb-sm"},xo=ce("label",null,"Repositories: ",-1),So={style:{display:"flex","flex-direction":"column",flex:"1"}},Co={class:"row q-mb-xs"},To=["onKeypress"],zo={class:"row"},Mn={__name:"CollectionEditor",props:{initialValue:{type:Object,required:!1,default:null}},emits:[...Le.emits],setup(e){const a=e,t=Pr(),s=Ye(),r=oe(null),n=oe(""),i=ft(JSON.parse(JSON.stringify(a.initialValue||{}))),o=async()=>{const E=v.value-1,C=v.value;[i.repositories[E],i.repositories[C]]=[i.repositories[C],i.repositories[E]]},u=async()=>{const E=v.value+1,C=v.value;[i.repositories[E],i.repositories[C]]=[i.repositories[C],i.repositories[E]]},c=async()=>{let E;try{E=await Fi({input:n.value,token:s.token})}catch(C){alert(C);return}i.repositories=[...i.repositories||[],E],n.value=""},v=te(()=>((i==null?void 0:i.repositories)||[]).findIndex(E=>E.repr===r.value)),g=te(()=>v.value!==null&&v.value!==void 0&&v.value>0),b=te(()=>v.value>-1&&v.value<((i==null?void 0:i.repositories)||[]).length-1),l=()=>{const E=i.repositories.findIndex(C=>C.repr===r.value);i.repositories.splice(E,1)},m=()=>{t.dialog({title:"Are you sure?",message:"Are you sure you want to permanently delete this collection?",cancel:!0,persistent:!1,ok:{class:"bordered",square:!0,size:"sm",color:"positive",nocaps:!0},cancel:{class:"bordered",square:!0,size:"sm",push:!0,color:"negative",nocaps:!0}}).onOk(()=>{const E=s.tree.findIndex(C=>C.id==i.id);E!==-1?(s.tree.splice(E,1),s.saveCollections(),w()):console.log("No match found for",i.id)})};_e(()=>r.value,(E,C)=>{console.log(C,"->",E)});const{dialogRef:h,onDialogHide:y,onDialogOK:p,onDialogCancel:w}=Le();function S(){p(i)}return(E,C)=>(pe(),Te(xt,{ref_key:"dialogRef",ref:h,onHide:be(y),square:""},{default:ve(()=>[ue(Ct,{class:"q-dialog-plugin"},{default:ve(()=>[ue(St,null,{default:ve(()=>[ce("div",_o,[wo,we(ce("input",{"bg-color":"white",style:{flex:1},"onUpdate:modelValue":C[0]||(C[0]=R=>i.name=R)},null,512),[[gt,i.name]])]),ce("div",ko,[xo,ce("div",So,[ce("div",Co,[we(ce("input",{"onUpdate:modelValue":C[1]||(C[1]=R=>n.value=R),"bg-color":"white",style:{flex:1},onKeypress:lr(c,["enter"])},null,40,To),[[gt,n.value]]),ue(ze,{class:"bordered",style:{"border-left":"none"},unelevated:"",size:"sm",icon:"add",onClick:c})]),we(ce("select",{"onUpdate:modelValue":C[2]||(C[2]=R=>r.value=R),size:"4",style:{flex:1},class:"q-mb-xs"},[(pe(!0),ye(Ze,null,at(i.repositories||[],R=>(pe(),ye("option",{key:R.repr},Ne(R.repr),1))),128))],512),[[It,r.value]]),ce("div",zo,[ue(yo,{square:"",unelevated:""},{default:ve(()=>[ue(ze,{size:"sm",class:"bordered",style:{"border-right":"none"},unelevated:"",square:"",disable:!g.value,onClick:o,icon:"mdi-arrow-up"},null,8,["disable"]),ue(ze,{size:"sm",class:"bordered",unelevated:"",square:"",disable:!b.value,onClick:u,icon:"mdi-arrow-down"},null,8,["disable"])]),_:1}),ue(ze,{size:"sm",class:"bordered q-ml-md",square:"",unelevated:"",disable:!r.value,onClick:l,icon:"mdi-delete"},null,8,["disable"])])])])]),_:1}),ue(Jt,null,{default:ve(()=>{var R;return[ue(ze,{square:"",size:"sm",class:"bordered",label:"DELETE",color:"negative","text-color":"yellow",style:{"font-weight":"bold"},onClick:m}),ue(Or),ue(ze,{square:"",size:"sm",class:"bordered",color:"negative",label:"Cancel",onClick:be(w)},null,8,["onClick"]),ue(ze,{square:"",size:"sm",class:"bordered",label:"OK",color:"positive",disable:!(i.name&&((R=i==null?void 0:i.repositories)==null?void 0:R.length)>0),onClick:S},null,8,["disable"])]}),_:1})]),_:1})]),_:1},8,["onHide"]))}},Eo=[ee("g",[ee("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}),ee("clipPath",{id:"uil-hourglass-clip1"},[ee("rect",{x:"15",y:"20",width:" 70",height:"25"},[ee("animate",{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}),ee("animate",{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"})])]),ee("clipPath",{id:"uil-hourglass-clip2"},[ee("rect",{x:"15",y:"55",width:" 70",height:"25"},[ee("animate",{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}),ee("animate",{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"})])]),ee("path",{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}),ee("path",{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}),ee("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"})])];var Ao=Ee({name:"QSpinnerHourglass",props:Ci,setup(e){const{cSize:a,classes:t}=Ti(e);return()=>ee("svg",{class:t.value,width:a.value,height:a.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Eo)}});const Ro=["none","strict","leaf","leaf-filtered"];var Lr=Ee({name:"QTree",props:{...tt,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:e=>Ro.includes(e)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(e,{slots:a,emit:t}){const{proxy:s}=Re(),{$q:r}=s,n=nt(e,r),i=oe({}),o=oe(e.ticked||[]),u=oe(e.expanded||[]);let c={};er(()=>{c={}});const v=te(()=>`q-tree q-tree--${e.dense===!0?"dense":"standard"}`+(e.noConnectors===!0?" q-tree--no-connectors":"")+(n.value===!0?" q-tree--dark":"")+(e.color!==void 0?` text-${e.color}`:"")),g=te(()=>e.selected!==void 0),b=te(()=>e.icon||r.iconSet.tree.icon),l=te(()=>e.controlColor||e.color),m=te(()=>e.textColor!==void 0?` text-${e.textColor}`:""),h=te(()=>{const T=e.selectedColor||e.color;return T?` text-${T}`:""}),y=te(()=>e.filterMethod!==void 0?e.filterMethod:(T,J)=>{const k=J.toLowerCase();return T[e.labelKey]&&T[e.labelKey].toLowerCase().indexOf(k)>-1}),p=te(()=>{const T={},J=(k,B)=>{const I=k.tickStrategy||(B?B.tickStrategy:e.tickStrategy),H=k[e.nodeKey],N=k[e.childrenKey]&&Array.isArray(k[e.childrenKey])&&k[e.childrenKey].length!==0,F=k.disabled!==!0&&g.value===!0&&k.selectable!==!1,ie=k.disabled!==!0&&k.expandable!==!1,fe=I!=="none",ae=I==="strict",ge=I==="leaf-filtered",d=I==="leaf"||I==="leaf-filtered";let V=k.disabled!==!0&&k.tickable!==!1;d===!0&&V===!0&&B&&B.tickable!==!0&&(V=!1);let U=k.lazy;U===!0&&i.value[H]!==void 0&&Array.isArray(k[e.childrenKey])===!0&&(U=i.value[H]);const x={key:H,parent:B,isParent:N,lazy:U,disabled:k.disabled,link:k.disabled!==!0&&(F===!0||ie===!0&&(N===!0||U===!0)),children:[],matchesFilter:e.filter?y.value(k,e.filter):!0,selected:H===e.selected&&F===!0,selectable:F,expanded:N===!0?u.value.includes(H):!1,expandable:ie,noTick:k.noTick===!0||ae!==!0&&U&&U!=="loaded",tickable:V,tickStrategy:I,hasTicking:fe,strictTicking:ae,leafFilteredTicking:ge,leafTicking:d,ticked:ae===!0?o.value.includes(H):N===!0?!1:o.value.includes(H)};if(T[H]=x,N===!0&&(x.children=k[e.childrenKey].map(_=>J(_,x)),e.filter&&(x.matchesFilter!==!0?x.matchesFilter=x.children.some(_=>_.matchesFilter):x.noTick!==!0&&x.disabled!==!0&&x.tickable===!0&&ge===!0&&x.children.every(_=>_.matchesFilter!==!0||_.noTick===!0||_.tickable!==!0)===!0&&(x.tickable=!1)),x.matchesFilter===!0&&(x.noTick!==!0&&ae!==!0&&x.children.every(_=>_.noTick)===!0&&(x.noTick=!0),d))){if(x.ticked=!1,x.indeterminate=x.children.some(_=>_.indeterminate===!0),x.tickable=x.tickable===!0&&x.children.some(_=>_.tickable),x.indeterminate!==!0){const _=x.children.reduce((P,Z)=>Z.ticked===!0?P+1:P,0);_===x.children.length?x.ticked=!0:_>0&&(x.indeterminate=!0)}x.indeterminate===!0&&(x.indeterminateNextState=x.children.every(_=>_.tickable!==!0||_.ticked!==!0))}return x};return e.nodes.forEach(k=>J(k,null)),T});_e(()=>e.ticked,T=>{o.value=T}),_e(()=>e.expanded,T=>{u.value=T});function w(T){const J=[].reduce,k=(B,I)=>{if(B||!I)return B;if(Array.isArray(I)===!0)return J.call(Object(I),k,B);if(I[e.nodeKey]===T)return I;if(I[e.childrenKey])return k(null,I[e.childrenKey])};return k(null,e.nodes)}function S(){return o.value.map(T=>w(T))}function E(){return u.value.map(T=>w(T))}function C(T){return T&&p.value[T]?p.value[T].expanded:!1}function R(){e.expanded!==void 0?t("update:expanded",[]):u.value=[]}function A(){const T=[],J=k=>{k[e.childrenKey]&&k[e.childrenKey].length!==0&&k.expandable!==!1&&k.disabled!==!0&&(T.push(k[e.nodeKey]),k[e.childrenKey].forEach(J))};e.nodes.forEach(J),e.expanded!==void 0?t("update:expanded",T):u.value=T}function M(T,J,k=w(T),B=p.value[T]){if(B.lazy&&B.lazy!=="loaded"){if(B.lazy==="loading")return;i.value[T]="loading",Array.isArray(k[e.childrenKey])!==!0&&(k[e.childrenKey]=[]),t("lazyLoad",{node:k,key:T,done:I=>{i.value[T]="loaded",k[e.childrenKey]=Array.isArray(I)===!0?I:[],kt(()=>{const H=p.value[T];H&&H.isParent===!0&&q(T,!0)})},fail:()=>{delete i.value[T],k[e.childrenKey].length===0&&delete k[e.childrenKey]}})}else B.isParent===!0&&B.expandable===!0&&q(T,J)}function q(T,J){let k=u.value;const B=e.expanded!==void 0;if(B===!0&&(k=k.slice()),J){if(e.accordion&&p.value[T]){const I=[];p.value[T].parent?p.value[T].parent.children.forEach(H=>{H.key!==T&&H.expandable===!0&&I.push(H.key)}):e.nodes.forEach(H=>{const N=H[e.nodeKey];N!==T&&I.push(N)}),I.length!==0&&(k=k.filter(H=>I.includes(H)===!1))}k=k.concat([T]).filter((I,H,N)=>N.indexOf(I)===H)}else k=k.filter(I=>I!==T);B===!0?t("update:expanded",k):u.value=k}function W(T){return T&&p.value[T]?p.value[T].ticked:!1}function Y(T,J){let k=o.value;const B=e.ticked!==void 0;B===!0&&(k=k.slice()),J?k=k.concat(T).filter((I,H,N)=>N.indexOf(I)===H):k=k.filter(I=>T.includes(I)===!1),B===!0&&t("update:ticked",k)}function z(T,J,k){const B={tree:s,node:T,key:k,color:e.color,dark:n.value};return xn(B,"expanded",()=>J.expanded,I=>{I!==J.expanded&&M(k,I)}),xn(B,"ticked",()=>J.ticked,I=>{I!==J.ticked&&Y([k],I)}),B}function D(T){return(e.filter?T.filter(J=>p.value[J[e.nodeKey]].matchesFilter):T).map(J=>K(J))}function f(T){if(T.icon!==void 0)return ee(Ae,{class:"q-tree__icon q-mr-sm",name:T.icon,color:T.iconColor});const J=T.img||T.avatar;if(J)return ee("img",{class:`q-tree__${T.img?"img":"avatar"} q-mr-sm`,src:J})}function j(){t("afterShow")}function Q(){t("afterHide")}function K(T){const J=T[e.nodeKey],k=p.value[J],B=T.header&&a[`header-${T.header}`]||a["default-header"],I=k.isParent===!0?D(T[e.childrenKey]):[],H=I.length!==0||k.lazy&&k.lazy!=="loaded";let N=T.body&&a[`body-${T.body}`]||a["default-body"];const F=B!==void 0||N!==void 0?z(T,k,J):null;return N!==void 0&&(N=ee("div",{class:"q-tree__node-body relative-position"},[ee("div",{class:m.value},[N(F)])])),ee("div",{key:J,class:`q-tree__node relative-position q-tree__node--${H===!0?"parent":"child"}`},[ee("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(k.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(k.selected===!0?" q-tree__node--selected":"")+(k.disabled===!0?" q-tree__node--disabled":""),tabindex:k.link===!0?0:-1,onClick:ie=>{X(T,k,ie)},onKeypress(ie){fn(ie)!==!0&&(ie.keyCode===13?X(T,k,ie,!0):ie.keyCode===32&&de(T,k,ie,!0))}},[ee("div",{class:"q-focus-helper",tabindex:-1,ref:ie=>{c[k.key]=ie}}),k.lazy==="loading"?ee(tr,{class:"q-tree__spinner",color:l.value}):H===!0?ee(Ae,{class:"q-tree__arrow"+(k.expanded===!0?" q-tree__arrow--rotate":""),name:b.value,onClick(ie){de(T,k,ie)}}):null,k.hasTicking===!0&&k.noTick!==!0?ee(zi,{class:"q-tree__tickbox",modelValue:k.indeterminate===!0?null:k.ticked,color:l.value,dark:n.value,dense:!0,keepColor:!0,disable:k.tickable!==!0,onKeydown:Be,"onUpdate:modelValue":ie=>{L(k,ie)}}):null,ee("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(k.selected===!0?h.value:m.value)},[B?B(F):[f(T),ee("div",T[e.labelKey])]])]),H===!0?e.noTransition===!0?ee("div",{class:"q-tree__node-collapsible"+m.value,key:`${J}__q`},[N,ee("div",{class:"q-tree__children"+(k.disabled===!0?" q-tree__node--disabled":"")},k.expanded?I:null)]):ee(Rr,{duration:e.duration,onShow:j,onHide:Q},()=>we(ee("div",{class:"q-tree__node-collapsible"+m.value,key:`${J}__q`},[N,ee("div",{class:"q-tree__children"+(k.disabled===!0?" q-tree__node--disabled":"")},I)]),[[nr,k.expanded]])):N])}function se(T){const J=c[T];J&&J.focus()}function X(T,J,k,B){B!==!0&&J.selectable!==!1&&se(J.key),g.value&&J.selectable?e.noSelectionUnset===!1?t("update:selected",J.key!==e.selected?J.key:null):J.key!==e.selected&&t("update:selected",J.key===void 0?null:J.key):de(T,J,k,B),typeof T.handler=="function"&&T.handler(T)}function de(T,J,k,B){k!==void 0&&Be(k),B!==!0&&J.selectable!==!1&&se(J.key),M(J.key,!J.expanded,T,J)}function L(T,J){if(T.indeterminate===!0&&(J=T.indeterminateNextState),T.strictTicking)Y([T.key],J);else if(T.leafTicking){const k=[],B=I=>{I.isParent?(J!==!0&&I.noTick!==!0&&I.tickable===!0&&k.push(I.key),I.leafTicking===!0&&I.children.forEach(B)):I.noTick!==!0&&I.tickable===!0&&(I.leafFilteredTicking!==!0||I.matchesFilter===!0)&&k.push(I.key)};B(T),Y(k,J)}}return e.defaultExpandAll===!0&&A(),Object.assign(s,{getNodeByKey:w,getTickedNodes:S,getExpandedNodes:E,isExpanded:C,collapseAll:R,expandAll:A,setExpanded:M,isTicked:W,setTicked:Y}),()=>{const T=D(e.nodes);return ee("div",{class:v.value},T.length===0?e.filter?e.noResultsLabel||r.lang.tree.noResults:e.noNodesLabel||r.lang.tree.noNodes:T)}}});const Po={class:"row q-mb-sm"},Oo=ce("label",null,"Name: ",-1),qo=["disabled"],Bo={class:"row q-mb-sm"},Io=ce("label",null,"Path: ",-1),No={style:{flex:"1",position:"relative"}},Do=["id"],$o={key:0},Mo=["onBlur","onKeypress"],Lo={key:1},Fo={class:"row q-mb-sm no-wrap"},jo={style:{"margin-left":"17px","white-space":"nowrap"}},Uo={key:0,class:"text-negative"},Ko={class:"row q-mb-sm no-wrap"},Wo={style:{"margin-left":"17px","white-space":"nowrap"}},Ho={key:0,class:"text-negative"},Jo={class:"row q-mb-sm"},Vo=ce("label",null,"Thumbnail: ",-1),Zo={class:"thumbnail-edit-wrapper"},Qo={class:"row q-col-gutter-xs"},Go=["src"],Yo={class:"col-6 q-pt-none"},Xo={class:"row"},es=ce("label",null,"Upload To: ",-1),ts=["value"],ns={key:0,style:{display:"flex","flex-direction":"row",position:"absolute",top:"0px",bottom:"0px",left:"0px",right:"0px","text-align":"center","align-items":"center","justify-content":"center","background-color":"rgba(128, 128, 128, 0.5)"}},Ln=rt({__name:"ContentEditor",props:{initialValue:{},collection:{}},emits:[...Le.emits],setup(e){var J,k,B,I;const a=e,t=oe(!1),s=oe(null),r=oe(!1),n=oe(!1),i=Ye(),o=oe(!1),u=oe(),c=oe("New Folder"),v=oe((J=a==null?void 0:a.initialValue)==null?void 0:J.name),g=oe(""),b=a.collection||i.getTopLevelNode((B=(k=a.initialValue)==null?void 0:k.id)==null?void 0:B.split("|")[0]);let l="";(I=a==null?void 0:a.initialValue)!=null&&I.path&&(l=a==null?void 0:a.initialValue.path.split("/").slice(0,-1).join("/"));const m=oe(l),h=oe(["/"]),y=oe(m.value),p=oe(!1),w=(H,N,F)=>{var ge,d;const ie=(ge=u.value)==null?void 0:ge.getNodeByKey(N.id.split("/").slice(0,-1).join("/"));let fe=!0;F||(fe=!1),ie.children.filter(V=>V.name===F).length>1&&(fe=!1),N.name=F,N.path=ie.path="/"+N.name,fe?N.editing=!1:(H.preventDefault(),H.stopImmediatePropagation(),(d=H.target)==null||d.focus())},S=H=>btoa(H).replaceAll("=",""),E=H=>H.filter(F=>F.type==="tree").map(F=>({id:F.path,path:F.path,icon:"mdi-folder",selectable:!0,name:F.name,editing:!1,children:F.children?E(F.children):[]})),C=ft([{name:"/",icon:"mdi-folder",selectable:!0,id:"/",path:"",children:E((b==null?void 0:b.children)||[])}]),R=oe((b==null?void 0:b.uploadTo)||(b==null?void 0:b.repositories[0].repr)),A=H=>{var ie,fe;c.value="New Folder",H.preventDefault(),H.stopPropagation();const N=(ie=u.value)==null?void 0:ie.getNodeByKey(y.value),F={id:N.path+"/"+hn(),name:"New Folder",path:N.path+"/New Folder",selectable:!0,icon:"mdi-folder-star",editing:!0,children:[]};N.children.push(F),y.value=F.id,(fe=u.value)==null||fe.setExpanded(N.id,!0),setTimeout(()=>{var ge;const ae=document.querySelector(`#pathTree--${S(F.id)}`);ae==null||ae.scrollIntoView({block:"center"}),(ge=ae==null?void 0:ae.querySelector("input"))==null||ge.focus()},500)},M=te(()=>{var H,N;if(n.value){const F=(N=(H=a.initialValue)==null?void 0:H.content_types)==null?void 0:N.f3d,ie=b.repositories.filter(fe=>fe.repr===R.value)[0];if(F&&F.repo!==ie.repo)return"cannot replace the f3d file, it exists in another repository."}return""}),q=te(()=>{var H,N;if(r.value){const F=(N=(H=a.initialValue)==null?void 0:H.content_types)==null?void 0:N.step,ie=b.repositories.filter(fe=>fe.repr===R.value)[0];if(F&&F.repo!==ie.repo)return"cannot replace the step file, it exists in another repository."}return""}),W=H=>{var ie;let N=[...(ie=H.clipboardData)==null?void 0:ie.items];if(N=N.filter(fe=>/image/.test(fe.type)),!N.length||N.length===0)return!1;let F=new FileReader;F.onload=()=>{const fe=F.result;g.value=fe},F.readAsDataURL(N[0].getAsFile())},Y=H=>new Promise(N=>{const F=new window.FileReader;F.onload=()=>{g.value=F.result,o.value=!0,N(g.value)},F.readAsDataURL(H)}),z=H=>{var N;H.stopPropagation(),H.preventDefault(),Y((N=H.dataTransfer)==null?void 0:N.files[0])},D=H=>{var F;H.stopPropagation(),H.preventDefault();const N=H.target;Y((F=N.files)==null?void 0:F[0]).then(()=>{s.value!==null&&(s.value.value="")})},f=H=>{var N;H.preventDefault(),H.stopPropagation(),(N=s.value)==null||N.click()},j=async()=>{const H=await i.backend.get_screenshot({width:256,height:256,transparent:t.value});H?(g.value=H,o.value=!0):alert("Workspace image capture failed.")},Q=async()=>{var F,ie,fe,ae,ge,d;const H=(fe=(ie=(F=a==null?void 0:a.initialValue)==null?void 0:F.content_types)==null?void 0:ie.thumb)==null?void 0:fe.url,N=(ge=(ae=a==null?void 0:a.initialValue)==null?void 0:ae.meta)==null?void 0:ge.thumb;N?g.value=N:H?g.value=await mn({url:H,token:i.token}):g.value="",(d=a==null?void 0:a.initialValue)!=null&&d.name||await i.backend.export_model({f3d:!1,step:!1}).then(V=>{v.value=V==null?void 0:V.name})},K=()=>{var H;if(v.value!==((H=a.initialValue)==null?void 0:H.name)||o.value||n.value||r.value)return!0};lt(()=>{Q()});const{dialogRef:se,onDialogHide:X,onDialogOK:de,onDialogCancel:L}=Le();function T(){p.value=!0,setTimeout(()=>{const H=b.repositories.filter(F=>F.repr===R.value)[0];let N=H.path||"";N&&y.value?N=`${N}/${y.value}`:y.value&&(N=`${y.value}`),N=N===""?`${v.value}`:`${N}/${v.value}`,i.backend.export_model({f3d:n.value,step:r.value}).then(F=>{var fe,ae;const ie=[];p.value=!1,n.value&&ie.push({path:`${N}.f3d`,content:(fe=F.f3d)==null?void 0:fe.split(",")[1],encoding:"base64"}),r.value&&ie.push({path:`${N}.step`,content:(ae=F.step)==null?void 0:ae.split(",")[1],encoding:"base64"}),o.value&&ie.push({path:`${N}.png`,content:g.value.split(",")[1],encoding:"base64"}),br({repo:H.repo,branch:H.branch,files:ie,message:`Add ${N}`,token:i.token,progressCallback:null}).then(()=>{p.value=!1,de(b)})})},500)}return(H,N)=>(pe(),Te(xt,{ref_key:"dialogRef",ref:se,onHide:be(X),square:""},{default:ve(()=>[ue(Ct,{class:"q-dialog-plugin"},{default:ve(()=>[ue(St,{style:{position:"relative"}},{default:ve(()=>{var F,ie,fe;return[ce("div",Po,[Oo,we(ce("input",{disabled:!!((F=a.initialValue)!=null&&F.name),"bg-color":"white",style:{flex:1},"onUpdate:modelValue":N[0]||(N[0]=ae=>v.value=ae)},null,8,qo),[[gt,v.value]])]),ce("div",Bo,[Io,ce("div",No,[ue(be(Lr),{ref_key:"treeRef",ref:u,dense:"","default-expand-all":!!m.value,selected:y.value,"onUpdate:selected":N[3]||(N[3]=ae=>y.value=ae),expanded:h.value,"onUpdate:expanded":N[4]||(N[4]=ae=>h.value=ae),"no-selection-unset":"",nodes:C,filter:m.value,"filter-method":(ae,ge)=>ae.path===ge,"node-key":"id","label-key":"name",class:"pathTree"},{"default-header":ve(({node:ae})=>[ue(Ae,{name:ae.icon,class:"q-tree__icon q-mr-sm"},null,8,["name"]),ce("div",{id:`pathTree--${S(ae.id)}`,onKeypress:N[2]||(N[2]=ge=>ge.stopImmediatePropagation())},[ae.editing?we((pe(),ye("input",{key:1,"onUpdate:modelValue":N[1]||(N[1]=ge=>c.value=ge),onBlur:ge=>w(ge,ae,c.value),onKeypress:lr(ge=>w(ge,ae,c.value),["enter"])},null,40,Mo)),[[gt,c.value]]):(pe(),ye("span",$o,Ne(ae.name),1))],40,Do)]),_:1},8,["default-expand-all","selected","expanded","nodes","filter","filter-method"]),(ie=a.initialValue)!=null&&ie.path?(pe(),ye("div",{key:0,class:"pathTree--disabler",onClick:N[5]||(N[5]=ae=>{ae.preventDefault(),ae.stopPropagation()})})):Se("",!0),(fe=a.initialValue)!=null&&fe.path?Se("",!0):(pe(),ye("div",Lo,[ue(ze,{size:"sm",icon:"mdi-folder-plus-outline",label:"New Folder",flat:"",square:"","no-caps":"",disable:!y.value,class:"bordered q-mt-xs",onClick:A},null,8,["disable"])]))])]),ce("div",Fo,[ce("label",jo,[qe("Upload .STEP: "),we(ce("input",{type:"checkbox","onUpdate:modelValue":N[6]||(N[6]=ae=>r.value=ae)},null,512),[[pt,r.value]])]),q.value?(pe(),ye("div",Uo,Ne(q.value),1)):Se("",!0)]),ce("div",Ko,[ce("label",Wo,[qe("Upload .F3D: "),we(ce("input",{type:"checkbox","onUpdate:modelValue":N[7]||(N[7]=ae=>n.value=ae)},null,512),[[pt,n.value]])]),M.value?(pe(),ye("div",Ho,Ne(M.value),1)):Se("",!0)]),ce("div",Jo,[Vo,ce("div",Zo,[ce("div",Qo,[ce("div",{contenteditable:"true",class:"col-6 q-pa-none editor-thumb",onDragover:N[8]||(N[8]=ae=>{ae.dataTransfer&&(ae.dataTransfer.effectAllowed="all")}),onDrop:z,onPaste:W,onBeforeinput:N[9]||(N[9]=ae=>{ae.inputType!=="insertFromPaste"&&(ae.preventDefault(),ae.stopPropagation())})},[ce("img",{src:g.value||"img/cube-outline.svg"},null,8,Go)],32),ce("div",Yo,[ue(ze,{dense:"",label:"Choose",size:"sm",flat:"",icon:"upload",class:"full-width bordered q-mb-xs","no-caps":"",onClick:f}),ue(ze,{dense:"",onClick:j,label:"Capture",icon:"mdi-monitor-screenshot",size:"sm",flat:"",class:"full-width bordered","no-caps":""}),ce("label",null,[we(ce("input",{type:"checkbox","onUpdate:modelValue":N[10]||(N[10]=ae=>t.value=ae)},null,512),[[pt,t.value]]),qe(" BG Transparency")])])]),ce("input",{ref_key:"filePicker",ref:s,onChange:D,id:"thumbnail",type:"file",style:{display:"none"}},null,544)])]),ce("div",Xo,[es,we(ce("select",{"onUpdate:modelValue":N[11]||(N[11]=ae=>R.value=ae),style:{flex:"1"}},[(pe(!0),ye(Ze,null,at(be(b).repositories,ae=>(pe(),ye("option",{value:ae.repr,key:ae.repr},Ne(ae.repr),9,ts))),128))],512),[[It,R.value]])]),p.value?(pe(),ye("div",ns,[ue(Ao,{color:"purple",size:"10em"})])):Se("",!0)]}),_:1}),ue(Jt,{align:"right"},{default:ve(()=>[ue(ze,{square:"",size:"sm",class:"bordered",color:"negative",label:"Cancel",onClick:be(L)},null,8,["onClick"]),ue(ze,{square:"",size:"sm",class:"bordered",label:"OK",color:"positive",disable:!K(),onClick:T},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}});function rn(e,a,t){const s=mt(e);let r,n=s.left-a.event.x,i=s.top-a.event.y,o=Math.abs(n),u=Math.abs(i);const c=a.direction;c.horizontal===!0&&c.vertical!==!0?r=n<0?"left":"right":c.horizontal!==!0&&c.vertical===!0?r=i<0?"up":"down":c.up===!0&&i<0?(r="up",o>u&&(c.left===!0&&n<0?r="left":c.right===!0&&n>0&&(r="right"))):c.down===!0&&i>0?(r="down",o>u&&(c.left===!0&&n<0?r="left":c.right===!0&&n>0&&(r="right"))):c.left===!0&&n<0?(r="left",o<u&&(c.up===!0&&i<0?r="up":c.down===!0&&i>0&&(r="down"))):c.right===!0&&n>0&&(r="right",o<u&&(c.up===!0&&i<0?r="up":c.down===!0&&i>0&&(r="down")));let v=!1;if(r===void 0&&t===!1){if(a.event.isFirst===!0||a.event.lastDir===void 0)return{};r=a.event.lastDir,v=!0,r==="left"||r==="right"?(s.left-=n,o=0,n=0):(s.top-=i,u=0,i=0)}return{synthetic:v,payload:{evt:e,touch:a.event.mouse!==!0,mouse:a.event.mouse===!0,position:s,direction:r,isFirst:a.event.isFirst,isFinal:t===!0,duration:Date.now()-a.event.time,distance:{x:o,y:u},offset:{x:n,y:i},delta:{x:s.left-a.event.lastX,y:s.top-a.event.lastY}}}}let rs=0;var Fn=dn({name:"touch-pan",beforeMount(e,{value:a,modifiers:t}){if(t.mouse!==!0&&Ue.has.touch!==!0)return;function s(n,i){t.mouse===!0&&i===!0?Be(n):(t.stop===!0&&Xt(n),t.prevent===!0&&Ot(n))}const r={uid:"qvtp_"+rs++,handler:a,modifiers:t,direction:jt(t),noop:or,mouseStart(n){Ut(n,r)&&sr(n)&&(Me(r,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),r.start(n,!0))},touchStart(n){if(Ut(n,r)){const i=n.target;Me(r,"temp",[[i,"touchmove","move","notPassiveCapture"],[i,"touchcancel","end","passiveCapture"],[i,"touchend","end","passiveCapture"]]),r.start(n)}},start(n,i){if(Ue.is.firefox===!0&&ht(e,!0),r.lastEvt=n,i===!0||t.stop===!0){if(r.direction.all!==!0&&(i!==!0||r.modifiers.mouseAllDir!==!0&&r.modifiers.mousealldir!==!0)){const c=n.type.indexOf("mouse")>-1?new MouseEvent(n.type,n):new TouchEvent(n.type,n);n.defaultPrevented===!0&&Ot(c),n.cancelBubble===!0&&Xt(c),Object.assign(c,{qKeyEvent:n.qKeyEvent,qClickOutside:n.qClickOutside,qAnchorHandled:n.qAnchorHandled,qClonedBy:n.qClonedBy===void 0?[r.uid]:n.qClonedBy.concat(r.uid)}),r.initialEvent={target:n.target,event:c}}Xt(n)}const{left:o,top:u}=mt(n);r.event={x:o,y:u,time:Date.now(),mouse:i===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:o,lastY:u}},move(n){if(r.event===void 0)return;const i=mt(n),o=i.left-r.event.x,u=i.top-r.event.y;if(o===0&&u===0)return;r.lastEvt=n;const c=r.event.mouse===!0,v=()=>{s(n,c);let l;t.preserveCursor!==!0&&t.preservecursor!==!0&&(l=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),c===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),wt(),r.styleCleanup=m=>{if(r.styleCleanup=void 0,l!==void 0&&(document.documentElement.style.cursor=l),document.body.classList.remove("non-selectable"),c===!0){const h=()=>{document.body.classList.remove("no-pointer-events--children")};m!==void 0?setTimeout(()=>{h(),m()},50):h()}else m!==void 0&&m()}};if(r.event.detected===!0){r.event.isFirst!==!0&&s(n,r.event.mouse);const{payload:l,synthetic:m}=rn(n,r,!1);l!==void 0&&(r.handler(l)===!1?r.end(n):(r.styleCleanup===void 0&&r.event.isFirst===!0&&v(),r.event.lastX=l.position.left,r.event.lastY=l.position.top,r.event.lastDir=m===!0?void 0:l.direction,r.event.isFirst=!1));return}if(r.direction.all===!0||c===!0&&(r.modifiers.mouseAllDir===!0||r.modifiers.mousealldir===!0)){v(),r.event.detected=!0,r.move(n);return}const g=Math.abs(o),b=Math.abs(u);g!==b&&(r.direction.horizontal===!0&&g>b||r.direction.vertical===!0&&g<b||r.direction.up===!0&&g<b&&u<0||r.direction.down===!0&&g<b&&u>0||r.direction.left===!0&&g>b&&o<0||r.direction.right===!0&&g>b&&o>0?(r.event.detected=!0,r.move(n)):r.end(n,!0))},end(n,i){if(r.event!==void 0){if(Qe(r,"temp"),Ue.is.firefox===!0&&ht(e,!1),i===!0)r.styleCleanup!==void 0&&r.styleCleanup(),r.event.detected!==!0&&r.initialEvent!==void 0&&r.initialEvent.target.dispatchEvent(r.initialEvent.event);else if(r.event.detected===!0){r.event.isFirst===!0&&r.handler(rn(n===void 0?r.lastEvt:n,r).payload);const{payload:o}=rn(n===void 0?r.lastEvt:n,r,!0),u=()=>{r.handler(o)};r.styleCleanup!==void 0?r.styleCleanup(u):u()}r.event=void 0,r.initialEvent=void 0,r.lastEvt=void 0}}};if(e.__qtouchpan=r,t.mouse===!0){const n=t.mouseCapture===!0||t.mousecapture===!0?"Capture":"";Me(r,"main",[[e,"mousedown","mouseStart",`passive${n}`]])}Ue.has.touch===!0&&Me(r,"main",[[e,"touchstart","touchStart",`passive${t.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const t=e.__qtouchpan;t!==void 0&&(a.oldValue!==a.value&&(typeof value!="function"&&t.end(),t.handler=a.value),t.direction=jt(a.modifiers))},beforeUnmount(e){const a=e.__qtouchpan;a!==void 0&&(a.event!==void 0&&a.end(),Qe(a,"main"),Qe(a,"temp"),Ue.is.firefox===!0&&ht(e,!1),a.styleCleanup!==void 0&&a.styleCleanup(),delete e.__qtouchpan)}});const jn=["vertical","horizontal"],an={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},Un={prevent:!0,mouse:!0,mouseAllDir:!0},Kn=e=>e>=250?50:Math.ceil(e/5);var is=Ee({name:"QScrollArea",props:{...tt,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:a,emit:t}){const s=oe(!1),r=oe(!1),n=oe(!1),i={vertical:oe(0),horizontal:oe(0)},o={vertical:{ref:oe(null),position:oe(0),size:oe(0)},horizontal:{ref:oe(null),position:oe(0),size:oe(0)}},{proxy:u}=Re(),c=nt(e,u.$q);let v=null,g;const b=oe(null),l=te(()=>"q-scrollarea"+(c.value===!0?" q-scrollarea--dark":""));o.vertical.percentage=te(()=>{const Q=o.vertical.size.value-i.vertical.value;if(Q<=0)return 0;const K=dt(o.vertical.position.value/Q,0,1);return Math.round(K*1e4)/1e4}),o.vertical.thumbHidden=te(()=>(e.visible===null?n.value:e.visible)!==!0&&s.value===!1&&r.value===!1||o.vertical.size.value<=i.vertical.value+1),o.vertical.thumbStart=te(()=>o.vertical.percentage.value*(i.vertical.value-o.vertical.thumbSize.value)),o.vertical.thumbSize=te(()=>Math.round(dt(i.vertical.value*i.vertical.value/o.vertical.size.value,Kn(i.vertical.value),i.vertical.value))),o.vertical.style=te(()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${o.vertical.thumbStart.value}px`,height:`${o.vertical.thumbSize.value}px`})),o.vertical.thumbClass=te(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(o.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),o.vertical.barClass=te(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(o.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),o.horizontal.percentage=te(()=>{const Q=o.horizontal.size.value-i.horizontal.value;if(Q<=0)return 0;const K=dt(Math.abs(o.horizontal.position.value)/Q,0,1);return Math.round(K*1e4)/1e4}),o.horizontal.thumbHidden=te(()=>(e.visible===null?n.value:e.visible)!==!0&&s.value===!1&&r.value===!1||o.horizontal.size.value<=i.horizontal.value+1),o.horizontal.thumbStart=te(()=>o.horizontal.percentage.value*(i.horizontal.value-o.horizontal.thumbSize.value)),o.horizontal.thumbSize=te(()=>Math.round(dt(i.horizontal.value*i.horizontal.value/o.horizontal.size.value,Kn(i.horizontal.value),i.horizontal.value))),o.horizontal.style=te(()=>({...e.thumbStyle,...e.horizontalThumbStyle,[u.$q.lang.rtl===!0?"right":"left"]:`${o.horizontal.thumbStart.value}px`,width:`${o.horizontal.thumbSize.value}px`})),o.horizontal.thumbClass=te(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(o.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),o.horizontal.barClass=te(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(o.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const m=te(()=>o.vertical.thumbHidden.value===!0&&o.horizontal.thumbHidden.value===!0?e.contentStyle:e.contentActiveStyle),h=[[Fn,Q=>{A(Q,"vertical")},void 0,{vertical:!0,...Un}]],y=[[Fn,Q=>{A(Q,"horizontal")},void 0,{horizontal:!0,...Un}]];function p(){const Q={};return jn.forEach(K=>{const se=o[K];Q[K+"Position"]=se.position.value,Q[K+"Percentage"]=se.percentage.value,Q[K+"Size"]=se.size.value,Q[K+"ContainerSize"]=i[K].value}),Q}const w=Ei(()=>{const Q=p();Q.ref=u,t("scroll",Q)},0);function S(Q,K,se){if(jn.includes(Q)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(Q==="vertical"?Sn:en)(b.value,K,se)}function E({height:Q,width:K}){let se=!1;i.vertical.value!==Q&&(i.vertical.value=Q,se=!0),i.horizontal.value!==K&&(i.horizontal.value=K,se=!0),se===!0&&Y()}function C({position:Q}){let K=!1;o.vertical.position.value!==Q.top&&(o.vertical.position.value=Q.top,K=!0),o.horizontal.position.value!==Q.left&&(o.horizontal.position.value=Q.left,K=!0),K===!0&&Y()}function R({height:Q,width:K}){o.horizontal.size.value!==K&&(o.horizontal.size.value=K,Y()),o.vertical.size.value!==Q&&(o.vertical.size.value=Q,Y())}function A(Q,K){const se=o[K];if(Q.isFirst===!0){if(se.thumbHidden.value===!0)return;g=se.position.value,r.value=!0}else if(r.value!==!0)return;Q.isFinal===!0&&(r.value=!1);const X=an[K],de=i[K].value,L=(se.size.value-de)/(de-se.thumbSize.value),T=Q.distance[X.dist],J=g+(Q.direction===X.dir?1:-1)*T*L;z(J,K)}function M(Q,K){const se=o[K];if(se.thumbHidden.value!==!0){const X=Q[an[K].offset];if(X<se.thumbStart.value||X>se.thumbStart.value+se.thumbSize.value){const de=X-se.thumbSize.value/2;z(de/i[K].value*se.size.value,K)}se.ref.value!==null&&se.ref.value.dispatchEvent(new MouseEvent(Q.type,Q))}}function q(Q){M(Q,"vertical")}function W(Q){M(Q,"horizontal")}function Y(){s.value=!0,v!==null&&clearTimeout(v),v=setTimeout(()=>{v=null,s.value=!1},e.delay),e.onScroll!==void 0&&w()}function z(Q,K){b.value[an[K].scroll]=Q}function D(){n.value=!0}function f(){n.value=!1}let j=null;return _e(()=>u.$q.lang.rtl,Q=>{b.value!==null&&en(b.value,Math.abs(o.horizontal.position.value)*(Q===!0?-1:1))}),ir(()=>{j={top:o.vertical.position.value,left:o.horizontal.position.value}}),ar(()=>{if(j===null)return;const Q=b.value;Q!==null&&(en(Q,j.left),Sn(Q,j.top))}),Ge(w.cancel),Object.assign(u,{getScrollTarget:()=>b.value,getScroll:p,getScrollPosition:()=>({top:o.vertical.position.value,left:o.horizontal.position.value}),getScrollPercentage:()=>({top:o.vertical.percentage.value,left:o.horizontal.percentage.value}),setScrollPosition:S,setScrollPercentage(Q,K,se){S(Q,K*(o[Q].size.value-i[Q].value)*(Q==="horizontal"&&u.$q.lang.rtl===!0?-1:1),se)}}),()=>ee("div",{class:l.value,onMouseenter:D,onMouseleave:f},[ee("div",{ref:b,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:e.tabindex!==void 0?e.tabindex:void 0},[ee("div",{class:"q-scrollarea__content absolute",style:m.value},Kt(a.default,[ee(sn,{debounce:0,onResize:R})])),ee(Pi,{axis:"both",onScroll:C})]),ee(sn,{debounce:0,onResize:E}),ee("div",{class:o.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:q}),ee("div",{class:o.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:W}),we(ee("div",{ref:o.vertical.ref,class:o.vertical.thumbClass.value,style:o.vertical.style.value,"aria-hidden":"true"}),h),we(ee("div",{ref:o.horizontal.ref,class:o.horizontal.thumbClass.value,style:o.horizontal.style.value,"aria-hidden":"true"}),y)])}});const as={xs:2,sm:4,md:6,lg:10,xl:14};function Wn(e,a,t){return{transform:a===!0?`translateX(${t.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var Hn=Ee({name:"QLinearProgress",props:{...tt,...ur,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:a}){const{proxy:t}=Re(),s=nt(e,t.$q),r=cr(e,as),n=te(()=>e.indeterminate===!0||e.query===!0),i=te(()=>e.reverse!==e.query),o=te(()=>({...r.value!==null?r.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),u=te(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),c=te(()=>Wn(e.buffer!==void 0?e.buffer:1,i.value,t.$q)),v=te(()=>`with${e.instantFeedback===!0?"out":""}-transition`),g=te(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${v.value} q-linear-progress__track--${s.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),b=te(()=>Wn(n.value===!0?1:e.value,i.value,t.$q)),l=te(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${v.value} q-linear-progress__model--${n.value===!0?"in":""}determinate`),m=te(()=>({width:`${e.value*100}%`})),h=te(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${v.value}`);return()=>{const y=[ee("div",{class:g.value,style:c.value}),ee("div",{class:l.value,style:b.value})];return e.stripe===!0&&n.value===!1&&y.push(ee("div",{class:h.value,style:m.value})),ee("div",{class:u.value,style:o.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},Kt(a.default,y))}}});const os=ce("div",{class:"row"},[ce("div",{class:"col-12"}," AutoThumb will automatically generate any missing thumbnail images in the selected path. Existing thumbnails will not be replaced. ")],-1),ss={key:0,class:"row q-mb-sm"},ls=ce("label",null,"Collection: ",-1),us=["value"],cs={key:1,class:"row q-mb-sm"},ds=ce("label",null,"Path: ",-1),fs={style:{flex:"1",position:"relative"}},hs={key:2,class:"row q-mb-sm"},vs={style:{"margin-left":"17px"}},ps={key:3,class:"row q-py-sm"},ms={class:"col-12"},gs={key:4,class:"row q-py-sm"},bs=ce("label",null,"Upload To: ",-1),ys=["value"],_s={key:5,class:"row justify-center q-py-sm"},ws=["src"],ks={class:"absolute-full flex flex-center"},xs={class:"absolute-full flex flex-center"},Ss=rt({__name:"AutoThumb",emits:[...Le.emits],setup(e){const{humanStorageSize:a}=$r,t=oe(null),s=oe([]),r=Ye(),n=oe(null),i=oe([]),o=oe(0),u=oe(""),c=oe(null),v=oe([]),g=oe(!1),b=te(()=>n.value?r.tree.filter(q=>q.id===n.value)[0]:null),l=oe([]),m=q=>q.filter(Y=>Y.type==="tree").map(Y=>({id:Y.path,path:Y.path,icon:"mdi-folder",selectable:!0,name:Y.name,children:Y.children?m(Y.children):void 0})),h=te(()=>{var q;return b.value?ft([{name:"/",icon:"mdi-folder",selectable:!0,id:"/",path:"",children:m(((q=b.value)==null?void 0:q.children)||[])}]):[]}),y=q=>{const W=[];for(let Y of q)Y.type==="tree"&&Y.children&&Y.children.length>0?W.push(...y(Y.children)):W.push(Y);return W.filter(Y=>{var D,f,j;let z=Y;!((D=z==null?void 0:z.content_types)!=null&&D.thumb)&&((f=z==null?void 0:z.content_types)!=null&&f.step||((j=z==null?void 0:z.content_types)==null||j.f3d))})},p=async()=>{var q,W,Y,z,D;for(;i.value.length>0;){await new Promise(Q=>setTimeout(Q,100));const f=i.value.shift(),j=await r.backend.autothumb({url:((W=(q=f==null?void 0:f.content_types)==null?void 0:q.f3d)==null?void 0:W.url)||((z=(Y=f==null?void 0:f.content_types)==null?void 0:Y.step)==null?void 0:z.url),content_type:(D=f==null?void 0:f.content_types)!=null&&D.f3d?"f3d":"step",transparent:g.value,token:r.token});j&&(l.value.push({path:`${f.path}.png`,content:j.split(",")[1],encoding:"base64"}),u.value=j)}},w=async()=>{var W;const q=(W=b.value)==null?void 0:W.repositories.filter(Y=>Y.repr===c.value)[0];await br({repo:q.repo,branch:q.branch,files:[...l.value],token:r.token,message:"Add auto-generated thumbnails.",progressCallback:(Y,z)=>{v.value=[Y,z],console.log(a(Y),"/",a(z))}})},{dialogRef:S,onDialogHide:E,onDialogOK:C,onDialogCancel:R}=Le();function A(){i.value.length?(i.value=[],o.value=0,u.value="",l.value=[]):l.value.length?l.value=[]:R()}function M(){var q;if(l.value.length)w().then(()=>{var W;C((W=b==null?void 0:b.value)==null?void 0:W.id)}).catch(W=>{alert(W)});else{let W=t.value||"";W==="/"&&(W=""),i.value=y(((q=b.value)==null?void 0:q.children)||[]).filter(Y=>Y.path.startsWith(W)),o.value=i.value.length,p().then(()=>{o.value=0,console.log("done")}).catch(Y=>{console.error("Processing Error",Y),o.value=0,i.value=[],u.value="",l.value=[]})}}return(q,W)=>(pe(),Te(xt,{ref_key:"dialogRef",ref:S,onHide:be(E),square:""},{default:ve(()=>[ue(Ct,{class:"q-dialog-plugin"},{default:ve(()=>[ue(St,null,{default:ve(()=>{var Y;return[os,ue(dr,{class:"q-mb-sm"}),!i.value.length&&!l.value.length?(pe(),ye("div",ss,[ls,we(ce("select",{"onUpdate:modelValue":W[0]||(W[0]=z=>n.value=z),style:{flex:"1"}},[(pe(!0),ye(Ze,null,at(be(r).tree,z=>(pe(),ye("option",{key:z.id,value:z.id},Ne(z.name),9,us))),128))],512),[[It,n.value]])])):Se("",!0),!i.value.length&&!l.value.length?(pe(),ye("div",cs,[ds,ce("div",fs,[ue(Lr,{ref:"treeRef",dense:"",selected:t.value,"onUpdate:selected":W[1]||(W[1]=z=>t.value=z),expanded:s.value,"onUpdate:expanded":W[2]||(W[2]=z=>s.value=z),"no-selection-unset":"",nodes:h.value,"node-key":"id","label-key":"name",class:"pathTree"},null,8,["selected","expanded","nodes"])])])):Se("",!0),!i.value.length&&!l.value.length?(pe(),ye("div",hs,[ce("label",vs,[qe(" BG Transparency: "),we(ce("input",{type:"checkbox","onUpdate:modelValue":W[3]||(W[3]=z=>g.value=z)},null,512),[[pt,g.value]])])])):Se("",!0),l.value.length&&!i.value.length?(pe(),ye("div",ps,[ce("div",ms,[ce("div",null,"Generated "+Ne(l.value.length)+" thumbnails.",1),ue(is,{class:"thumb-list"},{default:ve(()=>[(pe(!0),ye(Ze,null,at(l.value,z=>(pe(),ye("div",{key:z.path,style:{"white-space":"nowrap"}},Ne(z.path),1))),128))]),_:1})])])):Se("",!0),l.value.length&&!i.value.length?(pe(),ye("div",gs,[bs,we(ce("select",{"onUpdate:modelValue":W[4]||(W[4]=z=>c.value=z),style:{flex:"1"}},[(pe(!0),ye(Ze,null,at((Y=b.value)==null?void 0:Y.repositories,z=>(pe(),ye("option",{value:z.repr,key:z.repr},Ne(z.repr),9,ys))),128))],512),[[It,c.value]])])):Se("",!0),i.value.length?(pe(),ye("div",_s,[u.value?(pe(),ye("img",{key:0,src:u.value,class:"autothumb-preview"},null,8,ws)):Se("",!0)])):Se("",!0),o.value?(pe(),Te(Hn,{key:6,"animation-speed":100,size:"25px",value:(o.value-i.value.length)/o.value,color:"accent"},{default:ve(()=>[ce("div",ks,[ue(ln,{color:"white","text-color":"accent",label:`${o.value-i.value.length} / ${o.value}`},null,8,["label"])])]),_:1},8,["value"])):Se("",!0),v.value?(pe(),Te(Hn,{key:7,size:"25px","animation-speed":100,value:v.value[0]/v.value[1],color:"accent"},{default:ve(()=>[ce("div",xs,[ue(ln,{color:"white","text-color":"accent",label:`${be(a)(v.value[0])} / ${be(a)(v.value[1])}`},null,8,["label"])])]),_:1},8,["value"])):Se("",!0)]}),_:1}),ue(Jt,{align:"right"},{default:ve(()=>[ue(ze,{size:"sm",square:"",color:"negative","text-color":"white",label:"Cancel",onClick:A}),ue(ze,{color:"positive","text-color":"white",label:"OK",size:"sm",square:"",disable:!!(!b.value||!t.value||i.value.length||l.value.length&&!c.value),onClick:M},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),Cs={...ur,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},cn=50,Fr=2*cn,jr=Fr*Math.PI,Ts=Math.round(jr*1e3)/1e3;var zs=Ee({name:"QCircularProgress",props:{...Cs,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:a}){const{proxy:{$q:t}}=Re(),s=cr(e),r=te(()=>{const b=(t.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(t.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-b}deg)`:`rotate3d(0, 0, 1, ${b-90}deg)`}}),n=te(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),i=te(()=>Fr/(1-e.thickness/2)),o=te(()=>`${i.value/2} ${i.value/2} ${i.value} ${i.value}`),u=te(()=>dt(e.value,e.min,e.max)),c=te(()=>jr*(1-(u.value-e.min)/(e.max-e.min))),v=te(()=>e.thickness/2*i.value);function g({thickness:b,offset:l,color:m,cls:h,rounded:y}){return ee("circle",{class:"q-circular-progress__"+h+(m!==void 0?` text-${m}`:""),style:n.value,fill:"transparent",stroke:"currentColor","stroke-width":b,"stroke-dasharray":Ts,"stroke-dashoffset":l,"stroke-linecap":y,cx:i.value,cy:i.value,r:cn})}return()=>{const b=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&b.push(ee("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:cn-v.value/2,cx:i.value,cy:i.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&b.push(g({cls:"track",thickness:v.value,offset:0,color:e.trackColor})),b.push(g({cls:"circle",thickness:v.value,offset:c.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const l=[ee("svg",{class:"q-circular-progress__svg",style:r.value,viewBox:o.value,"aria-hidden":"true"},b)];return e.showValue===!0&&l.push(ee("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},a.default!==void 0?a.default():[ee("div",u.value)])),ee("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:s.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:u.value},Ai(a.internal,l))}}}),Ur={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,a){(function(t){e.exports=t()})(function(){return function t(s,r,n){function i(c,v){if(!r[c]){if(!s[c]){var g=typeof Rt=="function"&&Rt;if(!v&&g)return g(c,!0);if(o)return o(c,!0);var b=new Error("Cannot find module '"+c+"'");throw b.code="MODULE_NOT_FOUND",b}var l=r[c]={exports:{}};s[c][0].call(l.exports,function(m){var h=s[c][1][m];return i(h||m)},l,l.exports,t,s,r,n)}return r[c].exports}for(var o=typeof Rt=="function"&&Rt,u=0;u<n.length;u++)i(n[u]);return i}({1:[function(t,s,r){var n=t("./utils"),i=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(u){for(var c,v,g,b,l,m,h,y=[],p=0,w=u.length,S=w,E=n.getTypeOf(u)!=="string";p<u.length;)S=w-p,g=E?(c=u[p++],v=p<w?u[p++]:0,p<w?u[p++]:0):(c=u.charCodeAt(p++),v=p<w?u.charCodeAt(p++):0,p<w?u.charCodeAt(p++):0),b=c>>2,l=(3&c)<<4|v>>4,m=1<S?(15&v)<<2|g>>6:64,h=2<S?63&g:64,y.push(o.charAt(b)+o.charAt(l)+o.charAt(m)+o.charAt(h));return y.join("")},r.decode=function(u){var c,v,g,b,l,m,h=0,y=0,p="data:";if(u.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var w,S=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===o.charAt(64)&&S--,u.charAt(u.length-2)===o.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=i.uint8array?new Uint8Array(0|S):new Array(0|S);h<u.length;)c=o.indexOf(u.charAt(h++))<<2|(b=o.indexOf(u.charAt(h++)))>>4,v=(15&b)<<4|(l=o.indexOf(u.charAt(h++)))>>2,g=(3&l)<<6|(m=o.indexOf(u.charAt(h++))),w[y++]=c,l!==64&&(w[y++]=v),m!==64&&(w[y++]=g);return w}},{"./support":30,"./utils":32}],2:[function(t,s,r){var n=t("./external"),i=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function c(v,g,b,l,m){this.compressedSize=v,this.uncompressedSize=g,this.crc32=b,this.compression=l,this.compressedContent=m}c.prototype={getContentWorker:function(){var v=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),g=this;return v.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),v},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(v,g,b){return v.pipe(new o).pipe(new u("uncompressedSize")).pipe(g.compressWorker(b)).pipe(new u("compressedSize")).withStreamInfo("compression",g)},s.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,s,r){var n=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,s,r){var n=t("./utils"),i=function(){for(var o,u=[],c=0;c<256;c++){o=c;for(var v=0;v<8;v++)o=1&o?3988292384^o>>>1:o>>>1;u[c]=o}return u}();s.exports=function(o,u){return o!==void 0&&o.length?n.getTypeOf(o)!=="string"?function(c,v,g,b){var l=i,m=b+g;c^=-1;for(var h=b;h<m;h++)c=c>>>8^l[255&(c^v[h])];return-1^c}(0|u,o,o.length,0):function(c,v,g,b){var l=i,m=b+g;c^=-1;for(var h=b;h<m;h++)c=c>>>8^l[255&(c^v.charCodeAt(h))];return-1^c}(0|u,o,o.length,0):0}},{"./utils":32}],5:[function(t,s,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,s,r){var n=null;n=typeof Promise!="undefined"?Promise:t("lie"),s.exports={Promise:n}},{lie:37}],7:[function(t,s,r){var n=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",i=t("pako"),o=t("./utils"),u=t("./stream/GenericWorker"),c=n?"uint8array":"array";function v(g,b){u.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=b,this.meta={}}r.magic="\b\0",o.inherits(v,u),v.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(c,g.data),!1)},v.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},v.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},v.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(b){g.push({data:b,meta:g.meta})}},r.compressWorker=function(g){return new v("Deflate",g)},r.uncompressWorker=function(){return new v("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,s,r){function n(l,m){var h,y="";for(h=0;h<m;h++)y+=String.fromCharCode(255&l),l>>>=8;return y}function i(l,m,h,y,p,w){var S,E,C=l.file,R=l.compression,A=w!==c.utf8encode,M=o.transformTo("string",w(C.name)),q=o.transformTo("string",c.utf8encode(C.name)),W=C.comment,Y=o.transformTo("string",w(W)),z=o.transformTo("string",c.utf8encode(W)),D=q.length!==C.name.length,f=z.length!==W.length,j="",Q="",K="",se=C.dir,X=C.date,de={crc32:0,compressedSize:0,uncompressedSize:0};m&&!h||(de.crc32=l.crc32,de.compressedSize=l.compressedSize,de.uncompressedSize=l.uncompressedSize);var L=0;m&&(L|=8),A||!D&&!f||(L|=2048);var T=0,J=0;se&&(T|=16),p==="UNIX"?(J=798,T|=function(B,I){var H=B;return B||(H=I?16893:33204),(65535&H)<<16}(C.unixPermissions,se)):(J=20,T|=function(B){return 63&(B||0)}(C.dosPermissions)),S=X.getUTCHours(),S<<=6,S|=X.getUTCMinutes(),S<<=5,S|=X.getUTCSeconds()/2,E=X.getUTCFullYear()-1980,E<<=4,E|=X.getUTCMonth()+1,E<<=5,E|=X.getUTCDate(),D&&(Q=n(1,1)+n(v(M),4)+q,j+="up"+n(Q.length,2)+Q),f&&(K=n(1,1)+n(v(Y),4)+z,j+="uc"+n(K.length,2)+K);var k="";return k+=`
\0`,k+=n(L,2),k+=R.magic,k+=n(S,2),k+=n(E,2),k+=n(de.crc32,4),k+=n(de.compressedSize,4),k+=n(de.uncompressedSize,4),k+=n(M.length,2),k+=n(j.length,2),{fileRecord:g.LOCAL_FILE_HEADER+k+M+j,dirRecord:g.CENTRAL_FILE_HEADER+n(J,2)+k+n(Y.length,2)+"\0\0\0\0"+n(T,4)+n(y,4)+M+j+Y}}var o=t("../utils"),u=t("../stream/GenericWorker"),c=t("../utf8"),v=t("../crc32"),g=t("../signature");function b(l,m,h,y){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=h,this.encodeFileName=y,this.streamFiles=l,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(b,u),b.prototype.push=function(l){var m=l.meta.percent||0,h=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(l):(this.bytesWritten+=l.data.length,u.prototype.push.call(this,{data:l.data,meta:{currentFile:this.currentFile,percent:h?(m+100*(h-y-1))/h:100}}))},b.prototype.openedSource=function(l){this.currentSourceOffset=this.bytesWritten,this.currentFile=l.file.name;var m=this.streamFiles&&!l.file.dir;if(m){var h=i(l,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:h.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(l){this.accumulate=!1;var m=this.streamFiles&&!l.file.dir,h=i(l,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),m)this.push({data:function(y){return g.DATA_DESCRIPTOR+n(y.crc32,4)+n(y.compressedSize,4)+n(y.uncompressedSize,4)}(l),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var l=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var h=this.bytesWritten-l,y=function(p,w,S,E,C){var R=o.transformTo("string",C(E));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(p,2)+n(p,2)+n(w,4)+n(S,4)+n(R.length,2)+R}(this.dirRecords.length,h,l,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(l){this._sources.push(l);var m=this;return l.on("data",function(h){m.processChunk(h)}),l.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),l.on("error",function(h){m.error(h)}),this},b.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(l){var m=this._sources;if(!u.prototype.error.call(this,l))return!1;for(var h=0;h<m.length;h++)try{m[h].error(l)}catch{}return!0},b.prototype.lock=function(){u.prototype.lock.call(this);for(var l=this._sources,m=0;m<l.length;m++)l[m].lock()},s.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,s,r){var n=t("../compressions"),i=t("./ZipFileWorker");r.generateWorker=function(o,u,c){var v=new i(u.streamFiles,c,u.platform,u.encodeFileName),g=0;try{o.forEach(function(b,l){g++;var m=function(w,S){var E=w||S,C=n[E];if(!C)throw new Error(E+" is not a valid compression method !");return C}(l.options.compression,u.compression),h=l.options.compressionOptions||u.compressionOptions||{},y=l.dir,p=l.date;l._compressWorker(m,h).withStreamInfo("file",{name:b,dir:y,date:p,comment:l.comment||"",unixPermissions:l.unixPermissions,dosPermissions:l.dosPermissions}).pipe(v)}),v.entriesCount=g}catch(b){v.error(b)}return v}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,s,r){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new n;for(var o in this)typeof this[o]!="function"&&(i[o]=this[o]);return i}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.10.1",n.loadAsync=function(i,o){return new n().loadAsync(i,o)},n.external=t("./external"),s.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,s,r){var n=t("./utils"),i=t("./external"),o=t("./utf8"),u=t("./zipEntries"),c=t("./stream/Crc32Probe"),v=t("./nodejsUtils");function g(b){return new i.Promise(function(l,m){var h=b.decompressed.getContentWorker().pipe(new c);h.on("error",function(y){m(y)}).on("end",function(){h.streamInfo.crc32!==b.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):l()}).resume()})}s.exports=function(b,l){var m=this;return l=n.extend(l||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),v.isNode&&v.isStream(b)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",b,!0,l.optimizedBinaryString,l.base64).then(function(h){var y=new u(l);return y.load(h),y}).then(function(h){var y=[i.Promise.resolve(h)],p=h.files;if(l.checkCRC32)for(var w=0;w<p.length;w++)y.push(g(p[w]));return i.Promise.all(y)}).then(function(h){for(var y=h.shift(),p=y.files,w=0;w<p.length;w++){var S=p[w],E=S.fileNameStr,C=n.resolve(S.fileNameStr);m.file(C,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:l.createFolders}),S.dir||(m.file(C).unsafeOriginalName=E)}return y.zipComment.length&&(m.comment=y.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,s,r){var n=t("../utils"),i=t("../stream/GenericWorker");function o(u,c){i.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(c)}n.inherits(o,i),o.prototype._bindStream=function(u){var c=this;(this._stream=u).pause(),u.on("data",function(v){c.push({data:v,meta:{percent:0}})}).on("error",function(v){c.isPaused?this.generatedError=v:c.error(v)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,s,r){var n=t("readable-stream").Readable;function i(o,u,c){n.call(this,u),this._helper=o;var v=this;o.on("data",function(g,b){v.push(g)||v._helper.pause(),c&&c(b)}).on("error",function(g){v.emit("error",g)}).on("end",function(){v.push(null)})}t("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},s.exports=i},{"../utils":32,"readable-stream":16}],14:[function(t,s,r){s.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(n,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,i);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,i)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var i=new Buffer(n);return i.fill(0),i},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(t,s,r){function n(C,R,A){var M,q=o.getTypeOf(R),W=o.extend(A||{},v);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(C=p(C)),W.createFolders&&(M=y(C))&&w.call(this,M,!0);var Y=q==="string"&&W.binary===!1&&W.base64===!1;A&&A.binary!==void 0||(W.binary=!Y),(R instanceof g&&R.uncompressedSize===0||W.dir||!R||R.length===0)&&(W.base64=!1,W.binary=!0,R="",W.compression="STORE",q="string");var z=null;z=R instanceof g||R instanceof u?R:m.isNode&&m.isStream(R)?new h(C,R):o.prepareContent(C,R,W.binary,W.optimizedBinaryString,W.base64);var D=new b(C,z,W);this.files[C]=D}var i=t("./utf8"),o=t("./utils"),u=t("./stream/GenericWorker"),c=t("./stream/StreamHelper"),v=t("./defaults"),g=t("./compressedObject"),b=t("./zipObject"),l=t("./generate"),m=t("./nodejsUtils"),h=t("./nodejs/NodejsStreamInputAdapter"),y=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var R=C.lastIndexOf("/");return 0<R?C.substring(0,R):""},p=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},w=function(C,R){return R=R!==void 0?R:v.createFolders,C=p(C),this.files[C]||n.call(this,C,null,{dir:!0,createFolders:R}),this.files[C]};function S(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var R,A,M;for(R in this.files)M=this.files[R],(A=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&C(A,M)},filter:function(C){var R=[];return this.forEach(function(A,M){C(A,M)&&R.push(M)}),R},file:function(C,R,A){if(arguments.length!==1)return C=this.root+C,n.call(this,C,R,A),this;if(S(C)){var M=C;return this.filter(function(W,Y){return!Y.dir&&M.test(W)})}var q=this.files[this.root+C];return q&&!q.dir?q:null},folder:function(C){if(!C)return this;if(S(C))return this.filter(function(q,W){return W.dir&&C.test(q)});var R=this.root+C,A=w.call(this,R),M=this.clone();return M.root=A.name,M},remove:function(C){C=this.root+C;var R=this.files[C];if(R||(C.slice(-1)!=="/"&&(C+="/"),R=this.files[C]),R&&!R.dir)delete this.files[C];else for(var A=this.filter(function(q,W){return W.name.slice(0,C.length)===C}),M=0;M<A.length;M++)delete this.files[A[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var R,A={};try{if((A=o.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=A.type.toLowerCase(),A.compression=A.compression.toUpperCase(),A.type==="binarystring"&&(A.type="string"),!A.type)throw new Error("No output type specified.");o.checkSupport(A.type),A.platform!=="darwin"&&A.platform!=="freebsd"&&A.platform!=="linux"&&A.platform!=="sunos"||(A.platform="UNIX"),A.platform==="win32"&&(A.platform="DOS");var M=A.comment||this.comment||"";R=l.generateWorker(this,A,M)}catch(q){(R=new u("error")).error(q)}return new c(R,A.type||"string",A.mimeType)},generateAsync:function(C,R){return this.generateInternalStream(C).accumulate(R)},generateNodeStream:function(C,R){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(R)}};s.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,s,r){s.exports=t("stream")},{stream:void 0}],17:[function(t,s,r){var n=t("./DataReader");function i(o){n.call(this,o);for(var u=0;u<this.data.length;u++)o[u]=255&o[u]}t("../utils").inherits(i,n),i.prototype.byteAt=function(o){return this.data[this.zero+o]},i.prototype.lastIndexOfSignature=function(o){for(var u=o.charCodeAt(0),c=o.charCodeAt(1),v=o.charCodeAt(2),g=o.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===u&&this.data[b+1]===c&&this.data[b+2]===v&&this.data[b+3]===g)return b-this.zero;return-1},i.prototype.readAndCheckSignature=function(o){var u=o.charCodeAt(0),c=o.charCodeAt(1),v=o.charCodeAt(2),g=o.charCodeAt(3),b=this.readData(4);return u===b[0]&&c===b[1]&&v===b[2]&&g===b[3]},i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},s.exports=i},{"../utils":32,"./DataReader":18}],18:[function(t,s,r){var n=t("../utils");function i(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var u,c=0;for(this.checkOffset(o),u=this.index+o-1;u>=this.index;u--)c=(c<<8)+this.byteAt(u);return this.index+=o,c},readString:function(o){return n.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},s.exports=i},{"../utils":32}],19:[function(t,s,r){var n=t("./Uint8ArrayReader");function i(o){n.call(this,o)}t("../utils").inherits(i,n),i.prototype.readData=function(o){this.checkOffset(o);var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},s.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,s,r){var n=t("./DataReader");function i(o){n.call(this,o)}t("../utils").inherits(i,n),i.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},i.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},i.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},i.prototype.readData=function(o){this.checkOffset(o);var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},s.exports=i},{"../utils":32,"./DataReader":18}],21:[function(t,s,r){var n=t("./ArrayReader");function i(o){n.call(this,o)}t("../utils").inherits(i,n),i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},s.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(t,s,r){var n=t("../utils"),i=t("../support"),o=t("./ArrayReader"),u=t("./StringReader"),c=t("./NodeBufferReader"),v=t("./Uint8ArrayReader");s.exports=function(g){var b=n.getTypeOf(g);return n.checkSupport(b),b!=="string"||i.uint8array?b==="nodebuffer"?new c(g):i.uint8array?new v(n.transformTo("uint8array",g)):new o(n.transformTo("array",g)):new u(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,s,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,s,r){var n=t("./GenericWorker"),i=t("../utils");function o(u){n.call(this,"ConvertWorker to "+u),this.destType=u}i.inherits(o,n),o.prototype.processChunk=function(u){this.push({data:i.transformTo(this.destType,u.data),meta:u.meta})},s.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,s,r){var n=t("./GenericWorker"),i=t("../crc32");function o(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,n),o.prototype.processChunk=function(u){this.streamInfo.crc32=i(u.data,this.streamInfo.crc32||0),this.push(u)},s.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,s,r){var n=t("../utils"),i=t("./GenericWorker");function o(u){i.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}n.inherits(o,i),o.prototype.processChunk=function(u){if(u){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+u.data.length}i.prototype.processChunk.call(this,u)},s.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,s,r){var n=t("../utils"),i=t("./GenericWorker");function o(u){i.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(v){c.dataIsReady=!0,c.data=v,c.max=v&&v.length||0,c.type=n.getTypeOf(v),c.isPaused||c._tickAndRepeat()},function(v){c.error(v)})}n.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,c);break;case"uint8array":u=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":u=this.data.slice(this.index,c)}return this.index=c,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,s,r){function n(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,o){return this._listeners[i].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,o){if(this._listeners[i])for(var u=0;u<this._listeners[i].length;u++)this._listeners[i][u].call(this,o)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var o=this;return i.on("data",function(u){o.processChunk(u)}),i.on("end",function(){o.end()}),i.on("error",function(u){o.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,o){return this.extraStreamInfo[i]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},s.exports=n},{}],29:[function(t,s,r){var n=t("../utils"),i=t("./ConvertWorker"),o=t("./GenericWorker"),u=t("../base64"),c=t("../support"),v=t("../external"),g=null;if(c.nodestream)try{g=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(m,h){return new v.Promise(function(y,p){var w=[],S=m._internalType,E=m._outputType,C=m._mimeType;m.on("data",function(R,A){w.push(R),h&&h(A)}).on("error",function(R){w=[],p(R)}).on("end",function(){try{var R=function(A,M,q){switch(A){case"blob":return n.newBlob(n.transformTo("arraybuffer",M),q);case"base64":return u.encode(M);default:return n.transformTo(A,M)}}(E,function(A,M){var q,W=0,Y=null,z=0;for(q=0;q<M.length;q++)z+=M[q].length;switch(A){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(Y=new Uint8Array(z),q=0;q<M.length;q++)Y.set(M[q],W),W+=M[q].length;return Y;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+A+"'")}}(S,w),C);y(R)}catch(A){p(A)}w=[]}).resume()})}function l(m,h,y){var p=h;switch(h){case"blob":case"arraybuffer":p="uint8array";break;case"base64":p="string"}try{this._internalType=p,this._outputType=h,this._mimeType=y,n.checkSupport(p),this._worker=m.pipe(new i(p)),m.lock()}catch(w){this._worker=new o("error"),this._worker.error(w)}}l.prototype={accumulate:function(m){return b(this,m)},on:function(m,h){var y=this;return m==="data"?this._worker.on(m,function(p){h.call(y,p.data,p.meta)}):this._worker.on(m,function(){n.delay(h,arguments,y)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},m)}},s.exports=l},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,s,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",r.nodebuffer=typeof Buffer!="undefined",r.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=i.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(t,s,r){for(var n=t("./utils"),i=t("./support"),o=t("./nodejsUtils"),u=t("./stream/GenericWorker"),c=new Array(256),v=0;v<256;v++)c[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;c[254]=c[254]=1;function g(){u.call(this,"utf-8 decode"),this.leftOver=null}function b(){u.call(this,"utf-8 encode")}r.utf8encode=function(l){return i.nodebuffer?o.newBufferFrom(l,"utf-8"):function(m){var h,y,p,w,S,E=m.length,C=0;for(w=0;w<E;w++)(64512&(y=m.charCodeAt(w)))==55296&&w+1<E&&(64512&(p=m.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(p-56320),w++),C+=y<128?1:y<2048?2:y<65536?3:4;for(h=i.uint8array?new Uint8Array(C):new Array(C),w=S=0;S<C;w++)(64512&(y=m.charCodeAt(w)))==55296&&w+1<E&&(64512&(p=m.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(p-56320),w++),y<128?h[S++]=y:(y<2048?h[S++]=192|y>>>6:(y<65536?h[S++]=224|y>>>12:(h[S++]=240|y>>>18,h[S++]=128|y>>>12&63),h[S++]=128|y>>>6&63),h[S++]=128|63&y);return h}(l)},r.utf8decode=function(l){return i.nodebuffer?n.transformTo("nodebuffer",l).toString("utf-8"):function(m){var h,y,p,w,S=m.length,E=new Array(2*S);for(h=y=0;h<S;)if((p=m[h++])<128)E[y++]=p;else if(4<(w=c[p]))E[y++]=65533,h+=w-1;else{for(p&=w===2?31:w===3?15:7;1<w&&h<S;)p=p<<6|63&m[h++],w--;1<w?E[y++]=65533:p<65536?E[y++]=p:(p-=65536,E[y++]=55296|p>>10&1023,E[y++]=56320|1023&p)}return E.length!==y&&(E.subarray?E=E.subarray(0,y):E.length=y),n.applyFromCharCode(E)}(l=n.transformTo(i.uint8array?"uint8array":"array",l))},n.inherits(g,u),g.prototype.processChunk=function(l){var m=n.transformTo(i.uint8array?"uint8array":"array",l.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var h=m;(m=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),m.set(h,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var y=function(w,S){var E;for((S=S||w.length)>w.length&&(S=w.length),E=S-1;0<=E&&(192&w[E])==128;)E--;return E<0||E===0?S:E+c[w[E]]>S?E:S}(m),p=m;y!==m.length&&(i.uint8array?(p=m.subarray(0,y),this.leftOver=m.subarray(y,m.length)):(p=m.slice(0,y),this.leftOver=m.slice(y,m.length))),this.push({data:r.utf8decode(p),meta:l.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=g,n.inherits(b,u),b.prototype.processChunk=function(l){this.push({data:r.utf8encode(l.data),meta:l.meta})},r.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,s,r){var n=t("./support"),i=t("./base64"),o=t("./nodejsUtils"),u=t("./external");function c(h){return h}function v(h,y){for(var p=0;p<h.length;++p)y[p]=255&h.charCodeAt(p);return y}t("setimmediate"),r.newBlob=function(h,y){r.checkSupport("blob");try{return new Blob([h],{type:y})}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return p.append(h),p.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(h,y,p){var w=[],S=0,E=h.length;if(E<=p)return String.fromCharCode.apply(null,h);for(;S<E;)y==="array"||y==="nodebuffer"?w.push(String.fromCharCode.apply(null,h.slice(S,Math.min(S+p,E)))):w.push(String.fromCharCode.apply(null,h.subarray(S,Math.min(S+p,E)))),S+=p;return w.join("")},stringifyByChar:function(h){for(var y="",p=0;p<h.length;p++)y+=String.fromCharCode(h[p]);return y},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function b(h){var y=65536,p=r.getTypeOf(h),w=!0;if(p==="uint8array"?w=g.applyCanBeUsed.uint8array:p==="nodebuffer"&&(w=g.applyCanBeUsed.nodebuffer),w)for(;1<y;)try{return g.stringifyByChunk(h,p,y)}catch{y=Math.floor(y/2)}return g.stringifyByChar(h)}function l(h,y){for(var p=0;p<h.length;p++)y[p]=h[p];return y}r.applyFromCharCode=b;var m={};m.string={string:c,array:function(h){return v(h,new Array(h.length))},arraybuffer:function(h){return m.string.uint8array(h).buffer},uint8array:function(h){return v(h,new Uint8Array(h.length))},nodebuffer:function(h){return v(h,o.allocBuffer(h.length))}},m.array={string:b,array:c,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return o.newBufferFrom(h)}},m.arraybuffer={string:function(h){return b(new Uint8Array(h))},array:function(h){return l(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:c,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return o.newBufferFrom(new Uint8Array(h))}},m.uint8array={string:b,array:function(h){return l(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:c,nodebuffer:function(h){return o.newBufferFrom(h)}},m.nodebuffer={string:b,array:function(h){return l(h,new Array(h.length))},arraybuffer:function(h){return m.nodebuffer.uint8array(h).buffer},uint8array:function(h){return l(h,new Uint8Array(h.length))},nodebuffer:c},r.transformTo=function(h,y){if(y=y||"",!h)return y;r.checkSupport(h);var p=r.getTypeOf(y);return m[p][h](y)},r.resolve=function(h){for(var y=h.split("/"),p=[],w=0;w<y.length;w++){var S=y[w];S==="."||S===""&&w!==0&&w!==y.length-1||(S===".."?p.pop():p.push(S))}return p.join("/")},r.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":n.nodebuffer&&o.isBuffer(h)?"nodebuffer":n.uint8array&&h instanceof Uint8Array?"uint8array":n.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(h){if(!n[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(h){var y,p,w="";for(p=0;p<(h||"").length;p++)w+="\\x"+((y=h.charCodeAt(p))<16?"0":"")+y.toString(16).toUpperCase();return w},r.delay=function(h,y,p){setImmediate(function(){h.apply(p||null,y||[])})},r.inherits=function(h,y){function p(){}p.prototype=y.prototype,h.prototype=new p},r.extend=function(){var h,y,p={};for(h=0;h<arguments.length;h++)for(y in arguments[h])Object.prototype.hasOwnProperty.call(arguments[h],y)&&p[y]===void 0&&(p[y]=arguments[h][y]);return p},r.prepareContent=function(h,y,p,w,S){return u.Promise.resolve(y).then(function(E){return n.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader!="undefined"?new u.Promise(function(C,R){var A=new FileReader;A.onload=function(M){C(M.target.result)},A.onerror=function(M){R(M.target.error)},A.readAsArrayBuffer(E)}):E}).then(function(E){var C=r.getTypeOf(E);return C?(C==="arraybuffer"?E=r.transformTo("uint8array",E):C==="string"&&(S?E=i.decode(E):p&&w!==!0&&(E=function(R){return v(R,n.uint8array?new Uint8Array(R.length):new Array(R.length))}(E))),E):u.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,s,r){var n=t("./reader/readerFor"),i=t("./utils"),o=t("./signature"),u=t("./zipEntry"),c=t("./support");function v(g){this.files=[],this.loadOptions=g}v.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(b)+", expected "+i.pretty(g)+")")}},isSignature:function(g,b){var l=this.reader.index;this.reader.setIndex(g);var m=this.reader.readString(4)===b;return this.reader.setIndex(l),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),b=c.uint8array?"uint8array":"array",l=i.transformTo(b,g);this.zipComment=this.loadOptions.decodeFileName(l)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,b,l,m=this.zip64EndOfCentralSize-44;0<m;)g=this.reader.readInt(2),b=this.reader.readInt(4),l=this.reader.readData(b),this.zip64ExtensibleData[g]={id:g,length:b,value:l}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,b;for(g=0;g<this.files.length;g++)b=this.files[g],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(g=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var b=g;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var l=this.centralDirOffset+this.centralDirSize;this.zip64&&(l+=20,l+=12+this.zip64EndOfCentralSize);var m=b-l;if(0<m)this.isSignature(b,o.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(g){this.reader=n(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=v},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,s,r){var n=t("./reader/readerFor"),i=t("./utils"),o=t("./compressedObject"),u=t("./crc32"),c=t("./utf8"),v=t("./compressions"),g=t("./support");function b(l,m){this.options=l,this.loadOptions=m}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(l){var m,h;if(l.skip(22),this.fileNameLength=l.readInt(2),h=l.readInt(2),this.fileName=l.readData(this.fileNameLength),l.skip(h),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(y){for(var p in v)if(Object.prototype.hasOwnProperty.call(v,p)&&v[p].magic===y)return v[p];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,m,l.readData(this.compressedSize))},readCentralPart:function(l){this.versionMadeBy=l.readInt(2),l.skip(2),this.bitFlag=l.readInt(2),this.compressionMethod=l.readString(2),this.date=l.readDate(),this.crc32=l.readInt(4),this.compressedSize=l.readInt(4),this.uncompressedSize=l.readInt(4);var m=l.readInt(2);if(this.extraFieldsLength=l.readInt(2),this.fileCommentLength=l.readInt(2),this.diskNumberStart=l.readInt(2),this.internalFileAttributes=l.readInt(2),this.externalFileAttributes=l.readInt(4),this.localHeaderOffset=l.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");l.skip(m),this.readExtraFields(l),this.parseZIP64ExtraField(l),this.fileComment=l.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var l=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),l==0&&(this.dosPermissions=63&this.externalFileAttributes),l==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var l=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=l.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=l.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=l.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=l.readInt(4))}},readExtraFields:function(l){var m,h,y,p=l.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});l.index+4<p;)m=l.readInt(2),h=l.readInt(2),y=l.readData(h),this.extraFields[m]={id:m,length:h,value:y};l.setIndex(p)},handleUTF8:function(){var l=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var h=i.transformTo(l,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(h)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var p=i.transformTo(l,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(p)}}},findExtraFieldUnicodePath:function(){var l=this.extraFields[28789];if(l){var m=n(l.value);return m.readInt(1)!==1||u(this.fileName)!==m.readInt(4)?null:c.utf8decode(m.readData(l.length-5))}return null},findExtraFieldUnicodeComment:function(){var l=this.extraFields[25461];if(l){var m=n(l.value);return m.readInt(1)!==1||u(this.fileComment)!==m.readInt(4)?null:c.utf8decode(m.readData(l.length-5))}return null}},s.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,s,r){function n(m,h,y){this.name=m,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=h,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var i=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),u=t("./utf8"),c=t("./compressedObject"),v=t("./stream/GenericWorker");n.prototype={internalStream:function(m){var h=null,y="string";try{if(!m)throw new Error("No output type specified.");var p=(y=m.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),h=this._decompressWorker();var w=!this._dataBinary;w&&!p&&(h=h.pipe(new u.Utf8EncodeWorker)),!w&&p&&(h=h.pipe(new u.Utf8DecodeWorker))}catch(S){(h=new v("error")).error(S)}return new i(h,y,"")},async:function(m,h){return this.internalStream(m).accumulate(h)},nodeStream:function(m,h){return this.internalStream(m||"nodebuffer").toNodejsStream(h)},_compressWorker:function(m,h){if(this._data instanceof c&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new u.Utf8EncodeWorker)),c.createWorkerFrom(y,m,h)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof v?this._data:new o(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},l=0;l<g.length;l++)n.prototype[g[l]]=b;s.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,s,r){(function(n){var i,o,u=n.MutationObserver||n.WebKitMutationObserver;if(u){var c=0,v=new u(m),g=n.document.createTextNode("");v.observe(g,{characterData:!0}),i=function(){g.data=c=++c%2}}else if(n.setImmediate||n.MessageChannel===void 0)i="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var h=n.document.createElement("script");h.onreadystatechange=function(){m(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},n.document.documentElement.appendChild(h)}:function(){setTimeout(m,0)};else{var b=new n.MessageChannel;b.port1.onmessage=m,i=function(){b.port2.postMessage(0)}}var l=[];function m(){var h,y;o=!0;for(var p=l.length;p;){for(y=l,l=[],h=-1;++h<p;)y[h]();p=l.length}o=!1}s.exports=function(h){l.push(h)!==1||o||i()}}).call(this,typeof ke!="undefined"?ke:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(t,s,r){var n=t("immediate");function i(){}var o={},u=["REJECTED"],c=["FULFILLED"],v=["PENDING"];function g(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,p!==i&&h(this,p)}function b(p,w,S){this.promise=p,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function l(p,w,S){n(function(){var E;try{E=w(S)}catch(C){return o.reject(p,C)}E===p?o.reject(p,new TypeError("Cannot resolve promise with itself")):o.resolve(p,E)})}function m(p){var w=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof w=="function")return function(){w.apply(p,arguments)}}function h(p,w){var S=!1;function E(A){S||(S=!0,o.reject(p,A))}function C(A){S||(S=!0,o.resolve(p,A))}var R=y(function(){w(C,E)});R.status==="error"&&E(R.value)}function y(p,w){var S={};try{S.value=p(w),S.status="success"}catch(E){S.status="error",S.value=E}return S}(s.exports=g).prototype.finally=function(p){if(typeof p!="function")return this;var w=this.constructor;return this.then(function(S){return w.resolve(p()).then(function(){return S})},function(S){return w.resolve(p()).then(function(){throw S})})},g.prototype.catch=function(p){return this.then(null,p)},g.prototype.then=function(p,w){if(typeof p!="function"&&this.state===c||typeof w!="function"&&this.state===u)return this;var S=new this.constructor(i);return this.state!==v?l(S,this.state===c?p:w,this.outcome):this.queue.push(new b(S,p,w)),S},b.prototype.callFulfilled=function(p){o.resolve(this.promise,p)},b.prototype.otherCallFulfilled=function(p){l(this.promise,this.onFulfilled,p)},b.prototype.callRejected=function(p){o.reject(this.promise,p)},b.prototype.otherCallRejected=function(p){l(this.promise,this.onRejected,p)},o.resolve=function(p,w){var S=y(m,w);if(S.status==="error")return o.reject(p,S.value);var E=S.value;if(E)h(p,E);else{p.state=c,p.outcome=w;for(var C=-1,R=p.queue.length;++C<R;)p.queue[C].callFulfilled(w)}return p},o.reject=function(p,w){p.state=u,p.outcome=w;for(var S=-1,E=p.queue.length;++S<E;)p.queue[S].callRejected(w);return p},g.resolve=function(p){return p instanceof this?p:o.resolve(new this(i),p)},g.reject=function(p){var w=new this(i);return o.reject(w,p)},g.all=function(p){var w=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=p.length,E=!1;if(!S)return this.resolve([]);for(var C=new Array(S),R=0,A=-1,M=new this(i);++A<S;)q(p[A],A);return M;function q(W,Y){w.resolve(W).then(function(z){C[Y]=z,++R!==S||E||(E=!0,o.resolve(M,C))},function(z){E||(E=!0,o.reject(M,z))})}},g.race=function(p){var w=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=p.length,E=!1;if(!S)return this.resolve([]);for(var C=-1,R=new this(i);++C<S;)A=p[C],w.resolve(A).then(function(M){E||(E=!0,o.resolve(R,M))},function(M){E||(E=!0,o.reject(R,M))});var A;return R}},{immediate:36}],38:[function(t,s,r){var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),s.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,s,r){var n=t("./zlib/deflate"),i=t("./utils/common"),o=t("./utils/strings"),u=t("./zlib/messages"),c=t("./zlib/zstream"),v=Object.prototype.toString,g=0,b=-1,l=0,m=8;function h(p){if(!(this instanceof h))return new h(p);this.options=i.assign({level:b,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:l,to:""},p||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var S=n.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(S!==g)throw new Error(u[S]);if(w.header&&n.deflateSetHeader(this.strm,w.header),w.dictionary){var E;if(E=typeof w.dictionary=="string"?o.string2buf(w.dictionary):v.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(S=n.deflateSetDictionary(this.strm,E))!==g)throw new Error(u[S]);this._dict_set=!0}}function y(p,w){var S=new h(w);if(S.push(p,!0),S.err)throw S.msg||u[S.err];return S.result}h.prototype.push=function(p,w){var S,E,C=this.strm,R=this.options.chunkSize;if(this.ended)return!1;E=w===~~w?w:w===!0?4:0,typeof p=="string"?C.input=o.string2buf(p):v.call(p)==="[object ArrayBuffer]"?C.input=new Uint8Array(p):C.input=p,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new i.Buf8(R),C.next_out=0,C.avail_out=R),(S=n.deflate(C,E))!==1&&S!==g)return this.onEnd(S),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(i.shrinkBuf(C.output,C.next_out))):this.onData(i.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&S!==1);return E===4?(S=n.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===g):E!==2||(this.onEnd(g),!(C.avail_out=0))},h.prototype.onData=function(p){this.chunks.push(p)},h.prototype.onEnd=function(p){p===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},r.Deflate=h,r.deflate=y,r.deflateRaw=function(p,w){return(w=w||{}).raw=!0,y(p,w)},r.gzip=function(p,w){return(w=w||{}).gzip=!0,y(p,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,s,r){var n=t("./zlib/inflate"),i=t("./utils/common"),o=t("./utils/strings"),u=t("./zlib/constants"),c=t("./zlib/messages"),v=t("./zlib/zstream"),g=t("./zlib/gzheader"),b=Object.prototype.toString;function l(h){if(!(this instanceof l))return new l(h);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},h||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||h&&h.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&(15&y.windowBits)==0&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var p=n.inflateInit2(this.strm,y.windowBits);if(p!==u.Z_OK)throw new Error(c[p]);this.header=new g,n.inflateGetHeader(this.strm,this.header)}function m(h,y){var p=new l(y);if(p.push(h,!0),p.err)throw p.msg||c[p.err];return p.result}l.prototype.push=function(h,y){var p,w,S,E,C,R,A=this.strm,M=this.options.chunkSize,q=this.options.dictionary,W=!1;if(this.ended)return!1;w=y===~~y?y:y===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof h=="string"?A.input=o.binstring2buf(h):b.call(h)==="[object ArrayBuffer]"?A.input=new Uint8Array(h):A.input=h,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new i.Buf8(M),A.next_out=0,A.avail_out=M),(p=n.inflate(A,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&q&&(R=typeof q=="string"?o.string2buf(q):b.call(q)==="[object ArrayBuffer]"?new Uint8Array(q):q,p=n.inflateSetDictionary(this.strm,R)),p===u.Z_BUF_ERROR&&W===!0&&(p=u.Z_OK,W=!1),p!==u.Z_STREAM_END&&p!==u.Z_OK)return this.onEnd(p),!(this.ended=!0);A.next_out&&(A.avail_out!==0&&p!==u.Z_STREAM_END&&(A.avail_in!==0||w!==u.Z_FINISH&&w!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=o.utf8border(A.output,A.next_out),E=A.next_out-S,C=o.buf2string(A.output,S),A.next_out=E,A.avail_out=M-E,E&&i.arraySet(A.output,A.output,S,E,0),this.onData(C)):this.onData(i.shrinkBuf(A.output,A.next_out)))),A.avail_in===0&&A.avail_out===0&&(W=!0)}while((0<A.avail_in||A.avail_out===0)&&p!==u.Z_STREAM_END);return p===u.Z_STREAM_END&&(w=u.Z_FINISH),w===u.Z_FINISH?(p=n.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===u.Z_OK):w!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(A.avail_out=0))},l.prototype.onData=function(h){this.chunks.push(h)},l.prototype.onEnd=function(h){h===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},r.Inflate=l,r.inflate=m,r.inflateRaw=function(h,y){return(y=y||{}).raw=!0,m(h,y)},r.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,s,r){var n=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";r.assign=function(u){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var v=c.shift();if(v){if(typeof v!="object")throw new TypeError(v+"must be non-object");for(var g in v)v.hasOwnProperty(g)&&(u[g]=v[g])}}return u},r.shrinkBuf=function(u,c){return u.length===c?u:u.subarray?u.subarray(0,c):(u.length=c,u)};var i={arraySet:function(u,c,v,g,b){if(c.subarray&&u.subarray)u.set(c.subarray(v,v+g),b);else for(var l=0;l<g;l++)u[b+l]=c[v+l]},flattenChunks:function(u){var c,v,g,b,l,m;for(c=g=0,v=u.length;c<v;c++)g+=u[c].length;for(m=new Uint8Array(g),c=b=0,v=u.length;c<v;c++)l=u[c],m.set(l,b),b+=l.length;return m}},o={arraySet:function(u,c,v,g,b){for(var l=0;l<g;l++)u[b+l]=c[v+l]},flattenChunks:function(u){return[].concat.apply([],u)}};r.setTyped=function(u){u?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(n)},{}],42:[function(t,s,r){var n=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var u=new n.Buf8(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function v(g,b){if(b<65537&&(g.subarray&&o||!g.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(g,b));for(var l="",m=0;m<b;m++)l+=String.fromCharCode(g[m]);return l}u[254]=u[254]=1,r.string2buf=function(g){var b,l,m,h,y,p=g.length,w=0;for(h=0;h<p;h++)(64512&(l=g.charCodeAt(h)))==55296&&h+1<p&&(64512&(m=g.charCodeAt(h+1)))==56320&&(l=65536+(l-55296<<10)+(m-56320),h++),w+=l<128?1:l<2048?2:l<65536?3:4;for(b=new n.Buf8(w),h=y=0;y<w;h++)(64512&(l=g.charCodeAt(h)))==55296&&h+1<p&&(64512&(m=g.charCodeAt(h+1)))==56320&&(l=65536+(l-55296<<10)+(m-56320),h++),l<128?b[y++]=l:(l<2048?b[y++]=192|l>>>6:(l<65536?b[y++]=224|l>>>12:(b[y++]=240|l>>>18,b[y++]=128|l>>>12&63),b[y++]=128|l>>>6&63),b[y++]=128|63&l);return b},r.buf2binstring=function(g){return v(g,g.length)},r.binstring2buf=function(g){for(var b=new n.Buf8(g.length),l=0,m=b.length;l<m;l++)b[l]=g.charCodeAt(l);return b},r.buf2string=function(g,b){var l,m,h,y,p=b||g.length,w=new Array(2*p);for(l=m=0;l<p;)if((h=g[l++])<128)w[m++]=h;else if(4<(y=u[h]))w[m++]=65533,l+=y-1;else{for(h&=y===2?31:y===3?15:7;1<y&&l<p;)h=h<<6|63&g[l++],y--;1<y?w[m++]=65533:h<65536?w[m++]=h:(h-=65536,w[m++]=55296|h>>10&1023,w[m++]=56320|1023&h)}return v(w,m)},r.utf8border=function(g,b){var l;for((b=b||g.length)>g.length&&(b=g.length),l=b-1;0<=l&&(192&g[l])==128;)l--;return l<0||l===0?b:l+u[g[l]]>b?l:b}},{"./common":41}],43:[function(t,s,r){s.exports=function(n,i,o,u){for(var c=65535&n|0,v=n>>>16&65535|0,g=0;o!==0;){for(o-=g=2e3<o?2e3:o;v=v+(c=c+i[u++]|0)|0,--g;);c%=65521,v%=65521}return c|v<<16|0}},{}],44:[function(t,s,r){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,s,r){var n=function(){for(var i,o=[],u=0;u<256;u++){i=u;for(var c=0;c<8;c++)i=1&i?3988292384^i>>>1:i>>>1;o[u]=i}return o}();s.exports=function(i,o,u,c){var v=n,g=c+u;i^=-1;for(var b=c;b<g;b++)i=i>>>8^v[255&(i^o[b])];return-1^i}},{}],46:[function(t,s,r){var n,i=t("../utils/common"),o=t("./trees"),u=t("./adler32"),c=t("./crc32"),v=t("./messages"),g=0,b=4,l=0,m=-2,h=-1,y=4,p=2,w=8,S=9,E=286,C=30,R=19,A=2*E+1,M=15,q=3,W=258,Y=W+q+1,z=42,D=113,f=1,j=2,Q=3,K=4;function se(d,V){return d.msg=v[V],V}function X(d){return(d<<1)-(4<d?9:0)}function de(d){for(var V=d.length;0<=--V;)d[V]=0}function L(d){var V=d.state,U=V.pending;U>d.avail_out&&(U=d.avail_out),U!==0&&(i.arraySet(d.output,V.pending_buf,V.pending_out,U,d.next_out),d.next_out+=U,V.pending_out+=U,d.total_out+=U,d.avail_out-=U,V.pending-=U,V.pending===0&&(V.pending_out=0))}function T(d,V){o._tr_flush_block(d,0<=d.block_start?d.block_start:-1,d.strstart-d.block_start,V),d.block_start=d.strstart,L(d.strm)}function J(d,V){d.pending_buf[d.pending++]=V}function k(d,V){d.pending_buf[d.pending++]=V>>>8&255,d.pending_buf[d.pending++]=255&V}function B(d,V){var U,x,_=d.max_chain_length,P=d.strstart,Z=d.prev_length,$=d.nice_match,O=d.strstart>d.w_size-Y?d.strstart-(d.w_size-Y):0,G=d.window,re=d.w_mask,ne=d.prev,le=d.strstart+W,he=G[P+Z-1],me=G[P+Z];d.prev_length>=d.good_match&&(_>>=2),$>d.lookahead&&($=d.lookahead);do if(G[(U=V)+Z]===me&&G[U+Z-1]===he&&G[U]===G[P]&&G[++U]===G[P+1]){P+=2,U++;do;while(G[++P]===G[++U]&&G[++P]===G[++U]&&G[++P]===G[++U]&&G[++P]===G[++U]&&G[++P]===G[++U]&&G[++P]===G[++U]&&G[++P]===G[++U]&&G[++P]===G[++U]&&P<le);if(x=W-(le-P),P=le-W,Z<x){if(d.match_start=V,$<=(Z=x))break;he=G[P+Z-1],me=G[P+Z]}}while((V=ne[V&re])>O&&--_!=0);return Z<=d.lookahead?Z:d.lookahead}function I(d){var V,U,x,_,P,Z,$,O,G,re,ne=d.w_size;do{if(_=d.window_size-d.lookahead-d.strstart,d.strstart>=ne+(ne-Y)){for(i.arraySet(d.window,d.window,ne,ne,0),d.match_start-=ne,d.strstart-=ne,d.block_start-=ne,V=U=d.hash_size;x=d.head[--V],d.head[V]=ne<=x?x-ne:0,--U;);for(V=U=ne;x=d.prev[--V],d.prev[V]=ne<=x?x-ne:0,--U;);_+=ne}if(d.strm.avail_in===0)break;if(Z=d.strm,$=d.window,O=d.strstart+d.lookahead,G=_,re=void 0,re=Z.avail_in,G<re&&(re=G),U=re===0?0:(Z.avail_in-=re,i.arraySet($,Z.input,Z.next_in,re,O),Z.state.wrap===1?Z.adler=u(Z.adler,$,re,O):Z.state.wrap===2&&(Z.adler=c(Z.adler,$,re,O)),Z.next_in+=re,Z.total_in+=re,re),d.lookahead+=U,d.lookahead+d.insert>=q)for(P=d.strstart-d.insert,d.ins_h=d.window[P],d.ins_h=(d.ins_h<<d.hash_shift^d.window[P+1])&d.hash_mask;d.insert&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[P+q-1])&d.hash_mask,d.prev[P&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=P,P++,d.insert--,!(d.lookahead+d.insert<q)););}while(d.lookahead<Y&&d.strm.avail_in!==0)}function H(d,V){for(var U,x;;){if(d.lookahead<Y){if(I(d),d.lookahead<Y&&V===g)return f;if(d.lookahead===0)break}if(U=0,d.lookahead>=q&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+q-1])&d.hash_mask,U=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),U!==0&&d.strstart-U<=d.w_size-Y&&(d.match_length=B(d,U)),d.match_length>=q)if(x=o._tr_tally(d,d.strstart-d.match_start,d.match_length-q),d.lookahead-=d.match_length,d.match_length<=d.max_lazy_match&&d.lookahead>=q){for(d.match_length--;d.strstart++,d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+q-1])&d.hash_mask,U=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart,--d.match_length!=0;);d.strstart++}else d.strstart+=d.match_length,d.match_length=0,d.ins_h=d.window[d.strstart],d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+1])&d.hash_mask;else x=o._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++;if(x&&(T(d,!1),d.strm.avail_out===0))return f}return d.insert=d.strstart<q-1?d.strstart:q-1,V===b?(T(d,!0),d.strm.avail_out===0?Q:K):d.last_lit&&(T(d,!1),d.strm.avail_out===0)?f:j}function N(d,V){for(var U,x,_;;){if(d.lookahead<Y){if(I(d),d.lookahead<Y&&V===g)return f;if(d.lookahead===0)break}if(U=0,d.lookahead>=q&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+q-1])&d.hash_mask,U=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),d.prev_length=d.match_length,d.prev_match=d.match_start,d.match_length=q-1,U!==0&&d.prev_length<d.max_lazy_match&&d.strstart-U<=d.w_size-Y&&(d.match_length=B(d,U),d.match_length<=5&&(d.strategy===1||d.match_length===q&&4096<d.strstart-d.match_start)&&(d.match_length=q-1)),d.prev_length>=q&&d.match_length<=d.prev_length){for(_=d.strstart+d.lookahead-q,x=o._tr_tally(d,d.strstart-1-d.prev_match,d.prev_length-q),d.lookahead-=d.prev_length-1,d.prev_length-=2;++d.strstart<=_&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+q-1])&d.hash_mask,U=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),--d.prev_length!=0;);if(d.match_available=0,d.match_length=q-1,d.strstart++,x&&(T(d,!1),d.strm.avail_out===0))return f}else if(d.match_available){if((x=o._tr_tally(d,0,d.window[d.strstart-1]))&&T(d,!1),d.strstart++,d.lookahead--,d.strm.avail_out===0)return f}else d.match_available=1,d.strstart++,d.lookahead--}return d.match_available&&(x=o._tr_tally(d,0,d.window[d.strstart-1]),d.match_available=0),d.insert=d.strstart<q-1?d.strstart:q-1,V===b?(T(d,!0),d.strm.avail_out===0?Q:K):d.last_lit&&(T(d,!1),d.strm.avail_out===0)?f:j}function F(d,V,U,x,_){this.good_length=d,this.max_lazy=V,this.nice_length=U,this.max_chain=x,this.func=_}function ie(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*A),this.dyn_dtree=new i.Buf16(2*(2*C+1)),this.bl_tree=new i.Buf16(2*(2*R+1)),de(this.dyn_ltree),de(this.dyn_dtree),de(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(M+1),this.heap=new i.Buf16(2*E+1),de(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*E+1),de(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function fe(d){var V;return d&&d.state?(d.total_in=d.total_out=0,d.data_type=p,(V=d.state).pending=0,V.pending_out=0,V.wrap<0&&(V.wrap=-V.wrap),V.status=V.wrap?z:D,d.adler=V.wrap===2?0:1,V.last_flush=g,o._tr_init(V),l):se(d,m)}function ae(d){var V=fe(d);return V===l&&function(U){U.window_size=2*U.w_size,de(U.head),U.max_lazy_match=n[U.level].max_lazy,U.good_match=n[U.level].good_length,U.nice_match=n[U.level].nice_length,U.max_chain_length=n[U.level].max_chain,U.strstart=0,U.block_start=0,U.lookahead=0,U.insert=0,U.match_length=U.prev_length=q-1,U.match_available=0,U.ins_h=0}(d.state),V}function ge(d,V,U,x,_,P){if(!d)return m;var Z=1;if(V===h&&(V=6),x<0?(Z=0,x=-x):15<x&&(Z=2,x-=16),_<1||S<_||U!==w||x<8||15<x||V<0||9<V||P<0||y<P)return se(d,m);x===8&&(x=9);var $=new ie;return(d.state=$).strm=d,$.wrap=Z,$.gzhead=null,$.w_bits=x,$.w_size=1<<$.w_bits,$.w_mask=$.w_size-1,$.hash_bits=_+7,$.hash_size=1<<$.hash_bits,$.hash_mask=$.hash_size-1,$.hash_shift=~~(($.hash_bits+q-1)/q),$.window=new i.Buf8(2*$.w_size),$.head=new i.Buf16($.hash_size),$.prev=new i.Buf16($.w_size),$.lit_bufsize=1<<_+6,$.pending_buf_size=4*$.lit_bufsize,$.pending_buf=new i.Buf8($.pending_buf_size),$.d_buf=1*$.lit_bufsize,$.l_buf=3*$.lit_bufsize,$.level=V,$.strategy=P,$.method=U,ae(d)}n=[new F(0,0,0,0,function(d,V){var U=65535;for(U>d.pending_buf_size-5&&(U=d.pending_buf_size-5);;){if(d.lookahead<=1){if(I(d),d.lookahead===0&&V===g)return f;if(d.lookahead===0)break}d.strstart+=d.lookahead,d.lookahead=0;var x=d.block_start+U;if((d.strstart===0||d.strstart>=x)&&(d.lookahead=d.strstart-x,d.strstart=x,T(d,!1),d.strm.avail_out===0)||d.strstart-d.block_start>=d.w_size-Y&&(T(d,!1),d.strm.avail_out===0))return f}return d.insert=0,V===b?(T(d,!0),d.strm.avail_out===0?Q:K):(d.strstart>d.block_start&&(T(d,!1),d.strm.avail_out),f)}),new F(4,4,8,4,H),new F(4,5,16,8,H),new F(4,6,32,32,H),new F(4,4,16,16,N),new F(8,16,32,32,N),new F(8,16,128,128,N),new F(8,32,128,256,N),new F(32,128,258,1024,N),new F(32,258,258,4096,N)],r.deflateInit=function(d,V){return ge(d,V,w,15,8,0)},r.deflateInit2=ge,r.deflateReset=ae,r.deflateResetKeep=fe,r.deflateSetHeader=function(d,V){return d&&d.state?d.state.wrap!==2?m:(d.state.gzhead=V,l):m},r.deflate=function(d,V){var U,x,_,P;if(!d||!d.state||5<V||V<0)return d?se(d,m):m;if(x=d.state,!d.output||!d.input&&d.avail_in!==0||x.status===666&&V!==b)return se(d,d.avail_out===0?-5:m);if(x.strm=d,U=x.last_flush,x.last_flush=V,x.status===z)if(x.wrap===2)d.adler=0,J(x,31),J(x,139),J(x,8),x.gzhead?(J(x,(x.gzhead.text?1:0)+(x.gzhead.hcrc?2:0)+(x.gzhead.extra?4:0)+(x.gzhead.name?8:0)+(x.gzhead.comment?16:0)),J(x,255&x.gzhead.time),J(x,x.gzhead.time>>8&255),J(x,x.gzhead.time>>16&255),J(x,x.gzhead.time>>24&255),J(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),J(x,255&x.gzhead.os),x.gzhead.extra&&x.gzhead.extra.length&&(J(x,255&x.gzhead.extra.length),J(x,x.gzhead.extra.length>>8&255)),x.gzhead.hcrc&&(d.adler=c(d.adler,x.pending_buf,x.pending,0)),x.gzindex=0,x.status=69):(J(x,0),J(x,0),J(x,0),J(x,0),J(x,0),J(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),J(x,3),x.status=D);else{var Z=w+(x.w_bits-8<<4)<<8;Z|=(2<=x.strategy||x.level<2?0:x.level<6?1:x.level===6?2:3)<<6,x.strstart!==0&&(Z|=32),Z+=31-Z%31,x.status=D,k(x,Z),x.strstart!==0&&(k(x,d.adler>>>16),k(x,65535&d.adler)),d.adler=1}if(x.status===69)if(x.gzhead.extra){for(_=x.pending;x.gzindex<(65535&x.gzhead.extra.length)&&(x.pending!==x.pending_buf_size||(x.gzhead.hcrc&&x.pending>_&&(d.adler=c(d.adler,x.pending_buf,x.pending-_,_)),L(d),_=x.pending,x.pending!==x.pending_buf_size));)J(x,255&x.gzhead.extra[x.gzindex]),x.gzindex++;x.gzhead.hcrc&&x.pending>_&&(d.adler=c(d.adler,x.pending_buf,x.pending-_,_)),x.gzindex===x.gzhead.extra.length&&(x.gzindex=0,x.status=73)}else x.status=73;if(x.status===73)if(x.gzhead.name){_=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>_&&(d.adler=c(d.adler,x.pending_buf,x.pending-_,_)),L(d),_=x.pending,x.pending===x.pending_buf_size)){P=1;break}P=x.gzindex<x.gzhead.name.length?255&x.gzhead.name.charCodeAt(x.gzindex++):0,J(x,P)}while(P!==0);x.gzhead.hcrc&&x.pending>_&&(d.adler=c(d.adler,x.pending_buf,x.pending-_,_)),P===0&&(x.gzindex=0,x.status=91)}else x.status=91;if(x.status===91)if(x.gzhead.comment){_=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>_&&(d.adler=c(d.adler,x.pending_buf,x.pending-_,_)),L(d),_=x.pending,x.pending===x.pending_buf_size)){P=1;break}P=x.gzindex<x.gzhead.comment.length?255&x.gzhead.comment.charCodeAt(x.gzindex++):0,J(x,P)}while(P!==0);x.gzhead.hcrc&&x.pending>_&&(d.adler=c(d.adler,x.pending_buf,x.pending-_,_)),P===0&&(x.status=103)}else x.status=103;if(x.status===103&&(x.gzhead.hcrc?(x.pending+2>x.pending_buf_size&&L(d),x.pending+2<=x.pending_buf_size&&(J(x,255&d.adler),J(x,d.adler>>8&255),d.adler=0,x.status=D)):x.status=D),x.pending!==0){if(L(d),d.avail_out===0)return x.last_flush=-1,l}else if(d.avail_in===0&&X(V)<=X(U)&&V!==b)return se(d,-5);if(x.status===666&&d.avail_in!==0)return se(d,-5);if(d.avail_in!==0||x.lookahead!==0||V!==g&&x.status!==666){var $=x.strategy===2?function(O,G){for(var re;;){if(O.lookahead===0&&(I(O),O.lookahead===0)){if(G===g)return f;break}if(O.match_length=0,re=o._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++,re&&(T(O,!1),O.strm.avail_out===0))return f}return O.insert=0,G===b?(T(O,!0),O.strm.avail_out===0?Q:K):O.last_lit&&(T(O,!1),O.strm.avail_out===0)?f:j}(x,V):x.strategy===3?function(O,G){for(var re,ne,le,he,me=O.window;;){if(O.lookahead<=W){if(I(O),O.lookahead<=W&&G===g)return f;if(O.lookahead===0)break}if(O.match_length=0,O.lookahead>=q&&0<O.strstart&&(ne=me[le=O.strstart-1])===me[++le]&&ne===me[++le]&&ne===me[++le]){he=O.strstart+W;do;while(ne===me[++le]&&ne===me[++le]&&ne===me[++le]&&ne===me[++le]&&ne===me[++le]&&ne===me[++le]&&ne===me[++le]&&ne===me[++le]&&le<he);O.match_length=W-(he-le),O.match_length>O.lookahead&&(O.match_length=O.lookahead)}if(O.match_length>=q?(re=o._tr_tally(O,1,O.match_length-q),O.lookahead-=O.match_length,O.strstart+=O.match_length,O.match_length=0):(re=o._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++),re&&(T(O,!1),O.strm.avail_out===0))return f}return O.insert=0,G===b?(T(O,!0),O.strm.avail_out===0?Q:K):O.last_lit&&(T(O,!1),O.strm.avail_out===0)?f:j}(x,V):n[x.level].func(x,V);if($!==Q&&$!==K||(x.status=666),$===f||$===Q)return d.avail_out===0&&(x.last_flush=-1),l;if($===j&&(V===1?o._tr_align(x):V!==5&&(o._tr_stored_block(x,0,0,!1),V===3&&(de(x.head),x.lookahead===0&&(x.strstart=0,x.block_start=0,x.insert=0))),L(d),d.avail_out===0))return x.last_flush=-1,l}return V!==b?l:x.wrap<=0?1:(x.wrap===2?(J(x,255&d.adler),J(x,d.adler>>8&255),J(x,d.adler>>16&255),J(x,d.adler>>24&255),J(x,255&d.total_in),J(x,d.total_in>>8&255),J(x,d.total_in>>16&255),J(x,d.total_in>>24&255)):(k(x,d.adler>>>16),k(x,65535&d.adler)),L(d),0<x.wrap&&(x.wrap=-x.wrap),x.pending!==0?l:1)},r.deflateEnd=function(d){var V;return d&&d.state?(V=d.state.status)!==z&&V!==69&&V!==73&&V!==91&&V!==103&&V!==D&&V!==666?se(d,m):(d.state=null,V===D?se(d,-3):l):m},r.deflateSetDictionary=function(d,V){var U,x,_,P,Z,$,O,G,re=V.length;if(!d||!d.state||(P=(U=d.state).wrap)===2||P===1&&U.status!==z||U.lookahead)return m;for(P===1&&(d.adler=u(d.adler,V,re,0)),U.wrap=0,re>=U.w_size&&(P===0&&(de(U.head),U.strstart=0,U.block_start=0,U.insert=0),G=new i.Buf8(U.w_size),i.arraySet(G,V,re-U.w_size,U.w_size,0),V=G,re=U.w_size),Z=d.avail_in,$=d.next_in,O=d.input,d.avail_in=re,d.next_in=0,d.input=V,I(U);U.lookahead>=q;){for(x=U.strstart,_=U.lookahead-(q-1);U.ins_h=(U.ins_h<<U.hash_shift^U.window[x+q-1])&U.hash_mask,U.prev[x&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=x,x++,--_;);U.strstart=x,U.lookahead=q-1,I(U)}return U.strstart+=U.lookahead,U.block_start=U.strstart,U.insert=U.lookahead,U.lookahead=0,U.match_length=U.prev_length=q-1,U.match_available=0,d.next_in=$,d.input=O,d.avail_in=Z,U.wrap=P,l},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,s,r){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,s,r){s.exports=function(n,i){var o,u,c,v,g,b,l,m,h,y,p,w,S,E,C,R,A,M,q,W,Y,z,D,f,j;o=n.state,u=n.next_in,f=n.input,c=u+(n.avail_in-5),v=n.next_out,j=n.output,g=v-(i-n.avail_out),b=v+(n.avail_out-257),l=o.dmax,m=o.wsize,h=o.whave,y=o.wnext,p=o.window,w=o.hold,S=o.bits,E=o.lencode,C=o.distcode,R=(1<<o.lenbits)-1,A=(1<<o.distbits)-1;e:do{S<15&&(w+=f[u++]<<S,S+=8,w+=f[u++]<<S,S+=8),M=E[w&R];t:for(;;){if(w>>>=q=M>>>24,S-=q,(q=M>>>16&255)===0)j[v++]=65535&M;else{if(!(16&q)){if((64&q)==0){M=E[(65535&M)+(w&(1<<q)-1)];continue t}if(32&q){o.mode=12;break e}n.msg="invalid literal/length code",o.mode=30;break e}W=65535&M,(q&=15)&&(S<q&&(w+=f[u++]<<S,S+=8),W+=w&(1<<q)-1,w>>>=q,S-=q),S<15&&(w+=f[u++]<<S,S+=8,w+=f[u++]<<S,S+=8),M=C[w&A];n:for(;;){if(w>>>=q=M>>>24,S-=q,!(16&(q=M>>>16&255))){if((64&q)==0){M=C[(65535&M)+(w&(1<<q)-1)];continue n}n.msg="invalid distance code",o.mode=30;break e}if(Y=65535&M,S<(q&=15)&&(w+=f[u++]<<S,(S+=8)<q&&(w+=f[u++]<<S,S+=8)),l<(Y+=w&(1<<q)-1)){n.msg="invalid distance too far back",o.mode=30;break e}if(w>>>=q,S-=q,(q=v-g)<Y){if(h<(q=Y-q)&&o.sane){n.msg="invalid distance too far back",o.mode=30;break e}if(D=p,(z=0)===y){if(z+=m-q,q<W){for(W-=q;j[v++]=p[z++],--q;);z=v-Y,D=j}}else if(y<q){if(z+=m+y-q,(q-=y)<W){for(W-=q;j[v++]=p[z++],--q;);if(z=0,y<W){for(W-=q=y;j[v++]=p[z++],--q;);z=v-Y,D=j}}}else if(z+=y-q,q<W){for(W-=q;j[v++]=p[z++],--q;);z=v-Y,D=j}for(;2<W;)j[v++]=D[z++],j[v++]=D[z++],j[v++]=D[z++],W-=3;W&&(j[v++]=D[z++],1<W&&(j[v++]=D[z++]))}else{for(z=v-Y;j[v++]=j[z++],j[v++]=j[z++],j[v++]=j[z++],2<(W-=3););W&&(j[v++]=j[z++],1<W&&(j[v++]=j[z++]))}break}}break}}while(u<c&&v<b);u-=W=S>>3,w&=(1<<(S-=W<<3))-1,n.next_in=u,n.next_out=v,n.avail_in=u<c?c-u+5:5-(u-c),n.avail_out=v<b?b-v+257:257-(v-b),o.hold=w,o.bits=S}},{}],49:[function(t,s,r){var n=t("../utils/common"),i=t("./adler32"),o=t("./crc32"),u=t("./inffast"),c=t("./inftrees"),v=1,g=2,b=0,l=-2,m=1,h=852,y=592;function p(z){return(z>>>24&255)+(z>>>8&65280)+((65280&z)<<8)+((255&z)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(z){var D;return z&&z.state?(D=z.state,z.total_in=z.total_out=D.total=0,z.msg="",D.wrap&&(z.adler=1&D.wrap),D.mode=m,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new n.Buf32(h),D.distcode=D.distdyn=new n.Buf32(y),D.sane=1,D.back=-1,b):l}function E(z){var D;return z&&z.state?((D=z.state).wsize=0,D.whave=0,D.wnext=0,S(z)):l}function C(z,D){var f,j;return z&&z.state?(j=z.state,D<0?(f=0,D=-D):(f=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?l:(j.window!==null&&j.wbits!==D&&(j.window=null),j.wrap=f,j.wbits=D,E(z))):l}function R(z,D){var f,j;return z?(j=new w,(z.state=j).window=null,(f=C(z,D))!==b&&(z.state=null),f):l}var A,M,q=!0;function W(z){if(q){var D;for(A=new n.Buf32(512),M=new n.Buf32(32),D=0;D<144;)z.lens[D++]=8;for(;D<256;)z.lens[D++]=9;for(;D<280;)z.lens[D++]=7;for(;D<288;)z.lens[D++]=8;for(c(v,z.lens,0,288,A,0,z.work,{bits:9}),D=0;D<32;)z.lens[D++]=5;c(g,z.lens,0,32,M,0,z.work,{bits:5}),q=!1}z.lencode=A,z.lenbits=9,z.distcode=M,z.distbits=5}function Y(z,D,f,j){var Q,K=z.state;return K.window===null&&(K.wsize=1<<K.wbits,K.wnext=0,K.whave=0,K.window=new n.Buf8(K.wsize)),j>=K.wsize?(n.arraySet(K.window,D,f-K.wsize,K.wsize,0),K.wnext=0,K.whave=K.wsize):(j<(Q=K.wsize-K.wnext)&&(Q=j),n.arraySet(K.window,D,f-j,Q,K.wnext),(j-=Q)?(n.arraySet(K.window,D,f-j,j,0),K.wnext=j,K.whave=K.wsize):(K.wnext+=Q,K.wnext===K.wsize&&(K.wnext=0),K.whave<K.wsize&&(K.whave+=Q))),0}r.inflateReset=E,r.inflateReset2=C,r.inflateResetKeep=S,r.inflateInit=function(z){return R(z,15)},r.inflateInit2=R,r.inflate=function(z,D){var f,j,Q,K,se,X,de,L,T,J,k,B,I,H,N,F,ie,fe,ae,ge,d,V,U,x,_=0,P=new n.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!z||!z.state||!z.output||!z.input&&z.avail_in!==0)return l;(f=z.state).mode===12&&(f.mode=13),se=z.next_out,Q=z.output,de=z.avail_out,K=z.next_in,j=z.input,X=z.avail_in,L=f.hold,T=f.bits,J=X,k=de,V=b;e:for(;;)switch(f.mode){case m:if(f.wrap===0){f.mode=13;break}for(;T<16;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if(2&f.wrap&&L===35615){P[f.check=0]=255&L,P[1]=L>>>8&255,f.check=o(f.check,P,2,0),T=L=0,f.mode=2;break}if(f.flags=0,f.head&&(f.head.done=!1),!(1&f.wrap)||(((255&L)<<8)+(L>>8))%31){z.msg="incorrect header check",f.mode=30;break}if((15&L)!=8){z.msg="unknown compression method",f.mode=30;break}if(T-=4,d=8+(15&(L>>>=4)),f.wbits===0)f.wbits=d;else if(d>f.wbits){z.msg="invalid window size",f.mode=30;break}f.dmax=1<<d,z.adler=f.check=1,f.mode=512&L?10:12,T=L=0;break;case 2:for(;T<16;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if(f.flags=L,(255&f.flags)!=8){z.msg="unknown compression method",f.mode=30;break}if(57344&f.flags){z.msg="unknown header flags set",f.mode=30;break}f.head&&(f.head.text=L>>8&1),512&f.flags&&(P[0]=255&L,P[1]=L>>>8&255,f.check=o(f.check,P,2,0)),T=L=0,f.mode=3;case 3:for(;T<32;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}f.head&&(f.head.time=L),512&f.flags&&(P[0]=255&L,P[1]=L>>>8&255,P[2]=L>>>16&255,P[3]=L>>>24&255,f.check=o(f.check,P,4,0)),T=L=0,f.mode=4;case 4:for(;T<16;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}f.head&&(f.head.xflags=255&L,f.head.os=L>>8),512&f.flags&&(P[0]=255&L,P[1]=L>>>8&255,f.check=o(f.check,P,2,0)),T=L=0,f.mode=5;case 5:if(1024&f.flags){for(;T<16;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}f.length=L,f.head&&(f.head.extra_len=L),512&f.flags&&(P[0]=255&L,P[1]=L>>>8&255,f.check=o(f.check,P,2,0)),T=L=0}else f.head&&(f.head.extra=null);f.mode=6;case 6:if(1024&f.flags&&(X<(B=f.length)&&(B=X),B&&(f.head&&(d=f.head.extra_len-f.length,f.head.extra||(f.head.extra=new Array(f.head.extra_len)),n.arraySet(f.head.extra,j,K,B,d)),512&f.flags&&(f.check=o(f.check,j,B,K)),X-=B,K+=B,f.length-=B),f.length))break e;f.length=0,f.mode=7;case 7:if(2048&f.flags){if(X===0)break e;for(B=0;d=j[K+B++],f.head&&d&&f.length<65536&&(f.head.name+=String.fromCharCode(d)),d&&B<X;);if(512&f.flags&&(f.check=o(f.check,j,B,K)),X-=B,K+=B,d)break e}else f.head&&(f.head.name=null);f.length=0,f.mode=8;case 8:if(4096&f.flags){if(X===0)break e;for(B=0;d=j[K+B++],f.head&&d&&f.length<65536&&(f.head.comment+=String.fromCharCode(d)),d&&B<X;);if(512&f.flags&&(f.check=o(f.check,j,B,K)),X-=B,K+=B,d)break e}else f.head&&(f.head.comment=null);f.mode=9;case 9:if(512&f.flags){for(;T<16;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if(L!==(65535&f.check)){z.msg="header crc mismatch",f.mode=30;break}T=L=0}f.head&&(f.head.hcrc=f.flags>>9&1,f.head.done=!0),z.adler=f.check=0,f.mode=12;break;case 10:for(;T<32;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}z.adler=f.check=p(L),T=L=0,f.mode=11;case 11:if(f.havedict===0)return z.next_out=se,z.avail_out=de,z.next_in=K,z.avail_in=X,f.hold=L,f.bits=T,2;z.adler=f.check=1,f.mode=12;case 12:if(D===5||D===6)break e;case 13:if(f.last){L>>>=7&T,T-=7&T,f.mode=27;break}for(;T<3;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}switch(f.last=1&L,T-=1,3&(L>>>=1)){case 0:f.mode=14;break;case 1:if(W(f),f.mode=20,D!==6)break;L>>>=2,T-=2;break e;case 2:f.mode=17;break;case 3:z.msg="invalid block type",f.mode=30}L>>>=2,T-=2;break;case 14:for(L>>>=7&T,T-=7&T;T<32;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if((65535&L)!=(L>>>16^65535)){z.msg="invalid stored block lengths",f.mode=30;break}if(f.length=65535&L,T=L=0,f.mode=15,D===6)break e;case 15:f.mode=16;case 16:if(B=f.length){if(X<B&&(B=X),de<B&&(B=de),B===0)break e;n.arraySet(Q,j,K,B,se),X-=B,K+=B,de-=B,se+=B,f.length-=B;break}f.mode=12;break;case 17:for(;T<14;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if(f.nlen=257+(31&L),L>>>=5,T-=5,f.ndist=1+(31&L),L>>>=5,T-=5,f.ncode=4+(15&L),L>>>=4,T-=4,286<f.nlen||30<f.ndist){z.msg="too many length or distance symbols",f.mode=30;break}f.have=0,f.mode=18;case 18:for(;f.have<f.ncode;){for(;T<3;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}f.lens[Z[f.have++]]=7&L,L>>>=3,T-=3}for(;f.have<19;)f.lens[Z[f.have++]]=0;if(f.lencode=f.lendyn,f.lenbits=7,U={bits:f.lenbits},V=c(0,f.lens,0,19,f.lencode,0,f.work,U),f.lenbits=U.bits,V){z.msg="invalid code lengths set",f.mode=30;break}f.have=0,f.mode=19;case 19:for(;f.have<f.nlen+f.ndist;){for(;F=(_=f.lencode[L&(1<<f.lenbits)-1])>>>16&255,ie=65535&_,!((N=_>>>24)<=T);){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if(ie<16)L>>>=N,T-=N,f.lens[f.have++]=ie;else{if(ie===16){for(x=N+2;T<x;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if(L>>>=N,T-=N,f.have===0){z.msg="invalid bit length repeat",f.mode=30;break}d=f.lens[f.have-1],B=3+(3&L),L>>>=2,T-=2}else if(ie===17){for(x=N+3;T<x;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}T-=N,d=0,B=3+(7&(L>>>=N)),L>>>=3,T-=3}else{for(x=N+7;T<x;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}T-=N,d=0,B=11+(127&(L>>>=N)),L>>>=7,T-=7}if(f.have+B>f.nlen+f.ndist){z.msg="invalid bit length repeat",f.mode=30;break}for(;B--;)f.lens[f.have++]=d}}if(f.mode===30)break;if(f.lens[256]===0){z.msg="invalid code -- missing end-of-block",f.mode=30;break}if(f.lenbits=9,U={bits:f.lenbits},V=c(v,f.lens,0,f.nlen,f.lencode,0,f.work,U),f.lenbits=U.bits,V){z.msg="invalid literal/lengths set",f.mode=30;break}if(f.distbits=6,f.distcode=f.distdyn,U={bits:f.distbits},V=c(g,f.lens,f.nlen,f.ndist,f.distcode,0,f.work,U),f.distbits=U.bits,V){z.msg="invalid distances set",f.mode=30;break}if(f.mode=20,D===6)break e;case 20:f.mode=21;case 21:if(6<=X&&258<=de){z.next_out=se,z.avail_out=de,z.next_in=K,z.avail_in=X,f.hold=L,f.bits=T,u(z,k),se=z.next_out,Q=z.output,de=z.avail_out,K=z.next_in,j=z.input,X=z.avail_in,L=f.hold,T=f.bits,f.mode===12&&(f.back=-1);break}for(f.back=0;F=(_=f.lencode[L&(1<<f.lenbits)-1])>>>16&255,ie=65535&_,!((N=_>>>24)<=T);){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if(F&&(240&F)==0){for(fe=N,ae=F,ge=ie;F=(_=f.lencode[ge+((L&(1<<fe+ae)-1)>>fe)])>>>16&255,ie=65535&_,!(fe+(N=_>>>24)<=T);){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}L>>>=fe,T-=fe,f.back+=fe}if(L>>>=N,T-=N,f.back+=N,f.length=ie,F===0){f.mode=26;break}if(32&F){f.back=-1,f.mode=12;break}if(64&F){z.msg="invalid literal/length code",f.mode=30;break}f.extra=15&F,f.mode=22;case 22:if(f.extra){for(x=f.extra;T<x;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}f.length+=L&(1<<f.extra)-1,L>>>=f.extra,T-=f.extra,f.back+=f.extra}f.was=f.length,f.mode=23;case 23:for(;F=(_=f.distcode[L&(1<<f.distbits)-1])>>>16&255,ie=65535&_,!((N=_>>>24)<=T);){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if((240&F)==0){for(fe=N,ae=F,ge=ie;F=(_=f.distcode[ge+((L&(1<<fe+ae)-1)>>fe)])>>>16&255,ie=65535&_,!(fe+(N=_>>>24)<=T);){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}L>>>=fe,T-=fe,f.back+=fe}if(L>>>=N,T-=N,f.back+=N,64&F){z.msg="invalid distance code",f.mode=30;break}f.offset=ie,f.extra=15&F,f.mode=24;case 24:if(f.extra){for(x=f.extra;T<x;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}f.offset+=L&(1<<f.extra)-1,L>>>=f.extra,T-=f.extra,f.back+=f.extra}if(f.offset>f.dmax){z.msg="invalid distance too far back",f.mode=30;break}f.mode=25;case 25:if(de===0)break e;if(B=k-de,f.offset>B){if((B=f.offset-B)>f.whave&&f.sane){z.msg="invalid distance too far back",f.mode=30;break}I=B>f.wnext?(B-=f.wnext,f.wsize-B):f.wnext-B,B>f.length&&(B=f.length),H=f.window}else H=Q,I=se-f.offset,B=f.length;for(de<B&&(B=de),de-=B,f.length-=B;Q[se++]=H[I++],--B;);f.length===0&&(f.mode=21);break;case 26:if(de===0)break e;Q[se++]=f.length,de--,f.mode=21;break;case 27:if(f.wrap){for(;T<32;){if(X===0)break e;X--,L|=j[K++]<<T,T+=8}if(k-=de,z.total_out+=k,f.total+=k,k&&(z.adler=f.check=f.flags?o(f.check,Q,k,se-k):i(f.check,Q,k,se-k)),k=de,(f.flags?L:p(L))!==f.check){z.msg="incorrect data check",f.mode=30;break}T=L=0}f.mode=28;case 28:if(f.wrap&&f.flags){for(;T<32;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if(L!==(4294967295&f.total)){z.msg="incorrect length check",f.mode=30;break}T=L=0}f.mode=29;case 29:V=1;break e;case 30:V=-3;break e;case 31:return-4;case 32:default:return l}return z.next_out=se,z.avail_out=de,z.next_in=K,z.avail_in=X,f.hold=L,f.bits=T,(f.wsize||k!==z.avail_out&&f.mode<30&&(f.mode<27||D!==4))&&Y(z,z.output,z.next_out,k-z.avail_out)?(f.mode=31,-4):(J-=z.avail_in,k-=z.avail_out,z.total_in+=J,z.total_out+=k,f.total+=k,f.wrap&&k&&(z.adler=f.check=f.flags?o(f.check,Q,k,z.next_out-k):i(f.check,Q,k,z.next_out-k)),z.data_type=f.bits+(f.last?64:0)+(f.mode===12?128:0)+(f.mode===20||f.mode===15?256:0),(J==0&&k===0||D===4)&&V===b&&(V=-5),V)},r.inflateEnd=function(z){if(!z||!z.state)return l;var D=z.state;return D.window&&(D.window=null),z.state=null,b},r.inflateGetHeader=function(z,D){var f;return z&&z.state?(2&(f=z.state).wrap)==0?l:((f.head=D).done=!1,b):l},r.inflateSetDictionary=function(z,D){var f,j=D.length;return z&&z.state?(f=z.state).wrap!==0&&f.mode!==11?l:f.mode===11&&i(1,D,j,0)!==f.check?-3:Y(z,D,j,j)?(f.mode=31,-4):(f.havedict=1,b):l},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,s,r){var n=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(v,g,b,l,m,h,y,p){var w,S,E,C,R,A,M,q,W,Y=p.bits,z=0,D=0,f=0,j=0,Q=0,K=0,se=0,X=0,de=0,L=0,T=null,J=0,k=new n.Buf16(16),B=new n.Buf16(16),I=null,H=0;for(z=0;z<=15;z++)k[z]=0;for(D=0;D<l;D++)k[g[b+D]]++;for(Q=Y,j=15;1<=j&&k[j]===0;j--);if(j<Q&&(Q=j),j===0)return m[h++]=20971520,m[h++]=20971520,p.bits=1,0;for(f=1;f<j&&k[f]===0;f++);for(Q<f&&(Q=f),z=X=1;z<=15;z++)if(X<<=1,(X-=k[z])<0)return-1;if(0<X&&(v===0||j!==1))return-1;for(B[1]=0,z=1;z<15;z++)B[z+1]=B[z]+k[z];for(D=0;D<l;D++)g[b+D]!==0&&(y[B[g[b+D]]++]=D);if(A=v===0?(T=I=y,19):v===1?(T=i,J-=257,I=o,H-=257,256):(T=u,I=c,-1),z=f,R=h,se=D=L=0,E=-1,C=(de=1<<(K=Q))-1,v===1&&852<de||v===2&&592<de)return 1;for(;;){for(M=z-se,W=y[D]<A?(q=0,y[D]):y[D]>A?(q=I[H+y[D]],T[J+y[D]]):(q=96,0),w=1<<z-se,f=S=1<<K;m[R+(L>>se)+(S-=w)]=M<<24|q<<16|W|0,S!==0;);for(w=1<<z-1;L&w;)w>>=1;if(w!==0?(L&=w-1,L+=w):L=0,D++,--k[z]==0){if(z===j)break;z=g[b+y[D]]}if(Q<z&&(L&C)!==E){for(se===0&&(se=Q),R+=f,X=1<<(K=z-se);K+se<j&&!((X-=k[K+se])<=0);)K++,X<<=1;if(de+=1<<K,v===1&&852<de||v===2&&592<de)return 1;m[E=L&C]=Q<<24|K<<16|R-h|0}}return L!==0&&(m[R+L]=z-se<<24|64<<16|0),p.bits=Q,0}},{"../utils/common":41}],51:[function(t,s,r){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,s,r){var n=t("../utils/common"),i=0,o=1;function u(_){for(var P=_.length;0<=--P;)_[P]=0}var c=0,v=29,g=256,b=g+1+v,l=30,m=19,h=2*b+1,y=15,p=16,w=7,S=256,E=16,C=17,R=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(b+2));u(Y);var z=new Array(2*l);u(z);var D=new Array(512);u(D);var f=new Array(256);u(f);var j=new Array(v);u(j);var Q,K,se,X=new Array(l);function de(_,P,Z,$,O){this.static_tree=_,this.extra_bits=P,this.extra_base=Z,this.elems=$,this.max_length=O,this.has_stree=_&&_.length}function L(_,P){this.dyn_tree=_,this.max_code=0,this.stat_desc=P}function T(_){return _<256?D[_]:D[256+(_>>>7)]}function J(_,P){_.pending_buf[_.pending++]=255&P,_.pending_buf[_.pending++]=P>>>8&255}function k(_,P,Z){_.bi_valid>p-Z?(_.bi_buf|=P<<_.bi_valid&65535,J(_,_.bi_buf),_.bi_buf=P>>p-_.bi_valid,_.bi_valid+=Z-p):(_.bi_buf|=P<<_.bi_valid&65535,_.bi_valid+=Z)}function B(_,P,Z){k(_,Z[2*P],Z[2*P+1])}function I(_,P){for(var Z=0;Z|=1&_,_>>>=1,Z<<=1,0<--P;);return Z>>>1}function H(_,P,Z){var $,O,G=new Array(y+1),re=0;for($=1;$<=y;$++)G[$]=re=re+Z[$-1]<<1;for(O=0;O<=P;O++){var ne=_[2*O+1];ne!==0&&(_[2*O]=I(G[ne]++,ne))}}function N(_){var P;for(P=0;P<b;P++)_.dyn_ltree[2*P]=0;for(P=0;P<l;P++)_.dyn_dtree[2*P]=0;for(P=0;P<m;P++)_.bl_tree[2*P]=0;_.dyn_ltree[2*S]=1,_.opt_len=_.static_len=0,_.last_lit=_.matches=0}function F(_){8<_.bi_valid?J(_,_.bi_buf):0<_.bi_valid&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0}function ie(_,P,Z,$){var O=2*P,G=2*Z;return _[O]<_[G]||_[O]===_[G]&&$[P]<=$[Z]}function fe(_,P,Z){for(var $=_.heap[Z],O=Z<<1;O<=_.heap_len&&(O<_.heap_len&&ie(P,_.heap[O+1],_.heap[O],_.depth)&&O++,!ie(P,$,_.heap[O],_.depth));)_.heap[Z]=_.heap[O],Z=O,O<<=1;_.heap[Z]=$}function ae(_,P,Z){var $,O,G,re,ne=0;if(_.last_lit!==0)for(;$=_.pending_buf[_.d_buf+2*ne]<<8|_.pending_buf[_.d_buf+2*ne+1],O=_.pending_buf[_.l_buf+ne],ne++,$===0?B(_,O,P):(B(_,(G=f[O])+g+1,P),(re=A[G])!==0&&k(_,O-=j[G],re),B(_,G=T(--$),Z),(re=M[G])!==0&&k(_,$-=X[G],re)),ne<_.last_lit;);B(_,S,P)}function ge(_,P){var Z,$,O,G=P.dyn_tree,re=P.stat_desc.static_tree,ne=P.stat_desc.has_stree,le=P.stat_desc.elems,he=-1;for(_.heap_len=0,_.heap_max=h,Z=0;Z<le;Z++)G[2*Z]!==0?(_.heap[++_.heap_len]=he=Z,_.depth[Z]=0):G[2*Z+1]=0;for(;_.heap_len<2;)G[2*(O=_.heap[++_.heap_len]=he<2?++he:0)]=1,_.depth[O]=0,_.opt_len--,ne&&(_.static_len-=re[2*O+1]);for(P.max_code=he,Z=_.heap_len>>1;1<=Z;Z--)fe(_,G,Z);for(O=le;Z=_.heap[1],_.heap[1]=_.heap[_.heap_len--],fe(_,G,1),$=_.heap[1],_.heap[--_.heap_max]=Z,_.heap[--_.heap_max]=$,G[2*O]=G[2*Z]+G[2*$],_.depth[O]=(_.depth[Z]>=_.depth[$]?_.depth[Z]:_.depth[$])+1,G[2*Z+1]=G[2*$+1]=O,_.heap[1]=O++,fe(_,G,1),2<=_.heap_len;);_.heap[--_.heap_max]=_.heap[1],function(me,Ce){var He,$e,it,xe,Ie,Yt,Je=Ce.dyn_tree,yn=Ce.max_code,Kr=Ce.stat_desc.static_tree,Wr=Ce.stat_desc.has_stree,Hr=Ce.stat_desc.extra_bits,_n=Ce.stat_desc.extra_base,bt=Ce.stat_desc.max_length,At=0;for(xe=0;xe<=y;xe++)me.bl_count[xe]=0;for(Je[2*me.heap[me.heap_max]+1]=0,He=me.heap_max+1;He<h;He++)bt<(xe=Je[2*Je[2*($e=me.heap[He])+1]+1]+1)&&(xe=bt,At++),Je[2*$e+1]=xe,yn<$e||(me.bl_count[xe]++,Ie=0,_n<=$e&&(Ie=Hr[$e-_n]),Yt=Je[2*$e],me.opt_len+=Yt*(xe+Ie),Wr&&(me.static_len+=Yt*(Kr[2*$e+1]+Ie)));if(At!==0){do{for(xe=bt-1;me.bl_count[xe]===0;)xe--;me.bl_count[xe]--,me.bl_count[xe+1]+=2,me.bl_count[bt]--,At-=2}while(0<At);for(xe=bt;xe!==0;xe--)for($e=me.bl_count[xe];$e!==0;)yn<(it=me.heap[--He])||(Je[2*it+1]!==xe&&(me.opt_len+=(xe-Je[2*it+1])*Je[2*it],Je[2*it+1]=xe),$e--)}}(_,P),H(G,he,_.bl_count)}function d(_,P,Z){var $,O,G=-1,re=P[1],ne=0,le=7,he=4;for(re===0&&(le=138,he=3),P[2*(Z+1)+1]=65535,$=0;$<=Z;$++)O=re,re=P[2*($+1)+1],++ne<le&&O===re||(ne<he?_.bl_tree[2*O]+=ne:O!==0?(O!==G&&_.bl_tree[2*O]++,_.bl_tree[2*E]++):ne<=10?_.bl_tree[2*C]++:_.bl_tree[2*R]++,G=O,he=(ne=0)===re?(le=138,3):O===re?(le=6,3):(le=7,4))}function V(_,P,Z){var $,O,G=-1,re=P[1],ne=0,le=7,he=4;for(re===0&&(le=138,he=3),$=0;$<=Z;$++)if(O=re,re=P[2*($+1)+1],!(++ne<le&&O===re)){if(ne<he)for(;B(_,O,_.bl_tree),--ne!=0;);else O!==0?(O!==G&&(B(_,O,_.bl_tree),ne--),B(_,E,_.bl_tree),k(_,ne-3,2)):ne<=10?(B(_,C,_.bl_tree),k(_,ne-3,3)):(B(_,R,_.bl_tree),k(_,ne-11,7));G=O,he=(ne=0)===re?(le=138,3):O===re?(le=6,3):(le=7,4)}}u(X);var U=!1;function x(_,P,Z,$){k(_,(c<<1)+($?1:0),3),function(O,G,re,ne){F(O),ne&&(J(O,re),J(O,~re)),n.arraySet(O.pending_buf,O.window,G,re,O.pending),O.pending+=re}(_,P,Z,!0)}r._tr_init=function(_){U||(function(){var P,Z,$,O,G,re=new Array(y+1);for(O=$=0;O<v-1;O++)for(j[O]=$,P=0;P<1<<A[O];P++)f[$++]=O;for(f[$-1]=O,O=G=0;O<16;O++)for(X[O]=G,P=0;P<1<<M[O];P++)D[G++]=O;for(G>>=7;O<l;O++)for(X[O]=G<<7,P=0;P<1<<M[O]-7;P++)D[256+G++]=O;for(Z=0;Z<=y;Z++)re[Z]=0;for(P=0;P<=143;)Y[2*P+1]=8,P++,re[8]++;for(;P<=255;)Y[2*P+1]=9,P++,re[9]++;for(;P<=279;)Y[2*P+1]=7,P++,re[7]++;for(;P<=287;)Y[2*P+1]=8,P++,re[8]++;for(H(Y,b+1,re),P=0;P<l;P++)z[2*P+1]=5,z[2*P]=I(P,5);Q=new de(Y,A,g+1,b,y),K=new de(z,M,0,l,y),se=new de(new Array(0),q,0,m,w)}(),U=!0),_.l_desc=new L(_.dyn_ltree,Q),_.d_desc=new L(_.dyn_dtree,K),_.bl_desc=new L(_.bl_tree,se),_.bi_buf=0,_.bi_valid=0,N(_)},r._tr_stored_block=x,r._tr_flush_block=function(_,P,Z,$){var O,G,re=0;0<_.level?(_.strm.data_type===2&&(_.strm.data_type=function(ne){var le,he=4093624447;for(le=0;le<=31;le++,he>>>=1)if(1&he&&ne.dyn_ltree[2*le]!==0)return i;if(ne.dyn_ltree[18]!==0||ne.dyn_ltree[20]!==0||ne.dyn_ltree[26]!==0)return o;for(le=32;le<g;le++)if(ne.dyn_ltree[2*le]!==0)return o;return i}(_)),ge(_,_.l_desc),ge(_,_.d_desc),re=function(ne){var le;for(d(ne,ne.dyn_ltree,ne.l_desc.max_code),d(ne,ne.dyn_dtree,ne.d_desc.max_code),ge(ne,ne.bl_desc),le=m-1;3<=le&&ne.bl_tree[2*W[le]+1]===0;le--);return ne.opt_len+=3*(le+1)+5+5+4,le}(_),O=_.opt_len+3+7>>>3,(G=_.static_len+3+7>>>3)<=O&&(O=G)):O=G=Z+5,Z+4<=O&&P!==-1?x(_,P,Z,$):_.strategy===4||G===O?(k(_,2+($?1:0),3),ae(_,Y,z)):(k(_,4+($?1:0),3),function(ne,le,he,me){var Ce;for(k(ne,le-257,5),k(ne,he-1,5),k(ne,me-4,4),Ce=0;Ce<me;Ce++)k(ne,ne.bl_tree[2*W[Ce]+1],3);V(ne,ne.dyn_ltree,le-1),V(ne,ne.dyn_dtree,he-1)}(_,_.l_desc.max_code+1,_.d_desc.max_code+1,re+1),ae(_,_.dyn_ltree,_.dyn_dtree)),N(_),$&&F(_)},r._tr_tally=function(_,P,Z){return _.pending_buf[_.d_buf+2*_.last_lit]=P>>>8&255,_.pending_buf[_.d_buf+2*_.last_lit+1]=255&P,_.pending_buf[_.l_buf+_.last_lit]=255&Z,_.last_lit++,P===0?_.dyn_ltree[2*Z]++:(_.matches++,P--,_.dyn_ltree[2*(f[Z]+g+1)]++,_.dyn_dtree[2*T(P)]++),_.last_lit===_.lit_bufsize-1},r._tr_align=function(_){k(_,2,3),B(_,S,Y),function(P){P.bi_valid===16?(J(P,P.bi_buf),P.bi_buf=0,P.bi_valid=0):8<=P.bi_valid&&(P.pending_buf[P.pending++]=255&P.bi_buf,P.bi_buf>>=8,P.bi_valid-=8)}(_)}},{"../utils/common":41}],53:[function(t,s,r){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,s,r){(function(n){(function(i,o){if(!i.setImmediate){var u,c,v,g,b=1,l={},m=!1,h=i.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(i);y=y&&y.setTimeout?y:i,u={}.toString.call(i.process)==="[object process]"?function(E){process.nextTick(function(){w(E)})}:function(){if(i.postMessage&&!i.importScripts){var E=!0,C=i.onmessage;return i.onmessage=function(){E=!1},i.postMessage("","*"),i.onmessage=C,E}}()?(g="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",S,!1):i.attachEvent("onmessage",S),function(E){i.postMessage(g+E,"*")}):i.MessageChannel?((v=new MessageChannel).port1.onmessage=function(E){w(E.data)},function(E){v.port2.postMessage(E)}):h&&"onreadystatechange"in h.createElement("script")?(c=h.documentElement,function(E){var C=h.createElement("script");C.onreadystatechange=function(){w(E),C.onreadystatechange=null,c.removeChild(C),C=null},c.appendChild(C)}):function(E){setTimeout(w,0,E)},y.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var C=new Array(arguments.length-1),R=0;R<C.length;R++)C[R]=arguments[R+1];var A={callback:E,args:C};return l[b]=A,u(b),b++},y.clearImmediate=p}function p(E){delete l[E]}function w(E){if(m)setTimeout(w,0,E);else{var C=l[E];if(C){m=!0;try{(function(R){var A=R.callback,M=R.args;switch(M.length){case 0:A();break;case 1:A(M[0]);break;case 2:A(M[0],M[1]);break;case 3:A(M[0],M[1],M[2]);break;default:A.apply(o,M)}})(C)}finally{p(E),m=!1}}}}function S(E){E.source===i&&typeof E.data=="string"&&E.data.indexOf(g)===0&&w(+E.data.slice(g.length))}})(typeof self=="undefined"?n===void 0?this:n:self)}).call(this,typeof ke!="undefined"?ke:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[10])(10)})})(Ur);var Es=Ur.exports;const As=rt({__name:"FolderDownloader",props:{node:{}},emits:[...Le.emits],setup(e){const a=e,t=oe(0),s=Ye(),r=v=>{const g=[];for(let b of v)b.type==="blob"?g.push(b):b.type==="tree"&&g.push(...r(b.children||[]));return g};(async()=>{const v=a.node.path,g=r(a.node.children||[]),b=[].concat(...g.map(p=>{const w=[];for(const[S,E]of Object.entries(p.content_types))S==="meta"||S==="thumb"||w.push(E);return w})),l=b.length,m=Es();for(const[p,w]of b.entries()){const S=await _r({url:w.url,token:s.token});m.file(w.path.substring(v.length+1),S),t.value=Math.ceil((p+1)/l*100)}const h=await m.generateAsync({type:"blob"}),y=document.createElement("a");y.href=URL.createObjectURL(h),y.download=`${a.node.name}.zip`,y.click(),URL.revokeObjectURL(y.href)})().then(()=>{u()});const{dialogRef:i,onDialogHide:o,onDialogOK:u,onDialogCancel:c}=Le();return(v,g)=>(pe(),Te(xt,{ref_key:"dialogRef",ref:i,onHide:be(o),square:""},{default:ve(()=>[ue(Ct,{class:"q-dialog-plugin"},{default:ve(()=>[ue(St,{style:{"text-align":"center"}},{default:ve(()=>[ue(zs,{"show-value":"",value:t.value,size:"90px",color:"accent","center-color":"white","track-color":"transparent","animation-speed":10},{default:ve(()=>[ue(Ae,{name:"mdi-folder-download"})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),Rs={style:{flex:"1","overflow-y":"auto","padding-top":"4px","background-color":"white"}},Ps={class:"row"},Os=["src"],qs={style:{display:"flex","flex-direction":"column","justify-content":"center"}},Bs=ce("div",null,null,-1),Ms=rt({__name:"IndexPage",setup(e){const a=Pr();Li({async clear(){return await t.backend.kv_mdel({pattern:"cache:%"})},async get(C,R=null){let A=await t.backend.kv_get({key:C,or:R});return A===null&&(A=R),A},async set(C,R){return await t.backend.kv_set({key:C,value:R})}});const t=Ye();t.loadState();const s=oe([]),r=oe([]),n=oe(),i=oe([]),o=()=>ee("div",{class:"row justify-center q-my-xl"},['Select "Add Repository" from the menu to get started.']),u=C=>{C.map(R=>{var A;return(A=n.value)==null?void 0:A.getNodeByKey(R)}).forEach(R=>{var A;if(R)for(let M of R.children)((A=M==null?void 0:M.content_types)==null?void 0:A.thumb)&&!(M!=null&&M.img)&&t.setNodeThumbnail(M)})},c=te(()=>{var C;return s.value.length>0?(C=n.value)==null?void 0:C.getNodeByKey(s.value):null});_e(r,(C,R)=>{R.forEach(A=>{var M;if(C.indexOf(A)===-1){const q=(M=n.value)==null?void 0:M.getNodeByKey(A);q.type==="tree"&&(q.icon="mdi-folder")}}),C.forEach(A=>{var M;if(R.indexOf(A)===-1){const q=(M=n.value)==null?void 0:M.getNodeByKey(A);q.type==="tree"&&(q.icon="mdi-folder")}})}),_e(()=>t.search,(C,R)=>{var A;C&&!R?(i.value=[...r.value],(A=n.value)==null||A.expandAll()):R&&!C&&(r.value=[...i.value])});const v=async({nodeId:C})=>{var M;const A=((M=n.value)==null?void 0:M.getNodeByKey(C)).id;r.value=r.value.filter(q=>q!=A&&!q.startsWith(A+"|")),await t.reloadCollection({nodeId:C})},g=()=>{a.dialog({component:bo})},b=()=>{a.dialog({component:Mn}).onOk(C=>{console.log("OK",C);const R=hn();t.tree.push({...C,id:R,type:"repo",icon:"mdi-github",selectable:!1,children:[]}),t.saveCollections(),v({nodeId:R})})},l=()=>{a.dialog({component:Ss}).onOk(C=>{C&&v({nodeId:C})})},m=(C,R)=>C.type==="repo"?!1:R.toLowerCase().split(/\s+/).every(q=>{var Y;if(C.path.toLowerCase().indexOf(q)!==-1)return!0;let W=(Y=C.meta)==null?void 0:Y.keywords;return W||(W=""),W.indexOf(q)!==-1}),h=({nodeId:C})=>{var M,q;const R=(M=n.value)==null?void 0:M.getNodeByKey(C);let A=R;R.type==="tree"&&(A=(q=n.value)==null?void 0:q.getNodeByKey(R.id.split("|")[0])),a.dialog({component:Ln,componentProps:{collection:A,initialValue:{content_types:{}}}}).onOk(W=>{v({nodeId:W.id})})},y=({nodeId:C,contentType:R})=>{var q;const A=(q=n.value)==null?void 0:q.getNodeByKey(C),M=A.content_types;R=R||(M.f3d?"f3d":M.step?"step":M.dxf?"dxf":M.svg&&"svg"),t.backend.import_model({url:M[R].url,token:t.token,filename:A.name,content_type:R})},p=({nodeId:C,contentType:R})=>{var q;const A=(q=n.value)==null?void 0:q.getNodeByKey(C),M=A.content_types;R=R||(M.f3d?"f3d":M.step?"step":M.dxf?"dxf":M.svg&&"svg"),t.backend.open_model({url:M[R].url,token:t.token,filename:A.name,content_type:R})},w=({nodeId:C})=>{var M;const R=(M=n.value)==null?void 0:M.getNodeByKey(C),A=R.type==="repo"?Mn:Ln;a.dialog({component:A,componentProps:{initialValue:R}}).onOk(q=>{R.name=q.name;const W=JSON.stringify(q.repositories),Y=JSON.stringify(R.repositories);W!=Y&&(R.repositories=q.repositories,v({nodeId:q.id})),t.saveCollections()})},S=async({nodeId:C})=>{var A;const R=(A=n.value)==null?void 0:A.getNodeByKey(C);a.dialog({component:As,componentProps:{node:R},persistent:!0})},E=te(()=>{var C,R;return((C=t.backend)==null?void 0:C.version)<((R=t.backend)==null?void 0:R.latestVersion)});return(C,R)=>(pe(),Te(Mi,{class:"column",style:vt({cursor:be(t).globalCursor||void 0})},{default:ve(()=>[ue($i,{class:"text-white shadow-2",style:{"z-index":"2"}},{default:ve(()=>[ue(Ri,{class:"full-width","bg-color":"white",modelValue:be(t).search,"onUpdate:modelValue":R[1]||(R[1]=A=>be(t).search=A),dense:"",square:"",outlined:"",clearable:""},{prepend:ve(()=>[ue(Ae,{name:"search"})]),after:ve(()=>[ue(ze,{flat:"",square:"",dense:"",icon:"more_vert"},{default:ve(()=>[E.value?(pe(),Te(ln,{key:0,color:"orange",floating:""},{default:ve(()=>[qe("!")]),_:1})):Se("",!0),ue(Di,{square:""},{default:ve(()=>[ue(qi,{dense:"",style:{"min-width":"150px"}},{default:ve(()=>[we((pe(),Te(ct,{dense:"",clickable:"",onClick:g},{default:ve(()=>[ue(je,{avatar:""},{default:ve(()=>[ue(Ae,{name:"settings"})]),_:1}),ue(je,null,{default:ve(()=>[qe("Settings")]),_:1})]),_:1})),[[yt]]),we((pe(),Te(ct,{dense:"",clickable:"",onClick:b},{default:ve(()=>[ue(je,{avatar:""},{default:ve(()=>[ue(Ae,{name:"add"})]),_:1}),ue(je,null,{default:ve(()=>[qe("Add Repository")]),_:1})]),_:1})),[[yt]]),be(t).preferences.showManagementUI?we((pe(),Te(ct,{key:0,dense:"",clickable:"",onClick:l},{default:ve(()=>[ue(je,{avatar:""},{default:ve(()=>[ue(Ae,{name:"image"})]),_:1}),ue(je,null,{default:ve(()=>[qe("Auto-Thumb")]),_:1})]),_:1})),[[yt]]):Se("",!0),E.value?we((pe(),Te(ct,{key:1,dense:"",clickable:"",class:"bg-orange",href:be(t).backend.updateUrl},{default:ve(()=>[ue(je,{avatar:""},{default:ve(()=>[ue(Ae,{name:"upgrade",color:"white"})]),_:1}),ue(je,{class:"text-white"},{default:ve(()=>[qe("Update Available")]),_:1})]),_:1},8,["href"])),[[yt]]):Se("",!0),ue(dr),we((pe(),Te(ct,{dense:"",clickable:"",onClick:R[0]||(R[0]=()=>{be(t).backend.close()})},{default:ve(()=>[ue(je,{avatar:""},{default:ve(()=>[ue(Ae,{name:"close"})]),_:1}),ue(je,null,{default:ve(()=>[qe("Close")]),_:1})]),_:1})),[[yt]])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),ce("div",Rs,[ue(be(ya),{dense:"",showManagementUI:be(t).preferences.showManagementUI,"no-transition":"",ref_key:"treeRef",ref:n,filter:be(t).search,"filter-method":m,nodes:be(t).tree,"label-key":"name","node-key":"id","no-selection-unset":"","no-nodes-label":o(),selected:s.value,"onUpdate:selected":R[2]||(R[2]=A=>s.value=A),expanded:r.value,"onUpdate:expanded":[R[3]||(R[3]=A=>r.value=A),u],"onAction:import":y,"onAction:open":p,"onAction:reload":v,"onAction:edit":w,"onAction:upload":h,"onAction:folderDownload":S,style:{flex:"1"},"show-thumbnails":be(t).preferences.showThumbnails,"is-fusion-backend":be(t).backend.isFusion360},{"default-header":ve(A=>[ce("div",Ps,[A.node.img&&be(t).preferences.showThumbnails?(pe(),ye("img",{key:0,class:"q-tree__img q-mr-sm",style:{"border-style":"solid","border-radius":"4px","border-width":"1px","z-index":"1","background-color":"white"},src:A.node.img},null,8,Os)):(pe(),Te(Ae,{key:1,class:"q-tree__icon q-mr-sm",name:A.node.icon,style:vt(A.node.type==="blob"?"border-style: solid; border-radius: 4px; border-width: 1px; z-index: 1; background-color: white":""),size:A.node.type==="blob"?be(t).preferences.showThumbnails?"48px":"24px":void 0},null,8,["name","style","size"])),ce("div",qs,[ce("div",{style:vt({fontWeight:A.node.type==="blob"?"bold":"inherit"})},Ne(A.node.name),5),Bs])])]),_:1},8,["showManagementUI","filter","nodes","no-nodes-label","selected","expanded","show-thumbnails","is-fusion-backend"])]),c.value?(pe(),Te(oo,{key:0,showManagementUI:be(t).preferences.showManagementUI,node:c.value,"onAction:import":y,"onAction:open":p,"onAction:edit":w},null,8,["showManagementUI","node"])):Se("",!0)]),_:1},8,["style"]))}});export{Ms as default};
