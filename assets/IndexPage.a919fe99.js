var $r=Object.defineProperty;var Er=(e,t,n)=>t in e?$r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ve=(e,t,n)=>(Er(e,typeof t!="symbol"?t+"":t,n),n);import{c as we,a as q,h as C,n as zt,d as Me,G as Qe,H as Or,I as Xe,J as zr,r as $,g as Ce,K as At,L as Ee,M as Ar,P as Nr,N as wt,F as pt,O as Ne,w as se,y as nt,z as Je,Q as He,C as Gt,R as dn,S as Le,k as Mr,T as Bn,U as Ln,V as In,W as ht,X as kt,Y as Kn,Z as Dn,$ as jn,a0 as Br,a1 as ct,a2 as Lr,a3 as fn,B as Fn,a4 as Ir,a5 as Nt,a6 as Kr,a7 as Dr,a8 as jr,i as St,e as De,l as Fr,f as Hr,a9 as nn,aa as Jr,ab as Ur,ac as Vr,m as it,ad as Wr,q as rt,ae as Hn,af as rn,ag as Jn,ah as xe,ai as ce,aj as Un,ak as ye,al as Qr,am as Vn,an as Xr,ao as Yr,ap as ln,p as Gr,aq as Wn,ar as Qn,A as Xn,as as Yn,at as ot,au as Zr,av as el,aw as tl,ax as nl,ay as rl,az as le,aA as ll,aB as al,aC as il,aD as ol,t as Q,aE as ie,x as B,v as W,aF as $e,aG as Oe,aH as L,aI as st,aJ as he,u as _e,aK as Ge,aL as Ze,aM as Mt,aN as Bt,aO as dt,aP as Lt,aQ as It,aR as ut,aS as Gn,aT as xt,aU as sl,aV as ul,aW as cl,aX as vn,aY as Ut,aZ as dl,a_ as Vt,a$ as hn,b0 as fl,b1 as vl,b2 as Zn,b3 as hl}from"./index.b98c25f8.js";import{a as je}from"./axios.7331a07d.js";import{a as Zt,Q as ml}from"./QResizeObserver.a4c96369.js";const pl=["top","middle","bottom"];var en=we({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>pl.includes(e)}},setup(e,{slots:t}){const n=q(()=>e.align!==void 0?{verticalAlign:e.align}:null),a=q(()=>{const r=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(r!==void 0?` text-${r}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>C("div",{class:a.value,style:n.value,role:"status","aria-label":e.label},zt(t.default,e.label!==void 0?[e.label]:[]))}}),Be=we({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const n=q(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>C("div",{class:n.value},Me(t.default))}}),at=we({name:"QItem",props:{...Qe,...Or,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:n}){const{proxy:{$q:a}}=Ce(),r=Xe(e,a),{hasLink:l,linkAttrs:i,linkClass:o,linkTag:u,navigateOnClick:s}=zr(),d=$(null),b=$(null),_=q(()=>e.clickable===!0||l.value===!0||e.tag==="label"),f=q(()=>e.disable!==!0&&_.value===!0),p=q(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(r.value===!0?" q-item--dark":"")+(l.value===!0&&e.active===null?o.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(f.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),k=q(()=>{if(e.insetLevel===void 0)return null;const P=a.lang.rtl===!0?"Right":"Left";return{["padding"+P]:16+e.insetLevel*56+"px"}});function N(P){f.value===!0&&(b.value!==null&&(P.qKeyEvent!==!0&&document.activeElement===d.value?b.value.focus():document.activeElement===b.value&&d.value.focus()),s(P))}function R(P){if(f.value===!0&&At(P,13)===!0){Ee(P),P.qKeyEvent=!0;const x=new MouseEvent("click",P);x.qKeyEvent=!0,d.value.dispatchEvent(x)}n("keyup",P)}function D(){const P=Ar(t.default,[]);return f.value===!0&&P.unshift(C("div",{class:"q-focus-helper",tabindex:-1,ref:b})),P}return()=>{const P={ref:d,class:p.value,style:k.value,role:"listitem",onClick:N,onKeyup:R};return f.value===!0?(P.tabindex=e.tabindex||"0",Object.assign(P,i.value)):_.value===!0&&(P["aria-disabled"]="true"),C(u.value,P,D())}}}),gl=we({name:"QList",props:{...Qe,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:t}){const n=Ce(),a=Xe(e,n.proxy.$q),r=q(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(a.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>C(e.tag,{class:r.value},Me(t.default))}});function mt(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),Nr.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const er={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function tr({showing:e,avoidEmit:t,configureAnchorEl:n}){const{props:a,proxy:r,emit:l}=Ce(),i=$(null);let o=null;function u(f){return i.value===null?!1:f===void 0||f.touches===void 0||f.touches.length<=1}const s={};n===void 0&&(Object.assign(s,{hide(f){r.hide(f)},toggle(f){r.toggle(f),f.qAnchorHandled=!0},toggleKey(f){At(f,13)===!0&&s.toggle(f)},contextClick(f){r.hide(f),wt(f),pt(()=>{r.show(f),f.qAnchorHandled=!0})},prevent:wt,mobileTouch(f){if(s.mobileCleanup(f),u(f)!==!0)return;r.hide(f),i.value.classList.add("non-selectable");const p=f.target;Ne(s,"anchor",[[p,"touchmove","mobileCleanup","passive"],[p,"touchend","mobileCleanup","passive"],[p,"touchcancel","mobileCleanup","passive"],[i.value,"contextmenu","prevent","notPassive"]]),o=setTimeout(()=>{o=null,r.show(f),f.qAnchorHandled=!0},300)},mobileCleanup(f){i.value.classList.remove("non-selectable"),o!==null&&(clearTimeout(o),o=null),e.value===!0&&f!==void 0&&mt()}}),n=function(f=a.contextMenu){if(a.noParentEvent===!0||i.value===null)return;let p;f===!0?r.$q.platform.is.mobile===!0?p=[[i.value,"touchstart","mobileTouch","passive"]]:p=[[i.value,"mousedown","hide","passive"],[i.value,"contextmenu","contextClick","notPassive"]]:p=[[i.value,"click","toggle","passive"],[i.value,"keyup","toggleKey","passive"]],Ne(s,"anchor",p)});function d(){He(s,"anchor")}function b(f){for(i.value=f;i.value.classList.contains("q-anchor--skip");)i.value=i.value.parentNode;n()}function _(){if(a.target===!1||a.target===""||r.$el.parentNode===null)i.value=null;else if(a.target===!0)b(r.$el.parentNode);else{let f=a.target;if(typeof a.target=="string")try{f=document.querySelector(a.target)}catch{f=void 0}f!=null?(i.value=f.$el||f,n()):(i.value=null,console.error(`Anchor: target "${a.target}" not found`))}}return se(()=>a.contextMenu,f=>{i.value!==null&&(d(),n(f))}),se(()=>a.target,()=>{i.value!==null&&d(),_()}),se(()=>a.noParentEvent,f=>{i.value!==null&&(f===!0?d():n())}),nt(()=>{_(),t!==!0&&a.modelValue===!0&&i.value===null&&l("update:modelValue",!1)}),Je(()=>{o!==null&&clearTimeout(o),d()}),{anchorEl:i,canShow:u,anchorEvents:s}}function nr(e,t){const n=$(null);let a;function r(o,u){const s=`${u!==void 0?"add":"remove"}EventListener`,d=u!==void 0?u:a;o!==window&&o[s]("scroll",d,Gt.passive),window[s]("scroll",d,Gt.passive),a=u}function l(){n.value!==null&&(r(n.value),n.value=null)}const i=se(()=>e.noParentEvent,()=>{n.value!==null&&(l(),t())});return Je(i),{localScrollTarget:n,unconfigureScrollTarget:l,changeScrollEvent:r}}const{notPassiveCapture:Ct}=Gt,et=[];function qt(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let n=dn.length-1;for(;n>=0;){const a=dn[n].$;if(a.type.name==="QTooltip"){n--;continue}if(a.type.name!=="QDialog")break;if(a.props.seamless!==!0)return;n--}for(let a=et.length-1;a>=0;a--){const r=et[a];if((r.anchorEl.value===null||r.anchorEl.value.contains(t)===!1)&&(t===document.body||r.innerRef.value!==null&&r.innerRef.value.contains(t)===!1))e.qClickOutside=!0,r.onClickOutside(e);else return}}function rr(e){et.push(e),et.length===1&&(document.addEventListener("mousedown",qt,Ct),document.addEventListener("touchstart",qt,Ct))}function Tt(e){const t=et.findIndex(n=>n===e);t>-1&&(et.splice(t,1),et.length===0&&(document.removeEventListener("mousedown",qt,Ct),document.removeEventListener("touchstart",qt,Ct)))}let mn,pn;function Pt(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function lr(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const tn={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{tn[`${e}#ltr`]=e,tn[`${e}#rtl`]=e});function Rt(e,t){const n=e.split(" ");return{vertical:n[0],horizontal:tn[`${n[1]}#${t===!0?"rtl":"ltr"}`]}}function yl(e,t){let{top:n,left:a,right:r,bottom:l,width:i,height:o}=e.getBoundingClientRect();return t!==void 0&&(n-=t[1],a-=t[0],l+=t[1],r+=t[0],i+=t[0],o+=t[1]),{top:n,bottom:l,height:o,left:a,right:r,width:i,middle:a+(r-a)/2,center:n+(l-n)/2}}function bl(e,t,n){let{top:a,left:r}=e.getBoundingClientRect();return a+=t.top,r+=t.left,n!==void 0&&(a+=n[1],r+=n[0]),{top:a,bottom:a+1,height:1,left:r,right:r+1,width:1,middle:r,center:a}}function _l(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function gn(e,t,n,a){return{top:e[n.vertical]-t[a.vertical],left:e[n.horizontal]-t[a.horizontal]}}function an(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{an(e,t+1)},10);return}const{targetEl:n,offset:a,anchorEl:r,anchorOrigin:l,selfOrigin:i,absoluteOffset:o,fit:u,cover:s,maxHeight:d,maxWidth:b}=e;if(Le.is.ios===!0&&window.visualViewport!==void 0){const T=document.body.style,{offsetLeft:O,offsetTop:I}=window.visualViewport;O!==mn&&(T.setProperty("--q-pe-left",O+"px"),mn=O),I!==pn&&(T.setProperty("--q-pe-top",I+"px"),pn=I)}const{scrollLeft:_,scrollTop:f}=n,p=o===void 0?yl(r,s===!0?[0,0]:a):bl(r,o,a);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:b||"100vw",maxHeight:d||"100vh",visibility:"visible"});const{offsetWidth:k,offsetHeight:N}=n,{elWidth:R,elHeight:D}=u===!0||s===!0?{elWidth:Math.max(p.width,k),elHeight:s===!0?Math.max(p.height,N):N}:{elWidth:k,elHeight:N};let P={maxWidth:b,maxHeight:d};(u===!0||s===!0)&&(P.minWidth=p.width+"px",s===!0&&(P.minHeight=p.height+"px")),Object.assign(n.style,P);const x=_l(R,D);let m=gn(p,x,l,i);if(o===void 0||a===void 0)Wt(m,p,x,l,i);else{const{top:T,left:O}=m;Wt(m,p,x,l,i);let I=!1;if(m.top!==T){I=!0;const j=2*a[1];p.center=p.top-=j,p.bottom-=j+2}if(m.left!==O){I=!0;const j=2*a[0];p.middle=p.left-=j,p.right-=j+2}I===!0&&(m=gn(p,x,l,i),Wt(m,p,x,l,i))}P={top:m.top+"px",left:m.left+"px"},m.maxHeight!==void 0&&(P.maxHeight=m.maxHeight+"px",p.height>m.maxHeight&&(P.minHeight=P.maxHeight)),m.maxWidth!==void 0&&(P.maxWidth=m.maxWidth+"px",p.width>m.maxWidth&&(P.minWidth=P.maxWidth)),Object.assign(n.style,P),n.scrollTop!==f&&(n.scrollTop=f),n.scrollLeft!==_&&(n.scrollLeft=_)}function Wt(e,t,n,a,r){const l=n.bottom,i=n.right,o=Mr(),u=window.innerHeight-o,s=document.body.clientWidth;if(e.top<0||e.top+l>u)if(r.vertical==="center")e.top=t[a.vertical]>u/2?Math.max(0,u-l):0,e.maxHeight=Math.min(l,u);else if(t[a.vertical]>u/2){const d=Math.min(u,a.vertical==="center"?t.center:a.vertical===r.vertical?t.bottom:t.top);e.maxHeight=Math.min(l,d),e.top=Math.max(0,d-l)}else e.top=Math.max(0,a.vertical==="center"?t.center:a.vertical===r.vertical?t.top:t.bottom),e.maxHeight=Math.min(l,u-e.top);if(e.left<0||e.left+i>s)if(e.maxWidth=Math.min(i,s),r.horizontal==="middle")e.left=t[a.horizontal]>s/2?Math.max(0,s-i):0;else if(t[a.horizontal]>s/2){const d=Math.min(s,a.horizontal==="middle"?t.middle:a.horizontal===r.horizontal?t.right:t.left);e.maxWidth=Math.min(i,d),e.left=Math.max(0,d-e.maxWidth)}else e.left=Math.max(0,a.horizontal==="middle"?t.middle:a.horizontal===r.horizontal?t.left:t.right),e.maxWidth=Math.min(i,s-e.left)}var wl=we({name:"QMenu",inheritAttrs:!1,props:{...er,...Bn,...Qe,...Ln,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Pt},self:{type:String,validator:Pt},offset:{type:Array,validator:lr},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...In,"click","escapeKey"],setup(e,{slots:t,emit:n,attrs:a}){let r=null,l,i,o;const u=Ce(),{proxy:s}=u,{$q:d}=s,b=$(null),_=$(!1),f=q(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),p=Xe(e,d),{registerTick:k,removeTick:N}=ht(),{registerTimeout:R}=kt(),{transitionProps:D,transitionStyle:P}=Kn(e),{localScrollTarget:x,changeScrollEvent:m,unconfigureScrollTarget:T}=nr(e,E),{anchorEl:O,canShow:I}=tr({showing:_}),{hide:j}=Dn({showing:_,canShow:I,handleShow:be,handleHide:ke,hideOnRouteChange:f,processOnMount:!0}),{showPortal:X,hidePortal:F,renderPortal:V}=jn(u,b,h,"menu"),H={anchorEl:O,innerRef:b,onClickOutside(S){if(e.persistent!==!0&&_.value===!0)return j(S),(S.type==="touchstart"||S.target.classList.contains("q-dialog__backdrop"))&&Ee(S),!0}},J=q(()=>Rt(e.anchor||(e.cover===!0?"center middle":"bottom start"),d.lang.rtl)),Z=q(()=>e.cover===!0?J.value:Rt(e.self||"top start",d.lang.rtl)),z=q(()=>(e.square===!0?" q-menu--square":"")+(p.value===!0?" q-menu--dark q-dark":"")),Y=q(()=>e.autoClose===!0?{onClick:c}:{}),G=q(()=>_.value===!0&&e.persistent!==!0);se(G,S=>{S===!0?(Kr(v),rr(H)):(fn(v),Tt(H))});function ve(){Dr(()=>{let S=b.value;S&&S.contains(document.activeElement)!==!0&&(S=S.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||S.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||S.querySelector("[autofocus], [data-autofocus]")||S,S.focus({preventScroll:!0}))})}function be(S){if(r=e.noRefocus===!1?document.activeElement:null,Br(g),X(),E(),l=void 0,S!==void 0&&(e.touchPosition||e.contextMenu)){const K=ct(S);if(K.left!==void 0){const{top:te,left:A}=O.value.getBoundingClientRect();l={left:K.left-A,top:K.top-te}}}i===void 0&&(i=se(()=>d.screen.width+"|"+d.screen.height+"|"+e.self+"|"+e.anchor+"|"+d.lang.rtl,y)),e.noFocus!==!0&&document.activeElement.blur(),k(()=>{y(),e.noFocus!==!0&&ve()}),R(()=>{d.platform.is.ios===!0&&(o=e.autoClose,b.value.click()),y(),X(!0),n("show",S)},e.transitionDuration)}function ke(S){N(),F(),w(!0),r!==null&&(S===void 0||S.qClickOutside!==!0)&&(((S&&S.type.indexOf("key")===0?r.closest('[tabindex]:not([tabindex^="-"])'):void 0)||r).focus(),r=null),R(()=>{F(!0),n("hide",S)},e.transitionDuration)}function w(S){l=void 0,i!==void 0&&(i(),i=void 0),(S===!0||_.value===!0)&&(Lr(g),T(),Tt(H),fn(v)),S!==!0&&(r=null)}function E(){(O.value!==null||e.scrollTarget!==void 0)&&(x.value=Fn(O.value,e.scrollTarget),m(x.value,y))}function c(S){o!==!0?(Ir(s,S),n("click",S)):o=!1}function g(S){G.value===!0&&e.noFocus!==!0&&jr(b.value,S.target)!==!0&&ve()}function v(S){n("escapeKey"),j(S)}function y(){an({targetEl:b.value,offset:e.offset,anchorEl:O.value,anchorOrigin:J.value,selfOrigin:Z.value,absoluteOffset:l,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function h(){return C(Nt,D.value,()=>_.value===!0?C("div",{role:"menu",...a,ref:b,tabindex:-1,class:["q-menu q-position-engine scroll"+z.value,a.class],style:[a.style,P.value],...Y.value},Me(t.default)):null)}return Je(w),Object.assign(s,{focus:ve,updatePosition:y}),V}}),kl=we({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:t}){const n=q(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>C("div",{class:n.value,role:"toolbar"},Me(t.default))}}),Sl=we({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:n}}=Ce(),a=St(Fr,De);if(a===De)return console.error("QPage needs to be a deep child of QLayout"),De;if(St(Hr,De)===De)return console.error("QPage needs to be child of QPageContainer"),De;const l=q(()=>{const o=(a.header.space===!0?a.header.size:0)+(a.footer.space===!0?a.footer.size:0);if(typeof e.styleFn=="function"){const u=a.isContainer.value===!0?a.containerHeight.value:n.screen.height;return e.styleFn(o,u)}return{minHeight:a.isContainer.value===!0?a.containerHeight.value-o+"px":n.screen.height===0?o!==0?`calc(100vh - ${o}px)`:"100vh":n.screen.height-o+"px"}}),i=q(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>C("main",{class:i.value,style:l.value},Me(t.default))}});function yn(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var ft=nn({name:"close-popup",beforeMount(e,{value:t}){const n={depth:yn(t),handler(a){n.depth!==0&&setTimeout(()=>{const r=Jr(e);r!==void 0&&Ur(r,a,n.depth)})},handlerKey(a){At(a,13)===!0&&n.handler(a)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:t,oldValue:n}){t!==n&&(e.__qclosepopup.depth=yn(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});const We="https://api.github.com";let tt={data:{},async clear(){this.data={}},async get(e,t){return this.data[e]===void 0?t:JSON.parse(this.data[e])},async set(e,t){this.data[e]=JSON.stringify(t)}};function xl(e){tt=e}const Fe=(e,t=null)=>({...{Accept:"application/vnd.github+json",Authorization:`Bearer ${e}`},...t}),ar=e=>{var t,n;if((t=e==null?void 0:e.response)!=null&&t.status){const a=(n=e.response)==null?void 0:n.data;throw a.message?new Error(a.message):a.toString()}throw e};async function Cl({input:e,token:t}){e.startsWith("https://github.com/")&&(e=e.substring(19));let n=e.match(/^[^\/]+\/[^\/#]+/)[0];e=e.substring(n.length),e.startsWith("/")&&(e=e.substring(1));let a;a=await on({repo:n,token:t});let[r,l]=e.split("#");return l&&(l=(await un({repo:n,branch:l,token:t})).name),{repr:`${a.full_name}${r?`/${r}`:""}${l?`#${l}`:""}`,repo:a.full_name,path:r,branch:l}}async function ir({repo:e,branch:t,token:n,files:a,message:r,progressCallback:l}){const i=a.reduce((f,p)=>f+p.content.length,0);let o=0;l&&l(0,i),a=await Promise.all(a.map(async f=>{let p=await je.post(`${We}/repos/${e}/git/blobs`,{content:f.content,encoding:f.encoding},{onUploadProgress:k=>{l&&l(o+k.loaded,i)},headers:Fe(n,{"Content-Type":"application/json"})});return o+=f.content.length,l&&l(o,i),{mode:"100644",type:"blob",sha:p.data.sha,path:f.path}}));const u=await un({repo:e,branch:t,token:n}),s=u.commit.commit.tree.sha;let d=await je.post(`${We}/repos/${e}/git/trees`,{base_tree:s,tree:a},{headers:Fe(n,{"Content-Type":"application/json"})});const b=d.data.sha;d=await je.post(`${We}/repos/${e}/git/commits`,{message:r,tree:b,parents:[u.commit.sha]},{headers:Fe(n,{"Content-Type":"application/json"})});const _=d.data.sha;d=await je.patch(`${We}/repos/${e}/git/refs/heads/${u.name}`,{sha:_},{headers:Fe(n,{"Content-Type":"application/json"})})}async function on({repo:e,token:t}){return(await je.get(`${We}/repos/${e}`,{headers:Fe(t)})).data}async function or({url:e,token:t}){let n=await tt.get(`cache:blob:${e}`,null);if(n===null){console.log("Downloading blob",e);const a=await je.get(e,{headers:Fe(t)});n=a.data,console.log(a.data),await tt.set(`cache:blob:${e}`,n)}return n}async function bn({url:e,token:t}){const n=await or({url:e,token:t});let a=n.content;return n.encoding==="base64"&&(a=atob(a)),JSON.parse(a)}async function sn({url:e,token:t}){return`data:image/png;base64,${(await or({url:e,token:t})).content}`}async function un({repo:e,branch:t,token:n}){t||(t=(await on({repo:e,token:n})).default_branch);try{const a=new Date;return a.setSeconds(a.getSeconds()-30),(await je.get(`${We}/repos/${e}/branches/${t}`,{headers:Fe(n,{"If-Modified-Since":a.toUTCString()})})).data}catch(a){ar(a)}}function ql(e,t){return(t.type==="tree")-(e.type==="tree")||e.path.localeCompare(t.path)}function Tl(e){let t=e.match(/^.*?(\.[^\.]*)?$/)[1];if(!t)return null;if(t=t.toLowerCase(),t==".stp"&&(t=".step"),[".step",".f3d",".svg",".dxf"].indexOf(t)!==-1)return t.substring(1);if(t===".png")return"thumb";if(t===".json")return"meta"}function sr(e,t){return{...e,content_types:{...e.content_types,...t.content_types}}}function ur(e,t){const n=[...e];return t.forEach(a=>{let r=e.filter(l=>l.name==a.name&&l.type==a.type)[0];if(!r){n.push(a);return}r.sha=[...r.sha,...a.sha],r.type==="tree"?r.children=ur(r.children,a.children):(n.splice(n.indexOf(r),1),r=sr(r,a),n.push(r))}),n}function cr(e){const t=[];return e.forEach(n=>{if(n.type==="tree")n.children=cr(n.children),t.push(n);else{const a=n.content_types;(a.step||a.f3d||a.dxf||a.svg)&&t.push(n)}}),t}function dr(e){return e.filter(t=>t.type==="tree").forEach(t=>{dr(t.children)}),e.sort(ql),e}function Pl(e,t){if(t){for(const n of t.split("/"))if(Array.isArray(e)?e=e.filter(a=>a.name===n)[0]:e=e.children.filter(a=>a.name===n)[0],!e)return null}return e}function Rl(e,t){e=e||[],t=t||[],e=Array.isArray(e)?e:e.split(/\s+/),t=Array.isArray(t)?t:t.split(/\s+/);const n=e.map(a=>a.toLowerCase());return[...e,...t.filter(a=>n.indexOf(a.toLowerCase())===-1)].join(" ")||void 0}function $l(e,t){var n;console.log("Applying DirMeta",e,t);for(const[a,r]of Object.entries(t)){const l=Pl(e,a);l.meta={...(l==null?void 0:l.meta)||{},...r||{},keywords:Rl((n=l==null?void 0:l.meta)==null?void 0:n.keywords,r==null?void 0:r.keywords)}}}async function fr({tree:e,token:t,treeShas:n,perNodeFunc:a}){let r=await tt.get(`cache:meta:${n.join(":")}`,null),l=[];for(let o of e){if(a(o),o.type==="tree"){l.push({...o,children:await fr({tree:o.children,token:t,treeShas:o.sha,perNodeFunc:a})});continue}let u;r?u=r[o.name]||{}:o.content_types.meta&&(u=await bn({url:o.content_types.meta.url,token:t})),l.push({...o,meta:u})}const i=l.filter(o=>{var u;return o.name=="_meta"&&((u=o==null?void 0:o.content_types)==null?void 0:u.meta)})[0];if(i){if(!r){console.log("Downloading meta",i.content_types.meta.url);const o=await bn({url:i.content_types.meta.url,token:t});$l(l,o)}l=l.filter(o=>o.id!==i.id)}if(!r){const o={};l.forEach(u=>{Object.keys((u==null?void 0:u.meta)||{}).length!=0&&(o[u.name]=u.meta)}),Object.keys(o).length!=0&&tt.set(`cache:meta:${n.join(":")}`,o)}return l}function vr({tree:e,root:t,id_prefix:n,repo:a,branch:r}){const l=[];for(;e.length>0;){let i=e[0];if(!i.path.startsWith(t))break;if(e.shift(),i.id=`${n}|${i.path}`,i.name=i.path.split("/").pop(),i.name=i.name.match(/^(.*?)(\.[^\.]*)?$/)[1],delete i.mode,i.sha=Array.isArray(i.sha)?i.sha:[i.sha],i.type=="tree"){if(i.children=vr({tree:e,root:`${i.path}/`,id_prefix:n,repo:a,branch:r}),i.children.length===0)continue}else if(i.type=="blob"){let o=Tl(i.path);if(!o)continue;if(i.content_types={[o]:{url:i.url,size:i.size,path:i.path,repo:a,branch:r}},i.path=i.path.match(/^(.*?)(\.[^\.]*)?$/)[1],delete i.url,delete i.size,l.length>0){const u=l[l.length-1];u.type==="blob"&&u.path===i.path&&(l.pop(),i=sr(u,i))}}l.push(i)}return l}async function El({repo:e,branch:t,path:n,token:a}){return(await je.get(`${We}/repos/${e}/commits`,{headers:Fe(a),params:{sha:t,path:n,per_page:"1",page:"1"}})).data[0]}async function Ol({repo:e,branch:t,token:n,id_prefix:a,noCache:r}){r=!!r,t=await un({repo:e,branch:t,token:n});let l=r?null:await tt.get(`cache:tree:${e}:${t.name}`);if(!l||l.sha!==t.commit.commit.tree.sha){console.log("cache miss",e,t.commit.commit);try{l=(await je.get(`${We}/repos/${e}/git/trees/${t.commit.commit.tree.sha}?recursive=1`,{headers:Fe(n)})).data}catch(i){ar(i)}r||await tt.set(`cache:tree:${e}:${t.name}`,l)}return[vr({tree:l.tree,root:"",id_prefix:a,repo:e,branch:t.name}),t.commit.commit.tree.sha]}function zl(e,t){return t=t.replace(/^\//,"").replace("//$",""),t.split("/").forEach(n=>{var a;if(e=(a=e.filter(r=>r.name===n&&r.type=="tree")[0])==null?void 0:a.children,e===void 0)throw Error("Invalid repository path")}),e}function Al(e){let t=0;function n(a){if(t++,a.children)for(let r of a.children)n(r)}for(let a of e)n(a);return t}async function Nl({repositories:e,token:t,id_prefix:n,index:a,setLoadingMessage:r,noCache:l}){l=!!l;let i=[],o=[];for(let u of e){r&&r(`Loading ${u}...`);const s=u.match(/^([\w-]+)\/([\w-]+)((?:\/[\w-]+)*)(#.*)?$/);if(s!=null){let[,d,b,_,f]=s;f?f=f.substring(1):f=(await on({repo:`${d}/${b}`,token:t})).default_branch,r&&r(`Loading ${u}#${f}...`);let[p,k]=await Ol({repo:`${d}/${b}`,branch:f,token:t,id_prefix:n,noCache:l});o.push(k),_&&(p=zl(p,_)),i=ur(i,p)}}if(a){let u=0;const s=Al(i);i=await fr({tree:i,token:t,treeShas:o,perNodeFunc:()=>{u++,r&&r(`Indexing trees (${u}/${s})...`)}})}return console.log("Merged trees",i),dr(cr(i))}var me=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},hr={},Kt={},gt={};(function(e){var t=me&&me.__extends||function(){var f=function(p,k){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,R){N.__proto__=R}||function(N,R){for(var D in R)Object.prototype.hasOwnProperty.call(R,D)&&(N[D]=R[D])},f(p,k)};return function(p,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");f(p,k);function N(){this.constructor=p}p.prototype=k===null?Object.create(k):(N.prototype=k.prototype,new N)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.createJSONRPCNotification=e.createJSONRPCRequest=e.createJSONRPCSuccessResponse=e.createJSONRPCErrorResponse=e.JSONRPCErrorCode=e.JSONRPCErrorException=e.isJSONRPCResponses=e.isJSONRPCResponse=e.isJSONRPCRequests=e.isJSONRPCRequest=e.isJSONRPCID=e.JSONRPC=void 0,e.JSONRPC="2.0";var n=function(f){return typeof f=="string"||typeof f=="number"||f===null};e.isJSONRPCID=n;var a=function(f){return f.jsonrpc===e.JSONRPC&&f.method!==void 0&&f.result===void 0&&f.error===void 0};e.isJSONRPCRequest=a;var r=function(f){return Array.isArray(f)&&f.every(e.isJSONRPCRequest)};e.isJSONRPCRequests=r;var l=function(f){return f.jsonrpc===e.JSONRPC&&f.id!==void 0&&(f.result!==void 0||f.error!==void 0)};e.isJSONRPCResponse=l;var i=function(f){return Array.isArray(f)&&f.every(e.isJSONRPCResponse)};e.isJSONRPCResponses=i;var o=function(f,p,k){var N={code:f,message:p};return k!=null&&(N.data=k),N},u=function(f){t(p,f);function p(k,N,R){var D=f.call(this,k)||this;return Object.setPrototypeOf(D,p.prototype),D.code=N,D.data=R,D}return p.prototype.toObject=function(){return o(this.code,this.message,this.data)},p}(Error);e.JSONRPCErrorException=u,function(f){f[f.ParseError=-32700]="ParseError",f[f.InvalidRequest=-32600]="InvalidRequest",f[f.MethodNotFound=-32601]="MethodNotFound",f[f.InvalidParams=-32602]="InvalidParams",f[f.InternalError=-32603]="InternalError"}(e.JSONRPCErrorCode||(e.JSONRPCErrorCode={}));var s=function(f,p,k,N){return{jsonrpc:e.JSONRPC,id:f,error:o(p,k,N)}};e.createJSONRPCErrorResponse=s;var d=function(f,p){return{jsonrpc:e.JSONRPC,id:f,result:p!=null?p:null}};e.createJSONRPCSuccessResponse=d;var b=function(f,p,k){return{jsonrpc:e.JSONRPC,id:f,method:p,params:k}};e.createJSONRPCRequest=b;var _=function(f,p){return{jsonrpc:e.JSONRPC,method:f,params:p}};e.createJSONRPCNotification=_})(gt);var yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.DefaultErrorCode=void 0;yt.DefaultErrorCode=0;var _n=me&&me.__awaiter||function(e,t,n,a){function r(l){return l instanceof n?l:new n(function(i){i(l)})}return new(n||(n=Promise))(function(l,i){function o(d){try{s(a.next(d))}catch(b){i(b)}}function u(d){try{s(a.throw(d))}catch(b){i(b)}}function s(d){d.done?l(d.value):r(d.value).then(o,u)}s((a=a.apply(e,t||[])).next())})},wn=me&&me.__generator||function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,r,l,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(s){return function(d){return u([s,d])}}function u(s){if(a)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(n=0)),n;)try{if(a=1,r&&(l=s[0]&2?r.return:s[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,s[1])).done)return l;switch(r=0,l&&(s=[s[0]&2,l.value]),s[0]){case 0:case 1:l=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,r=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!l||s[1]>l[0]&&s[1]<l[3])){n.label=s[1];break}if(s[0]===6&&n.label<l[1]){n.label=l[1],l=s;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(s);break}l[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(d){s=[6,d],r=0}finally{a=l=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.JSONRPCClient=void 0;var lt=gt,Qt=yt,Ml=function(){function e(t,n){this._send=t,this.createID=n,this.idToResolveMap=new Map,this.id=0}return e.prototype._createID=function(){return this.createID?this.createID():++this.id},e.prototype.timeout=function(t,n){var a=this;n===void 0&&(n=function(i){return(0,lt.createJSONRPCErrorResponse)(i,Qt.DefaultErrorCode,"Request timeout")});var r=function(i,o){var u=setTimeout(function(){i.forEach(function(s){var d=a.idToResolveMap.get(s);d&&(a.idToResolveMap.delete(s),d(n(s)))})},t);return o().then(function(s){return clearTimeout(u),s},function(s){return clearTimeout(u),Promise.reject(s)})},l=function(i,o){var u=(Array.isArray(i)?i:[i]).map(function(s){return s.id}).filter(kn);return r(u,function(){return a.requestAdvanced(i,o)})};return{request:function(i,o,u){var s=a._createID();return r([s],function(){return a.requestWithID(i,o,u,s)})},requestAdvanced:function(i,o){return l(i,o)}}},e.prototype.request=function(t,n,a){return this.requestWithID(t,n,a,this._createID())},e.prototype.requestWithID=function(t,n,a,r){return _n(this,void 0,void 0,function(){var l,i;return wn(this,function(o){switch(o.label){case 0:return l=(0,lt.createJSONRPCRequest)(r,t,n),[4,this.requestAdvanced(l,a)];case 1:return i=o.sent(),i.result!==void 0&&!i.error?[2,i.result]:i.result===void 0&&i.error?[2,Promise.reject(new lt.JSONRPCErrorException(i.error.message,i.error.code,i.error.data))]:[2,Promise.reject(new Error("An unexpected error occurred"))]}})})},e.prototype.requestAdvanced=function(t,n){var a=this,r=Array.isArray(t);Array.isArray(t)||(t=[t]);var l=t.filter(function(u){return kn(u.id)}),i=l.map(function(u){return new Promise(function(s){return a.idToResolveMap.set(u.id,s)})}),o=Promise.all(i).then(function(u){return r||!u.length?u:u[0]});return this.send(r?t:t[0],n).then(function(){return o},function(u){return l.forEach(function(s){a.receive((0,lt.createJSONRPCErrorResponse)(s.id,Qt.DefaultErrorCode,u&&u.message||"Failed to send a request"))}),o})},e.prototype.notify=function(t,n,a){var r=(0,lt.createJSONRPCNotification)(t,n);this.send(r,a).then(void 0,function(){})},e.prototype.send=function(t,n){return _n(this,void 0,void 0,function(){return wn(this,function(a){return[2,this._send(t,n)]})})},e.prototype.rejectAllPendingRequests=function(t){this.idToResolveMap.forEach(function(n,a){return n((0,lt.createJSONRPCErrorResponse)(a,Qt.DefaultErrorCode,t))}),this.idToResolveMap.clear()},e.prototype.receive=function(t){var n=this;Array.isArray(t)||(t=[t]),t.forEach(function(a){var r=n.idToResolveMap.get(a.id);r&&(n.idToResolveMap.delete(a.id),r(a))})},e}();Kt.JSONRPCClient=Ml;var kn=function(e){return e!=null},mr={};Object.defineProperty(mr,"__esModule",{value:!0});var Dt={},$t=me&&me.__assign||function(){return $t=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},$t.apply(this,arguments)},Sn=me&&me.__awaiter||function(e,t,n,a){function r(l){return l instanceof n?l:new n(function(i){i(l)})}return new(n||(n=Promise))(function(l,i){function o(d){try{s(a.next(d))}catch(b){i(b)}}function u(d){try{s(a.throw(d))}catch(b){i(b)}}function s(d){d.done?l(d.value):r(d.value).then(o,u)}s((a=a.apply(e,t||[])).next())})},xn=me&&me.__generator||function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,r,l,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(s){return function(d){return u([s,d])}}function u(s){if(a)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(n=0)),n;)try{if(a=1,r&&(l=s[0]&2?r.return:s[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,s[1])).done)return l;switch(r=0,l&&(s=[s[0]&2,l.value]),s[0]){case 0:case 1:l=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,r=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!l||s[1]>l[0]&&s[1]<l[3])){n.label=s[1];break}if(s[0]===6&&n.label<l[1]){n.label=l[1],l=s;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(s);break}l[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(d){s=[6,d],r=0}finally{a=l=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Bl=me&&me.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var a=0,r=t.length,l;a<r;a++)(l||!(a in t))&&(l||(l=Array.prototype.slice.call(t,0,a)),l[a]=t[a]);return e.concat(l||Array.prototype.slice.call(t))};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.JSONRPCServer=void 0;var ze=gt,Ll=yt,Il=function(){return(0,ze.createJSONRPCErrorResponse)(null,ze.JSONRPCErrorCode.ParseError,"Parse error")},Kl=function(e){return(0,ze.createJSONRPCErrorResponse)((0,ze.isJSONRPCID)(e.id)?e.id:null,ze.JSONRPCErrorCode.InvalidRequest,"Invalid Request")},Dl=function(e){return(0,ze.createJSONRPCErrorResponse)(e,ze.JSONRPCErrorCode.MethodNotFound,"Method not found")},jl=function(){function e(t){t===void 0&&(t={});var n;this.mapErrorToJSONRPCErrorResponse=Ul,this.nameToMethodDictionary={},this.middleware=null,this.errorListener=(n=t.errorListener)!==null&&n!==void 0?n:console.warn}return e.prototype.hasMethod=function(t){return!!this.nameToMethodDictionary[t]},e.prototype.addMethod=function(t,n){this.addMethodAdvanced(t,this.toJSONRPCMethod(n))},e.prototype.toJSONRPCMethod=function(t){return function(n,a){var r=t(n.params,a);return Promise.resolve(r).then(function(l){return Jl(n.id,l)})}},e.prototype.addMethodAdvanced=function(t,n){var a;this.nameToMethodDictionary=$t($t({},this.nameToMethodDictionary),(a={},a[t]=n,a))},e.prototype.receiveJSON=function(t,n){var a=this.tryParseRequestJSON(t);return a?this.receive(a,n):Promise.resolve(Il())},e.prototype.tryParseRequestJSON=function(t){try{return JSON.parse(t)}catch{return null}},e.prototype.receive=function(t,n){return Array.isArray(t)?this.receiveMultiple(t,n):this.receiveSingle(t,n)},e.prototype.receiveMultiple=function(t,n){return Sn(this,void 0,void 0,function(){var a,r=this;return xn(this,function(l){switch(l.label){case 0:return[4,Promise.all(t.map(function(i){return r.receiveSingle(i,n)}))];case 1:return a=l.sent().filter(Fl),a.length===1?[2,a[0]]:a.length?[2,a]:[2,null]}})})},e.prototype.receiveSingle=function(t,n){return Sn(this,void 0,void 0,function(){var a,r;return xn(this,function(l){switch(l.label){case 0:return a=this.nameToMethodDictionary[t.method],(0,ze.isJSONRPCRequest)(t)?[3,1]:[2,Kl(t)];case 1:return[4,this.callMethod(a,t,n)];case 2:return r=l.sent(),[2,Vl(t,r)]}})})},e.prototype.applyMiddleware=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.middleware?this.middleware=this.combineMiddlewares(Bl([this.middleware],t,!0)):this.middleware=this.combineMiddlewares(t)},e.prototype.combineMiddlewares=function(t){return t.length?t.reduce(this.middlewareReducer):null},e.prototype.middlewareReducer=function(t,n){return function(a,r,l){return t(function(i,o){return n(a,i,o)},r,l)}},e.prototype.callMethod=function(t,n,a){var r=this,l=function(o,u){return t?t(o,u):o.id!==void 0?Promise.resolve(Dl(o.id)):Promise.resolve(null)},i=function(o){return r.errorListener('An unexpected error occurred while executing "'.concat(n.method,'" JSON-RPC method:'),o),Promise.resolve(r.mapErrorToJSONRPCErrorResponseIfNecessary(n.id,o))};try{return(this.middleware||Hl)(l,n,a).then(void 0,i)}catch(o){return i(o)}},e.prototype.mapErrorToJSONRPCErrorResponseIfNecessary=function(t,n){return t!==void 0?this.mapErrorToJSONRPCErrorResponse(t,n):null},e}();Dt.JSONRPCServer=jl;var Fl=function(e){return e!==null},Hl=function(e,t,n){return e(t,n)},Jl=function(e,t){return e!==void 0?(0,ze.createJSONRPCSuccessResponse)(e,t):null},Ul=function(e,t){var n,a=(n=t==null?void 0:t.message)!==null&&n!==void 0?n:"An unexpected error occurred",r=Ll.DefaultErrorCode,l;return t instanceof ze.JSONRPCErrorException&&(r=t.code,l=t.data),(0,ze.createJSONRPCErrorResponse)(e,r,a,l)},Vl=function(e,t){return t||(e.id!==void 0?(0,ze.createJSONRPCErrorResponse)(e.id,ze.JSONRPCErrorCode.InternalError,"Internal error"):null)},jt={},Wl=me&&me.__awaiter||function(e,t,n,a){function r(l){return l instanceof n?l:new n(function(i){i(l)})}return new(n||(n=Promise))(function(l,i){function o(d){try{s(a.next(d))}catch(b){i(b)}}function u(d){try{s(a.throw(d))}catch(b){i(b)}}function s(d){d.done?l(d.value):r(d.value).then(o,u)}s((a=a.apply(e,t||[])).next())})},Ql=me&&me.__generator||function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,r,l,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(s){return function(d){return u([s,d])}}function u(s){if(a)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(n=0)),n;)try{if(a=1,r&&(l=s[0]&2?r.return:s[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,s[1])).done)return l;switch(r=0,l&&(s=[s[0]&2,l.value]),s[0]){case 0:case 1:l=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,r=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!l||s[1]>l[0]&&s[1]<l[3])){n.label=s[1];break}if(s[0]===6&&n.label<l[1]){n.label=l[1],l=s;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(s);break}l[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(d){s=[6,d],r=0}finally{a=l=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(jt,"__esModule",{value:!0});jt.JSONRPCServerAndClient=void 0;var _t=gt,Xl=function(){function e(t,n,a){a===void 0&&(a={});var r;this.server=t,this.client=n,this.errorListener=(r=a.errorListener)!==null&&r!==void 0?r:console.warn}return e.prototype.applyServerMiddleware=function(){for(var t,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];(t=this.server).applyMiddleware.apply(t,n)},e.prototype.hasMethod=function(t){return this.server.hasMethod(t)},e.prototype.addMethod=function(t,n){this.server.addMethod(t,n)},e.prototype.addMethodAdvanced=function(t,n){this.server.addMethodAdvanced(t,n)},e.prototype.timeout=function(t){return this.client.timeout(t)},e.prototype.request=function(t,n,a){return this.client.request(t,n,a)},e.prototype.requestAdvanced=function(t,n){return this.client.requestAdvanced(t,n)},e.prototype.notify=function(t,n,a){this.client.notify(t,n,a)},e.prototype.rejectAllPendingRequests=function(t){this.client.rejectAllPendingRequests(t)},e.prototype.receiveAndSend=function(t,n,a){return Wl(this,void 0,void 0,function(){var r,l;return Ql(this,function(i){switch(i.label){case 0:return(0,_t.isJSONRPCResponse)(t)||(0,_t.isJSONRPCResponses)(t)?(this.client.receive(t),[3,4]):[3,1];case 1:return(0,_t.isJSONRPCRequest)(t)||(0,_t.isJSONRPCRequests)(t)?[4,this.server.receive(t,n)]:[3,3];case 2:return r=i.sent(),r?[2,this.client.send(r,a)]:[3,4];case 3:return l="Received an invalid JSON-RPC message",this.errorListener(l,t),[2,Promise.reject(new Error(l))];case 4:return[2]}})})},e}();jt.JSONRPCServerAndClient=Xl;(function(e){var t=me&&me.__createBinding||(Object.create?function(a,r,l,i){i===void 0&&(i=l);var o=Object.getOwnPropertyDescriptor(r,l);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[l]}}),Object.defineProperty(a,i,o)}:function(a,r,l,i){i===void 0&&(i=l),a[i]=r[l]}),n=me&&me.__exportStar||function(a,r){for(var l in a)l!=="default"&&!Object.prototype.hasOwnProperty.call(r,l)&&t(r,a,l)};Object.defineProperty(e,"__esModule",{value:!0}),n(Kt,e),n(mr,e),n(gt,e),n(Dt,e),n(jt,e)})(hr);const Pe=new hr.JSONRPCClient(e=>{window.adsk.fusionSendData("jsonrpc",JSON.stringify(e))});window.fusionJavaScriptHandler={handle:function(e,t){try{e=="jsonrpc"&&Pe.receive(JSON.parse(t))}catch{console.log("exception caught with command: "+e+", data: "+t)}return"OK"}};class Yl{constructor(){Ve(this,"isFusion360");Ve(this,"version");Ve(this,"latestVersion",2);Ve(this,"updateUrl","https://github.com/MapleLeafMakers/VoronConstruct360/releases");this.isFusion360=!0,this.version=-1}async get_version(){if(this.version===-1)try{this.version=await Pe.request("get_version",{})}catch{this.version=1}return this.version}async kv_get({key:t,or:n=null}){const a=await Pe.request("kv_get",{key:t});return a===null?n:a}async kv_mget({keys:t,pattern:n}){return await Pe.request("kv_mget",{keys:t,pattern:n})}async kv_set({key:t,value:n}){await Pe.request("kv_set",{key:t,value:n})}async kv_mset(t){await Pe.request("kv_mset",{obj:t})}async kv_keys({pattern:t}){return await Pe.request("kv_keys",{pattern:t})}async kv_del({key:t}){await Pe.request("kv_del",{key:t})}async kv_mdel({keys:t,pattern:n}){await Pe.request("kv_mdel",{keys:t,pattern:n})}async get_screenshot({width:t,height:n,transparent:a,antialias:r}){return await Pe.request("get_screenshot",{width:t,height:n,transparent:a,antialias:r})}async open_model({url:t,token:n,content_type:a,filename:r}){await Pe.request("open_model",{url:t,token:n,content_type:a,filename:this._version<2?void 0:r})}async import_model({url:t,token:n,content_type:a,filename:r}){await Pe.request("import_model",{url:t,token:n,content_type:a,filename:this._version<2?void 0:r})}async export_model({step:t,f3d:n}){return await Pe.request("export_model",{step:t,f3d:n})}async close(){await Pe.request("close",{})}async autothumb({url:t,content_type:n,token:a,width:r,height:l,transparent:i,antialias:o}){return await Pe.request("autothumb",{url:t,content_type:n,token:a,width:r,height:l,transparent:i,antialias:o})}}function Gl(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}class Zl{constructor(){Ve(this,"isFusion360");Ve(this,"version",1);Ve(this,"latestVersion",1);this.isFusion360=!1}async get_version(){return this.version}async kv_get({key:t,or:n}){const a=localStorage.getItem(t);return a===null?n:JSON.parse(a)}async kv_mget({keys:t,pattern:n}){const a={},r=[...t||[]];n&&r.push(...await this.kv_keys({pattern:n}));for(const l of r)a[l]=await this.kv_get({key:l});return a}async kv_set({key:t,value:n}){localStorage.setItem(t,JSON.stringify(n))}async kv_mset(t){for(const[n,a]of Object.entries(t))localStorage.setItem(n,JSON.stringify(a))}async kv_keys({pattern:t}){const n=new RegExp(`^${t.split("%").map(Gl).join(".*")}$`),a=[];for(let r=0;r<localStorage.length;r++){const l=localStorage.key(r);l&&l.match(n)&&a.push(l)}return a}async kv_del({key:t}){localStorage.removeItem(t)}async kv_mdel({keys:t,pattern:n}){const a=[...t||[]];n&&a.push(...await this.kv_keys({pattern:n}));for(const r of a)localStorage.removeItem(r)}get_screenshot({}){throw new Error("Method not implemented.")}open_model({}){throw new Error("Method not implemented.")}import_model({}){throw new Error("Method not implemented.")}export_model({}){throw new Error("Method not implemented.")}close(){throw new Error("Method not implemented.")}autothumb({}){throw new Error("Method not implemented.")}}const ea=async()=>{if(window.adsk===void 0&&(await new Promise(t=>setTimeout(t,100)),window.adsk===void 0))return new Zl;const e=new Yl;try{console.log("Backend Version: ",await e.get_version())}catch(t){console.error(t)}return e};function pr(e){for(const t of e)t.type==="repo"?t.icon="mdi-github":t.type==="tree"?t.icon="mdi-folder":t.type==="blob"&&(t.icon="mdi-cube-outline"),t.selectable=t.type==="blob",t.expandable=t.type==="repo"||t.type==="tree",t.children&&pr(t.children)}const Ye=Vr("core",{state:()=>({globalCursor:"",search:"",tree:it([]),token:"",backend:{},preferences:{showThumbnails:!1,previewSize:128,showManagementUI:!1,interfaceUrl:""}}),getters:{},actions:{getTopLevelNode(e){return this.tree.filter(t=>t.id===e)[0]},async loadState(){this.backend=await ea();const{token:e,collections:t,preferences:n}=await this.backend.kv_mget({keys:["token","collections","preferences"]});if(e&&(this.token=e),t){const a=t;for(const r of a)r.selectable=!1,r.icon="mdi-github",Array.isArray(r.repositories)&&r.repositories.length>0&&(r.repositories=r.repositories.map(l=>typeof l=="string"?{repr:l,repo:l.split("/").slice(0,2).join("/"),path:l.split("/").slice(2).join("/"),branch:l.split("#")[1]||null}:l));this.tree=it(a),this.tree.forEach(r=>this.reloadCollection({nodeId:r.id}))}n&&Object.assign(this.preferences,n)},async saveToken(){this.backend.kv_set({key:"token",value:this.token})},async saveCollections(){this.backend.kv_set({key:"collections",value:this.tree.map(e=>({...e,children:[]}))})},async savePreferences(){return this.backend.kv_set({key:"preferences",value:{...this.preferences}})},async reloadCollection({nodeId:e}){const t=this.tree.filter(a=>a.id===e)[0];t.lazy="loading";const n=await Nl({repositories:t==null?void 0:t.repositories.map(a=>a.repr),token:this.token,index:!0,id_prefix:t.id,noCache:!1,setLoadingMessage:console.log});t.lazy=!1,pr(n),t.children=it(n)},async setNodeThumbnail(e){var n,a;const t=await sn({url:(a=(n=e==null?void 0:e.content_types)==null?void 0:n.thumb)==null?void 0:a.url,token:this.token});e.img=t}}});var gr=we({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:t,emit:n}){let a=!1,r,l,i=null,o=null,u,s;function d(){r&&r(),r=null,a=!1,i!==null&&(clearTimeout(i),i=null),o!==null&&(clearTimeout(o),o=null),l!==void 0&&l.removeEventListener("transitionend",u),u=null}function b(k,N,R){N!==void 0&&(k.style.height=`${N}px`),k.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,a=!0,r=R}function _(k,N){k.style.overflowY=null,k.style.height=null,k.style.transition=null,d(),N!==s&&n(N)}function f(k,N){let R=0;l=k,a===!0?(d(),R=k.offsetHeight===k.scrollHeight?0:void 0):(s="hide",k.style.overflowY="hidden"),b(k,R,N),i=setTimeout(()=>{i=null,k.style.height=`${k.scrollHeight}px`,u=D=>{o=null,(Object(D)!==D||D.target===k)&&_(k,"show")},k.addEventListener("transitionend",u),o=setTimeout(u,e.duration*1.1)},100)}function p(k,N){let R;l=k,a===!0?d():(s="show",k.style.overflowY="hidden",R=k.scrollHeight),b(k,R,N),i=setTimeout(()=>{i=null,k.style.height=0,u=D=>{o=null,(Object(D)!==D||D.target===k)&&_(k,"hide")},k.addEventListener("transitionend",u),o=setTimeout(u,e.duration*1.1)},100)}return Je(()=>{a===!0&&d()}),()=>C(Nt,{css:!1,appear:e.appear,onEnter:f,onLeave:p},t.default)}}),ta=we({name:"QTooltip",inheritAttrs:!1,props:{...er,...Bn,...Ln,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Pt},self:{type:String,default:"top middle",validator:Pt},offset:{type:Array,default:()=>[14,14],validator:lr},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...In],setup(e,{slots:t,emit:n,attrs:a}){let r,l;const i=Ce(),{proxy:{$q:o}}=i,u=$(null),s=$(!1),d=q(()=>Rt(e.anchor,o.lang.rtl)),b=q(()=>Rt(e.self,o.lang.rtl)),_=q(()=>e.persistent!==!0),{registerTick:f,removeTick:p}=ht(),{registerTimeout:k}=kt(),{transitionProps:N,transitionStyle:R}=Kn(e),{localScrollTarget:D,changeScrollEvent:P,unconfigureScrollTarget:x}=nr(e,be),{anchorEl:m,canShow:T,anchorEvents:O}=tr({showing:s,configureAnchorEl:ve}),{show:I,hide:j}=Dn({showing:s,canShow:T,handleShow:H,handleHide:J,hideOnRouteChange:_,processOnMount:!0});Object.assign(O,{delayShow:Y,delayHide:G});const{showPortal:X,hidePortal:F,renderPortal:V}=jn(i,u,w,"tooltip");if(o.platform.is.mobile===!0){const E={anchorEl:m,innerRef:u,onClickOutside(g){return j(g),g.target.classList.contains("q-dialog__backdrop")&&Ee(g),!0}},c=q(()=>e.modelValue===null&&e.persistent!==!0&&s.value===!0);se(c,g=>{(g===!0?rr:Tt)(E)}),Je(()=>{Tt(E)})}function H(E){X(),f(()=>{l=new MutationObserver(()=>z()),l.observe(u.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),z(),be()}),r===void 0&&(r=se(()=>o.screen.width+"|"+o.screen.height+"|"+e.self+"|"+e.anchor+"|"+o.lang.rtl,z)),k(()=>{X(!0),n("show",E)},e.transitionDuration)}function J(E){p(),F(),Z(),k(()=>{F(!0),n("hide",E)},e.transitionDuration)}function Z(){l!==void 0&&(l.disconnect(),l=void 0),r!==void 0&&(r(),r=void 0),x(),He(O,"tooltipTemp")}function z(){an({targetEl:u.value,offset:e.offset,anchorEl:m.value,anchorOrigin:d.value,selfOrigin:b.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Y(E){if(o.platform.is.mobile===!0){mt(),document.body.classList.add("non-selectable");const c=m.value,g=["touchmove","touchcancel","touchend","click"].map(v=>[c,v,"delayHide","passiveCapture"]);Ne(O,"tooltipTemp",g)}k(()=>{I(E)},e.delay)}function G(E){o.platform.is.mobile===!0&&(He(O,"tooltipTemp"),mt(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),k(()=>{j(E)},e.hideDelay)}function ve(){if(e.noParentEvent===!0||m.value===null)return;const E=o.platform.is.mobile===!0?[[m.value,"touchstart","delayShow","passive"]]:[[m.value,"mouseenter","delayShow","passive"],[m.value,"mouseleave","delayHide","passive"]];Ne(O,"anchor",E)}function be(){if(m.value!==null||e.scrollTarget!==void 0){D.value=Fn(m.value,e.scrollTarget);const E=e.noParentEvent===!0?z:j;P(D.value,E)}}function ke(){return s.value===!0?C("div",{...a,ref:u,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",a.class],style:[a.style,R.value],role:"tooltip"},Me(t.default)):null}function w(){return C(Nt,N.value,ke)}return Je(Z),Object.assign(i.proxy,{updatePosition:z}),V}});const na=["none","strict","leaf","leaf-filtered"];function Cn(e,t,n,a){return Object.defineProperty(e,t,{get:n,set:a,enumerable:!0}),e}var ra=Wr(rt({name:"RepoTree",props:{...Qe,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:e=>na.includes(e)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String,showThumbnails:Boolean,showManagementUI:Boolean},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide","action:import","action:open","action:upload"],setup(e,{slots:t,emit:n}){const{proxy:a}=Ce(),{$q:r}=a,l=Xe(e,r),i=$({}),o=$(e.ticked||[]),u=$(e.expanded||[]);let s={};Hn(()=>{s={}});const d=q(()=>`q-tree q-tree--${e.dense===!0?"dense":"standard"}`+(e.noConnectors===!0?" q-tree--no-connectors":"")+(l.value===!0?" q-tree--dark":"")+(e.color!==void 0?` text-${e.color}`:"")),b=q(()=>e.selected!==void 0),_=q(()=>e.icon||r.iconSet.tree.icon),f=q(()=>e.controlColor||e.color),p=q(()=>e.textColor!==void 0?` text-${e.textColor}`:""),k=q(()=>{const c=e.selectedColor||e.color;return c?` text-${c}`:""}),N=q(()=>e.filterMethod!==void 0?e.filterMethod:(c,g)=>{const v=g.toLowerCase();return c[e.labelKey]&&c[e.labelKey].toLowerCase().indexOf(v)>-1}),R=q(()=>{const c={},g=(v,y)=>{const h=v.tickStrategy||(y?y.tickStrategy:e.tickStrategy),S=v[e.nodeKey],K=v[e.childrenKey]&&Array.isArray(v[e.childrenKey])&&v[e.childrenKey].length!==0,te=v.disabled!==!0&&b.value===!0&&v.selectable!==!1,A=v.disabled!==!0&&v.expandable!==!1,de=h!=="none",Se=h==="strict",qe=h==="leaf-filtered",Ae=h==="leaf"||h==="leaf-filtered";let ne=v.disabled!==!0&&v.tickable!==!1;Ae===!0&&ne===!0&&y&&y.tickable!==!0&&(ne=!1);let oe=v.lazy;oe===!0&&i.value[S]!==void 0&&Array.isArray(v[e.childrenKey])===!0&&(oe=i.value[S]);const re={key:S,parent:y,isParent:K,lazy:oe,disabled:v.disabled,link:v.disabled!==!0&&(te===!0||A===!0&&(K===!0||oe===!0)),children:[],matchesFilter:e.filter?N.value(v,e.filter):!0,selected:S===e.selected&&te===!0,selectable:te,expanded:K===!0?u.value.includes(S):!1,expandable:A,noTick:v.noTick===!0||Se!==!0&&oe&&oe!=="loaded",tickable:ne,tickStrategy:h,hasTicking:de,strictTicking:Se,leafFilteredTicking:qe,leafTicking:Ae,ticked:Se===!0?o.value.includes(S):K===!0?!1:o.value.includes(S)};if(c[S]=re,K===!0&&(re.children=v[e.childrenKey].map(fe=>g(fe,re)),e.filter&&(re.matchesFilter!==!0?re.matchesFilter=re.children.some(fe=>fe.matchesFilter):re.noTick!==!0&&re.disabled!==!0&&re.tickable===!0&&qe===!0&&re.children.every(fe=>fe.matchesFilter!==!0||fe.noTick===!0||fe.tickable!==!0)===!0&&(re.tickable=!1)),re.matchesFilter===!0&&(re.noTick!==!0&&Se!==!0&&re.children.every(fe=>fe.noTick)===!0&&(re.noTick=!0),Ae))){if(re.ticked=!1,re.indeterminate=re.children.some(fe=>fe.indeterminate===!0),re.tickable=re.tickable===!0&&re.children.some(fe=>fe.tickable),re.indeterminate!==!0){const fe=re.children.reduce((M,U)=>U.ticked===!0?M+1:M,0);fe===re.children.length?re.ticked=!0:fe>0&&(re.indeterminate=!0)}re.indeterminate===!0&&(re.indeterminateNextState=re.children.every(fe=>fe.tickable!==!0||fe.ticked!==!0))}return re};return e.nodes.forEach(v=>g(v,null)),c});se(()=>e.ticked,c=>{o.value=c}),se(()=>e.expanded,c=>{u.value=c});function D(c){const g=[].reduce,v=(y,h)=>{if(y||!h)return y;if(Array.isArray(h)===!0)return g.call(Object(h),v,y);if(h[e.nodeKey]===c)return h;if(h[e.childrenKey])return v(null,h[e.childrenKey])};return v(null,e.nodes)}function P(){return o.value.map(c=>D(c))}function x(){return u.value.map(c=>D(c))}function m(c){return c&&R.value[c]?R.value[c].expanded:!1}function T(){e.expanded!==void 0?n("update:expanded",[]):u.value=[]}function O(){const c=[],g=v=>{v[e.childrenKey]&&v[e.childrenKey].length!==0&&v.expandable!==!1&&v.disabled!==!0&&(c.push(v[e.nodeKey]),v[e.childrenKey].forEach(g))};e.nodes.forEach(g),e.expanded!==void 0?n("update:expanded",c):u.value=c}function I(c,g,v=D(c),y=R.value[c]){if(y.lazy&&y.lazy!=="loaded"){if(y.lazy==="loading")return;i.value[c]="loading",Array.isArray(v[e.childrenKey])!==!0&&(v[e.childrenKey]=[]),n("lazyLoad",{node:v,key:c,done:h=>{i.value[c]="loaded",v[e.childrenKey]=Array.isArray(h)===!0?h:[],pt(()=>{const S=R.value[c];S&&S.isParent===!0&&j(c,!0)})},fail:()=>{delete i.value[c],v[e.childrenKey].length===0&&delete v[e.childrenKey]}})}else y.isParent===!0&&y.expandable===!0&&j(c,g)}function j(c,g){let v=u.value;const y=e.expanded!==void 0;if(y===!0&&(v=v.slice()),g){if(e.accordion&&R.value[c]){const h=[];R.value[c].parent?R.value[c].parent.children.forEach(S=>{S.key!==c&&S.expandable===!0&&h.push(S.key)}):e.nodes.forEach(S=>{const K=S[e.nodeKey];K!==c&&h.push(K)}),h.length!==0&&(v=v.filter(S=>h.includes(S)===!1))}v=v.concat([c]).filter((h,S,K)=>K.indexOf(h)===S)}else v=v.filter(h=>h!==c);y===!0?n("update:expanded",v):u.value=v}function X(c){return c&&R.value[c]?R.value[c].ticked:!1}function F(c,g){let v=o.value;const y=e.ticked!==void 0;y===!0&&(v=v.slice()),g?v=v.concat(c).filter((h,S,K)=>K.indexOf(h)===S):v=v.filter(h=>c.includes(h)===!1),y===!0&&n("update:ticked",v)}function V(c,g,v){const y={tree:a,node:c,key:v,color:e.color,dark:l.value};return Cn(y,"expanded",()=>g.expanded,h=>{h!==g.expanded&&I(v,h)}),Cn(y,"ticked",()=>g.ticked,h=>{h!==g.ticked&&F([v],h)}),y}function H(c){return(e.filter?c.filter(g=>R.value[g[e.nodeKey]].matchesFilter):c).map(g=>ve(g))}function J(c,g,v,y){return C(ye,{onClick:h=>{Ee(h),n(c,{nodeId:g})},tabindex:-1,size:"xs",padding:"none",style:{margin:0},flat:!0,stretch:!0},()=>[C(xe,{size:"xs",name:y}),C(ta,{anchor:"center left",self:"center right",transitionShow:"jump-left",transitionHide:"jump-right"},()=>v)])}function Z(c){const g=[];return c.type==="blob"?(g.push(J("action:import",c.id,"Import","mdi-import")),g.push(J("action:open",c.id,"Open","mdi-open-in-new"))):c.type==="repo"&&(g.push(J("action:edit",c.id,"Edit","mdi-pencil")),g.push(J("action:reload",c.id,"Reload","mdi-reload"))),(c.type==="repo"||c.type==="tree")&&e.showManagementUI&&g.push(J("action:upload",c.id,"Upload","mdi-upload")),g}function z(c){const g=c.img||c.avatar;if(g&&e.showThumbnails)return C("img",{class:`q-tree__${c.img?"img":"avatar"} q-mr-sm`,src:g});if(c.icon!==void 0)return C(xe,{class:"q-tree__icon q-mr-sm",name:c.icon,color:c.iconColor,size:c.type==="blob"?e.showThumbnails?"42px":"24px":void 0})}function Y(){n("afterShow")}function G(){n("afterHide")}function ve(c){const g=c[e.nodeKey],v=R.value[g],y=c.header&&t[`header-${c.header}`]||t["default-header"],h=v.isParent===!0?H(c[e.childrenKey]):[],S=h.length!==0||v.lazy&&v.lazy!=="loaded";let K=c.body&&t[`body-${c.body}`]||t["default-body"];const te=y!==void 0||K!==void 0?V(c,v,g):null;return K!==void 0&&(K=C("div",{class:"q-tree__node-body relative-position"},[C("div",{class:p.value},[K(te)])])),C("div",{key:g,class:`q-tree__node relative-position q-tree__node--${S===!0?"parent":"child"}`},[C("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(v.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(v.selected===!0?" q-tree__node--selected":"")+(v.disabled===!0?" q-tree__node--disabled":""),tabindex:v.link===!0?0:-1,onClick:A=>{ke(c,v,A)},onKeypress(A){rn(A)!==!0&&(A.keyCode===13?ke(c,v,A,!0):A.keyCode===32&&w(c,v,A,!0))}},[C("div",{class:"q-focus-helper",tabindex:-1,ref:A=>{s[v.key]=A}}),v.lazy==="loading"?C(Jn,{class:"q-tree__spinner",color:f.value}):S===!0?C(xe,{class:"q-tree__arrow"+(v.expanded===!0?" q-tree__arrow--rotate":""),name:_.value,onClick(A){w(c,v,A)}}):null,v.hasTicking===!0&&v.noTick!==!0?C(QCheckbox,{class:"q-tree__tickbox",modelValue:v.indeterminate===!0?null:v.ticked,color:f.value,dark:l.value,dense:!0,keepColor:!0,disable:v.tickable!==!0,onKeydown:Ee,"onUpdate:modelValue":A=>{E(v,A)}}):null,C("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(v.selected===!0?k.value:p.value)},[y?y(te):[z(c),C("div",c[e.labelKey])],C("div",{style:{flex:1}}),C("div",{class:"q-tree__hovercontrol"},Z(c))])]),S===!0?e.noTransition===!0?C("div",{class:"q-tree__node-collapsible"+p.value,key:`${g}__q`},[K,C("div",{class:"q-tree__children"+(v.disabled===!0?" q-tree__node--disabled":"")},v.expanded?h:null)]):C(gr,{duration:e.duration,onShow:Y,onHide:G},()=>ce(C("div",{class:"q-tree__node-collapsible"+p.value,key:`${g}__q`},[K,C("div",{class:"q-tree__children"+(v.disabled===!0?" q-tree__node--disabled":"")},h)]),[[Un,v.expanded]])):K])}function be(c){const g=s[c];g&&g.focus()}function ke(c,g,v,y){y!==!0&&g.selectable!==!1&&be(g.key),b.value&&g.selectable?e.noSelectionUnset===!1?n("update:selected",g.key!==e.selected?g.key:null):g.key!==e.selected&&n("update:selected",g.key===void 0?null:g.key):w(c,g,v,y),typeof c.handler=="function"&&c.handler(c)}function w(c,g,v,y){v!==void 0&&Ee(v),y!==!0&&g.selectable!==!1&&be(g.key),I(g.key,!g.expanded,c,g)}function E(c,g){if(c.indeterminate===!0&&(g=c.indeterminateNextState),c.strictTicking)F([c.key],g);else if(c.leafTicking){const v=[],y=h=>{h.isParent?(g!==!0&&h.noTick!==!0&&h.tickable===!0&&v.push(h.key),h.leafTicking===!0&&h.children.forEach(y)):h.noTick!==!0&&h.tickable===!0&&(h.leafFilteredTicking!==!0||h.matchesFilter===!0)&&v.push(h.key)};y(c),F(v,g)}}return e.defaultExpandAll===!0&&O(),Object.assign(a,{getNodeByKey:D,getTickedNodes:P,getExpandedNodes:x,isExpanded:m,collapseAll:T,expandAll:O,setExpanded:I,isTicked:X,setTicked:F}),()=>{const c=H(e.nodes);return C("div",{class:d.value},c.length===0?e.filter?e.noResultsLabel||r.lang.tree.noResults:e.noNodesLabel||r.lang.tree.noNodes:c)}}}));function yr(){return St(Qr)}let la=0;const aa=["click","keydown"],ia={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${la++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function oa(e,t,n,a){const r=St(Vn,De);if(r===De)return console.error("QTab/QRouteTab component needs to be child of QTabs"),De;const{proxy:l}=Ce(),i=$(null),o=$(null),u=$(null),s=q(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),d=q(()=>r.currentModel.value===e.name),b=q(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(d.value===!0?" q-tab--active"+(r.tabProps.value.activeClass?" "+r.tabProps.value.activeClass:"")+(r.tabProps.value.activeColor?` text-${r.tabProps.value.activeColor}`:"")+(r.tabProps.value.activeBgColor?` bg-${r.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&r.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||r.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(a!==void 0?a.linkClass.value:"")),_=q(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(r.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),f=q(()=>e.disable===!0||r.hasFocus.value===!0||d.value===!1&&r.hasActiveTab.value===!0?-1:e.tabindex||0);function p(P,x){if(x!==!0&&i.value!==null&&i.value.focus(),e.disable===!0){a!==void 0&&a.hasRouterLink.value===!0&&Ee(P);return}if(a===void 0){r.updateModel({name:e.name}),n("click",P);return}if(a.hasRouterLink.value===!0){const m=(T={})=>{let O;const I=T.to===void 0||Yr(T.to,e.to)===!0?r.avoidRouteWatcher=ln():null;return a.navigateToRouterLink(P,{...T,returnRouterError:!0}).catch(j=>{O=j}).then(j=>{if(I===r.avoidRouteWatcher&&(r.avoidRouteWatcher=!1,O===void 0&&(j===void 0||j.message.startsWith("Avoided redundant navigation")===!0)&&r.updateModel({name:e.name})),T.returnRouterError===!0)return O!==void 0?Promise.reject(O):j})};n("click",P,m),P.defaultPrevented!==!0&&m();return}n("click",P)}function k(P){At(P,[13,32])?p(P,!0):rn(P)!==!0&&P.keyCode>=35&&P.keyCode<=40&&P.altKey!==!0&&P.metaKey!==!0&&r.onKbdNavigate(P.keyCode,l.$el)===!0&&Ee(P),n("keydown",P)}function N(){const P=r.tabProps.value.narrowIndicator,x=[],m=C("div",{ref:u,class:["q-tab__indicator",r.tabProps.value.indicatorClass]});e.icon!==void 0&&x.push(C(xe,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&x.push(C("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&x.push(e.alertIcon!==void 0?C(xe,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):C("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),P===!0&&x.push(m);const T=[C("div",{class:"q-focus-helper",tabindex:-1,ref:i}),C("div",{class:_.value},zt(t.default,x))];return P===!1&&T.push(m),T}const R={name:q(()=>e.name),rootRef:o,tabIndicatorRef:u,routeData:a};Je(()=>{r.unregisterTab(R)}),nt(()=>{r.registerTab(R)});function D(P,x){const m={ref:o,class:b.value,tabindex:f.value,role:"tab","aria-selected":d.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:p,onKeydown:k,...x};return ce(C(P,m,N()),[[Xr,s.value]])}return{renderTab:D,$tabs:r}}var sa=we({name:"QTab",props:ia,emits:aa,setup(e,{slots:t,emit:n}){const{renderTab:a}=oa(e,t,n);return()=>a("div")}});const ua=C("div",{class:"q-space"});var br=we({name:"QSpace",setup(){return()=>ua}});let _r=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,_r=e.scrollLeft>=0,e.remove()}function ca(e,t,n){const a=n===!0?["left","right"]:["top","bottom"];return`absolute-${t===!0?a[0]:a[1]}${e?` text-${e}`:""}`}const da=["left","center","right","justify"];var fa=we({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>da.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:t,emit:n}){const{proxy:a}=Ce(),{$q:r}=a,{registerTick:l}=ht(),{registerTick:i}=ht(),{registerTick:o}=ht(),{registerTimeout:u,removeTimeout:s}=kt(),{registerTimeout:d,removeTimeout:b}=kt(),_=$(null),f=$(null),p=$(e.modelValue),k=$(!1),N=$(!0),R=$(!1),D=$(!1),P=[],x=$(0),m=$(!1);let T=null,O=null,I;const j=q(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:ca(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),X=q(()=>{const M=x.value,U=p.value;for(let ee=0;ee<M;ee++)if(P[ee].name.value===U)return!0;return!1}),F=q(()=>`q-tabs__content--align-${k.value===!0?"left":D.value===!0?"justify":e.align}`),V=q(()=>`q-tabs row no-wrap items-center q-tabs--${k.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),H=q(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+F.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),J=q(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),Z=q(()=>e.vertical!==!0&&r.lang.rtl===!0),z=q(()=>_r===!1&&Z.value===!0);se(Z,w),se(()=>e.modelValue,M=>{Y({name:M,setCurrent:!0,skipEmit:!0})}),se(()=>e.outsideArrows,G);function Y({name:M,setCurrent:U,skipEmit:ee}){p.value!==M&&(ee!==!0&&e["onUpdate:modelValue"]!==void 0&&n("update:modelValue",M),(U===!0||e["onUpdate:modelValue"]===void 0)&&(be(p.value,M),p.value=M))}function G(){l(()=>{ve({width:_.value.offsetWidth,height:_.value.offsetHeight})})}function ve(M){if(J.value===void 0||f.value===null)return;const U=M[J.value.container],ee=Math.min(f.value[J.value.scroll],Array.prototype.reduce.call(f.value.children,(ge,ue)=>ge+(ue[J.value.content]||0),0)),pe=U>0&&ee>U;k.value=pe,pe===!0&&i(w),D.value=U<parseInt(e.breakpoint,10)}function be(M,U){const ee=M!=null&&M!==""?P.find(ge=>ge.name.value===M):null,pe=U!=null&&U!==""?P.find(ge=>ge.name.value===U):null;if(ee&&pe){const ge=ee.tabIndicatorRef.value,ue=pe.tabIndicatorRef.value;T!==null&&(clearTimeout(T),T=null),ge.style.transition="none",ge.style.transform="none",ue.style.transition="none",ue.style.transform="none";const ae=ge.getBoundingClientRect(),Te=ue.getBoundingClientRect();ue.style.transform=e.vertical===!0?`translate3d(0,${ae.top-Te.top}px,0) scale3d(1,${Te.height?ae.height/Te.height:1},1)`:`translate3d(${ae.left-Te.left}px,0,0) scale3d(${Te.width?ae.width/Te.width:1},1,1)`,o(()=>{T=setTimeout(()=>{T=null,ue.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",ue.style.transform="none"},70)})}pe&&k.value===!0&&ke(pe.rootRef.value)}function ke(M){const{left:U,width:ee,top:pe,height:ge}=f.value.getBoundingClientRect(),ue=M.getBoundingClientRect();let ae=e.vertical===!0?ue.top-pe:ue.left-U;if(ae<0){f.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(ae),w();return}ae+=e.vertical===!0?ue.height-ge:ue.width-ee,ae>0&&(f.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(ae),w())}function w(){const M=f.value;if(M===null)return;const U=M.getBoundingClientRect(),ee=e.vertical===!0?M.scrollTop:Math.abs(M.scrollLeft);Z.value===!0?(N.value=Math.ceil(ee+U.width)<M.scrollWidth-1,R.value=ee>0):(N.value=ee>0,R.value=e.vertical===!0?Math.ceil(ee+U.height)<M.scrollHeight:Math.ceil(ee+U.width)<M.scrollWidth)}function E(M){O!==null&&clearInterval(O),O=setInterval(()=>{S(M)===!0&&v()},5)}function c(){E(z.value===!0?Number.MAX_SAFE_INTEGER:0)}function g(){E(z.value===!0?0:Number.MAX_SAFE_INTEGER)}function v(){O!==null&&(clearInterval(O),O=null)}function y(M,U){const ee=Array.prototype.filter.call(f.value.children,Te=>Te===U||Te.matches&&Te.matches(".q-tab.q-focusable")===!0),pe=ee.length;if(pe===0)return;if(M===36)return ke(ee[0]),ee[0].focus(),!0;if(M===35)return ke(ee[pe-1]),ee[pe-1].focus(),!0;const ge=M===(e.vertical===!0?38:37),ue=M===(e.vertical===!0?40:39),ae=ge===!0?-1:ue===!0?1:void 0;if(ae!==void 0){const Te=Z.value===!0?-1:1,Ke=ee.indexOf(U)+ae*Te;return Ke>=0&&Ke<pe&&(ke(ee[Ke]),ee[Ke].focus({preventScroll:!0})),!0}}const h=q(()=>z.value===!0?{get:M=>Math.abs(M.scrollLeft),set:(M,U)=>{M.scrollLeft=-U}}:e.vertical===!0?{get:M=>M.scrollTop,set:(M,U)=>{M.scrollTop=U}}:{get:M=>M.scrollLeft,set:(M,U)=>{M.scrollLeft=U}});function S(M){const U=f.value,{get:ee,set:pe}=h.value;let ge=!1,ue=ee(U);const ae=M<ue?-1:1;return ue+=ae*5,ue<0?(ge=!0,ue=0):(ae===-1&&ue<=M||ae===1&&ue>=M)&&(ge=!0,ue=M),pe(U,ue),w(),ge}function K(M,U){for(const ee in M)if(M[ee]!==U[ee])return!1;return!0}function te(){let M=null,U={matchedLen:0,queryDiff:9999,hrefLen:0};const ee=P.filter(ae=>ae.routeData!==void 0&&ae.routeData.hasRouterLink.value===!0),{hash:pe,query:ge}=a.$route,ue=Object.keys(ge).length;for(const ae of ee){const Te=ae.routeData.exact.value===!0;if(ae.routeData[Te===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Ke,query:Ht,matched:Pr,href:Rr}=ae.routeData.resolvedLink.value,Jt=Object.keys(Ht).length;if(Te===!0){if(Ke!==pe||Jt!==ue||K(ge,Ht)===!1)continue;M=ae.name.value;break}if(Ke!==""&&Ke!==pe||Jt!==0&&K(Ht,ge)===!1)continue;const Ue={matchedLen:Pr.length,queryDiff:ue-Jt,hrefLen:Rr.length-Ke.length};if(Ue.matchedLen>U.matchedLen){M=ae.name.value,U=Ue;continue}else if(Ue.matchedLen!==U.matchedLen)continue;if(Ue.queryDiff<U.queryDiff)M=ae.name.value,U=Ue;else if(Ue.queryDiff!==U.queryDiff)continue;Ue.hrefLen>U.hrefLen&&(M=ae.name.value,U=Ue)}M===null&&P.some(ae=>ae.routeData===void 0&&ae.name.value===p.value)===!0||Y({name:M,setCurrent:!0})}function A(M){if(s(),m.value!==!0&&_.value!==null&&M.target&&typeof M.target.closest=="function"){const U=M.target.closest(".q-tab");U&&_.value.contains(U)===!0&&(m.value=!0,k.value===!0&&ke(U))}}function de(){u(()=>{m.value=!1},30)}function Se(){oe.avoidRouteWatcher===!1?d(te):b()}function qe(){if(I===void 0){const M=se(()=>a.$route.fullPath,Se);I=()=>{M(),I=void 0}}}function Ae(M){P.push(M),x.value++,G(),M.routeData===void 0||a.$route===void 0?d(()=>{if(k.value===!0){const U=p.value,ee=U!=null&&U!==""?P.find(pe=>pe.name.value===U):null;ee&&ke(ee.rootRef.value)}}):(qe(),M.routeData.hasRouterLink.value===!0&&Se())}function ne(M){P.splice(P.indexOf(M),1),x.value--,G(),I!==void 0&&M.routeData!==void 0&&(P.every(U=>U.routeData===void 0)===!0&&I(),Se())}const oe={currentModel:p,tabProps:j,hasFocus:m,hasActiveTab:X,registerTab:Ae,unregisterTab:ne,verifyRouteModel:Se,updateModel:Y,onKbdNavigate:y,avoidRouteWatcher:!1};Gr(Vn,oe);function re(){T!==null&&clearTimeout(T),v(),I!==void 0&&I()}let fe;return Je(re),Wn(()=>{fe=I!==void 0,re()}),Qn(()=>{fe===!0&&qe(),G()}),()=>C("div",{ref:_,class:V.value,role:"tablist",onFocusin:A,onFocusout:de},[C(Zt,{onResize:ve}),C("div",{ref:f,class:H.value,onScroll:w},Me(t.default)),C(xe,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(N.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||r.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:c,onTouchstartPassive:c,onMouseupPassive:v,onMouseleavePassive:v,onTouchendPassive:v}),C(xe,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(R.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||r.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:g,onTouchstartPassive:g,onMouseupPassive:v,onMouseleavePassive:v,onTouchendPassive:v})])}});const cn={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},va=Object.keys(cn);cn.all=!0;function Et(e){const t={};for(const n of va)e[n]===!0&&(t[n]=!0);return Object.keys(t).length===0?cn:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const ha=["INPUT","TEXTAREA"];function Ot(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&ha.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function ma(e){const t=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((n,a)=>{const r=parseFloat(n);r&&(t[a]=r)}),t}var pa=nn({name:"touch-swipe",beforeMount(e,{value:t,arg:n,modifiers:a}){if(a.mouse!==!0&&Le.has.touch!==!0)return;const r=a.mouseCapture===!0?"Capture":"",l={handler:t,sensitivity:ma(n),direction:Et(a),noop:Xn,mouseStart(i){Ot(i,l)&&Yn(i)&&(Ne(l,"temp",[[document,"mousemove","move",`notPassive${r}`],[document,"mouseup","end","notPassiveCapture"]]),l.start(i,!0))},touchStart(i){if(Ot(i,l)){const o=i.target;Ne(l,"temp",[[o,"touchmove","move","notPassiveCapture"],[o,"touchcancel","end","notPassiveCapture"],[o,"touchend","end","notPassiveCapture"]]),l.start(i)}},start(i,o){Le.is.firefox===!0&&ot(e,!0);const u=ct(i);l.event={x:u.left,y:u.top,time:Date.now(),mouse:o===!0,dir:!1}},move(i){if(l.event===void 0)return;if(l.event.dir!==!1){Ee(i);return}const o=Date.now()-l.event.time;if(o===0)return;const u=ct(i),s=u.left-l.event.x,d=Math.abs(s),b=u.top-l.event.y,_=Math.abs(b);if(l.event.mouse!==!0){if(d<l.sensitivity[1]&&_<l.sensitivity[1]){l.end(i);return}}else if(window.getSelection().toString()!==""){l.end(i);return}else if(d<l.sensitivity[2]&&_<l.sensitivity[2])return;const f=d/o,p=_/o;l.direction.vertical===!0&&d<_&&d<100&&p>l.sensitivity[0]&&(l.event.dir=b<0?"up":"down"),l.direction.horizontal===!0&&d>_&&_<100&&f>l.sensitivity[0]&&(l.event.dir=s<0?"left":"right"),l.direction.up===!0&&d<_&&b<0&&d<100&&p>l.sensitivity[0]&&(l.event.dir="up"),l.direction.down===!0&&d<_&&b>0&&d<100&&p>l.sensitivity[0]&&(l.event.dir="down"),l.direction.left===!0&&d>_&&s<0&&_<100&&f>l.sensitivity[0]&&(l.event.dir="left"),l.direction.right===!0&&d>_&&s>0&&_<100&&f>l.sensitivity[0]&&(l.event.dir="right"),l.event.dir!==!1?(Ee(i),l.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),mt(),l.styleCleanup=k=>{l.styleCleanup=void 0,document.body.classList.remove("non-selectable");const N=()=>{document.body.classList.remove("no-pointer-events--children")};k===!0?setTimeout(N,50):N()}),l.handler({evt:i,touch:l.event.mouse!==!0,mouse:l.event.mouse,direction:l.event.dir,duration:o,distance:{x:d,y:_}})):l.end(i)},end(i){l.event!==void 0&&(He(l,"temp"),Le.is.firefox===!0&&ot(e,!1),l.styleCleanup!==void 0&&l.styleCleanup(!0),i!==void 0&&l.event.dir!==!1&&Ee(i),l.event=void 0)}};if(e.__qtouchswipe=l,a.mouse===!0){const i=a.mouseCapture===!0||a.mousecapture===!0?"Capture":"";Ne(l,"main",[[e,"mousedown","mouseStart",`passive${i}`]])}Le.has.touch===!0&&Ne(l,"main",[[e,"touchstart","touchStart",`passive${a.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const n=e.__qtouchswipe;n!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&n.end(),n.handler=t.value),n.direction=Et(t.modifiers))},beforeUnmount(e){const t=e.__qtouchswipe;t!==void 0&&(He(t,"main"),He(t,"temp"),Le.is.firefox===!0&&ot(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchswipe)}});function ga(){const e=new Map;return{getCache:function(t,n){return e[t]===void 0?e[t]=n:e[t]},getCacheWithFn:function(t,n){return e[t]===void 0?e[t]=n():e[t]}}}const ya={name:{required:!0},disable:Boolean},qn={setup(e,{slots:t}){return()=>C("div",{class:"q-panel scroll",role:"tabpanel"},Me(t.default))}},ba={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},_a=["update:modelValue","beforeTransition","transition"];function wa(){const{props:e,emit:t,proxy:n}=Ce(),{getCacheWithFn:a}=ga();let r,l;const i=$(null),o=$(null);function u(H){const J=e.vertical===!0?"up":"left";O((n.$q.lang.rtl===!0?-1:1)*(H.direction===J?1:-1))}const s=q(()=>[[pa,u,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),d=q(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),b=q(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),_=q(()=>`--q-transition-duration: ${e.transitionDuration}ms`),f=q(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),p=q(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),k=q(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);se(()=>e.modelValue,(H,J)=>{const Z=P(H)===!0?x(H):-1;l!==!0&&T(Z===-1?0:Z<x(J)?-1:1),i.value!==Z&&(i.value=Z,t("beforeTransition",H,J),pt(()=>{t("transition",H,J)}))});function N(){O(1)}function R(){O(-1)}function D(H){t("update:modelValue",H)}function P(H){return H!=null&&H!==""}function x(H){return r.findIndex(J=>J.props.name===H&&J.props.disable!==""&&J.props.disable!==!0)}function m(){return r.filter(H=>H.props.disable!==""&&H.props.disable!==!0)}function T(H){const J=H!==0&&e.animated===!0&&i.value!==-1?"q-transition--"+(H===-1?d.value:b.value):null;o.value!==J&&(o.value=J)}function O(H,J=i.value){let Z=J+H;for(;Z>-1&&Z<r.length;){const z=r[Z];if(z!==void 0&&z.props.disable!==""&&z.props.disable!==!0){T(H),l=!0,t("update:modelValue",z.props.name),setTimeout(()=>{l=!1});return}Z+=H}e.infinite===!0&&r.length!==0&&J!==-1&&J!==r.length&&O(H,H===-1?r.length:-1)}function I(){const H=x(e.modelValue);return i.value!==H&&(i.value=H),!0}function j(){const H=P(e.modelValue)===!0&&I()&&r[i.value];return e.keepAlive===!0?[C(el,p.value,[C(k.value===!0?a(f.value,()=>({...qn,name:f.value})):qn,{key:f.value,style:_.value},()=>H)])]:[C("div",{class:"q-panel scroll",style:_.value,key:f.value,role:"tabpanel"},[H])]}function X(){if(r.length!==0)return e.animated===!0?[C(Nt,{name:o.value},j)]:j()}function F(H){return r=Zr(Me(H.default,[])).filter(J=>J.props!==null&&J.props.slot===void 0&&P(J.props.name)===!0),r.length}function V(){return r}return Object.assign(n,{next:N,previous:R,goTo:D}),{panelIndex:i,panelDirectives:s,updatePanelsList:F,updatePanelIndex:I,getPanelContent:X,getEnabledPanels:m,getPanels:V,isValidPanelName:P,keepAliveProps:p,needsUniqueKeepAliveWrapper:k,goToPanelByOffset:O,goToPanel:D,nextPanel:N,previousPanel:R}}var ka=we({name:"QTabPanel",props:ya,setup(e,{slots:t}){return()=>C("div",{class:"q-tab-panel",role:"tabpanel"},Me(t.default))}}),Sa=we({name:"QTabPanels",props:{...ba,...Qe},emits:_a,setup(e,{slots:t}){const n=Ce(),a=Xe(e,n.proxy.$q),{updatePanelsList:r,getPanelContent:l,panelDirectives:i}=wa(),o=q(()=>"q-tab-panels q-panel-parent"+(a.value===!0?" q-tab-panels--dark q-dark":""));return()=>(r(t),tl("div",{class:o.value},l(),"pan",e.swipeable,()=>i.value))}});function wr(e){return nl()?(rl(e),!0):!1}function kr(e){return typeof e=="function"?e():le(e)}const Ft=typeof window!="undefined",Sr=()=>{};function xa(...e){if(e.length!==1)return ll(...e);const t=e[0];return typeof t=="function"?al(il(()=>({get:t,set:Sr}))):$(t)}function Ca(e,t=!0){Ce()?nt(e):t?e():pt(e)}function xr(e){var t;const n=kr(e);return(t=n==null?void 0:n.$el)!=null?t:n}const bt=Ft?window:void 0;Ft&&window.document;Ft&&window.navigator;Ft&&window.location;function Re(...e){let t,n,a,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,a,r]=e,t=bt):[t,n,a,r]=e,!t)return Sr;Array.isArray(n)||(n=[n]),Array.isArray(a)||(a=[a]);const l=[],i=()=>{l.forEach(d=>d()),l.length=0},o=(d,b,_,f)=>(d.addEventListener(b,_,f),()=>d.removeEventListener(b,_,f)),u=se(()=>[xr(t),kr(r)],([d,b])=>{i(),d&&l.push(...n.flatMap(_=>a.map(f=>o(d,_,f,b))))},{immediate:!0,flush:"post"}),s=()=>{u(),i()};return wr(s),s}function qa(){const e=$(!1);return Ce()&&nt(()=>{e.value=!0}),e}function Ta(e){const t=qa();return q(()=>(t.value,Boolean(e())))}function Pa(e,t={}){const{window:n=bt}=t,a=Ta(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let r;const l=$(!1),i=()=>{!r||("removeEventListener"in r?r.removeEventListener("change",o):r.removeListener(o))},o=()=>{!a.value||(i(),r=n.matchMedia(xa(e).value),l.value=!!(r!=null&&r.matches),r&&("addEventListener"in r?r.addEventListener("change",o):r.addListener(o)))};return ol(o),wr(()=>i()),l}const Ra={page:e=>[e.pageX,e.pageY],client:e=>[e.clientX,e.clientY],screen:e=>[e.screenX,e.screenY],movement:e=>e instanceof Touch?null:[e.movementX,e.movementY]};function $a(e={}){const{type:t="page",touch:n=!0,resetOnTouchEnds:a=!1,initialValue:r={x:0,y:0},window:l=bt,target:i=l,eventFilter:o}=e,u=$(r.x),s=$(r.y),d=$(null),b=typeof t=="function"?t:Ra[t],_=R=>{const D=b(R);D&&([u.value,s.value]=D,d.value="mouse")},f=R=>{if(R.touches.length>0){const D=b(R.touches[0]);D&&([u.value,s.value]=D,d.value="touch")}},p=()=>{u.value=r.x,s.value=r.y},k=o?R=>o(()=>_(R),{}):R=>_(R),N=o?R=>o(()=>f(R),{}):R=>f(R);return i&&(Re(i,"mousemove",k,{passive:!0}),Re(i,"dragover",k,{passive:!0}),n&&t!=="movement"&&(Re(i,"touchstart",N,{passive:!0}),Re(i,"touchmove",N,{passive:!0}),a&&Re(i,"touchend",p,{passive:!0}))),{x:u,y:s,sourceType:d}}function Ea(e={}){const{touch:t=!0,drag:n=!0,initialValue:a=!1,window:r=bt}=e,l=$(a),i=$(null);if(!r)return{pressed:l,sourceType:i};const o=d=>()=>{l.value=!0,i.value=d},u=()=>{l.value=!1,i.value=null},s=q(()=>xr(e.target)||r);return Re(s,"mousedown",o("mouse"),{passive:!0}),Re(r,"mouseleave",u,{passive:!0}),Re(r,"mouseup",u,{passive:!0}),n&&(Re(s,"dragstart",o("mouse"),{passive:!0}),Re(r,"drop",u,{passive:!0}),Re(r,"dragend",u,{passive:!0})),t&&(Re(s,"touchstart",o("touch"),{passive:!0}),Re(r,"touchend",u,{passive:!0}),Re(r,"touchcancel",u,{passive:!0})),{pressed:l,sourceType:i}}function Oa(e={}){const{window:t=bt,initialWidth:n=1/0,initialHeight:a=1/0,listenOrientation:r=!0,includeScrollbar:l=!0}=e,i=$(n),o=$(a),u=()=>{t&&(l?(i.value=t.innerWidth,o.value=t.innerHeight):(i.value=t.document.documentElement.clientWidth,o.value=t.document.documentElement.clientHeight))};if(u(),Ca(u),Re("resize",u,{passive:!0}),r){const s=Pa("(orientation: portrait)");se(s,()=>u())}return{width:i,height:o}}const za=rt({__name:"PanelResizer",props:{maxSize:{},minSize:{},setSize:{type:Function}},setup(e){const t=e,n=Ye(),a=$(),{pressed:r}=Ea({target:a}),{y:l}=$a(),{height:i}=Oa();return se(()=>r,o=>{n.globalCursor=o?"ns-resize":""}),se(l,o=>{if(r.value){let u=i.value-o-3;u>t.maxSize&&(u=t.maxSize),u<t.minSize&&(u=t.minSize),t.setSize(u)}}),(o,u)=>(Q(),ie("div",{ref_key:"el",ref:a,style:{height:"3px",cursor:"ns-resize",marginTop:"-3px"}}," \xA0 ",512))}});var Tn=we({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const n=q(()=>parseInt(e.lines,10)),a=q(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(n.value===1?" ellipsis":"")),r=q(()=>e.lines!==void 0&&n.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":n.value}:null);return()=>C("div",{style:r.value,class:a.value},Me(t.default))}});const Pn=["B","KB","MB","GB","TB","PB"];function Aa(e){let t=0;for(;parseInt(e,10)>=1024&&t<Pn.length-1;)e/=1024,++t;return`${e.toFixed(1)}${Pn[t]}`}function Na(e){return e.charAt(0).toUpperCase()+e.slice(1)}function vt(e,t,n){return n<=t?t:Math.min(n,Math.max(t,e))}function Ma(e,t,n){if(n<=t)return t;const a=n-t+1;let r=t+(e-t)%a;return r<t&&(r=a+r),r===0?0:r}function Ba(e,t=2,n="0"){if(e==null)return e;const a=""+e;return a.length>=t?a:new Array(t-a.length+1).join(n)+a}var Cr={humanStorageSize:Aa,capitalize:Na,between:vt,normalizeToInterval:Ma,pad:Ba};const La={class:"row"},Ia=["href"],Ka=rt({__name:"NodePreviewTab",props:{label:{},info:{}},setup(e){const t=e,{humanStorageSize:n}=Cr,a=Ye(),r=$(null),l=async i=>{r.value=(await El({...i,token:a.token})).commit};return se(()=>t.info,l),nt(()=>{l(t.info)}),(i,o)=>(Q(),ie("div",La,[B(at,{dense:"",class:"col-xs-12"},{default:W(()=>[B(Be,null,{default:W(()=>[B(Tn,null,{default:W(()=>[$e(Oe(i.info.path)+" ["+Oe(le(n)(i.info.size))+"]",1)]),_:1}),B(Tn,null,{default:W(()=>[L("a",{href:`https://github.com/${i.info.repo}/tree/${i.info.branch}/${i.info.path}`},[B(xe,{name:"mdi-github",size:"15px",style:{"vertical-align":"baseline"}}),$e(Oe(i.info.repo),1)],8,Ia)]),_:1})]),_:1})]),_:1})]))}}),Da={class:"thumbnail"},ja=["src"],Fa={style:{display:"flex","flex-direction":"column",flex:"1"}},Ha=rt({__name:"NodePreview",props:{node:{},showManagementUI:{type:Boolean}},emits:["action:import","action:open","action:edit"],setup(e,{emit:t}){const n=e,a=Ye(),r=$(""),l=$("step"),i=async u=>{var s,d,b,_;(s=u.meta)!=null&&s.thumb?r.value=(d=u==null?void 0:u.meta)==null?void 0:d.thumb:(b=u.content_types)!=null&&b.thumb?sn({url:(_=u==null?void 0:u.content_types)==null?void 0:_.thumb.url,token:a.token}).then(f=>r.value=f):r.value=""},o=u=>{var s;if(((s=u.content_types)==null?void 0:s[l.value])===void 0){const d=u.content_types;l.value=d!=null&&d.step?"step":d!=null&&d.f3d?"f3d":d!=null&&d.dxf?"dxf":d!=null&&d.svg?"svg":l.value}};return nt(()=>{i(n.node),o(n.node)}),se(()=>n.node,i),se(()=>n.node,o),(u,s)=>(Q(),ie("div",{class:"previewPane shadow-up-2",style:st([{"z-index":"2"},{maxHeight:`${le(a).preferences.previewSize}px`}])},[B(za,{setSize:d=>le(a).preferences.previewSize=d,minSize:64,maxSize:256},null,8,["setSize"]),L("div",{class:"row",style:st({display:"flex",flexDirection:"row",flexWrap:"nowrap",height:`${le(a).preferences.previewSize}px`})},[L("div",Da,[r.value?(Q(),ie("img",{key:0,src:r.value,style:st({width:`${le(a).preferences.previewSize}px`,height:`${le(a).preferences.previewSize}px`,objectFit:"contain"})},null,12,ja)):he("",!0),r.value?he("",!0):(Q(),_e(xe,{key:1,name:u.node.icon,size:`${le(a).preferences.previewSize}px`},null,8,["name","size"]))]),L("div",Fa,[B(fa,{breakpoint:50,modelValue:l.value,"onUpdate:modelValue":s[3]||(s[3]=d=>l.value=d),dense:"","narrow-indicator":"",align:"left",class:"shadow-2"},{default:W(()=>{var d,b,_,f,p;return[(Q(!0),ie(Ge,null,Ze(Object.keys(((d=u.node)==null?void 0:d.content_types)||{}).filter(k=>k!=="meta"&&k!=="thumb"),k=>(Q(),_e(sa,{name:k,key:k,dense:"",label:`.${k.toUpperCase()}`},null,8,["name","label"]))),128)),B(br),B(ye,{icon:"mdi-import",size:"sm",dense:"",rounded:"",unelevated:"",label:"Import",class:"q-pr-sm q-mr-sm",onClick:s[0]||(s[0]=k=>{k.stopPropagation(),k.preventDefault(),t("action:import",{nodeId:u.node.id,contentType:l.value})})}),((b=u.node.content_types)==null?void 0:b.step)||((_=u.node.content_types)==null?void 0:_.f3d)?(Q(),_e(ye,{key:0,icon:"mdi-open-in-new",size:"sm",dense:"",rounded:"",unelevated:"",label:"Open",class:"q-pr-sm q-mr-sm",onClick:s[1]||(s[1]=k=>{k.stopPropagation(),k.preventDefault(),t("action:open",{nodeId:u.node.id,contentType:l.value})})})):he("",!0),n.showManagementUI&&(((f=u.node.content_types)==null?void 0:f.step)||((p=u.node.content_types)==null?void 0:p.f3d))?(Q(),_e(ye,{key:1,icon:"mdi-pencil",size:"sm",dense:"",rounded:"",unelevated:"",label:"edit",class:"q-mr-sm",onClick:s[2]||(s[2]=k=>{k.stopPropagation(),k.preventDefault(),t("action:edit",{nodeId:u.node.id})})})):he("",!0)]}),_:1},8,["modelValue"]),B(Sa,{animated:"",modelValue:l.value,"onUpdate:modelValue":s[4]||(s[4]=d=>l.value=d),style:{flex:"1","overflow-y":"auto",height:"1px"}},{default:W(()=>{var d;return[(Q(!0),ie(Ge,null,Ze(Object.keys(((d=u.node)==null?void 0:d.content_types)||{}).filter(b=>b!=="meta"&&b!=="thumb"),b=>(Q(),_e(ka,{class:"q-pa-xs",key:b,name:b},{default:W(()=>{var _,f;return[B(Ka,{label:b.toUpperCase(),info:(f=(_=u.node)==null?void 0:_.content_types)==null?void 0:f[b]},null,8,["label","info"])]}),_:2},1032,["name"]))),128))]}),_:1},8,["modelValue"])])],4)],4))}}),Ja=()=>!0;function Ua(e){const t={};return e.forEach(n=>{t[n]=Ja}),t}function Ie(){const{emit:e,proxy:t}=Ce(),n=$(null);function a(){n.value.show()}function r(){n.value.hide()}function l(o){e("ok",o),r()}function i(){e("hide")}return Object.assign(t,{show:a,hide:r}),{dialogRef:n,onDialogHide:i,onDialogOK:l,onDialogCancel:r}}const qr=["ok","hide"];Ie.emits=qr;Ie.emitsObject=Ua(qr);const Va={class:"row q-mb-sm"},Wa=L("label",{for:"token"},"Github API Key: ",-1),Qa={class:"row q-mb-sm"},Xa=L("label",{for:"token"},"Interface URL: ",-1),Ya={class:"row q-mb-sm"},Ga={style:{"margin-left":"17px"}},Za={class:"row q-mb-sm"},ei={style:{"margin-left":"17px"}},ti={__name:"SettingsDialog",emits:[...Ie.emits],setup(e){const t=Ye(),n=$(t.token),a={...t.preferences},{dialogRef:r,onDialogHide:l,onDialogOK:i,onDialogCancel:o}=Ie();function u(){a.interfaceUrl,t.token=n,t.saveToken(),Object.assign(t.preferences,a),t.savePreferences(),i()}return(s,d)=>(Q(),_e(Mt,{ref_key:"dialogRef",ref:r,onHide:le(l),square:""},{default:W(()=>[B(It,{class:"q-dialog-plugin"},{default:W(()=>[B(Bt,null,{default:W(()=>[L("div",Va,[Wa,ce(L("input",{id:"token","bg-color":"white",style:{flex:1},"onUpdate:modelValue":d[0]||(d[0]=b=>n.value=b)},null,512),[[dt,n.value]])]),L("div",Qa,[Xa,ce(L("input",{id:"token","bg-color":"white",style:{flex:1},placeholder:"https://mapleleafmakers.github.io/VoronConstruct360/","onUpdate:modelValue":d[1]||(d[1]=b=>a.interfaceUrl=b)},null,512),[[dt,a.interfaceUrl]])]),L("div",Ya,[L("label",Ga,[$e(" Show Thumbnails: "),ce(L("input",{type:"checkbox","onUpdate:modelValue":d[2]||(d[2]=b=>a.showThumbnails=b)},null,512),[[ut,a.showThumbnails]])])]),L("div",Za,[L("label",ei,[$e(" Mgmt. Controls: "),ce(L("input",{type:"checkbox","onUpdate:modelValue":d[3]||(d[3]=b=>a.showManagementUI=b)},null,512),[[ut,a.showManagementUI]])])])]),_:1}),B(Lt,{align:"right"},{default:W(()=>[B(ye,{size:"sm",square:"",color:"negative","text-color":"white",label:"Cancel",onClick:le(o)},null,8,["onClick"]),B(ye,{color:"positive","text-color":"white",label:"OK",size:"sm",square:"",onClick:u})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var ni=we({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:t}){const n=q(()=>{const a=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(r=>e[r]===!0).map(r=>`q-btn-group--${r}`).join(" ");return`q-btn-group row no-wrap${a.length!==0?" "+a:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>C("div",{class:n.value},Me(t.default))}});const ri={class:"row q-mb-sm"},li=L("label",null,"Display Name: ",-1),ai={class:"row q-mb-sm"},ii=L("label",null,"Repositories: ",-1),oi={style:{display:"flex","flex-direction":"column",flex:"1"}},si={class:"row q-mb-xs"},ui=["onKeypress"],ci={class:"row"},Rn={__name:"CollectionEditor",props:{initialValue:{type:Object,required:!1,default:null}},emits:[...Ie.emits],setup(e){const t=e,n=yr(),a=Ye(),r=$(null),l=$(""),i=it(JSON.parse(JSON.stringify(t.initialValue||{}))),o=async()=>{const x=d.value-1,m=d.value;[i.repositories[x],i.repositories[m]]=[i.repositories[m],i.repositories[x]]},u=async()=>{const x=d.value+1,m=d.value;[i.repositories[x],i.repositories[m]]=[i.repositories[m],i.repositories[x]]},s=async()=>{let x;try{x=await Cl({input:l.value,token:a.token})}catch(m){alert(m);return}i.repositories=[...i.repositories||[],x],l.value=""},d=q(()=>((i==null?void 0:i.repositories)||[]).findIndex(x=>x.repr===r.value)),b=q(()=>d.value!==null&&d.value!==void 0&&d.value>0),_=q(()=>{const x=d.value>-1&&d.value<((i==null?void 0:i.repositories)||[]).length-1;return console.log("can move down?",x,d.value),x}),f=()=>{const x=i.repositories.findIndex(m=>m.repr===r.value);i.repositories.splice(x,1)},p=()=>{n.dialog({title:"Are you sure?",message:"Are you sure you want to permanently delete this collection?",cancel:!0,persistent:!1,ok:{class:"bordered",square:!0,size:"sm",color:"positive",nocaps:!0},cancel:{class:"bordered",square:!0,size:"sm",push:!0,color:"negative",nocaps:!0}}).onOk(()=>{const x=a.tree.findIndex(m=>(console.log("checking",m.id,"vs",i.id,m.id==i.id),m.id==i.id));x!==-1?(console.log("Found match at idx"),a.tree.splice(x,1),a.saveCollections(),D()):console.log("No match found for",i.id)})};se(()=>r.value,(x,m)=>{console.log(m,"->",x)});const{dialogRef:k,onDialogHide:N,onDialogOK:R,onDialogCancel:D}=Ie();function P(){R(i)}return(x,m)=>(Q(),_e(Mt,{ref_key:"dialogRef",ref:k,onHide:le(N),square:""},{default:W(()=>[B(It,{class:"q-dialog-plugin"},{default:W(()=>[B(Bt,null,{default:W(()=>[L("div",ri,[li,ce(L("input",{"bg-color":"white",style:{flex:1},"onUpdate:modelValue":m[0]||(m[0]=T=>i.name=T)},null,512),[[dt,i.name]])]),L("div",ai,[ii,L("div",oi,[L("div",si,[ce(L("input",{"onUpdate:modelValue":m[1]||(m[1]=T=>l.value=T),"bg-color":"white",style:{flex:1},onKeypress:Gn(s,["enter"])},null,40,ui),[[dt,l.value]]),B(ye,{class:"bordered",style:{"border-left":"none"},unelevated:"",size:"sm",icon:"add",onClick:s})]),ce(L("select",{"onUpdate:modelValue":m[2]||(m[2]=T=>r.value=T),size:"4",style:{flex:1},class:"q-mb-xs"},[(Q(!0),ie(Ge,null,Ze(i.repositories||[],T=>(Q(),ie("option",{key:T.repr},Oe(T.repr),1))),128))],512),[[xt,r.value]]),L("div",ci,[B(ni,{square:"",unelevated:""},{default:W(()=>[B(ye,{size:"sm",class:"bordered",style:{"border-right":"none"},unelevated:"",square:"",disable:!b.value,onClick:o,icon:"mdi-arrow-up"},null,8,["disable"]),B(ye,{size:"sm",class:"bordered",unelevated:"",square:"",disable:!_.value,onClick:u,icon:"mdi-arrow-down"},null,8,["disable"])]),_:1}),B(ye,{size:"sm",class:"bordered q-ml-md",square:"",unelevated:"",disable:!r.value,onClick:f,icon:"mdi-delete"},null,8,["disable"])])])])]),_:1}),B(Lt,null,{default:W(()=>{var T;return[B(ye,{square:"",size:"sm",class:"bordered",label:"DELETE",color:"negative","text-color":"yellow",style:{"font-weight":"bold"},onClick:p}),B(br),B(ye,{square:"",size:"sm",class:"bordered",color:"negative",label:"Cancel",onClick:le(D)},null,8,["onClick"]),B(ye,{square:"",size:"sm",class:"bordered",label:"OK",color:"positive",disable:!(i.name&&((T=i==null?void 0:i.repositories)==null?void 0:T.length)>0),onClick:P},null,8,["disable"])]}),_:1})]),_:1})]),_:1},8,["onHide"]))}},di=[C("g",[C("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}),C("clipPath",{id:"uil-hourglass-clip1"},[C("rect",{x:"15",y:"20",width:" 70",height:"25"},[C("animate",{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}),C("animate",{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"})])]),C("clipPath",{id:"uil-hourglass-clip2"},[C("rect",{x:"15",y:"55",width:" 70",height:"25"},[C("animate",{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}),C("animate",{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"})])]),C("path",{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}),C("path",{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}),C("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"})])];var fi=we({name:"QSpinnerHourglass",props:sl,setup(e){const{cSize:t,classes:n}=ul(e);return()=>C("svg",{class:n.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},di)}});const vi=["none","strict","leaf","leaf-filtered"];var Tr=we({name:"QTree",props:{...Qe,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:e=>vi.includes(e)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(e,{slots:t,emit:n}){const{proxy:a}=Ce(),{$q:r}=a,l=Xe(e,r),i=$({}),o=$(e.ticked||[]),u=$(e.expanded||[]);let s={};Hn(()=>{s={}});const d=q(()=>`q-tree q-tree--${e.dense===!0?"dense":"standard"}`+(e.noConnectors===!0?" q-tree--no-connectors":"")+(l.value===!0?" q-tree--dark":"")+(e.color!==void 0?` text-${e.color}`:"")),b=q(()=>e.selected!==void 0),_=q(()=>e.icon||r.iconSet.tree.icon),f=q(()=>e.controlColor||e.color),p=q(()=>e.textColor!==void 0?` text-${e.textColor}`:""),k=q(()=>{const w=e.selectedColor||e.color;return w?` text-${w}`:""}),N=q(()=>e.filterMethod!==void 0?e.filterMethod:(w,E)=>{const c=E.toLowerCase();return w[e.labelKey]&&w[e.labelKey].toLowerCase().indexOf(c)>-1}),R=q(()=>{const w={},E=(c,g)=>{const v=c.tickStrategy||(g?g.tickStrategy:e.tickStrategy),y=c[e.nodeKey],h=c[e.childrenKey]&&Array.isArray(c[e.childrenKey])&&c[e.childrenKey].length!==0,S=c.disabled!==!0&&b.value===!0&&c.selectable!==!1,K=c.disabled!==!0&&c.expandable!==!1,te=v!=="none",A=v==="strict",de=v==="leaf-filtered",Se=v==="leaf"||v==="leaf-filtered";let qe=c.disabled!==!0&&c.tickable!==!1;Se===!0&&qe===!0&&g&&g.tickable!==!0&&(qe=!1);let Ae=c.lazy;Ae===!0&&i.value[y]!==void 0&&Array.isArray(c[e.childrenKey])===!0&&(Ae=i.value[y]);const ne={key:y,parent:g,isParent:h,lazy:Ae,disabled:c.disabled,link:c.disabled!==!0&&(S===!0||K===!0&&(h===!0||Ae===!0)),children:[],matchesFilter:e.filter?N.value(c,e.filter):!0,selected:y===e.selected&&S===!0,selectable:S,expanded:h===!0?u.value.includes(y):!1,expandable:K,noTick:c.noTick===!0||A!==!0&&Ae&&Ae!=="loaded",tickable:qe,tickStrategy:v,hasTicking:te,strictTicking:A,leafFilteredTicking:de,leafTicking:Se,ticked:A===!0?o.value.includes(y):h===!0?!1:o.value.includes(y)};if(w[y]=ne,h===!0&&(ne.children=c[e.childrenKey].map(oe=>E(oe,ne)),e.filter&&(ne.matchesFilter!==!0?ne.matchesFilter=ne.children.some(oe=>oe.matchesFilter):ne.noTick!==!0&&ne.disabled!==!0&&ne.tickable===!0&&de===!0&&ne.children.every(oe=>oe.matchesFilter!==!0||oe.noTick===!0||oe.tickable!==!0)===!0&&(ne.tickable=!1)),ne.matchesFilter===!0&&(ne.noTick!==!0&&A!==!0&&ne.children.every(oe=>oe.noTick)===!0&&(ne.noTick=!0),Se))){if(ne.ticked=!1,ne.indeterminate=ne.children.some(oe=>oe.indeterminate===!0),ne.tickable=ne.tickable===!0&&ne.children.some(oe=>oe.tickable),ne.indeterminate!==!0){const oe=ne.children.reduce((re,fe)=>fe.ticked===!0?re+1:re,0);oe===ne.children.length?ne.ticked=!0:oe>0&&(ne.indeterminate=!0)}ne.indeterminate===!0&&(ne.indeterminateNextState=ne.children.every(oe=>oe.tickable!==!0||oe.ticked!==!0))}return ne};return e.nodes.forEach(c=>E(c,null)),w});se(()=>e.ticked,w=>{o.value=w}),se(()=>e.expanded,w=>{u.value=w});function D(w){const E=[].reduce,c=(g,v)=>{if(g||!v)return g;if(Array.isArray(v)===!0)return E.call(Object(v),c,g);if(v[e.nodeKey]===w)return v;if(v[e.childrenKey])return c(null,v[e.childrenKey])};return c(null,e.nodes)}function P(){return o.value.map(w=>D(w))}function x(){return u.value.map(w=>D(w))}function m(w){return w&&R.value[w]?R.value[w].expanded:!1}function T(){e.expanded!==void 0?n("update:expanded",[]):u.value=[]}function O(){const w=[],E=c=>{c[e.childrenKey]&&c[e.childrenKey].length!==0&&c.expandable!==!1&&c.disabled!==!0&&(w.push(c[e.nodeKey]),c[e.childrenKey].forEach(E))};e.nodes.forEach(E),e.expanded!==void 0?n("update:expanded",w):u.value=w}function I(w,E,c=D(w),g=R.value[w]){if(g.lazy&&g.lazy!=="loaded"){if(g.lazy==="loading")return;i.value[w]="loading",Array.isArray(c[e.childrenKey])!==!0&&(c[e.childrenKey]=[]),n("lazyLoad",{node:c,key:w,done:v=>{i.value[w]="loaded",c[e.childrenKey]=Array.isArray(v)===!0?v:[],pt(()=>{const y=R.value[w];y&&y.isParent===!0&&j(w,!0)})},fail:()=>{delete i.value[w],c[e.childrenKey].length===0&&delete c[e.childrenKey]}})}else g.isParent===!0&&g.expandable===!0&&j(w,E)}function j(w,E){let c=u.value;const g=e.expanded!==void 0;if(g===!0&&(c=c.slice()),E){if(e.accordion&&R.value[w]){const v=[];R.value[w].parent?R.value[w].parent.children.forEach(y=>{y.key!==w&&y.expandable===!0&&v.push(y.key)}):e.nodes.forEach(y=>{const h=y[e.nodeKey];h!==w&&v.push(h)}),v.length!==0&&(c=c.filter(y=>v.includes(y)===!1))}c=c.concat([w]).filter((v,y,h)=>h.indexOf(v)===y)}else c=c.filter(v=>v!==w);g===!0?n("update:expanded",c):u.value=c}function X(w){return w&&R.value[w]?R.value[w].ticked:!1}function F(w,E){let c=o.value;const g=e.ticked!==void 0;g===!0&&(c=c.slice()),E?c=c.concat(w).filter((v,y,h)=>h.indexOf(v)===y):c=c.filter(v=>w.includes(v)===!1),g===!0&&n("update:ticked",c)}function V(w,E,c){const g={tree:a,node:w,key:c,color:e.color,dark:l.value};return vn(g,"expanded",()=>E.expanded,v=>{v!==E.expanded&&I(c,v)}),vn(g,"ticked",()=>E.ticked,v=>{v!==E.ticked&&F([c],v)}),g}function H(w){return(e.filter?w.filter(E=>R.value[E[e.nodeKey]].matchesFilter):w).map(E=>Y(E))}function J(w){if(w.icon!==void 0)return C(xe,{class:"q-tree__icon q-mr-sm",name:w.icon,color:w.iconColor});const E=w.img||w.avatar;if(E)return C("img",{class:`q-tree__${w.img?"img":"avatar"} q-mr-sm`,src:E})}function Z(){n("afterShow")}function z(){n("afterHide")}function Y(w){const E=w[e.nodeKey],c=R.value[E],g=w.header&&t[`header-${w.header}`]||t["default-header"],v=c.isParent===!0?H(w[e.childrenKey]):[],y=v.length!==0||c.lazy&&c.lazy!=="loaded";let h=w.body&&t[`body-${w.body}`]||t["default-body"];const S=g!==void 0||h!==void 0?V(w,c,E):null;return h!==void 0&&(h=C("div",{class:"q-tree__node-body relative-position"},[C("div",{class:p.value},[h(S)])])),C("div",{key:E,class:`q-tree__node relative-position q-tree__node--${y===!0?"parent":"child"}`},[C("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(c.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(c.selected===!0?" q-tree__node--selected":"")+(c.disabled===!0?" q-tree__node--disabled":""),tabindex:c.link===!0?0:-1,onClick:K=>{ve(w,c,K)},onKeypress(K){rn(K)!==!0&&(K.keyCode===13?ve(w,c,K,!0):K.keyCode===32&&be(w,c,K,!0))}},[C("div",{class:"q-focus-helper",tabindex:-1,ref:K=>{s[c.key]=K}}),c.lazy==="loading"?C(Jn,{class:"q-tree__spinner",color:f.value}):y===!0?C(xe,{class:"q-tree__arrow"+(c.expanded===!0?" q-tree__arrow--rotate":""),name:_.value,onClick(K){be(w,c,K)}}):null,c.hasTicking===!0&&c.noTick!==!0?C(cl,{class:"q-tree__tickbox",modelValue:c.indeterminate===!0?null:c.ticked,color:f.value,dark:l.value,dense:!0,keepColor:!0,disable:c.tickable!==!0,onKeydown:Ee,"onUpdate:modelValue":K=>{ke(c,K)}}):null,C("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(c.selected===!0?k.value:p.value)},[g?g(S):[J(w),C("div",w[e.labelKey])]])]),y===!0?e.noTransition===!0?C("div",{class:"q-tree__node-collapsible"+p.value,key:`${E}__q`},[h,C("div",{class:"q-tree__children"+(c.disabled===!0?" q-tree__node--disabled":"")},c.expanded?v:null)]):C(gr,{duration:e.duration,onShow:Z,onHide:z},()=>ce(C("div",{class:"q-tree__node-collapsible"+p.value,key:`${E}__q`},[h,C("div",{class:"q-tree__children"+(c.disabled===!0?" q-tree__node--disabled":"")},v)]),[[Un,c.expanded]])):h])}function G(w){const E=s[w];E&&E.focus()}function ve(w,E,c,g){g!==!0&&E.selectable!==!1&&G(E.key),b.value&&E.selectable?e.noSelectionUnset===!1?n("update:selected",E.key!==e.selected?E.key:null):E.key!==e.selected&&n("update:selected",E.key===void 0?null:E.key):be(w,E,c,g),typeof w.handler=="function"&&w.handler(w)}function be(w,E,c,g){c!==void 0&&Ee(c),g!==!0&&E.selectable!==!1&&G(E.key),I(E.key,!E.expanded,w,E)}function ke(w,E){if(w.indeterminate===!0&&(E=w.indeterminateNextState),w.strictTicking)F([w.key],E);else if(w.leafTicking){const c=[],g=v=>{v.isParent?(E!==!0&&v.noTick!==!0&&v.tickable===!0&&c.push(v.key),v.leafTicking===!0&&v.children.forEach(g)):v.noTick!==!0&&v.tickable===!0&&(v.leafFilteredTicking!==!0||v.matchesFilter===!0)&&c.push(v.key)};g(w),F(c,E)}}return e.defaultExpandAll===!0&&O(),Object.assign(a,{getNodeByKey:D,getTickedNodes:P,getExpandedNodes:x,isExpanded:m,collapseAll:T,expandAll:O,setExpanded:I,isTicked:X,setTicked:F}),()=>{const w=H(e.nodes);return C("div",{class:d.value},w.length===0?e.filter?e.noResultsLabel||r.lang.tree.noResults:e.noNodesLabel||r.lang.tree.noNodes:w)}}});const hi={class:"row q-mb-sm"},mi=L("label",null,"Name: ",-1),pi=["disabled"],gi={class:"row q-mb-sm"},yi=L("label",null,"Path: ",-1),bi={style:{flex:"1",position:"relative"}},_i=["id"],wi={key:0},ki=["onBlur","onKeypress"],Si={key:1},xi={class:"row q-mb-sm no-wrap"},Ci={style:{"margin-left":"17px","white-space":"nowrap"}},qi={key:0,class:"text-negative"},Ti={class:"row q-mb-sm no-wrap"},Pi={style:{"margin-left":"17px","white-space":"nowrap"}},Ri={key:0,class:"text-negative"},$i={class:"row q-mb-sm"},Ei=L("label",null,"Thumbnail: ",-1),Oi={class:"thumbnail-edit-wrapper"},zi={class:"row q-col-gutter-xs"},Ai=["src"],Ni={class:"col-6 q-pt-none"},Mi={class:"row"},Bi=L("label",null,"Upload To: ",-1),Li=["value"],Ii={key:0,style:{display:"flex","flex-direction":"row",position:"absolute",top:"0px",bottom:"0px",left:"0px",right:"0px","text-align":"center","align-items":"center","justify-content":"center","background-color":"rgba(128, 128, 128, 0.5)"}},$n=rt({__name:"ContentEditor",props:{initialValue:{},collection:{}},emits:[...Ie.emits],setup(e){var E,c,g,v;const t=e,n=$(!1),a=$(null),r=$(!1),l=$(!1),i=Ye(),o=$(!1),u=$(),s=$("New Folder"),d=$((E=t==null?void 0:t.initialValue)==null?void 0:E.name),b=$(""),_=t.collection||i.getTopLevelNode((g=(c=t.initialValue)==null?void 0:c.id)==null?void 0:g.split("|")[0]);let f="";(v=t==null?void 0:t.initialValue)!=null&&v.path&&(f=t==null?void 0:t.initialValue.path.split("/").slice(0,-1).join("/"));const p=$(f),k=$(["/"]),N=$(p.value),R=$(!1),D=(y,h,S)=>{var de,Se;const K=(de=u.value)==null?void 0:de.getNodeByKey(h.id.split("/").slice(0,-1).join("/"));let te=!0;S||(te=!1);const A=K.children.filter(qe=>qe.name===S);A.length>1&&(console.log("matches",A),te=!1),h.name=S,h.path=K.path="/"+h.name,te?h.editing=!1:(y.preventDefault(),y.stopImmediatePropagation(),(Se=y.target)==null||Se.focus())},P=y=>btoa(y).replaceAll("=",""),x=y=>y.filter(S=>S.type==="tree").map(S=>({id:S.path,path:S.path,icon:"mdi-folder",selectable:!0,name:S.name,editing:!1,children:S.children?x(S.children):[]})),m=it([{name:"/",icon:"mdi-folder",selectable:!0,id:"/",path:"",children:x((_==null?void 0:_.children)||[])}]),T=$((_==null?void 0:_.uploadTo)||(_==null?void 0:_.repositories[0].repr)),O=y=>{var K,te;s.value="New Folder",y.preventDefault(),y.stopPropagation();const h=(K=u.value)==null?void 0:K.getNodeByKey(N.value),S={id:h.path+"/"+ln(),name:"New Folder",path:h.path+"/New Folder",selectable:!0,icon:"mdi-folder-star",editing:!0,children:[]};h.children.push(S),N.value=S.id,(te=u.value)==null||te.setExpanded(h.id,!0),setTimeout(()=>{var de;const A=document.querySelector(`#pathTree--${P(S.id)}`);console.log("node",A),A==null||A.scrollIntoView({block:"center"}),(de=A==null?void 0:A.querySelector("input"))==null||de.focus()},500)},I=q(()=>{var y,h;if(l.value){const S=(h=(y=t.initialValue)==null?void 0:y.content_types)==null?void 0:h.f3d,K=_.repositories.filter(te=>te.repr===T.value)[0];if(S&&S.repo!==K.repo)return"cannot replace the f3d file, it exists in another repository."}return""}),j=q(()=>{var y,h;if(r.value){const S=(h=(y=t.initialValue)==null?void 0:y.content_types)==null?void 0:h.step,K=_.repositories.filter(te=>te.repr===T.value)[0];if(S&&S.repo!==K.repo)return"cannot replace the step file, it exists in another repository."}return""}),X=y=>{var K;let h=[...(K=y.clipboardData)==null?void 0:K.items];if(h=h.filter(te=>/image/.test(te.type)),!h.length||h.length===0)return!1;let S=new FileReader;S.onload=()=>{const te=S.result;b.value=te},S.readAsDataURL(h[0].getAsFile())},F=y=>new Promise(h=>{const S=new window.FileReader;S.onload=()=>{b.value=S.result,o.value=!0,h(b.value)},S.readAsDataURL(y)}),V=y=>{var h;y.stopPropagation(),y.preventDefault(),F((h=y.dataTransfer)==null?void 0:h.files[0])},H=y=>{var S;y.stopPropagation(),y.preventDefault();const h=y.target;F((S=h.files)==null?void 0:S[0]).then(()=>{a.value!==null&&(a.value.value="")})},J=y=>{var h;y.preventDefault(),y.stopPropagation(),(h=a.value)==null||h.click()},Z=async()=>{const y=await i.backend.get_screenshot({width:256,height:256,transparent:n.value});y?(b.value=y,o.value=!0):alert("Workspace image capture failed.")},z=async()=>{var S,K,te,A,de,Se;const y=(te=(K=(S=t==null?void 0:t.initialValue)==null?void 0:S.content_types)==null?void 0:K.thumb)==null?void 0:te.url,h=(de=(A=t==null?void 0:t.initialValue)==null?void 0:A.meta)==null?void 0:de.thumb;h?b.value=h:y?b.value=await sn({url:y,token:i.token}):b.value="",(Se=t==null?void 0:t.initialValue)!=null&&Se.name||await i.backend.export_model({f3d:!1,step:!1}).then(qe=>{d.value=qe==null?void 0:qe.name})},Y=()=>{var y;if(d.value!==((y=t.initialValue)==null?void 0:y.name)||o.value||l.value||r.value)return!0};nt(()=>{z()});const{dialogRef:G,onDialogHide:ve,onDialogOK:be,onDialogCancel:ke}=Ie();function w(){R.value=!0,setTimeout(()=>{i.backend.export_model({f3d:l.value,step:r.value}).then(y=>{var K,te;const h=[];R.value=!1,l.value&&h.push({path:`${N.value}/${d.value}.f3d`,content:(K=y.f3d)==null?void 0:K.split(",")[1],encoding:"base64"}),r.value&&h.push({path:`${N.value}/${d.value}.step`,content:(te=y.step)==null?void 0:te.split(",")[1],encoding:"base64"}),o.value&&h.push({path:`${N.value}/${d.value}.png`,content:b.value.split(",")[1],encoding:"base64"});const S=_.repositories.filter(A=>A.repr===T.value)[0];ir({repo:S.repo,branch:S.branch,files:h,message:`Add ${N.value}`,token:i.token,progressCallback:null}).then(()=>{R.value=!1,be()})})},500)}return(y,h)=>(Q(),_e(Mt,{ref_key:"dialogRef",ref:G,onHide:le(ve),square:""},{default:W(()=>[B(It,{class:"q-dialog-plugin"},{default:W(()=>[B(Bt,{style:{position:"relative"}},{default:W(()=>{var S,K,te;return[L("div",hi,[mi,ce(L("input",{disabled:!!((S=t.initialValue)!=null&&S.name),"bg-color":"white",style:{flex:1},"onUpdate:modelValue":h[0]||(h[0]=A=>d.value=A)},null,8,pi),[[dt,d.value]])]),L("div",gi,[yi,L("div",bi,[B(le(Tr),{ref_key:"treeRef",ref:u,dense:"","default-expand-all":!!p.value,selected:N.value,"onUpdate:selected":h[3]||(h[3]=A=>N.value=A),expanded:k.value,"onUpdate:expanded":h[4]||(h[4]=A=>k.value=A),"no-selection-unset":"",nodes:m,filter:p.value,"filter-method":(A,de)=>A.path===de,"node-key":"id","label-key":"name",class:"pathTree"},{"default-header":W(({node:A})=>[B(xe,{name:A.icon,class:"q-tree__icon q-mr-sm"},null,8,["name"]),L("div",{id:`pathTree--${P(A.id)}`,onKeypress:h[2]||(h[2]=de=>de.stopImmediatePropagation())},[A.editing?ce((Q(),ie("input",{key:1,"onUpdate:modelValue":h[1]||(h[1]=de=>s.value=de),onBlur:de=>D(de,A,s.value),onKeypress:Gn(de=>D(de,A,s.value),["enter"])},null,40,ki)),[[dt,s.value]]):(Q(),ie("span",wi,Oe(A.name),1))],40,_i)]),_:1},8,["default-expand-all","selected","expanded","nodes","filter","filter-method"]),(K=t.initialValue)!=null&&K.path?(Q(),ie("div",{key:0,class:"pathTree--disabler",onClick:h[5]||(h[5]=A=>{A.preventDefault(),A.stopPropagation()})})):he("",!0),(te=t.initialValue)!=null&&te.path?he("",!0):(Q(),ie("div",Si,[B(ye,{size:"sm",icon:"mdi-folder-plus-outline",label:"New Folder",flat:"",square:"","no-caps":"",disable:!N.value,class:"bordered q-mt-xs",onClick:O},null,8,["disable"])]))])]),L("div",xi,[L("label",Ci,[$e("Upload .STEP: "),ce(L("input",{type:"checkbox","onUpdate:modelValue":h[6]||(h[6]=A=>r.value=A)},null,512),[[ut,r.value]])]),j.value?(Q(),ie("div",qi,Oe(j.value),1)):he("",!0)]),L("div",Ti,[L("label",Pi,[$e("Upload .F3D: "),ce(L("input",{type:"checkbox","onUpdate:modelValue":h[7]||(h[7]=A=>l.value=A)},null,512),[[ut,l.value]])]),I.value?(Q(),ie("div",Ri,Oe(I.value),1)):he("",!0)]),L("div",$i,[Ei,L("div",Oi,[L("div",zi,[L("div",{contenteditable:"true",class:"col-6 q-pa-none editor-thumb",onDragover:h[8]||(h[8]=A=>{A.dataTransfer&&(A.dataTransfer.effectAllowed="all")}),onDrop:V,onPaste:X,onBeforeinput:h[9]||(h[9]=A=>{A.inputType!=="insertFromPaste"&&(A.preventDefault(),A.stopPropagation()),console.log(A)})},[L("img",{src:b.value||"img/cube-outline.svg"},null,8,Ai)],32),L("div",Ni,[B(ye,{dense:"",label:"Choose",size:"sm",flat:"",icon:"upload",class:"full-width bordered q-mb-xs","no-caps":"",onClick:J}),B(ye,{dense:"",onClick:Z,label:"Capture",icon:"mdi-monitor-screenshot",size:"sm",flat:"",class:"full-width bordered","no-caps":""}),L("label",null,[ce(L("input",{type:"checkbox","onUpdate:modelValue":h[10]||(h[10]=A=>n.value=A)},null,512),[[ut,n.value]]),$e(" BG Transparency")])])]),L("input",{ref_key:"filePicker",ref:a,onChange:H,id:"thumbnail",type:"file",style:{display:"none"}},null,544)])]),L("div",Mi,[Bi,ce(L("select",{"onUpdate:modelValue":h[11]||(h[11]=A=>T.value=A),style:{flex:"1"}},[(Q(!0),ie(Ge,null,Ze(le(_).repositories,A=>(Q(),ie("option",{value:A.repr,key:A.repr},Oe(A.repr),9,Li))),128))],512),[[xt,T.value]])]),R.value?(Q(),ie("div",Ii,[B(fi,{color:"purple",size:"10em"})])):he("",!0)]}),_:1}),B(Lt,{align:"right"},{default:W(()=>[B(ye,{square:"",size:"sm",class:"bordered",color:"negative",label:"Cancel",onClick:le(ke)},null,8,["onClick"]),B(ye,{square:"",size:"sm",class:"bordered",label:"OK",color:"positive",disable:!Y(),onClick:w},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}});function Xt(e,t,n){const a=ct(e);let r,l=a.left-t.event.x,i=a.top-t.event.y,o=Math.abs(l),u=Math.abs(i);const s=t.direction;s.horizontal===!0&&s.vertical!==!0?r=l<0?"left":"right":s.horizontal!==!0&&s.vertical===!0?r=i<0?"up":"down":s.up===!0&&i<0?(r="up",o>u&&(s.left===!0&&l<0?r="left":s.right===!0&&l>0&&(r="right"))):s.down===!0&&i>0?(r="down",o>u&&(s.left===!0&&l<0?r="left":s.right===!0&&l>0&&(r="right"))):s.left===!0&&l<0?(r="left",o<u&&(s.up===!0&&i<0?r="up":s.down===!0&&i>0&&(r="down"))):s.right===!0&&l>0&&(r="right",o<u&&(s.up===!0&&i<0?r="up":s.down===!0&&i>0&&(r="down")));let d=!1;if(r===void 0&&n===!1){if(t.event.isFirst===!0||t.event.lastDir===void 0)return{};r=t.event.lastDir,d=!0,r==="left"||r==="right"?(a.left-=l,o=0,l=0):(a.top-=i,u=0,i=0)}return{synthetic:d,payload:{evt:e,touch:t.event.mouse!==!0,mouse:t.event.mouse===!0,position:a,direction:r,isFirst:t.event.isFirst,isFinal:n===!0,duration:Date.now()-t.event.time,distance:{x:o,y:u},offset:{x:l,y:i},delta:{x:a.left-t.event.lastX,y:a.top-t.event.lastY}}}}let Ki=0;var En=nn({name:"touch-pan",beforeMount(e,{value:t,modifiers:n}){if(n.mouse!==!0&&Le.has.touch!==!0)return;function a(l,i){n.mouse===!0&&i===!0?Ee(l):(n.stop===!0&&Ut(l),n.prevent===!0&&wt(l))}const r={uid:"qvtp_"+Ki++,handler:t,modifiers:n,direction:Et(n),noop:Xn,mouseStart(l){Ot(l,r)&&Yn(l)&&(Ne(r,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),r.start(l,!0))},touchStart(l){if(Ot(l,r)){const i=l.target;Ne(r,"temp",[[i,"touchmove","move","notPassiveCapture"],[i,"touchcancel","end","passiveCapture"],[i,"touchend","end","passiveCapture"]]),r.start(l)}},start(l,i){if(Le.is.firefox===!0&&ot(e,!0),r.lastEvt=l,i===!0||n.stop===!0){if(r.direction.all!==!0&&(i!==!0||r.modifiers.mouseAllDir!==!0&&r.modifiers.mousealldir!==!0)){const s=l.type.indexOf("mouse")>-1?new MouseEvent(l.type,l):new TouchEvent(l.type,l);l.defaultPrevented===!0&&wt(s),l.cancelBubble===!0&&Ut(s),Object.assign(s,{qKeyEvent:l.qKeyEvent,qClickOutside:l.qClickOutside,qAnchorHandled:l.qAnchorHandled,qClonedBy:l.qClonedBy===void 0?[r.uid]:l.qClonedBy.concat(r.uid)}),r.initialEvent={target:l.target,event:s}}Ut(l)}const{left:o,top:u}=ct(l);r.event={x:o,y:u,time:Date.now(),mouse:i===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:o,lastY:u}},move(l){if(r.event===void 0)return;const i=ct(l),o=i.left-r.event.x,u=i.top-r.event.y;if(o===0&&u===0)return;r.lastEvt=l;const s=r.event.mouse===!0,d=()=>{a(l,s);let f;n.preserveCursor!==!0&&n.preservecursor!==!0&&(f=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),s===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),mt(),r.styleCleanup=p=>{if(r.styleCleanup=void 0,f!==void 0&&(document.documentElement.style.cursor=f),document.body.classList.remove("non-selectable"),s===!0){const k=()=>{document.body.classList.remove("no-pointer-events--children")};p!==void 0?setTimeout(()=>{k(),p()},50):k()}else p!==void 0&&p()}};if(r.event.detected===!0){r.event.isFirst!==!0&&a(l,r.event.mouse);const{payload:f,synthetic:p}=Xt(l,r,!1);f!==void 0&&(r.handler(f)===!1?r.end(l):(r.styleCleanup===void 0&&r.event.isFirst===!0&&d(),r.event.lastX=f.position.left,r.event.lastY=f.position.top,r.event.lastDir=p===!0?void 0:f.direction,r.event.isFirst=!1));return}if(r.direction.all===!0||s===!0&&(r.modifiers.mouseAllDir===!0||r.modifiers.mousealldir===!0)){d(),r.event.detected=!0,r.move(l);return}const b=Math.abs(o),_=Math.abs(u);b!==_&&(r.direction.horizontal===!0&&b>_||r.direction.vertical===!0&&b<_||r.direction.up===!0&&b<_&&u<0||r.direction.down===!0&&b<_&&u>0||r.direction.left===!0&&b>_&&o<0||r.direction.right===!0&&b>_&&o>0?(r.event.detected=!0,r.move(l)):r.end(l,!0))},end(l,i){if(r.event!==void 0){if(He(r,"temp"),Le.is.firefox===!0&&ot(e,!1),i===!0)r.styleCleanup!==void 0&&r.styleCleanup(),r.event.detected!==!0&&r.initialEvent!==void 0&&r.initialEvent.target.dispatchEvent(r.initialEvent.event);else if(r.event.detected===!0){r.event.isFirst===!0&&r.handler(Xt(l===void 0?r.lastEvt:l,r).payload);const{payload:o}=Xt(l===void 0?r.lastEvt:l,r,!0),u=()=>{r.handler(o)};r.styleCleanup!==void 0?r.styleCleanup(u):u()}r.event=void 0,r.initialEvent=void 0,r.lastEvt=void 0}}};if(e.__qtouchpan=r,n.mouse===!0){const l=n.mouseCapture===!0||n.mousecapture===!0?"Capture":"";Ne(r,"main",[[e,"mousedown","mouseStart",`passive${l}`]])}Le.has.touch===!0&&Ne(r,"main",[[e,"touchstart","touchStart",`passive${n.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const n=e.__qtouchpan;n!==void 0&&(t.oldValue!==t.value&&(typeof value!="function"&&n.end(),n.handler=t.value),n.direction=Et(t.modifiers))},beforeUnmount(e){const t=e.__qtouchpan;t!==void 0&&(t.event!==void 0&&t.end(),He(t,"main"),He(t,"temp"),Le.is.firefox===!0&&ot(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchpan)}});const On=["vertical","horizontal"],Yt={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},zn={prevent:!0,mouse:!0,mouseAllDir:!0},An=e=>e>=250?50:Math.ceil(e/5);var Di=we({name:"QScrollArea",props:{...Qe,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:t,emit:n}){const a=$(!1),r=$(!1),l=$(!1),i={vertical:$(0),horizontal:$(0)},o={vertical:{ref:$(null),position:$(0),size:$(0)},horizontal:{ref:$(null),position:$(0),size:$(0)}},{proxy:u}=Ce(),s=Xe(e,u.$q);let d=null,b;const _=$(null),f=q(()=>"q-scrollarea"+(s.value===!0?" q-scrollarea--dark":""));o.vertical.percentage=q(()=>{const z=o.vertical.size.value-i.vertical.value;if(z<=0)return 0;const Y=vt(o.vertical.position.value/z,0,1);return Math.round(Y*1e4)/1e4}),o.vertical.thumbHidden=q(()=>(e.visible===null?l.value:e.visible)!==!0&&a.value===!1&&r.value===!1||o.vertical.size.value<=i.vertical.value+1),o.vertical.thumbStart=q(()=>o.vertical.percentage.value*(i.vertical.value-o.vertical.thumbSize.value)),o.vertical.thumbSize=q(()=>Math.round(vt(i.vertical.value*i.vertical.value/o.vertical.size.value,An(i.vertical.value),i.vertical.value))),o.vertical.style=q(()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${o.vertical.thumbStart.value}px`,height:`${o.vertical.thumbSize.value}px`})),o.vertical.thumbClass=q(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(o.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),o.vertical.barClass=q(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(o.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),o.horizontal.percentage=q(()=>{const z=o.horizontal.size.value-i.horizontal.value;if(z<=0)return 0;const Y=vt(Math.abs(o.horizontal.position.value)/z,0,1);return Math.round(Y*1e4)/1e4}),o.horizontal.thumbHidden=q(()=>(e.visible===null?l.value:e.visible)!==!0&&a.value===!1&&r.value===!1||o.horizontal.size.value<=i.horizontal.value+1),o.horizontal.thumbStart=q(()=>o.horizontal.percentage.value*(i.horizontal.value-o.horizontal.thumbSize.value)),o.horizontal.thumbSize=q(()=>Math.round(vt(i.horizontal.value*i.horizontal.value/o.horizontal.size.value,An(i.horizontal.value),i.horizontal.value))),o.horizontal.style=q(()=>({...e.thumbStyle,...e.horizontalThumbStyle,[u.$q.lang.rtl===!0?"right":"left"]:`${o.horizontal.thumbStart.value}px`,width:`${o.horizontal.thumbSize.value}px`})),o.horizontal.thumbClass=q(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(o.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),o.horizontal.barClass=q(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(o.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const p=q(()=>o.vertical.thumbHidden.value===!0&&o.horizontal.thumbHidden.value===!0?e.contentStyle:e.contentActiveStyle),k=[[En,z=>{O(z,"vertical")},void 0,{vertical:!0,...zn}]],N=[[En,z=>{O(z,"horizontal")},void 0,{horizontal:!0,...zn}]];function R(){const z={};return On.forEach(Y=>{const G=o[Y];z[Y+"Position"]=G.position.value,z[Y+"Percentage"]=G.percentage.value,z[Y+"Size"]=G.size.value,z[Y+"ContainerSize"]=i[Y].value}),z}const D=dl(()=>{const z=R();z.ref=u,n("scroll",z)},0);function P(z,Y,G){if(On.includes(z)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(z==="vertical"?hn:Vt)(_.value,Y,G)}function x({height:z,width:Y}){let G=!1;i.vertical.value!==z&&(i.vertical.value=z,G=!0),i.horizontal.value!==Y&&(i.horizontal.value=Y,G=!0),G===!0&&F()}function m({position:z}){let Y=!1;o.vertical.position.value!==z.top&&(o.vertical.position.value=z.top,Y=!0),o.horizontal.position.value!==z.left&&(o.horizontal.position.value=z.left,Y=!0),Y===!0&&F()}function T({height:z,width:Y}){o.horizontal.size.value!==Y&&(o.horizontal.size.value=Y,F()),o.vertical.size.value!==z&&(o.vertical.size.value=z,F())}function O(z,Y){const G=o[Y];if(z.isFirst===!0){if(G.thumbHidden.value===!0)return;b=G.position.value,r.value=!0}else if(r.value!==!0)return;z.isFinal===!0&&(r.value=!1);const ve=Yt[Y],be=i[Y].value,ke=(G.size.value-be)/(be-G.thumbSize.value),w=z.distance[ve.dist],E=b+(z.direction===ve.dir?1:-1)*w*ke;V(E,Y)}function I(z,Y){const G=o[Y];if(G.thumbHidden.value!==!0){const ve=z[Yt[Y].offset];if(ve<G.thumbStart.value||ve>G.thumbStart.value+G.thumbSize.value){const be=ve-G.thumbSize.value/2;V(be/i[Y].value*G.size.value,Y)}G.ref.value!==null&&G.ref.value.dispatchEvent(new MouseEvent(z.type,z))}}function j(z){I(z,"vertical")}function X(z){I(z,"horizontal")}function F(){a.value=!0,d!==null&&clearTimeout(d),d=setTimeout(()=>{d=null,a.value=!1},e.delay),e.onScroll!==void 0&&D()}function V(z,Y){_.value[Yt[Y].scroll]=z}function H(){l.value=!0}function J(){l.value=!1}let Z=null;return se(()=>u.$q.lang.rtl,z=>{_.value!==null&&Vt(_.value,Math.abs(o.horizontal.position.value)*(z===!0?-1:1))}),Wn(()=>{Z={top:o.vertical.position.value,left:o.horizontal.position.value}}),Qn(()=>{if(Z===null)return;const z=_.value;z!==null&&(Vt(z,Z.left),hn(z,Z.top))}),Je(D.cancel),Object.assign(u,{getScrollTarget:()=>_.value,getScroll:R,getScrollPosition:()=>({top:o.vertical.position.value,left:o.horizontal.position.value}),getScrollPercentage:()=>({top:o.vertical.percentage.value,left:o.horizontal.percentage.value}),setScrollPosition:P,setScrollPercentage(z,Y,G){P(z,Y*(o[z].size.value-i[z].value)*(z==="horizontal"&&u.$q.lang.rtl===!0?-1:1),G)}}),()=>C("div",{class:f.value,onMouseenter:H,onMouseleave:J},[C("div",{ref:_,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:e.tabindex!==void 0?e.tabindex:void 0},[C("div",{class:"q-scrollarea__content absolute",style:p.value},zt(t.default,[C(Zt,{debounce:0,onResize:T})])),C(ml,{axis:"both",onScroll:m})]),C(Zt,{debounce:0,onResize:x}),C("div",{class:o.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:j}),C("div",{class:o.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:X}),ce(C("div",{ref:o.vertical.ref,class:o.vertical.thumbClass.value,style:o.vertical.style.value,"aria-hidden":"true"}),k),ce(C("div",{ref:o.horizontal.ref,class:o.horizontal.thumbClass.value,style:o.horizontal.style.value,"aria-hidden":"true"}),N)])}});const ji={xs:2,sm:4,md:6,lg:10,xl:14};function Nn(e,t,n){return{transform:t===!0?`translateX(${n.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var Mn=we({name:"QLinearProgress",props:{...Qe,...fl,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:t}){const{proxy:n}=Ce(),a=Xe(e,n.$q),r=vl(e,ji),l=q(()=>e.indeterminate===!0||e.query===!0),i=q(()=>e.reverse!==e.query),o=q(()=>({...r.value!==null?r.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),u=q(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),s=q(()=>Nn(e.buffer!==void 0?e.buffer:1,i.value,n.$q)),d=q(()=>`with${e.instantFeedback===!0?"out":""}-transition`),b=q(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${d.value} q-linear-progress__track--${a.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),_=q(()=>Nn(l.value===!0?1:e.value,i.value,n.$q)),f=q(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${d.value} q-linear-progress__model--${l.value===!0?"in":""}determinate`),p=q(()=>({width:`${e.value*100}%`})),k=q(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${d.value}`);return()=>{const N=[C("div",{class:b.value,style:s.value}),C("div",{class:f.value,style:_.value})];return e.stripe===!0&&l.value===!1&&N.push(C("div",{class:k.value,style:p.value})),C("div",{class:u.value,style:o.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},zt(t.default,N))}}});const Fi=L("div",{class:"row"},[L("div",{class:"col-12"}," AutoThumb will automatically generate any missing thumbnail images in the selected path. Existing thumbnails will not be replaced. ")],-1),Hi={key:0,class:"row q-mb-sm"},Ji=L("label",null,"Collection: ",-1),Ui=["value"],Vi={key:1,class:"row q-mb-sm"},Wi=L("label",null,"Path: ",-1),Qi={style:{flex:"1",position:"relative"}},Xi={key:2,class:"row q-mb-sm"},Yi={style:{"margin-left":"17px"}},Gi={key:3,class:"row q-py-sm"},Zi={class:"col-12"},eo={key:4,class:"row q-py-sm"},to=L("label",null,"Upload To: ",-1),no=["value"],ro={key:5,class:"row justify-center q-py-sm"},lo=["src"],ao={class:"absolute-full flex flex-center"},io={class:"absolute-full flex flex-center"},oo=rt({__name:"AutoThumb",emits:[...Ie.emits],setup(e){const{humanStorageSize:t}=Cr,n=$(null),a=$([]),r=Ye(),l=$(null),i=$([]),o=$(0),u=$(""),s=$(null),d=$([]),b=$(!1),_=q(()=>l.value?r.tree.filter(j=>j.id===l.value)[0]:null),f=$([]),p=j=>j.filter(F=>F.type==="tree").map(F=>({id:F.path,path:F.path,icon:"mdi-folder",selectable:!0,name:F.name,children:F.children?p(F.children):void 0})),k=q(()=>{var j;return _.value?it([{name:"/",icon:"mdi-folder",selectable:!0,id:"/",path:"",children:p(((j=_.value)==null?void 0:j.children)||[])}]):[]}),N=j=>{const X=[];for(let F of j)F.type==="tree"&&F.children&&F.children.length>0?X.push(...N(F.children)):X.push(F);return X.filter(F=>{var H,J,Z;let V=F;!((H=V==null?void 0:V.content_types)!=null&&H.thumb)&&((J=V==null?void 0:V.content_types)!=null&&J.step||((Z=V==null?void 0:V.content_types)==null||Z.f3d))})},R=async()=>{var j,X,F,V,H;for(;i.value.length>0;){await new Promise(z=>setTimeout(z,100));const J=i.value.shift(),Z=await r.backend.autothumb({url:((X=(j=J==null?void 0:J.content_types)==null?void 0:j.f3d)==null?void 0:X.url)||((V=(F=J==null?void 0:J.content_types)==null?void 0:F.step)==null?void 0:V.url),content_type:(H=J==null?void 0:J.content_types)!=null&&H.f3d?"f3d":"step",transparent:b.value,token:r.token});Z&&(f.value.push({path:`${J.path}.png`,content:Z.split(",")[1],encoding:"base64"}),u.value=Z)}},D=async()=>{var X;const j=(X=_.value)==null?void 0:X.repositories.filter(F=>F.repr===s.value)[0];await ir({repo:j.repo,branch:j.branch,files:[...f.value],token:r.token,message:"Add auto-generated thumbnails.",progressCallback:(F,V)=>{d.value=[F,V],console.log(t(F),"/",t(V))}})},{dialogRef:P,onDialogHide:x,onDialogOK:m,onDialogCancel:T}=Ie();function O(){i.value.length?(i.value=[],o.value=0,u.value="",f.value=[]):f.value.length?f.value=[]:T()}function I(){var j;if(f.value.length)D().then(()=>{var X;m((X=_==null?void 0:_.value)==null?void 0:X.id)}).catch(X=>{alert(X)});else{let X=n.value||"";X==="/"&&(X=""),i.value=N(((j=_.value)==null?void 0:j.children)||[]).filter(F=>F.path.startsWith(X)),o.value=i.value.length,R().then(()=>{o.value=0,console.log("done")}).catch(F=>{console.error("Processing Error",F),o.value=0,i.value=[],u.value="",f.value=[]})}}return(j,X)=>(Q(),_e(Mt,{ref_key:"dialogRef",ref:P,onHide:le(x),square:""},{default:W(()=>[B(It,{class:"q-dialog-plugin"},{default:W(()=>[B(Bt,null,{default:W(()=>{var F;return[Fi,B(Zn,{class:"q-mb-sm"}),!i.value.length&&!f.value.length?(Q(),ie("div",Hi,[Ji,ce(L("select",{"onUpdate:modelValue":X[0]||(X[0]=V=>l.value=V),style:{flex:"1"}},[(Q(!0),ie(Ge,null,Ze(le(r).tree,V=>(Q(),ie("option",{key:V.id,value:V.id},Oe(V.name),9,Ui))),128))],512),[[xt,l.value]])])):he("",!0),!i.value.length&&!f.value.length?(Q(),ie("div",Vi,[Wi,L("div",Qi,[B(Tr,{ref:"treeRef",dense:"",selected:n.value,"onUpdate:selected":X[1]||(X[1]=V=>n.value=V),expanded:a.value,"onUpdate:expanded":X[2]||(X[2]=V=>a.value=V),"no-selection-unset":"",nodes:k.value,"node-key":"id","label-key":"name",class:"pathTree"},null,8,["selected","expanded","nodes"])])])):he("",!0),!i.value.length&&!f.value.length?(Q(),ie("div",Xi,[L("label",Yi,[$e(" BG Transparency: "),ce(L("input",{type:"checkbox","onUpdate:modelValue":X[3]||(X[3]=V=>b.value=V)},null,512),[[ut,b.value]])])])):he("",!0),f.value.length&&!i.value.length?(Q(),ie("div",Gi,[L("div",Zi,[L("div",null,"Generated "+Oe(f.value.length)+" thumbnails.",1),B(Di,{class:"thumb-list"},{default:W(()=>[(Q(!0),ie(Ge,null,Ze(f.value,V=>(Q(),ie("div",{key:V.path,style:{"white-space":"nowrap"}},Oe(V.path),1))),128))]),_:1})])])):he("",!0),f.value.length&&!i.value.length?(Q(),ie("div",eo,[to,ce(L("select",{"onUpdate:modelValue":X[4]||(X[4]=V=>s.value=V),style:{flex:"1"}},[(Q(!0),ie(Ge,null,Ze((F=_.value)==null?void 0:F.repositories,V=>(Q(),ie("option",{value:V.repr,key:V.repr},Oe(V.repr),9,no))),128))],512),[[xt,s.value]])])):he("",!0),i.value.length?(Q(),ie("div",ro,[u.value?(Q(),ie("img",{key:0,src:u.value,class:"autothumb-preview"},null,8,lo)):he("",!0)])):he("",!0),o.value?(Q(),_e(Mn,{key:6,"animation-speed":100,size:"25px",value:(o.value-i.value.length)/o.value,color:"accent"},{default:W(()=>[L("div",ao,[B(en,{color:"white","text-color":"accent",label:`${o.value-i.value.length} / ${o.value}`},null,8,["label"])])]),_:1},8,["value"])):he("",!0),d.value?(Q(),_e(Mn,{key:7,size:"25px","animation-speed":100,value:d.value[0]/d.value[1],color:"accent"},{default:W(()=>[L("div",io,[B(en,{color:"white","text-color":"accent",label:`${le(t)(d.value[0])} / ${le(t)(d.value[1])}`},null,8,["label"])])]),_:1},8,["value"])):he("",!0)]}),_:1}),B(Lt,{align:"right"},{default:W(()=>[B(ye,{size:"sm",square:"",color:"negative","text-color":"white",label:"Cancel",onClick:O}),B(ye,{color:"positive","text-color":"white",label:"OK",size:"sm",square:"",disable:!!(!_.value||!n.value||i.value.length||f.value.length&&!s.value),onClick:I},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),so={style:{flex:"1","overflow-y":"auto","padding-top":"4px","background-color":"white"}},uo={class:"row"},co=["src"],fo={style:{display:"flex","flex-direction":"column","justify-content":"center"}},vo=L("div",null,null,-1),yo=rt({__name:"IndexPage",setup(e){const t=yr();xl({async clear(){return await n.backend.kv_mdel({pattern:"cache:%"})},async get(x,m){let T=await n.backend.kv_get({key:x});return T===null&&(T=m),T},async set(x,m){return await n.backend.kv_set({key:x,value:m})}});const n=Ye();n.loadState();const a=$([]),r=$([]),l=$(),i=$([]),o=()=>C("div",{class:"row justify-center q-my-xl"},['Select "Add Repository" from the menu to get started.']),u=x=>{x.map(m=>{var T;return(T=l.value)==null?void 0:T.getNodeByKey(m)}).forEach(m=>{var T;if(m)for(let O of m.children)((T=O==null?void 0:O.content_types)==null?void 0:T.thumb)&&!(O!=null&&O.img)&&n.setNodeThumbnail(O)})},s=q(()=>{var x;return a.value.length>0?(x=l.value)==null?void 0:x.getNodeByKey(a.value):null});se(r,(x,m)=>{m.forEach(T=>{var O;if(x.indexOf(T)===-1){const I=(O=l.value)==null?void 0:O.getNodeByKey(T);I.type==="tree"&&(I.icon="mdi-folder")}}),x.forEach(T=>{var O;if(m.indexOf(T)===-1){const I=(O=l.value)==null?void 0:O.getNodeByKey(T);I.type==="tree"&&(I.icon="mdi-folder")}})}),se(()=>n.search,(x,m)=>{var T;x&&!m?(i.value=[...r.value],(T=l.value)==null||T.expandAll()):m&&!x&&(r.value=[...i.value])});const d=async({nodeId:x})=>{var O;const T=((O=l.value)==null?void 0:O.getNodeByKey(x)).id;r.value=r.value.filter(I=>I!=T&&!I.startsWith(T+"|")),await n.reloadCollection({nodeId:x})},b=()=>{t.dialog({component:ti})},_=()=>{t.dialog({component:Rn}).onOk(x=>{console.log("OK",x);const m=ln();n.tree.push({...x,id:m,type:"repo",icon:"mdi-github",selectable:!1,children:[]}),n.saveCollections(),d({nodeId:m})})},f=()=>{t.dialog({component:oo}).onOk(x=>{x&&d({nodeId:x})})},p=(x,m)=>m.toLowerCase().split(/\s+/).every(I=>{if(x.path.toLowerCase().indexOf(I)!==-1)return!0;let j=x.meta.keywords;return j||(j=""),j.indexOf(I)!==-1}),k=({nodeId:x})=>{var O,I;const m=(O=l.value)==null?void 0:O.getNodeByKey(x);let T=m;m.type==="tree"&&(T=(I=l.value)==null?void 0:I.getNodeByKey(m.id.split("|")[0])),t.dialog({component:$n,componentProps:{collection:T,initialValue:{content_types:{}}}})},N=({nodeId:x,contentType:m})=>{var I;const T=(I=l.value)==null?void 0:I.getNodeByKey(x),O=T.content_types;m=m||(O.f3d?"f3d":O.step?"step":O.dxf?"dxf":O.svg&&"svg"),n.backend.import_model({url:O[m].url,token:n.token,filename:T.name,content_type:m})},R=({nodeId:x,contentType:m})=>{var I;const T=(I=l.value)==null?void 0:I.getNodeByKey(x),O=T.content_types;m=m||(O.f3d?"f3d":O.step?"step":O.dxf?"dxf":O.svg&&"svg"),n.backend.open_model({url:O[m].url,token:n.token,filename:T.name,content_type:m})},D=({nodeId:x})=>{var O;const m=(O=l.value)==null?void 0:O.getNodeByKey(x),T=m.type==="repo"?Rn:$n;t.dialog({component:T,componentProps:{initialValue:m}}).onOk(I=>{m.name=I.name;const j=JSON.stringify(I.repositories),X=JSON.stringify(m.repositories);j!=X&&(m.repositories=I.repositories,d({nodeId:x})),n.saveCollections()})},P=q(()=>{var x,m;return((x=n.backend)==null?void 0:x.version)<((m=n.backend)==null?void 0:m.latestVersion)});return(x,m)=>(Q(),_e(Sl,{class:"column",style:st({cursor:le(n).globalCursor||void 0})},{default:W(()=>[B(kl,{class:"text-white shadow-2",style:{"z-index":"2"}},{default:W(()=>[B(hl,{class:"full-width","bg-color":"white",modelValue:le(n).search,"onUpdate:modelValue":m[1]||(m[1]=T=>le(n).search=T),dense:"",square:"",outlined:"",clearable:""},{prepend:W(()=>[B(xe,{name:"search"})]),after:W(()=>[B(ye,{flat:"",square:"",dense:"",icon:"more_vert"},{default:W(()=>[P.value?(Q(),_e(en,{key:0,color:"orange",floating:""},{default:W(()=>[$e("!")]),_:1})):he("",!0),B(wl,{square:""},{default:W(()=>[B(gl,{dense:"",style:{"min-width":"150px"}},{default:W(()=>[ce((Q(),_e(at,{dense:"",clickable:"",onClick:b},{default:W(()=>[B(Be,{avatar:""},{default:W(()=>[B(xe,{name:"settings"})]),_:1}),B(Be,null,{default:W(()=>[$e("Settings")]),_:1})]),_:1})),[[ft]]),ce((Q(),_e(at,{dense:"",clickable:"",onClick:_},{default:W(()=>[B(Be,{avatar:""},{default:W(()=>[B(xe,{name:"add"})]),_:1}),B(Be,null,{default:W(()=>[$e("Add Repository")]),_:1})]),_:1})),[[ft]]),le(n).preferences.showManagementUI?ce((Q(),_e(at,{key:0,dense:"",clickable:"",onClick:f},{default:W(()=>[B(Be,{avatar:""},{default:W(()=>[B(xe,{name:"image"})]),_:1}),B(Be,null,{default:W(()=>[$e("Auto-Thumb")]),_:1})]),_:1})),[[ft]]):he("",!0),P.value?ce((Q(),_e(at,{key:1,dense:"",clickable:"",class:"bg-orange",href:le(n).backend.updateUrl},{default:W(()=>[B(Be,{avatar:""},{default:W(()=>[B(xe,{name:"upgrade",color:"white"})]),_:1}),B(Be,{class:"text-white"},{default:W(()=>[$e("Update Available")]),_:1})]),_:1},8,["href"])),[[ft]]):he("",!0),B(Zn),ce((Q(),_e(at,{dense:"",clickable:"",onClick:m[0]||(m[0]=()=>{le(n).backend.close()})},{default:W(()=>[B(Be,{avatar:""},{default:W(()=>[B(xe,{name:"close"})]),_:1}),B(Be,null,{default:W(()=>[$e("Close")]),_:1})]),_:1})),[[ft]])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),L("div",so,[B(le(ra),{dense:"",showManagementUI:le(n).preferences.showManagementUI,"no-transition":"",ref_key:"treeRef",ref:l,filter:le(n).search,"filter-method":p,nodes:le(n).tree,"label-key":"name","node-key":"id","no-selection-unset":"","no-nodes-label":o(),selected:a.value,"onUpdate:selected":m[2]||(m[2]=T=>a.value=T),expanded:r.value,"onUpdate:expanded":[m[3]||(m[3]=T=>r.value=T),u],"onAction:import":N,"onAction:open":R,"onAction:reload":d,"onAction:edit":D,"onAction:upload":k,style:{flex:"1"},"show-thumbnails":le(n).preferences.showThumbnails},{"default-header":W(T=>[L("div",uo,[T.node.img&&le(n).preferences.showThumbnails?(Q(),ie("img",{key:0,class:"q-tree__img q-mr-sm",style:{"border-style":"solid","border-radius":"4px","border-width":"1px","z-index":"1","background-color":"white"},src:T.node.img},null,8,co)):(Q(),_e(xe,{key:1,class:"q-tree__icon q-mr-sm",name:T.node.icon,style:st(T.node.type==="blob"?"border-style: solid; border-radius: 4px; border-width: 1px; z-index: 1; background-color: white":""),size:T.node.type==="blob"?le(n).preferences.showThumbnails?"48px":"24px":void 0},null,8,["name","style","size"])),L("div",fo,[L("div",{style:st({fontWeight:T.node.type==="blob"?"bold":"inherit"})},Oe(T.node.name),5),vo])])]),_:1},8,["showManagementUI","filter","nodes","no-nodes-label","selected","expanded","show-thumbnails"])]),s.value?(Q(),_e(Ha,{key:0,showManagementUI:le(n).preferences.showManagementUI,node:s.value,"onAction:import":N,"onAction:open":R,"onAction:edit":D},null,8,["showManagementUI","node"])):he("",!0)]),_:1},8,["style"]))}});export{yo as default};
