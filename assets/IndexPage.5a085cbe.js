import{c as _e,a as T,h as C,d as Me,G as Qe,H as Rl,I as We,J as $l,r as $,g as Ce,K as Ot,L as Re,M as El,P as Ol,N as _t,F as ht,O as Ae,w as oe,y as tt,z as Je,Q as Fe,C as Yt,R as un,S as Be,k as zl,T as Mn,U as Bn,V as Ln,W as ft,X as wt,Y as In,Z as Dn,$ as Kn,a0 as Al,a1 as st,a2 as Nl,a3 as cn,B as jn,a4 as Ml,a5 as zt,a6 as Bl,a7 as Ll,a8 as Il,i as St,e as Ke,l as Dl,f as Kl,a9 as en,aa as jl,ab as Hl,ac as Fl,m as rt,ad as Jl,q as nt,ae as Hn,af as tn,ag as Fn,ah as ke,ai as ue,aj as Jn,ak as ye,al as Ul,am as Un,an as Vl,n as At,ao as Ql,ap as nn,p as Wl,aq as Vn,ar as Qn,A as Wn,as as Xn,at as it,au as Xl,av as Yl,aw as Gl,ax as Zl,ay as er,az as le,aA as tr,aB as nr,aC as lr,aD as rr,t as Q,aE as ie,x as D,v as W,aF as Ne,aG as Ee,aH as B,aI as at,aJ as ge,u as Se,aK as Ye,aL as Ge,aM as Nt,aN as Mt,aO as ut,aP as Bt,aQ as Lt,aR as ot,aS as Yn,aT as kt,aU as ir,aV as dn,aW as ar,aX as or,aY as Jt,aZ as sr,a_ as Ut,a$ as fn,b0 as ur,b1 as cr,b2 as dr,b3 as fr}from"./index.d2eeb3f3.js";import{a as je}from"./axios.7331a07d.js";import{a as Gt,Q as vr}from"./QResizeObserver.7275003b.js";var De=_e({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const n=T(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>C("div",{class:n.value},Me(t.default))}}),ct=_e({name:"QItem",props:{...Qe,...Rl,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:n}){const{proxy:{$q:i}}=Ce(),l=We(e,i),{hasLink:r,linkAttrs:a,linkClass:o,linkTag:u,navigateOnClick:s}=$l(),d=$(null),y=$(null),b=T(()=>e.clickable===!0||r.value===!0||e.tag==="label"),f=T(()=>e.disable!==!0&&b.value===!0),p=T(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(l.value===!0?" q-item--dark":"")+(r.value===!0&&e.active===null?o.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(f.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),q=T(()=>{if(e.insetLevel===void 0)return null;const m=i.lang.rtl===!0?"Right":"Left";return{["padding"+m]:16+e.insetLevel*56+"px"}});function A(m){f.value===!0&&(y.value!==null&&(m.qKeyEvent!==!0&&document.activeElement===d.value?y.value.focus():document.activeElement===y.value&&d.value.focus()),s(m))}function P(m){if(f.value===!0&&Ot(m,13)===!0){Re(m),m.qKeyEvent=!0;const S=new MouseEvent("click",m);S.qKeyEvent=!0,d.value.dispatchEvent(S)}n("keyup",m)}function N(){const m=El(t.default,[]);return f.value===!0&&m.unshift(C("div",{class:"q-focus-helper",tabindex:-1,ref:y})),m}return()=>{const m={ref:d,class:p.value,style:q.value,role:"listitem",onClick:A,onKeyup:P};return f.value===!0?(m.tabindex=e.tabindex||"0",Object.assign(m,a.value)):b.value===!0&&(m["aria-disabled"]="true"),C(u.value,m,N())}}}),hr=_e({name:"QList",props:{...Qe,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:t}){const n=Ce(),i=We(e,n.proxy.$q),l=T(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(i.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>C(e.tag,{class:l.value},Me(t.default))}});function vt(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),Ol.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const Gn={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function Zn({showing:e,avoidEmit:t,configureAnchorEl:n}){const{props:i,proxy:l,emit:r}=Ce(),a=$(null);let o=null;function u(f){return a.value===null?!1:f===void 0||f.touches===void 0||f.touches.length<=1}const s={};n===void 0&&(Object.assign(s,{hide(f){l.hide(f)},toggle(f){l.toggle(f),f.qAnchorHandled=!0},toggleKey(f){Ot(f,13)===!0&&s.toggle(f)},contextClick(f){l.hide(f),_t(f),ht(()=>{l.show(f),f.qAnchorHandled=!0})},prevent:_t,mobileTouch(f){if(s.mobileCleanup(f),u(f)!==!0)return;l.hide(f),a.value.classList.add("non-selectable");const p=f.target;Ae(s,"anchor",[[p,"touchmove","mobileCleanup","passive"],[p,"touchend","mobileCleanup","passive"],[p,"touchcancel","mobileCleanup","passive"],[a.value,"contextmenu","prevent","notPassive"]]),o=setTimeout(()=>{o=null,l.show(f),f.qAnchorHandled=!0},300)},mobileCleanup(f){a.value.classList.remove("non-selectable"),o!==null&&(clearTimeout(o),o=null),e.value===!0&&f!==void 0&&vt()}}),n=function(f=i.contextMenu){if(i.noParentEvent===!0||a.value===null)return;let p;f===!0?l.$q.platform.is.mobile===!0?p=[[a.value,"touchstart","mobileTouch","passive"]]:p=[[a.value,"mousedown","hide","passive"],[a.value,"contextmenu","contextClick","notPassive"]]:p=[[a.value,"click","toggle","passive"],[a.value,"keyup","toggleKey","passive"]],Ae(s,"anchor",p)});function d(){Fe(s,"anchor")}function y(f){for(a.value=f;a.value.classList.contains("q-anchor--skip");)a.value=a.value.parentNode;n()}function b(){if(i.target===!1||i.target===""||l.$el.parentNode===null)a.value=null;else if(i.target===!0)y(l.$el.parentNode);else{let f=i.target;if(typeof i.target=="string")try{f=document.querySelector(i.target)}catch{f=void 0}f!=null?(a.value=f.$el||f,n()):(a.value=null,console.error(`Anchor: target "${i.target}" not found`))}}return oe(()=>i.contextMenu,f=>{a.value!==null&&(d(),n(f))}),oe(()=>i.target,()=>{a.value!==null&&d(),b()}),oe(()=>i.noParentEvent,f=>{a.value!==null&&(f===!0?d():n())}),tt(()=>{b(),t!==!0&&i.modelValue===!0&&a.value===null&&r("update:modelValue",!1)}),Je(()=>{o!==null&&clearTimeout(o),d()}),{anchorEl:a,canShow:u,anchorEvents:s}}function el(e,t){const n=$(null);let i;function l(o,u){const s=`${u!==void 0?"add":"remove"}EventListener`,d=u!==void 0?u:i;o!==window&&o[s]("scroll",d,Yt.passive),window[s]("scroll",d,Yt.passive),i=u}function r(){n.value!==null&&(l(n.value),n.value=null)}const a=oe(()=>e.noParentEvent,()=>{n.value!==null&&(r(),t())});return Je(a),{localScrollTarget:n,unconfigureScrollTarget:r,changeScrollEvent:l}}const{notPassiveCapture:xt}=Yt,Ze=[];function Ct(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let n=un.length-1;for(;n>=0;){const i=un[n].$;if(i.type.name==="QTooltip"){n--;continue}if(i.type.name!=="QDialog")break;if(i.props.seamless!==!0)return;n--}for(let i=Ze.length-1;i>=0;i--){const l=Ze[i];if((l.anchorEl.value===null||l.anchorEl.value.contains(t)===!1)&&(t===document.body||l.innerRef.value!==null&&l.innerRef.value.contains(t)===!1))e.qClickOutside=!0,l.onClickOutside(e);else return}}function tl(e){Ze.push(e),Ze.length===1&&(document.addEventListener("mousedown",Ct,xt),document.addEventListener("touchstart",Ct,xt))}function qt(e){const t=Ze.findIndex(n=>n===e);t>-1&&(Ze.splice(t,1),Ze.length===0&&(document.removeEventListener("mousedown",Ct,xt),document.removeEventListener("touchstart",Ct,xt)))}let vn,hn;function Tt(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function nl(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const Zt={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{Zt[`${e}#ltr`]=e,Zt[`${e}#rtl`]=e});function Pt(e,t){const n=e.split(" ");return{vertical:n[0],horizontal:Zt[`${n[1]}#${t===!0?"rtl":"ltr"}`]}}function mr(e,t){let{top:n,left:i,right:l,bottom:r,width:a,height:o}=e.getBoundingClientRect();return t!==void 0&&(n-=t[1],i-=t[0],r+=t[1],l+=t[0],a+=t[0],o+=t[1]),{top:n,bottom:r,height:o,left:i,right:l,width:a,middle:i+(l-i)/2,center:n+(r-n)/2}}function pr(e,t,n){let{top:i,left:l}=e.getBoundingClientRect();return i+=t.top,l+=t.left,n!==void 0&&(i+=n[1],l+=n[0]),{top:i,bottom:i+1,height:1,left:l,right:l+1,width:1,middle:l,center:i}}function gr(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function mn(e,t,n,i){return{top:e[n.vertical]-t[i.vertical],left:e[n.horizontal]-t[i.horizontal]}}function ln(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{ln(e,t+1)},10);return}const{targetEl:n,offset:i,anchorEl:l,anchorOrigin:r,selfOrigin:a,absoluteOffset:o,fit:u,cover:s,maxHeight:d,maxWidth:y}=e;if(Be.is.ios===!0&&window.visualViewport!==void 0){const R=document.body.style,{offsetLeft:J,offsetTop:X}=window.visualViewport;J!==vn&&(R.setProperty("--q-pe-left",J+"px"),vn=J),X!==hn&&(R.setProperty("--q-pe-top",X+"px"),hn=X)}const{scrollLeft:b,scrollTop:f}=n,p=o===void 0?mr(l,s===!0?[0,0]:i):pr(l,o,i);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:y||"100vw",maxHeight:d||"100vh",visibility:"visible"});const{offsetWidth:q,offsetHeight:A}=n,{elWidth:P,elHeight:N}=u===!0||s===!0?{elWidth:Math.max(p.width,q),elHeight:s===!0?Math.max(p.height,A):A}:{elWidth:q,elHeight:A};let m={maxWidth:y,maxHeight:d};(u===!0||s===!0)&&(m.minWidth=p.width+"px",s===!0&&(m.minHeight=p.height+"px")),Object.assign(n.style,m);const S=gr(P,N);let k=mn(p,S,r,a);if(o===void 0||i===void 0)Vt(k,p,S,r,a);else{const{top:R,left:J}=k;Vt(k,p,S,r,a);let X=!1;if(k.top!==R){X=!0;const j=2*i[1];p.center=p.top-=j,p.bottom-=j+2}if(k.left!==J){X=!0;const j=2*i[0];p.middle=p.left-=j,p.right-=j+2}X===!0&&(k=mn(p,S,r,a),Vt(k,p,S,r,a))}m={top:k.top+"px",left:k.left+"px"},k.maxHeight!==void 0&&(m.maxHeight=k.maxHeight+"px",p.height>k.maxHeight&&(m.minHeight=m.maxHeight)),k.maxWidth!==void 0&&(m.maxWidth=k.maxWidth+"px",p.width>k.maxWidth&&(m.minWidth=m.maxWidth)),Object.assign(n.style,m),n.scrollTop!==f&&(n.scrollTop=f),n.scrollLeft!==b&&(n.scrollLeft=b)}function Vt(e,t,n,i,l){const r=n.bottom,a=n.right,o=zl(),u=window.innerHeight-o,s=document.body.clientWidth;if(e.top<0||e.top+r>u)if(l.vertical==="center")e.top=t[i.vertical]>u/2?Math.max(0,u-r):0,e.maxHeight=Math.min(r,u);else if(t[i.vertical]>u/2){const d=Math.min(u,i.vertical==="center"?t.center:i.vertical===l.vertical?t.bottom:t.top);e.maxHeight=Math.min(r,d),e.top=Math.max(0,d-r)}else e.top=Math.max(0,i.vertical==="center"?t.center:i.vertical===l.vertical?t.top:t.bottom),e.maxHeight=Math.min(r,u-e.top);if(e.left<0||e.left+a>s)if(e.maxWidth=Math.min(a,s),l.horizontal==="middle")e.left=t[i.horizontal]>s/2?Math.max(0,s-a):0;else if(t[i.horizontal]>s/2){const d=Math.min(s,i.horizontal==="middle"?t.middle:i.horizontal===l.horizontal?t.right:t.left);e.maxWidth=Math.min(a,d),e.left=Math.max(0,d-e.maxWidth)}else e.left=Math.max(0,i.horizontal==="middle"?t.middle:i.horizontal===l.horizontal?t.left:t.right),e.maxWidth=Math.min(a,s-e.left)}var yr=_e({name:"QMenu",inheritAttrs:!1,props:{...Gn,...Mn,...Qe,...Bn,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Tt},self:{type:String,validator:Tt},offset:{type:Array,validator:nl},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Ln,"click","escapeKey"],setup(e,{slots:t,emit:n,attrs:i}){let l=null,r,a,o;const u=Ce(),{proxy:s}=u,{$q:d}=s,y=$(null),b=$(!1),f=T(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),p=We(e,d),{registerTick:q,removeTick:A}=ft(),{registerTimeout:P}=wt(),{transitionProps:N,transitionStyle:m}=In(e),{localScrollTarget:S,changeScrollEvent:k,unconfigureScrollTarget:R}=el(e,E),{anchorEl:J,canShow:X}=Zn({showing:b}),{hide:j}=Dn({showing:b,canShow:X,handleShow:be,handleHide:we,hideOnRouteChange:f,processOnMount:!0}),{showPortal:U,hidePortal:z,renderPortal:fe}=Kn(u,y,h,"menu"),K={anchorEl:J,innerRef:y,onClickOutside(x){if(e.persistent!==!0&&b.value===!0)return j(x),(x.type==="touchstart"||x.target.classList.contains("q-dialog__backdrop"))&&Re(x),!0}},H=T(()=>Pt(e.anchor||(e.cover===!0?"center middle":"bottom start"),d.lang.rtl)),te=T(()=>e.cover===!0?H.value:Pt(e.self||"top start",d.lang.rtl)),O=T(()=>(e.square===!0?" q-menu--square":"")+(p.value===!0?" q-menu--dark q-dark":"")),V=T(()=>e.autoClose===!0?{onClick:c}:{}),Y=T(()=>b.value===!0&&e.persistent!==!0);oe(Y,x=>{x===!0?(Bl(v),tl(K)):(cn(v),qt(K))});function de(){Ll(()=>{let x=y.value;x&&x.contains(document.activeElement)!==!0&&(x=x.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||x.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||x.querySelector("[autofocus], [data-autofocus]")||x,x.focus({preventScroll:!0}))})}function be(x){if(l=e.noRefocus===!1?document.activeElement:null,Al(g),U(),E(),r=void 0,x!==void 0&&(e.touchPosition||e.contextMenu)){const L=st(x);if(L.left!==void 0){const{top:ne,left:I}=J.value.getBoundingClientRect();r={left:L.left-I,top:L.top-ne}}}a===void 0&&(a=oe(()=>d.screen.width+"|"+d.screen.height+"|"+e.self+"|"+e.anchor+"|"+d.lang.rtl,_)),e.noFocus!==!0&&document.activeElement.blur(),q(()=>{_(),e.noFocus!==!0&&de()}),P(()=>{d.platform.is.ios===!0&&(o=e.autoClose,y.value.click()),_(),U(!0),n("show",x)},e.transitionDuration)}function we(x){A(),z(),w(!0),l!==null&&(x===void 0||x.qClickOutside!==!0)&&(((x&&x.type.indexOf("key")===0?l.closest('[tabindex]:not([tabindex^="-"])'):void 0)||l).focus(),l=null),P(()=>{z(!0),n("hide",x)},e.transitionDuration)}function w(x){r=void 0,a!==void 0&&(a(),a=void 0),(x===!0||b.value===!0)&&(Nl(g),R(),qt(K),cn(v)),x!==!0&&(l=null)}function E(){(J.value!==null||e.scrollTarget!==void 0)&&(S.value=jn(J.value,e.scrollTarget),k(S.value,_))}function c(x){o!==!0?(Ml(s,x),n("click",x)):o=!1}function g(x){Y.value===!0&&e.noFocus!==!0&&Il(y.value,x.target)!==!0&&de()}function v(x){n("escapeKey"),j(x)}function _(){ln({targetEl:y.value,offset:e.offset,anchorEl:J.value,anchorOrigin:H.value,selfOrigin:te.value,absoluteOffset:r,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function h(){return C(zt,N.value,()=>b.value===!0?C("div",{role:"menu",...i,ref:y,tabindex:-1,class:["q-menu q-position-engine scroll"+O.value,i.class],style:[i.style,m.value],...V.value},Me(t.default)):null)}return Je(w),Object.assign(s,{focus:de,updatePosition:_}),fe}}),br=_e({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:t}){const n=T(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>C("div",{class:n.value,role:"toolbar"},Me(t.default))}}),_r=_e({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:n}}=Ce(),i=St(Dl,Ke);if(i===Ke)return console.error("QPage needs to be a deep child of QLayout"),Ke;if(St(Kl,Ke)===Ke)return console.error("QPage needs to be child of QPageContainer"),Ke;const r=T(()=>{const o=(i.header.space===!0?i.header.size:0)+(i.footer.space===!0?i.footer.size:0);if(typeof e.styleFn=="function"){const u=i.isContainer.value===!0?i.containerHeight.value:n.screen.height;return e.styleFn(o,u)}return{minHeight:i.isContainer.value===!0?i.containerHeight.value-o+"px":n.screen.height===0?o!==0?`calc(100vh - ${o}px)`:"100vh":n.screen.height-o+"px"}}),a=T(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>C("main",{class:a.value,style:r.value},Me(t.default))}});function pn(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var yt=en({name:"close-popup",beforeMount(e,{value:t}){const n={depth:pn(t),handler(i){n.depth!==0&&setTimeout(()=>{const l=jl(e);l!==void 0&&Hl(l,i,n.depth)})},handlerKey(i){Ot(i,13)===!0&&n.handler(i)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:t,oldValue:n}){t!==n&&(e.__qclosepopup.depth=pn(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});const Ve="https://api.github.com";let et={data:{},async clear(){this.data={}},async get(e,t){return this.data[e]===void 0?t:JSON.parse(this.data[e])},async set(e,t){this.data[e]=JSON.stringify(t)}};function wr(e){et=e}const He=(e,t=null)=>({...{Accept:"application/vnd.github+json",Authorization:`Bearer ${e}`},...t}),ll=e=>{var t,n;if((t=e==null?void 0:e.response)!=null&&t.status){const i=(n=e.response)==null?void 0:n.data;throw i.message?new Error(i.message):i.toString()}throw e};async function Sr({input:e,token:t}){e.startsWith("https://github.com/")&&(e=e.substring(19));let n=e.match(/^[^\/]+\/[^\/#]+/)[0];e=e.substring(n.length),e.startsWith("/")&&(e=e.substring(1));let i;i=await rn({repo:n,token:t});let[l,r]=e.split("#");return r&&(r=(await on({repo:n,branch:r,token:t})).name),{repr:`${i.full_name}${l?`/${l}`:""}${r?`#${r}`:""}`,repo:i.full_name,path:l,branch:r}}async function rl({repo:e,branch:t,token:n,files:i,message:l,progressCallback:r}){const a=i.reduce((f,p)=>f+p.content.length,0);let o=0;r&&r(0,a),i=await Promise.all(i.map(async f=>{let p=await je.post(`${Ve}/repos/${e}/git/blobs`,{content:f.content,encoding:f.encoding},{onUploadProgress:q=>{r&&r(o+q.loaded,a)},headers:He(n,{"Content-Type":"application/json"})});return o+=f.content.length,r&&r(o,a),{mode:"100644",type:"blob",sha:p.data.sha,path:f.path}}));const u=await on({repo:e,branch:t,token:n}),s=u.commit.commit.tree.sha;let d=await je.post(`${Ve}/repos/${e}/git/trees`,{base_tree:s,tree:i},{headers:He(n,{"Content-Type":"application/json"})});const y=d.data.sha;d=await je.post(`${Ve}/repos/${e}/git/commits`,{message:l,tree:y,parents:[u.commit.sha]},{headers:He(n,{"Content-Type":"application/json"})});const b=d.data.sha;d=await je.patch(`${Ve}/repos/${e}/git/refs/heads/${u.name}`,{sha:b},{headers:He(n,{"Content-Type":"application/json"})})}async function rn({repo:e,token:t}){return(await je.get(`${Ve}/repos/${e}`,{headers:He(t)})).data}async function il({url:e,token:t}){let n=await et.get(`cache:blob:${e}`,null);if(n===null){console.log("Downloading blob",e);const i=await je.get(e,{headers:He(t)});n=i.data,console.log(i.data),await et.set(`cache:blob:${e}`,n)}return n}async function gn({url:e,token:t}){const n=await il({url:e,token:t});let i=n.content;return n.encoding==="base64"&&(i=atob(i)),JSON.parse(i)}async function an({url:e,token:t}){return`data:image/png;base64,${(await il({url:e,token:t})).content}`}async function on({repo:e,branch:t,token:n}){t||(t=(await rn({repo:e,token:n})).default_branch);try{const i=new Date;return i.setSeconds(i.getSeconds()-30),(await je.get(`${Ve}/repos/${e}/branches/${t}`,{headers:He(n,{"If-Modified-Since":i.toUTCString()})})).data}catch(i){ll(i)}}function kr(e,t){return(t.type==="tree")-(e.type==="tree")||e.path.localeCompare(t.path)}function xr(e){let t=e.match(/^.*?(\.[^\.]*)?$/)[1];if(!t)return null;if(t=t.toLowerCase(),t==".stp"&&(t=".step"),[".step",".f3d",".svg",".dxf"].indexOf(t)!==-1)return t.substring(1);if(t===".png")return"thumb";if(t===".json")return"meta"}function al(e,t){return{...e,content_types:{...e.content_types,...t.content_types}}}function ol(e,t){const n=[...e];return t.forEach(i=>{let l=e.filter(r=>r.name==i.name&&r.type==i.type)[0];if(!l){n.push(i);return}l.sha=[...l.sha,...i.sha],l.type==="tree"?l.children=ol(l.children,i.children):(n.splice(n.indexOf(l),1),l=al(l,i),n.push(l))}),n}function sl(e){const t=[];return e.forEach(n=>{if(n.type==="tree")n.children=sl(n.children),t.push(n);else{const i=n.content_types;(i.step||i.f3d||i.dxf||i.svg)&&t.push(n)}}),t}function ul(e){return e.filter(t=>t.type==="tree").forEach(t=>{ul(t.children)}),e.sort(kr),e}function Cr(e,t){if(t){for(const n of t.split("/"))if(Array.isArray(e)?e=e.filter(i=>i.name===n)[0]:e=e.children.filter(i=>i.name===n)[0],!e)return null}return e}function qr(e,t){e=e||[],t=t||[],e=Array.isArray(e)?e:e.split(/\s+/),t=Array.isArray(t)?t:t.split(/\s+/);const n=e.map(i=>i.toLowerCase());return[...e,...t.filter(i=>n.indexOf(i.toLowerCase())===-1)].join(" ")||void 0}function Tr(e,t){var n;console.log("Applying DirMeta",e,t);for(const[i,l]of Object.entries(t)){const r=Cr(e,i);r.meta={...(r==null?void 0:r.meta)||{},...l||{},keywords:qr((n=r==null?void 0:r.meta)==null?void 0:n.keywords,l==null?void 0:l.keywords)}}}async function cl({tree:e,token:t,treeShas:n,perNodeFunc:i}){let l=await et.get(`cache:meta:${n.join(":")}`,null),r=[];for(let o of e){if(i(o),o.type==="tree"){r.push({...o,children:await cl({tree:o.children,token:t,treeShas:o.sha,perNodeFunc:i})});continue}let u;l?u=l[o.name]||{}:o.content_types.meta&&(u=await gn({url:o.content_types.meta.url,token:t})),r.push({...o,meta:u})}const a=r.filter(o=>{var u;return o.name=="_meta"&&((u=o==null?void 0:o.content_types)==null?void 0:u.meta)})[0];if(a){if(!l){console.log("Downloading meta",a.content_types.meta.url);const o=await gn({url:a.content_types.meta.url,token:t});Tr(r,o)}r=r.filter(o=>o.id!==a.id)}if(!l){const o={};r.forEach(u=>{Object.keys((u==null?void 0:u.meta)||{}).length!=0&&(o[u.name]=u.meta)}),Object.keys(o).length!=0&&et.set(`cache:meta:${n.join(":")}`,o)}return r}function dl({tree:e,root:t,id_prefix:n,repo:i,branch:l}){const r=[];for(;e.length>0;){let a=e[0];if(!a.path.startsWith(t))break;if(e.shift(),a.id=`${n}|${a.path}`,a.name=a.path.split("/").pop(),a.name=a.name.match(/^(.*?)(\.[^\.]*)?$/)[1],delete a.mode,a.sha=Array.isArray(a.sha)?a.sha:[a.sha],a.type=="tree"){if(a.children=dl({tree:e,root:`${a.path}/`,id_prefix:n,repo:i,branch:l}),a.children.length===0)continue}else if(a.type=="blob"){let o=xr(a.path);if(!o)continue;if(a.content_types={[o]:{url:a.url,size:a.size,path:a.path,repo:i,branch:l}},a.path=a.path.match(/^(.*?)(\.[^\.]*)?$/)[1],delete a.url,delete a.size,r.length>0){const u=r[r.length-1];u.type==="blob"&&u.path===a.path&&(r.pop(),a=al(u,a))}}r.push(a)}return r}async function Pr({repo:e,branch:t,path:n,token:i}){return(await je.get(`${Ve}/repos/${e}/commits`,{headers:He(i),params:{path:n,per_page:"1",page:"1"}})).data[0]}async function Rr({repo:e,branch:t,token:n,id_prefix:i,noCache:l}){l=!!l,t=await on({repo:e,branch:t,token:n});let r=l?null:await et.get(`cache:tree:${e}:${t.name}`);if(!r||r.sha!==t.commit.commit.tree.sha){console.log("cache miss",e,t.commit.commit);try{r=(await je.get(`${Ve}/repos/${e}/git/trees/${t.commit.commit.tree.sha}?recursive=1`,{headers:He(n)})).data}catch(a){ll(a)}l||await et.set(`cache:tree:${e}:${t.name}`,r)}return[dl({tree:r.tree,root:"",id_prefix:i,repo:e,branch:t.name}),t.commit.commit.tree.sha]}function $r(e,t){return t=t.replace(/^\//,"").replace("//$",""),t.split("/").forEach(n=>{var i;if(e=(i=e.filter(l=>l.name===n&&l.type=="tree")[0])==null?void 0:i.children,e===void 0)throw Error("Invalid repository path")}),e}function Er(e){let t=0;function n(i){if(t++,i.children)for(let l of i.children)n(l)}for(let i of e)n(i);return t}async function Or({repositories:e,token:t,id_prefix:n,index:i,setLoadingMessage:l,noCache:r}){r=!!r;let a=[],o=[];for(let u of e){l&&l(`Loading ${u}...`);const s=u.match(/^([\w-]+)\/([\w-]+)((?:\/[\w-]+)*)(#.*)?$/);if(s!=null){let[,d,y,b,f]=s;f?f=f.substring(1):f=(await rn({repo:`${d}/${y}`,token:t})).default_branch,l&&l(`Loading ${u}#${f}...`);let[p,q]=await Rr({repo:`${d}/${y}`,branch:f,token:t,id_prefix:n,noCache:r});o.push(q),b&&(p=$r(p,b)),a=ol(a,p)}}if(i){let u=0;const s=Er(a);a=await cl({tree:a,token:t,treeShas:o,perNodeFunc:()=>{u++,l&&l(`Indexing trees (${u}/${s})...`)}})}return console.log("Merged trees",a),ul(sl(a))}var ve=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},fl={},It={},mt={};(function(e){var t=ve&&ve.__extends||function(){var f=function(p,q){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,P){A.__proto__=P}||function(A,P){for(var N in P)Object.prototype.hasOwnProperty.call(P,N)&&(A[N]=P[N])},f(p,q)};return function(p,q){if(typeof q!="function"&&q!==null)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");f(p,q);function A(){this.constructor=p}p.prototype=q===null?Object.create(q):(A.prototype=q.prototype,new A)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.createJSONRPCNotification=e.createJSONRPCRequest=e.createJSONRPCSuccessResponse=e.createJSONRPCErrorResponse=e.JSONRPCErrorCode=e.JSONRPCErrorException=e.isJSONRPCResponses=e.isJSONRPCResponse=e.isJSONRPCRequests=e.isJSONRPCRequest=e.isJSONRPCID=e.JSONRPC=void 0,e.JSONRPC="2.0";var n=function(f){return typeof f=="string"||typeof f=="number"||f===null};e.isJSONRPCID=n;var i=function(f){return f.jsonrpc===e.JSONRPC&&f.method!==void 0&&f.result===void 0&&f.error===void 0};e.isJSONRPCRequest=i;var l=function(f){return Array.isArray(f)&&f.every(e.isJSONRPCRequest)};e.isJSONRPCRequests=l;var r=function(f){return f.jsonrpc===e.JSONRPC&&f.id!==void 0&&(f.result!==void 0||f.error!==void 0)};e.isJSONRPCResponse=r;var a=function(f){return Array.isArray(f)&&f.every(e.isJSONRPCResponse)};e.isJSONRPCResponses=a;var o=function(f,p,q){var A={code:f,message:p};return q!=null&&(A.data=q),A},u=function(f){t(p,f);function p(q,A,P){var N=f.call(this,q)||this;return Object.setPrototypeOf(N,p.prototype),N.code=A,N.data=P,N}return p.prototype.toObject=function(){return o(this.code,this.message,this.data)},p}(Error);e.JSONRPCErrorException=u,function(f){f[f.ParseError=-32700]="ParseError",f[f.InvalidRequest=-32600]="InvalidRequest",f[f.MethodNotFound=-32601]="MethodNotFound",f[f.InvalidParams=-32602]="InvalidParams",f[f.InternalError=-32603]="InternalError"}(e.JSONRPCErrorCode||(e.JSONRPCErrorCode={}));var s=function(f,p,q,A){return{jsonrpc:e.JSONRPC,id:f,error:o(p,q,A)}};e.createJSONRPCErrorResponse=s;var d=function(f,p){return{jsonrpc:e.JSONRPC,id:f,result:p!=null?p:null}};e.createJSONRPCSuccessResponse=d;var y=function(f,p,q){return{jsonrpc:e.JSONRPC,id:f,method:p,params:q}};e.createJSONRPCRequest=y;var b=function(f,p){return{jsonrpc:e.JSONRPC,method:f,params:p}};e.createJSONRPCNotification=b})(mt);var pt={};Object.defineProperty(pt,"__esModule",{value:!0});pt.DefaultErrorCode=void 0;pt.DefaultErrorCode=0;var yn=ve&&ve.__awaiter||function(e,t,n,i){function l(r){return r instanceof n?r:new n(function(a){a(r)})}return new(n||(n=Promise))(function(r,a){function o(d){try{s(i.next(d))}catch(y){a(y)}}function u(d){try{s(i.throw(d))}catch(y){a(y)}}function s(d){d.done?r(d.value):l(d.value).then(o,u)}s((i=i.apply(e,t||[])).next())})},bn=ve&&ve.__generator||function(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,l,r,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(s){return function(d){return u([s,d])}}function u(s){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(n=0)),n;)try{if(i=1,l&&(r=s[0]&2?l.return:s[0]?l.throw||((r=l.return)&&r.call(l),0):l.next)&&!(r=r.call(l,s[1])).done)return r;switch(l=0,r&&(s=[s[0]&2,r.value]),s[0]){case 0:case 1:r=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,l=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!r||s[1]>r[0]&&s[1]<r[3])){n.label=s[1];break}if(s[0]===6&&n.label<r[1]){n.label=r[1],r=s;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(s);break}r[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(d){s=[6,d],l=0}finally{i=r=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(It,"__esModule",{value:!0});It.JSONRPCClient=void 0;var lt=mt,Qt=pt,zr=function(){function e(t,n){this._send=t,this.createID=n,this.idToResolveMap=new Map,this.id=0}return e.prototype._createID=function(){return this.createID?this.createID():++this.id},e.prototype.timeout=function(t,n){var i=this;n===void 0&&(n=function(a){return(0,lt.createJSONRPCErrorResponse)(a,Qt.DefaultErrorCode,"Request timeout")});var l=function(a,o){var u=setTimeout(function(){a.forEach(function(s){var d=i.idToResolveMap.get(s);d&&(i.idToResolveMap.delete(s),d(n(s)))})},t);return o().then(function(s){return clearTimeout(u),s},function(s){return clearTimeout(u),Promise.reject(s)})},r=function(a,o){var u=(Array.isArray(a)?a:[a]).map(function(s){return s.id}).filter(_n);return l(u,function(){return i.requestAdvanced(a,o)})};return{request:function(a,o,u){var s=i._createID();return l([s],function(){return i.requestWithID(a,o,u,s)})},requestAdvanced:function(a,o){return r(a,o)}}},e.prototype.request=function(t,n,i){return this.requestWithID(t,n,i,this._createID())},e.prototype.requestWithID=function(t,n,i,l){return yn(this,void 0,void 0,function(){var r,a;return bn(this,function(o){switch(o.label){case 0:return r=(0,lt.createJSONRPCRequest)(l,t,n),[4,this.requestAdvanced(r,i)];case 1:return a=o.sent(),a.result!==void 0&&!a.error?[2,a.result]:a.result===void 0&&a.error?[2,Promise.reject(new lt.JSONRPCErrorException(a.error.message,a.error.code,a.error.data))]:[2,Promise.reject(new Error("An unexpected error occurred"))]}})})},e.prototype.requestAdvanced=function(t,n){var i=this,l=Array.isArray(t);Array.isArray(t)||(t=[t]);var r=t.filter(function(u){return _n(u.id)}),a=r.map(function(u){return new Promise(function(s){return i.idToResolveMap.set(u.id,s)})}),o=Promise.all(a).then(function(u){return l||!u.length?u:u[0]});return this.send(l?t:t[0],n).then(function(){return o},function(u){return r.forEach(function(s){i.receive((0,lt.createJSONRPCErrorResponse)(s.id,Qt.DefaultErrorCode,u&&u.message||"Failed to send a request"))}),o})},e.prototype.notify=function(t,n,i){var l=(0,lt.createJSONRPCNotification)(t,n);this.send(l,i).then(void 0,function(){})},e.prototype.send=function(t,n){return yn(this,void 0,void 0,function(){return bn(this,function(i){return[2,this._send(t,n)]})})},e.prototype.rejectAllPendingRequests=function(t){this.idToResolveMap.forEach(function(n,i){return n((0,lt.createJSONRPCErrorResponse)(i,Qt.DefaultErrorCode,t))}),this.idToResolveMap.clear()},e.prototype.receive=function(t){var n=this;Array.isArray(t)||(t=[t]),t.forEach(function(i){var l=n.idToResolveMap.get(i.id);l&&(n.idToResolveMap.delete(i.id),l(i))})},e}();It.JSONRPCClient=zr;var _n=function(e){return e!=null},vl={};Object.defineProperty(vl,"__esModule",{value:!0});var Dt={},Rt=ve&&ve.__assign||function(){return Rt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Rt.apply(this,arguments)},wn=ve&&ve.__awaiter||function(e,t,n,i){function l(r){return r instanceof n?r:new n(function(a){a(r)})}return new(n||(n=Promise))(function(r,a){function o(d){try{s(i.next(d))}catch(y){a(y)}}function u(d){try{s(i.throw(d))}catch(y){a(y)}}function s(d){d.done?r(d.value):l(d.value).then(o,u)}s((i=i.apply(e,t||[])).next())})},Sn=ve&&ve.__generator||function(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,l,r,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(s){return function(d){return u([s,d])}}function u(s){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(n=0)),n;)try{if(i=1,l&&(r=s[0]&2?l.return:s[0]?l.throw||((r=l.return)&&r.call(l),0):l.next)&&!(r=r.call(l,s[1])).done)return r;switch(l=0,r&&(s=[s[0]&2,r.value]),s[0]){case 0:case 1:r=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,l=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!r||s[1]>r[0]&&s[1]<r[3])){n.label=s[1];break}if(s[0]===6&&n.label<r[1]){n.label=r[1],r=s;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(s);break}r[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(d){s=[6,d],l=0}finally{i=r=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Ar=ve&&ve.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,l=t.length,r;i<l;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.JSONRPCServer=void 0;var Oe=mt,Nr=pt,Mr=function(){return(0,Oe.createJSONRPCErrorResponse)(null,Oe.JSONRPCErrorCode.ParseError,"Parse error")},Br=function(e){return(0,Oe.createJSONRPCErrorResponse)((0,Oe.isJSONRPCID)(e.id)?e.id:null,Oe.JSONRPCErrorCode.InvalidRequest,"Invalid Request")},Lr=function(e){return(0,Oe.createJSONRPCErrorResponse)(e,Oe.JSONRPCErrorCode.MethodNotFound,"Method not found")},Ir=function(){function e(t){t===void 0&&(t={});var n;this.mapErrorToJSONRPCErrorResponse=Hr,this.nameToMethodDictionary={},this.middleware=null,this.errorListener=(n=t.errorListener)!==null&&n!==void 0?n:console.warn}return e.prototype.hasMethod=function(t){return!!this.nameToMethodDictionary[t]},e.prototype.addMethod=function(t,n){this.addMethodAdvanced(t,this.toJSONRPCMethod(n))},e.prototype.toJSONRPCMethod=function(t){return function(n,i){var l=t(n.params,i);return Promise.resolve(l).then(function(r){return jr(n.id,r)})}},e.prototype.addMethodAdvanced=function(t,n){var i;this.nameToMethodDictionary=Rt(Rt({},this.nameToMethodDictionary),(i={},i[t]=n,i))},e.prototype.receiveJSON=function(t,n){var i=this.tryParseRequestJSON(t);return i?this.receive(i,n):Promise.resolve(Mr())},e.prototype.tryParseRequestJSON=function(t){try{return JSON.parse(t)}catch{return null}},e.prototype.receive=function(t,n){return Array.isArray(t)?this.receiveMultiple(t,n):this.receiveSingle(t,n)},e.prototype.receiveMultiple=function(t,n){return wn(this,void 0,void 0,function(){var i,l=this;return Sn(this,function(r){switch(r.label){case 0:return[4,Promise.all(t.map(function(a){return l.receiveSingle(a,n)}))];case 1:return i=r.sent().filter(Dr),i.length===1?[2,i[0]]:i.length?[2,i]:[2,null]}})})},e.prototype.receiveSingle=function(t,n){return wn(this,void 0,void 0,function(){var i,l;return Sn(this,function(r){switch(r.label){case 0:return i=this.nameToMethodDictionary[t.method],(0,Oe.isJSONRPCRequest)(t)?[3,1]:[2,Br(t)];case 1:return[4,this.callMethod(i,t,n)];case 2:return l=r.sent(),[2,Fr(t,l)]}})})},e.prototype.applyMiddleware=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.middleware?this.middleware=this.combineMiddlewares(Ar([this.middleware],t,!0)):this.middleware=this.combineMiddlewares(t)},e.prototype.combineMiddlewares=function(t){return t.length?t.reduce(this.middlewareReducer):null},e.prototype.middlewareReducer=function(t,n){return function(i,l,r){return t(function(a,o){return n(i,a,o)},l,r)}},e.prototype.callMethod=function(t,n,i){var l=this,r=function(o,u){return t?t(o,u):o.id!==void 0?Promise.resolve(Lr(o.id)):Promise.resolve(null)},a=function(o){return l.errorListener('An unexpected error occurred while executing "'.concat(n.method,'" JSON-RPC method:'),o),Promise.resolve(l.mapErrorToJSONRPCErrorResponseIfNecessary(n.id,o))};try{return(this.middleware||Kr)(r,n,i).then(void 0,a)}catch(o){return a(o)}},e.prototype.mapErrorToJSONRPCErrorResponseIfNecessary=function(t,n){return t!==void 0?this.mapErrorToJSONRPCErrorResponse(t,n):null},e}();Dt.JSONRPCServer=Ir;var Dr=function(e){return e!==null},Kr=function(e,t,n){return e(t,n)},jr=function(e,t){return e!==void 0?(0,Oe.createJSONRPCSuccessResponse)(e,t):null},Hr=function(e,t){var n,i=(n=t==null?void 0:t.message)!==null&&n!==void 0?n:"An unexpected error occurred",l=Nr.DefaultErrorCode,r;return t instanceof Oe.JSONRPCErrorException&&(l=t.code,r=t.data),(0,Oe.createJSONRPCErrorResponse)(e,l,i,r)},Fr=function(e,t){return t||(e.id!==void 0?(0,Oe.createJSONRPCErrorResponse)(e.id,Oe.JSONRPCErrorCode.InternalError,"Internal error"):null)},Kt={},Jr=ve&&ve.__awaiter||function(e,t,n,i){function l(r){return r instanceof n?r:new n(function(a){a(r)})}return new(n||(n=Promise))(function(r,a){function o(d){try{s(i.next(d))}catch(y){a(y)}}function u(d){try{s(i.throw(d))}catch(y){a(y)}}function s(d){d.done?r(d.value):l(d.value).then(o,u)}s((i=i.apply(e,t||[])).next())})},Ur=ve&&ve.__generator||function(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,l,r,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(s){return function(d){return u([s,d])}}function u(s){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(n=0)),n;)try{if(i=1,l&&(r=s[0]&2?l.return:s[0]?l.throw||((r=l.return)&&r.call(l),0):l.next)&&!(r=r.call(l,s[1])).done)return r;switch(l=0,r&&(s=[s[0]&2,r.value]),s[0]){case 0:case 1:r=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,l=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!r||s[1]>r[0]&&s[1]<r[3])){n.label=s[1];break}if(s[0]===6&&n.label<r[1]){n.label=r[1],r=s;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(s);break}r[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(d){s=[6,d],l=0}finally{i=r=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.JSONRPCServerAndClient=void 0;var bt=mt,Vr=function(){function e(t,n,i){i===void 0&&(i={});var l;this.server=t,this.client=n,this.errorListener=(l=i.errorListener)!==null&&l!==void 0?l:console.warn}return e.prototype.applyServerMiddleware=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];(t=this.server).applyMiddleware.apply(t,n)},e.prototype.hasMethod=function(t){return this.server.hasMethod(t)},e.prototype.addMethod=function(t,n){this.server.addMethod(t,n)},e.prototype.addMethodAdvanced=function(t,n){this.server.addMethodAdvanced(t,n)},e.prototype.timeout=function(t){return this.client.timeout(t)},e.prototype.request=function(t,n,i){return this.client.request(t,n,i)},e.prototype.requestAdvanced=function(t,n){return this.client.requestAdvanced(t,n)},e.prototype.notify=function(t,n,i){this.client.notify(t,n,i)},e.prototype.rejectAllPendingRequests=function(t){this.client.rejectAllPendingRequests(t)},e.prototype.receiveAndSend=function(t,n,i){return Jr(this,void 0,void 0,function(){var l,r;return Ur(this,function(a){switch(a.label){case 0:return(0,bt.isJSONRPCResponse)(t)||(0,bt.isJSONRPCResponses)(t)?(this.client.receive(t),[3,4]):[3,1];case 1:return(0,bt.isJSONRPCRequest)(t)||(0,bt.isJSONRPCRequests)(t)?[4,this.server.receive(t,n)]:[3,3];case 2:return l=a.sent(),l?[2,this.client.send(l,i)]:[3,4];case 3:return r="Received an invalid JSON-RPC message",this.errorListener(r,t),[2,Promise.reject(new Error(r))];case 4:return[2]}})})},e}();Kt.JSONRPCServerAndClient=Vr;(function(e){var t=ve&&ve.__createBinding||(Object.create?function(i,l,r,a){a===void 0&&(a=r);var o=Object.getOwnPropertyDescriptor(l,r);(!o||("get"in o?!l.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return l[r]}}),Object.defineProperty(i,a,o)}:function(i,l,r,a){a===void 0&&(a=r),i[a]=l[r]}),n=ve&&ve.__exportStar||function(i,l){for(var r in i)r!=="default"&&!Object.prototype.hasOwnProperty.call(l,r)&&t(l,i,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(It,e),n(vl,e),n(mt,e),n(Dt,e),n(Kt,e)})(fl);const hl=new fl.JSONRPCClient(e=>{window.adsk.fusionSendData("jsonrpc",JSON.stringify(e))});window.fusionJavaScriptHandler={handle:function(e,t){try{e=="jsonrpc"&&hl.receive(JSON.parse(t))}catch(n){console.log(n),console.log("exception caught with command: "+e+", data: "+t)}return"OK"}};const Qr={request:async(e,t,n)=>hl.request(e,t,n)},Wr={escapeRegExp:e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),request:async(e,t,n)=>{if(e==="kv_set")localStorage.setItem(t.key,JSON.stringify(t.value));else{if(e==="kv_get")return JSON.parse(localStorage.getItem(t.key));if(e==="kv_mset")for(const[i,l]of Object.entries(t.obj))localStorage.setItem(i,JSON.stringify(l));else{if(e==="kv_mget")return Object.fromEntries(t.keys.map(i=>[i,JSON.parse(localStorage.getItem(i))]));if(e==="kv_del")localStorage.removeItem(t.key);else if(e=="kv_mdel"){if(t.keys&&t.keys.map(localStorage.removeItem),t.pattern){const i=new RegExp(`^${t.pattern.split("%").map(globalThis.escapeRegExp).join(".*")}$`);for(let l=0;l<localStorage.length;l++){const r=localStorage.key(l);r.match(i)&&localStorage.removeItem(r)}}}else if(e==="kv_keys"){const i=[];let l=/^.*$/;t.pattern&&(l=new RegExp(`^${t.pattern.split("%").map(globalThis.escapeRegExp).join(".*")}$`));for(let r=0;r<localStorage.length;r++){const a=localStorage.key(r);a.match(l)&&i.push(a)}return i}}}}},xe={init:async()=>{if(window.adsk===void 0&&(await new Promise(e=>setTimeout(e,100)),window.adsk===void 0)){xe.request=Wr.request,console.log("Fusion360 was not found.");return}console.log("Fusion360 was found."),xe.request=Qr.request},request:async(e,t)=>({})};function ml(e){for(const t of e)t.type==="repo"?t.icon="mdi-github":t.type==="tree"?t.icon="mdi-folder":t.type==="blob"&&(t.icon="mdi-cube-outline"),t.selectable=t.type==="blob",t.expandable=t.type==="repo"||t.type==="tree",t.children&&ml(t.children)}const Xe=Fl("core",{state:()=>({globalCursor:"",search:"",tree:rt([]),token:"",preferences:{showThumbnails:!1,previewSize:128,showManagementUI:!1,interfaceUrl:""}}),getters:{},actions:{getTopLevelNode(e){return this.tree.filter(t=>t.id===e)[0]},async loadState(){await xe.init();const{token:e,collections:t,preferences:n}=await xe.request("kv_mget",{keys:["token","collections","preferences"]});if(e&&(this.token=e),t){for(const i of t)i.selectable=!1,i.icon="mdi-github",Array.isArray(i.repositories)&&i.repositories.length>0&&(i.repositories=i.repositories.map(l=>typeof l=="string"?{repr:l,repo:l.split("/").slice(0,2).join("/"),path:l.split("/").slice(2).join("/"),branch:l.split("#")[1]||null}:l));console.log(t),this.tree=rt(t),this.tree.forEach(i=>this.reloadCollection({nodeId:i.id}))}if(n)for(const i of Object.keys(n))this.preferences[i]=n[i]},async saveToken(){xe.request("kv_set",{key:"token",value:this.token})},async saveCollections(){xe.request("kv_set",{key:"collections",value:this.tree.map(e=>({...e,children:void 0}))})},async savePreferences(){return xe.request("kv_set",{key:"preferences",value:{...this.preferences}})},async reloadCollection({nodeId:e}){const t=this.tree.filter(i=>i.id===e)[0];t.lazy="loading";const n=await Or({repositories:t==null?void 0:t.repositories.map(i=>i.repr),token:this.token,index:!0,id_prefix:t.id,noCache:!1,setLoadingMessage:console.log});t.lazy=!1,ml(n),t.children=rt(n)},async setNodeThumbnail(e){var n,i;const t=await an({url:(i=(n=e==null?void 0:e.content_types)==null?void 0:n.thumb)==null?void 0:i.url,token:this.token});e.img=t}}});var pl=_e({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:t,emit:n}){let i=!1,l,r,a=null,o=null,u,s;function d(){l&&l(),l=null,i=!1,a!==null&&(clearTimeout(a),a=null),o!==null&&(clearTimeout(o),o=null),r!==void 0&&r.removeEventListener("transitionend",u),u=null}function y(q,A,P){A!==void 0&&(q.style.height=`${A}px`),q.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,i=!0,l=P}function b(q,A){q.style.overflowY=null,q.style.height=null,q.style.transition=null,d(),A!==s&&n(A)}function f(q,A){let P=0;r=q,i===!0?(d(),P=q.offsetHeight===q.scrollHeight?0:void 0):(s="hide",q.style.overflowY="hidden"),y(q,P,A),a=setTimeout(()=>{a=null,q.style.height=`${q.scrollHeight}px`,u=N=>{o=null,(Object(N)!==N||N.target===q)&&b(q,"show")},q.addEventListener("transitionend",u),o=setTimeout(u,e.duration*1.1)},100)}function p(q,A){let P;r=q,i===!0?d():(s="show",q.style.overflowY="hidden",P=q.scrollHeight),y(q,P,A),a=setTimeout(()=>{a=null,q.style.height=0,u=N=>{o=null,(Object(N)!==N||N.target===q)&&b(q,"hide")},q.addEventListener("transitionend",u),o=setTimeout(u,e.duration*1.1)},100)}return Je(()=>{i===!0&&d()}),()=>C(zt,{css:!1,appear:e.appear,onEnter:f,onLeave:p},t.default)}}),Xr=_e({name:"QTooltip",inheritAttrs:!1,props:{...Gn,...Mn,...Bn,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Tt},self:{type:String,default:"top middle",validator:Tt},offset:{type:Array,default:()=>[14,14],validator:nl},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...Ln],setup(e,{slots:t,emit:n,attrs:i}){let l,r;const a=Ce(),{proxy:{$q:o}}=a,u=$(null),s=$(!1),d=T(()=>Pt(e.anchor,o.lang.rtl)),y=T(()=>Pt(e.self,o.lang.rtl)),b=T(()=>e.persistent!==!0),{registerTick:f,removeTick:p}=ft(),{registerTimeout:q}=wt(),{transitionProps:A,transitionStyle:P}=In(e),{localScrollTarget:N,changeScrollEvent:m,unconfigureScrollTarget:S}=el(e,be),{anchorEl:k,canShow:R,anchorEvents:J}=Zn({showing:s,configureAnchorEl:de}),{show:X,hide:j}=Dn({showing:s,canShow:R,handleShow:K,handleHide:H,hideOnRouteChange:b,processOnMount:!0});Object.assign(J,{delayShow:V,delayHide:Y});const{showPortal:U,hidePortal:z,renderPortal:fe}=Kn(a,u,w,"tooltip");if(o.platform.is.mobile===!0){const E={anchorEl:k,innerRef:u,onClickOutside(g){return j(g),g.target.classList.contains("q-dialog__backdrop")&&Re(g),!0}},c=T(()=>e.modelValue===null&&e.persistent!==!0&&s.value===!0);oe(c,g=>{(g===!0?tl:qt)(E)}),Je(()=>{qt(E)})}function K(E){U(),f(()=>{r=new MutationObserver(()=>O()),r.observe(u.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),O(),be()}),l===void 0&&(l=oe(()=>o.screen.width+"|"+o.screen.height+"|"+e.self+"|"+e.anchor+"|"+o.lang.rtl,O)),q(()=>{U(!0),n("show",E)},e.transitionDuration)}function H(E){p(),z(),te(),q(()=>{z(!0),n("hide",E)},e.transitionDuration)}function te(){r!==void 0&&(r.disconnect(),r=void 0),l!==void 0&&(l(),l=void 0),S(),Fe(J,"tooltipTemp")}function O(){ln({targetEl:u.value,offset:e.offset,anchorEl:k.value,anchorOrigin:d.value,selfOrigin:y.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function V(E){if(o.platform.is.mobile===!0){vt(),document.body.classList.add("non-selectable");const c=k.value,g=["touchmove","touchcancel","touchend","click"].map(v=>[c,v,"delayHide","passiveCapture"]);Ae(J,"tooltipTemp",g)}q(()=>{X(E)},e.delay)}function Y(E){o.platform.is.mobile===!0&&(Fe(J,"tooltipTemp"),vt(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),q(()=>{j(E)},e.hideDelay)}function de(){if(e.noParentEvent===!0||k.value===null)return;const E=o.platform.is.mobile===!0?[[k.value,"touchstart","delayShow","passive"]]:[[k.value,"mouseenter","delayShow","passive"],[k.value,"mouseleave","delayHide","passive"]];Ae(J,"anchor",E)}function be(){if(k.value!==null||e.scrollTarget!==void 0){N.value=jn(k.value,e.scrollTarget);const E=e.noParentEvent===!0?O:j;m(N.value,E)}}function we(){return s.value===!0?C("div",{...i,ref:u,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",i.class],style:[i.style,P.value],role:"tooltip"},Me(t.default)):null}function w(){return C(zt,A.value,we)}return Je(te),Object.assign(a.proxy,{updatePosition:O}),fe}});const Yr=["none","strict","leaf","leaf-filtered"];function kn(e,t,n,i){return Object.defineProperty(e,t,{get:n,set:i,enumerable:!0}),e}var Gr=Jl(nt({name:"RepoTree",props:{...Qe,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:e=>Yr.includes(e)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String,showThumbnails:Boolean,showManagementUI:Boolean},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide","action:import","action:open","action:upload"],setup(e,{slots:t,emit:n}){const{proxy:i}=Ce(),{$q:l}=i,r=We(e,l),a=$({}),o=$(e.ticked||[]),u=$(e.expanded||[]);let s={};Hn(()=>{s={}});const d=T(()=>`q-tree q-tree--${e.dense===!0?"dense":"standard"}`+(e.noConnectors===!0?" q-tree--no-connectors":"")+(r.value===!0?" q-tree--dark":"")+(e.color!==void 0?` text-${e.color}`:"")),y=T(()=>e.selected!==void 0),b=T(()=>e.icon||l.iconSet.tree.icon),f=T(()=>e.controlColor||e.color),p=T(()=>e.textColor!==void 0?` text-${e.textColor}`:""),q=T(()=>{const c=e.selectedColor||e.color;return c?` text-${c}`:""}),A=T(()=>e.filterMethod!==void 0?e.filterMethod:(c,g)=>{const v=g.toLowerCase();return c[e.labelKey]&&c[e.labelKey].toLowerCase().indexOf(v)>-1}),P=T(()=>{const c={},g=(v,_)=>{const h=v.tickStrategy||(_?_.tickStrategy:e.tickStrategy),x=v[e.nodeKey],L=v[e.childrenKey]&&Array.isArray(v[e.childrenKey])&&v[e.childrenKey].length!==0,ne=v.disabled!==!0&&y.value===!0&&v.selectable!==!1,I=v.disabled!==!0&&v.expandable!==!1,he=h!=="none",qe=h==="strict",$e=h==="leaf-filtered",ze=h==="leaf"||h==="leaf-filtered";let Z=v.disabled!==!0&&v.tickable!==!1;ze===!0&&Z===!0&&_&&_.tickable!==!0&&(Z=!1);let ae=v.lazy;ae===!0&&a.value[x]!==void 0&&Array.isArray(v[e.childrenKey])===!0&&(ae=a.value[x]);const ee={key:x,parent:_,isParent:L,lazy:ae,disabled:v.disabled,link:v.disabled!==!0&&(ne===!0||I===!0&&(L===!0||ae===!0)),children:[],matchesFilter:e.filter?A.value(v,e.filter):!0,selected:x===e.selected&&ne===!0,selectable:ne,expanded:L===!0?u.value.includes(x):!1,expandable:I,noTick:v.noTick===!0||qe!==!0&&ae&&ae!=="loaded",tickable:Z,tickStrategy:h,hasTicking:he,strictTicking:qe,leafFilteredTicking:$e,leafTicking:ze,ticked:qe===!0?o.value.includes(x):L===!0?!1:o.value.includes(x)};if(c[x]=ee,L===!0&&(ee.children=v[e.childrenKey].map(ce=>g(ce,ee)),e.filter&&(ee.matchesFilter!==!0?ee.matchesFilter=ee.children.some(ce=>ce.matchesFilter):ee.noTick!==!0&&ee.disabled!==!0&&ee.tickable===!0&&$e===!0&&ee.children.every(ce=>ce.matchesFilter!==!0||ce.noTick===!0||ce.tickable!==!0)===!0&&(ee.tickable=!1)),ee.matchesFilter===!0&&(ee.noTick!==!0&&qe!==!0&&ee.children.every(ce=>ce.noTick)===!0&&(ee.noTick=!0),ze))){if(ee.ticked=!1,ee.indeterminate=ee.children.some(ce=>ce.indeterminate===!0),ee.tickable=ee.tickable===!0&&ee.children.some(ce=>ce.tickable),ee.indeterminate!==!0){const ce=ee.children.reduce((M,F)=>F.ticked===!0?M+1:M,0);ce===ee.children.length?ee.ticked=!0:ce>0&&(ee.indeterminate=!0)}ee.indeterminate===!0&&(ee.indeterminateNextState=ee.children.every(ce=>ce.tickable!==!0||ce.ticked!==!0))}return ee};return e.nodes.forEach(v=>g(v,null)),c});oe(()=>e.ticked,c=>{o.value=c}),oe(()=>e.expanded,c=>{u.value=c});function N(c){const g=[].reduce,v=(_,h)=>{if(_||!h)return _;if(Array.isArray(h)===!0)return g.call(Object(h),v,_);if(h[e.nodeKey]===c)return h;if(h[e.childrenKey])return v(null,h[e.childrenKey])};return v(null,e.nodes)}function m(){return o.value.map(c=>N(c))}function S(){return u.value.map(c=>N(c))}function k(c){return c&&P.value[c]?P.value[c].expanded:!1}function R(){e.expanded!==void 0?n("update:expanded",[]):u.value=[]}function J(){const c=[],g=v=>{v[e.childrenKey]&&v[e.childrenKey].length!==0&&v.expandable!==!1&&v.disabled!==!0&&(c.push(v[e.nodeKey]),v[e.childrenKey].forEach(g))};e.nodes.forEach(g),e.expanded!==void 0?n("update:expanded",c):u.value=c}function X(c,g,v=N(c),_=P.value[c]){if(_.lazy&&_.lazy!=="loaded"){if(_.lazy==="loading")return;a.value[c]="loading",Array.isArray(v[e.childrenKey])!==!0&&(v[e.childrenKey]=[]),n("lazyLoad",{node:v,key:c,done:h=>{a.value[c]="loaded",v[e.childrenKey]=Array.isArray(h)===!0?h:[],ht(()=>{const x=P.value[c];x&&x.isParent===!0&&j(c,!0)})},fail:()=>{delete a.value[c],v[e.childrenKey].length===0&&delete v[e.childrenKey]}})}else _.isParent===!0&&_.expandable===!0&&j(c,g)}function j(c,g){let v=u.value;const _=e.expanded!==void 0;if(_===!0&&(v=v.slice()),g){if(e.accordion&&P.value[c]){const h=[];P.value[c].parent?P.value[c].parent.children.forEach(x=>{x.key!==c&&x.expandable===!0&&h.push(x.key)}):e.nodes.forEach(x=>{const L=x[e.nodeKey];L!==c&&h.push(L)}),h.length!==0&&(v=v.filter(x=>h.includes(x)===!1))}v=v.concat([c]).filter((h,x,L)=>L.indexOf(h)===x)}else v=v.filter(h=>h!==c);_===!0?n("update:expanded",v):u.value=v}function U(c){return c&&P.value[c]?P.value[c].ticked:!1}function z(c,g){let v=o.value;const _=e.ticked!==void 0;_===!0&&(v=v.slice()),g?v=v.concat(c).filter((h,x,L)=>L.indexOf(h)===x):v=v.filter(h=>c.includes(h)===!1),_===!0&&n("update:ticked",v)}function fe(c,g,v){const _={tree:i,node:c,key:v,color:e.color,dark:r.value};return kn(_,"expanded",()=>g.expanded,h=>{h!==g.expanded&&X(v,h)}),kn(_,"ticked",()=>g.ticked,h=>{h!==g.ticked&&z([v],h)}),_}function K(c){return(e.filter?c.filter(g=>P.value[g[e.nodeKey]].matchesFilter):c).map(g=>de(g))}function H(c,g,v,_){return C(ye,{onClick:h=>{Re(h),n(c,{nodeId:g})},tabindex:-1,size:"xs",padding:"none",style:{margin:0},flat:!0,stretch:!0},()=>[C(ke,{size:"xs",name:_}),C(Xr,{anchor:"center left",self:"center right",transitionShow:"jump-left",transitionHide:"jump-right"},()=>v)])}function te(c){const g=[];return c.type==="blob"?(g.push(H("action:import",c.id,"Import","mdi-import")),g.push(H("action:open",c.id,"Open","mdi-open-in-new"))):c.type==="repo"&&(g.push(H("action:edit",c.id,"Edit","mdi-pencil")),g.push(H("action:reload",c.id,"Reload","mdi-reload"))),(c.type==="repo"||c.type==="tree")&&e.showManagementUI&&g.push(H("action:upload",c.id,"Upload","mdi-upload")),g}function O(c){const g=c.img||c.avatar;if(g&&e.showThumbnails)return C("img",{class:`q-tree__${c.img?"img":"avatar"} q-mr-sm`,src:g});if(c.icon!==void 0)return C(ke,{class:"q-tree__icon q-mr-sm",name:c.icon,color:c.iconColor,size:c.type==="blob"?e.showThumbnails?"42px":"24px":void 0})}function V(){n("afterShow")}function Y(){n("afterHide")}function de(c){const g=c[e.nodeKey],v=P.value[g],_=c.header&&t[`header-${c.header}`]||t["default-header"],h=v.isParent===!0?K(c[e.childrenKey]):[],x=h.length!==0||v.lazy&&v.lazy!=="loaded";let L=c.body&&t[`body-${c.body}`]||t["default-body"];const ne=_!==void 0||L!==void 0?fe(c,v,g):null;return L!==void 0&&(L=C("div",{class:"q-tree__node-body relative-position"},[C("div",{class:p.value},[L(ne)])])),C("div",{key:g,class:`q-tree__node relative-position q-tree__node--${x===!0?"parent":"child"}`},[C("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(v.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(v.selected===!0?" q-tree__node--selected":"")+(v.disabled===!0?" q-tree__node--disabled":""),tabindex:v.link===!0?0:-1,onClick:I=>{we(c,v,I)},onKeypress(I){tn(I)!==!0&&(I.keyCode===13?we(c,v,I,!0):I.keyCode===32&&w(c,v,I,!0))}},[C("div",{class:"q-focus-helper",tabindex:-1,ref:I=>{s[v.key]=I}}),v.lazy==="loading"?C(Fn,{class:"q-tree__spinner",color:f.value}):x===!0?C(ke,{class:"q-tree__arrow"+(v.expanded===!0?" q-tree__arrow--rotate":""),name:b.value,onClick(I){w(c,v,I)}}):null,v.hasTicking===!0&&v.noTick!==!0?C(QCheckbox,{class:"q-tree__tickbox",modelValue:v.indeterminate===!0?null:v.ticked,color:f.value,dark:r.value,dense:!0,keepColor:!0,disable:v.tickable!==!0,onKeydown:Re,"onUpdate:modelValue":I=>{E(v,I)}}):null,C("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(v.selected===!0?q.value:p.value)},[_?_(ne):[O(c),C("div",c[e.labelKey])],C("div",{style:{flex:1}}),C("div",{class:"q-tree__hovercontrol"},te(c))])]),x===!0?e.noTransition===!0?C("div",{class:"q-tree__node-collapsible"+p.value,key:`${g}__q`},[L,C("div",{class:"q-tree__children"+(v.disabled===!0?" q-tree__node--disabled":"")},v.expanded?h:null)]):C(pl,{duration:e.duration,onShow:V,onHide:Y},()=>ue(C("div",{class:"q-tree__node-collapsible"+p.value,key:`${g}__q`},[L,C("div",{class:"q-tree__children"+(v.disabled===!0?" q-tree__node--disabled":"")},h)]),[[Jn,v.expanded]])):L])}function be(c){const g=s[c];g&&g.focus()}function we(c,g,v,_){_!==!0&&g.selectable!==!1&&be(g.key),y.value&&g.selectable?e.noSelectionUnset===!1?n("update:selected",g.key!==e.selected?g.key:null):g.key!==e.selected&&n("update:selected",g.key===void 0?null:g.key):w(c,g,v,_),typeof c.handler=="function"&&c.handler(c)}function w(c,g,v,_){v!==void 0&&Re(v),_!==!0&&g.selectable!==!1&&be(g.key),X(g.key,!g.expanded,c,g)}function E(c,g){if(c.indeterminate===!0&&(g=c.indeterminateNextState),c.strictTicking)z([c.key],g);else if(c.leafTicking){const v=[],_=h=>{h.isParent?(g!==!0&&h.noTick!==!0&&h.tickable===!0&&v.push(h.key),h.leafTicking===!0&&h.children.forEach(_)):h.noTick!==!0&&h.tickable===!0&&(h.leafFilteredTicking!==!0||h.matchesFilter===!0)&&v.push(h.key)};_(c),z(v,g)}}return e.defaultExpandAll===!0&&J(),Object.assign(i,{getNodeByKey:N,getTickedNodes:m,getExpandedNodes:S,isExpanded:k,collapseAll:R,expandAll:J,setExpanded:X,isTicked:U,setTicked:z}),()=>{const c=K(e.nodes);return C("div",{class:d.value},c.length===0?e.filter?e.noResultsLabel||l.lang.tree.noResults:e.noNodesLabel||l.lang.tree.noNodes:c)}}}));function gl(){return St(Ul)}const xn=["B","KB","MB","GB","TB","PB"];function Zr(e){let t=0;for(;parseInt(e,10)>=1024&&t<xn.length-1;)e/=1024,++t;return`${e.toFixed(1)}${xn[t]}`}function ei(e){return e.charAt(0).toUpperCase()+e.slice(1)}function dt(e,t,n){return n<=t?t:Math.min(n,Math.max(t,e))}function ti(e,t,n){if(n<=t)return t;const i=n-t+1;let l=t+(e-t)%i;return l<t&&(l=i+l),l===0?0:l}function ni(e,t=2,n="0"){if(e==null)return e;const i=""+e;return i.length>=t?i:new Array(t-i.length+1).join(n)+i}var yl={humanStorageSize:Zr,capitalize:ei,between:dt,normalizeToInterval:ti,pad:ni};let li=0;const ri=["click","keydown"],ii={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${li++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function ai(e,t,n,i){const l=St(Un,Ke);if(l===Ke)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Ke;const{proxy:r}=Ce(),a=$(null),o=$(null),u=$(null),s=T(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),d=T(()=>l.currentModel.value===e.name),y=T(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(d.value===!0?" q-tab--active"+(l.tabProps.value.activeClass?" "+l.tabProps.value.activeClass:"")+(l.tabProps.value.activeColor?` text-${l.tabProps.value.activeColor}`:"")+(l.tabProps.value.activeBgColor?` bg-${l.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&l.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||l.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(i!==void 0?i.linkClass.value:"")),b=T(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(l.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),f=T(()=>e.disable===!0||l.hasFocus.value===!0||d.value===!1&&l.hasActiveTab.value===!0?-1:e.tabindex||0);function p(m,S){if(S!==!0&&a.value!==null&&a.value.focus(),e.disable===!0){i!==void 0&&i.hasRouterLink.value===!0&&Re(m);return}if(i===void 0){l.updateModel({name:e.name}),n("click",m);return}if(i.hasRouterLink.value===!0){const k=(R={})=>{let J;const X=R.to===void 0||Ql(R.to,e.to)===!0?l.avoidRouteWatcher=nn():null;return i.navigateToRouterLink(m,{...R,returnRouterError:!0}).catch(j=>{J=j}).then(j=>{if(X===l.avoidRouteWatcher&&(l.avoidRouteWatcher=!1,J===void 0&&(j===void 0||j.message.startsWith("Avoided redundant navigation")===!0)&&l.updateModel({name:e.name})),R.returnRouterError===!0)return J!==void 0?Promise.reject(J):j})};n("click",m,k),m.defaultPrevented!==!0&&k();return}n("click",m)}function q(m){Ot(m,[13,32])?p(m,!0):tn(m)!==!0&&m.keyCode>=35&&m.keyCode<=40&&m.altKey!==!0&&m.metaKey!==!0&&l.onKbdNavigate(m.keyCode,r.$el)===!0&&Re(m),n("keydown",m)}function A(){const m=l.tabProps.value.narrowIndicator,S=[],k=C("div",{ref:u,class:["q-tab__indicator",l.tabProps.value.indicatorClass]});e.icon!==void 0&&S.push(C(ke,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&S.push(C("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&S.push(e.alertIcon!==void 0?C(ke,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):C("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),m===!0&&S.push(k);const R=[C("div",{class:"q-focus-helper",tabindex:-1,ref:a}),C("div",{class:b.value},At(t.default,S))];return m===!1&&R.push(k),R}const P={name:T(()=>e.name),rootRef:o,tabIndicatorRef:u,routeData:i};Je(()=>{l.unregisterTab(P)}),tt(()=>{l.registerTab(P)});function N(m,S){const k={ref:o,class:y.value,tabindex:f.value,role:"tab","aria-selected":d.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:p,onKeydown:q,...S};return ue(C(m,k,A()),[[Vl,s.value]])}return{renderTab:N,$tabs:l}}var oi=_e({name:"QTab",props:ii,emits:ri,setup(e,{slots:t,emit:n}){const{renderTab:i}=ai(e,t,n);return()=>i("div")}});const si=C("div",{class:"q-space"});var bl=_e({name:"QSpace",setup(){return()=>si}});let _l=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,_l=e.scrollLeft>=0,e.remove()}function ui(e,t,n){const i=n===!0?["left","right"]:["top","bottom"];return`absolute-${t===!0?i[0]:i[1]}${e?` text-${e}`:""}`}const ci=["left","center","right","justify"];var di=_e({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>ci.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:t,emit:n}){const{proxy:i}=Ce(),{$q:l}=i,{registerTick:r}=ft(),{registerTick:a}=ft(),{registerTick:o}=ft(),{registerTimeout:u,removeTimeout:s}=wt(),{registerTimeout:d,removeTimeout:y}=wt(),b=$(null),f=$(null),p=$(e.modelValue),q=$(!1),A=$(!0),P=$(!1),N=$(!1),m=[],S=$(0),k=$(!1);let R=null,J=null,X;const j=T(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:ui(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),U=T(()=>{const M=S.value,F=p.value;for(let G=0;G<M;G++)if(m[G].name.value===F)return!0;return!1}),z=T(()=>`q-tabs__content--align-${q.value===!0?"left":N.value===!0?"justify":e.align}`),fe=T(()=>`q-tabs row no-wrap items-center q-tabs--${q.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),K=T(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+z.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),H=T(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),te=T(()=>e.vertical!==!0&&l.lang.rtl===!0),O=T(()=>_l===!1&&te.value===!0);oe(te,w),oe(()=>e.modelValue,M=>{V({name:M,setCurrent:!0,skipEmit:!0})}),oe(()=>e.outsideArrows,Y);function V({name:M,setCurrent:F,skipEmit:G}){p.value!==M&&(G!==!0&&e["onUpdate:modelValue"]!==void 0&&n("update:modelValue",M),(F===!0||e["onUpdate:modelValue"]===void 0)&&(be(p.value,M),p.value=M))}function Y(){r(()=>{de({width:b.value.offsetWidth,height:b.value.offsetHeight})})}function de(M){if(H.value===void 0||f.value===null)return;const F=M[H.value.container],G=Math.min(f.value[H.value.scroll],Array.prototype.reduce.call(f.value.children,(pe,se)=>pe+(se[H.value.content]||0),0)),me=F>0&&G>F;q.value=me,me===!0&&a(w),N.value=F<parseInt(e.breakpoint,10)}function be(M,F){const G=M!=null&&M!==""?m.find(pe=>pe.name.value===M):null,me=F!=null&&F!==""?m.find(pe=>pe.name.value===F):null;if(G&&me){const pe=G.tabIndicatorRef.value,se=me.tabIndicatorRef.value;R!==null&&(clearTimeout(R),R=null),pe.style.transition="none",pe.style.transform="none",se.style.transition="none",se.style.transform="none";const re=pe.getBoundingClientRect(),Te=se.getBoundingClientRect();se.style.transform=e.vertical===!0?`translate3d(0,${re.top-Te.top}px,0) scale3d(1,${Te.height?re.height/Te.height:1},1)`:`translate3d(${re.left-Te.left}px,0,0) scale3d(${Te.width?re.width/Te.width:1},1,1)`,o(()=>{R=setTimeout(()=>{R=null,se.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",se.style.transform="none"},70)})}me&&q.value===!0&&we(me.rootRef.value)}function we(M){const{left:F,width:G,top:me,height:pe}=f.value.getBoundingClientRect(),se=M.getBoundingClientRect();let re=e.vertical===!0?se.top-me:se.left-F;if(re<0){f.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(re),w();return}re+=e.vertical===!0?se.height-pe:se.width-G,re>0&&(f.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(re),w())}function w(){const M=f.value;if(M===null)return;const F=M.getBoundingClientRect(),G=e.vertical===!0?M.scrollTop:Math.abs(M.scrollLeft);te.value===!0?(A.value=Math.ceil(G+F.width)<M.scrollWidth-1,P.value=G>0):(A.value=G>0,P.value=e.vertical===!0?Math.ceil(G+F.height)<M.scrollHeight:Math.ceil(G+F.width)<M.scrollWidth)}function E(M){J!==null&&clearInterval(J),J=setInterval(()=>{x(M)===!0&&v()},5)}function c(){E(O.value===!0?Number.MAX_SAFE_INTEGER:0)}function g(){E(O.value===!0?0:Number.MAX_SAFE_INTEGER)}function v(){J!==null&&(clearInterval(J),J=null)}function _(M,F){const G=Array.prototype.filter.call(f.value.children,Te=>Te===F||Te.matches&&Te.matches(".q-tab.q-focusable")===!0),me=G.length;if(me===0)return;if(M===36)return we(G[0]),G[0].focus(),!0;if(M===35)return we(G[me-1]),G[me-1].focus(),!0;const pe=M===(e.vertical===!0?38:37),se=M===(e.vertical===!0?40:39),re=pe===!0?-1:se===!0?1:void 0;if(re!==void 0){const Te=te.value===!0?-1:1,Ie=G.indexOf(F)+re*Te;return Ie>=0&&Ie<me&&(we(G[Ie]),G[Ie].focus({preventScroll:!0})),!0}}const h=T(()=>O.value===!0?{get:M=>Math.abs(M.scrollLeft),set:(M,F)=>{M.scrollLeft=-F}}:e.vertical===!0?{get:M=>M.scrollTop,set:(M,F)=>{M.scrollTop=F}}:{get:M=>M.scrollLeft,set:(M,F)=>{M.scrollLeft=F}});function x(M){const F=f.value,{get:G,set:me}=h.value;let pe=!1,se=G(F);const re=M<se?-1:1;return se+=re*5,se<0?(pe=!0,se=0):(re===-1&&se<=M||re===1&&se>=M)&&(pe=!0,se=M),me(F,se),w(),pe}function L(M,F){for(const G in M)if(M[G]!==F[G])return!1;return!0}function ne(){let M=null,F={matchedLen:0,queryDiff:9999,hrefLen:0};const G=m.filter(re=>re.routeData!==void 0&&re.routeData.hasRouterLink.value===!0),{hash:me,query:pe}=i.$route,se=Object.keys(pe).length;for(const re of G){const Te=re.routeData.exact.value===!0;if(re.routeData[Te===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Ie,query:Ht,matched:Tl,href:Pl}=re.routeData.resolvedLink.value,Ft=Object.keys(Ht).length;if(Te===!0){if(Ie!==me||Ft!==se||L(pe,Ht)===!1)continue;M=re.name.value;break}if(Ie!==""&&Ie!==me||Ft!==0&&L(Ht,pe)===!1)continue;const Ue={matchedLen:Tl.length,queryDiff:se-Ft,hrefLen:Pl.length-Ie.length};if(Ue.matchedLen>F.matchedLen){M=re.name.value,F=Ue;continue}else if(Ue.matchedLen!==F.matchedLen)continue;if(Ue.queryDiff<F.queryDiff)M=re.name.value,F=Ue;else if(Ue.queryDiff!==F.queryDiff)continue;Ue.hrefLen>F.hrefLen&&(M=re.name.value,F=Ue)}M===null&&m.some(re=>re.routeData===void 0&&re.name.value===p.value)===!0||V({name:M,setCurrent:!0})}function I(M){if(s(),k.value!==!0&&b.value!==null&&M.target&&typeof M.target.closest=="function"){const F=M.target.closest(".q-tab");F&&b.value.contains(F)===!0&&(k.value=!0,q.value===!0&&we(F))}}function he(){u(()=>{k.value=!1},30)}function qe(){ae.avoidRouteWatcher===!1?d(ne):y()}function $e(){if(X===void 0){const M=oe(()=>i.$route.fullPath,qe);X=()=>{M(),X=void 0}}}function ze(M){m.push(M),S.value++,Y(),M.routeData===void 0||i.$route===void 0?d(()=>{if(q.value===!0){const F=p.value,G=F!=null&&F!==""?m.find(me=>me.name.value===F):null;G&&we(G.rootRef.value)}}):($e(),M.routeData.hasRouterLink.value===!0&&qe())}function Z(M){m.splice(m.indexOf(M),1),S.value--,Y(),X!==void 0&&M.routeData!==void 0&&(m.every(F=>F.routeData===void 0)===!0&&X(),qe())}const ae={currentModel:p,tabProps:j,hasFocus:k,hasActiveTab:U,registerTab:ze,unregisterTab:Z,verifyRouteModel:qe,updateModel:V,onKbdNavigate:_,avoidRouteWatcher:!1};Wl(Un,ae);function ee(){R!==null&&clearTimeout(R),v(),X!==void 0&&X()}let ce;return Je(ee),Vn(()=>{ce=X!==void 0,ee()}),Qn(()=>{ce===!0&&$e(),Y()}),()=>C("div",{ref:b,class:fe.value,role:"tablist",onFocusin:I,onFocusout:he},[C(Gt,{onResize:de}),C("div",{ref:f,class:K.value,onScroll:w},Me(t.default)),C(ke,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(A.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||l.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:c,onTouchstartPassive:c,onMouseupPassive:v,onMouseleavePassive:v,onTouchendPassive:v}),C(ke,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(P.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||l.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:g,onTouchstartPassive:g,onMouseupPassive:v,onMouseleavePassive:v,onTouchendPassive:v})])}});const sn={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},fi=Object.keys(sn);sn.all=!0;function $t(e){const t={};for(const n of fi)e[n]===!0&&(t[n]=!0);return Object.keys(t).length===0?sn:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const vi=["INPUT","TEXTAREA"];function Et(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&vi.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function hi(e){const t=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((n,i)=>{const l=parseFloat(n);l&&(t[i]=l)}),t}var mi=en({name:"touch-swipe",beforeMount(e,{value:t,arg:n,modifiers:i}){if(i.mouse!==!0&&Be.has.touch!==!0)return;const l=i.mouseCapture===!0?"Capture":"",r={handler:t,sensitivity:hi(n),direction:$t(i),noop:Wn,mouseStart(a){Et(a,r)&&Xn(a)&&(Ae(r,"temp",[[document,"mousemove","move",`notPassive${l}`],[document,"mouseup","end","notPassiveCapture"]]),r.start(a,!0))},touchStart(a){if(Et(a,r)){const o=a.target;Ae(r,"temp",[[o,"touchmove","move","notPassiveCapture"],[o,"touchcancel","end","notPassiveCapture"],[o,"touchend","end","notPassiveCapture"]]),r.start(a)}},start(a,o){Be.is.firefox===!0&&it(e,!0);const u=st(a);r.event={x:u.left,y:u.top,time:Date.now(),mouse:o===!0,dir:!1}},move(a){if(r.event===void 0)return;if(r.event.dir!==!1){Re(a);return}const o=Date.now()-r.event.time;if(o===0)return;const u=st(a),s=u.left-r.event.x,d=Math.abs(s),y=u.top-r.event.y,b=Math.abs(y);if(r.event.mouse!==!0){if(d<r.sensitivity[1]&&b<r.sensitivity[1]){r.end(a);return}}else if(window.getSelection().toString()!==""){r.end(a);return}else if(d<r.sensitivity[2]&&b<r.sensitivity[2])return;const f=d/o,p=b/o;r.direction.vertical===!0&&d<b&&d<100&&p>r.sensitivity[0]&&(r.event.dir=y<0?"up":"down"),r.direction.horizontal===!0&&d>b&&b<100&&f>r.sensitivity[0]&&(r.event.dir=s<0?"left":"right"),r.direction.up===!0&&d<b&&y<0&&d<100&&p>r.sensitivity[0]&&(r.event.dir="up"),r.direction.down===!0&&d<b&&y>0&&d<100&&p>r.sensitivity[0]&&(r.event.dir="down"),r.direction.left===!0&&d>b&&s<0&&b<100&&f>r.sensitivity[0]&&(r.event.dir="left"),r.direction.right===!0&&d>b&&s>0&&b<100&&f>r.sensitivity[0]&&(r.event.dir="right"),r.event.dir!==!1?(Re(a),r.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),vt(),r.styleCleanup=q=>{r.styleCleanup=void 0,document.body.classList.remove("non-selectable");const A=()=>{document.body.classList.remove("no-pointer-events--children")};q===!0?setTimeout(A,50):A()}),r.handler({evt:a,touch:r.event.mouse!==!0,mouse:r.event.mouse,direction:r.event.dir,duration:o,distance:{x:d,y:b}})):r.end(a)},end(a){r.event!==void 0&&(Fe(r,"temp"),Be.is.firefox===!0&&it(e,!1),r.styleCleanup!==void 0&&r.styleCleanup(!0),a!==void 0&&r.event.dir!==!1&&Re(a),r.event=void 0)}};if(e.__qtouchswipe=r,i.mouse===!0){const a=i.mouseCapture===!0||i.mousecapture===!0?"Capture":"";Ae(r,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}Be.has.touch===!0&&Ae(r,"main",[[e,"touchstart","touchStart",`passive${i.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const n=e.__qtouchswipe;n!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&n.end(),n.handler=t.value),n.direction=$t(t.modifiers))},beforeUnmount(e){const t=e.__qtouchswipe;t!==void 0&&(Fe(t,"main"),Fe(t,"temp"),Be.is.firefox===!0&&it(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchswipe)}});function pi(){const e=new Map;return{getCache:function(t,n){return e[t]===void 0?e[t]=n:e[t]},getCacheWithFn:function(t,n){return e[t]===void 0?e[t]=n():e[t]}}}const gi={name:{required:!0},disable:Boolean},Cn={setup(e,{slots:t}){return()=>C("div",{class:"q-panel scroll",role:"tabpanel"},Me(t.default))}},yi={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},bi=["update:modelValue","beforeTransition","transition"];function _i(){const{props:e,emit:t,proxy:n}=Ce(),{getCacheWithFn:i}=pi();let l,r;const a=$(null),o=$(null);function u(K){const H=e.vertical===!0?"up":"left";J((n.$q.lang.rtl===!0?-1:1)*(K.direction===H?1:-1))}const s=T(()=>[[mi,u,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),d=T(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),y=T(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),b=T(()=>`--q-transition-duration: ${e.transitionDuration}ms`),f=T(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),p=T(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),q=T(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);oe(()=>e.modelValue,(K,H)=>{const te=m(K)===!0?S(K):-1;r!==!0&&R(te===-1?0:te<S(H)?-1:1),a.value!==te&&(a.value=te,t("beforeTransition",K,H),ht(()=>{t("transition",K,H)}))});function A(){J(1)}function P(){J(-1)}function N(K){t("update:modelValue",K)}function m(K){return K!=null&&K!==""}function S(K){return l.findIndex(H=>H.props.name===K&&H.props.disable!==""&&H.props.disable!==!0)}function k(){return l.filter(K=>K.props.disable!==""&&K.props.disable!==!0)}function R(K){const H=K!==0&&e.animated===!0&&a.value!==-1?"q-transition--"+(K===-1?d.value:y.value):null;o.value!==H&&(o.value=H)}function J(K,H=a.value){let te=H+K;for(;te>-1&&te<l.length;){const O=l[te];if(O!==void 0&&O.props.disable!==""&&O.props.disable!==!0){R(K),r=!0,t("update:modelValue",O.props.name),setTimeout(()=>{r=!1});return}te+=K}e.infinite===!0&&l.length!==0&&H!==-1&&H!==l.length&&J(K,K===-1?l.length:-1)}function X(){const K=S(e.modelValue);return a.value!==K&&(a.value=K),!0}function j(){const K=m(e.modelValue)===!0&&X()&&l[a.value];return e.keepAlive===!0?[C(Yl,p.value,[C(q.value===!0?i(f.value,()=>({...Cn,name:f.value})):Cn,{key:f.value,style:b.value},()=>K)])]:[C("div",{class:"q-panel scroll",style:b.value,key:f.value,role:"tabpanel"},[K])]}function U(){if(l.length!==0)return e.animated===!0?[C(zt,{name:o.value},j)]:j()}function z(K){return l=Xl(Me(K.default,[])).filter(H=>H.props!==null&&H.props.slot===void 0&&m(H.props.name)===!0),l.length}function fe(){return l}return Object.assign(n,{next:A,previous:P,goTo:N}),{panelIndex:a,panelDirectives:s,updatePanelsList:z,updatePanelIndex:X,getPanelContent:U,getEnabledPanels:k,getPanels:fe,isValidPanelName:m,keepAliveProps:p,needsUniqueKeepAliveWrapper:q,goToPanelByOffset:J,goToPanel:N,nextPanel:A,previousPanel:P}}var wi=_e({name:"QTabPanel",props:gi,setup(e,{slots:t}){return()=>C("div",{class:"q-tab-panel",role:"tabpanel"},Me(t.default))}}),Si=_e({name:"QTabPanels",props:{...yi,...Qe},emits:bi,setup(e,{slots:t}){const n=Ce(),i=We(e,n.proxy.$q),{updatePanelsList:l,getPanelContent:r,panelDirectives:a}=_i(),o=T(()=>"q-tab-panels q-panel-parent"+(i.value===!0?" q-tab-panels--dark q-dark":""));return()=>(l(t),Gl("div",{class:o.value},r(),"pan",e.swipeable,()=>a.value))}});function wl(e){return Zl()?(er(e),!0):!1}function Sl(e){return typeof e=="function"?e():le(e)}const jt=typeof window!="undefined",kl=()=>{};function ki(...e){if(e.length!==1)return tr(...e);const t=e[0];return typeof t=="function"?nr(lr(()=>({get:t,set:kl}))):$(t)}function xi(e,t=!0){Ce()?tt(e):t?e():ht(e)}function xl(e){var t;const n=Sl(e);return(t=n==null?void 0:n.$el)!=null?t:n}const gt=jt?window:void 0;jt&&window.document;jt&&window.navigator;jt&&window.location;function Pe(...e){let t,n,i,l;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,i,l]=e,t=gt):[t,n,i,l]=e,!t)return kl;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const r=[],a=()=>{r.forEach(d=>d()),r.length=0},o=(d,y,b,f)=>(d.addEventListener(y,b,f),()=>d.removeEventListener(y,b,f)),u=oe(()=>[xl(t),Sl(l)],([d,y])=>{a(),d&&r.push(...n.flatMap(b=>i.map(f=>o(d,b,f,y))))},{immediate:!0,flush:"post"}),s=()=>{u(),a()};return wl(s),s}function Ci(){const e=$(!1);return Ce()&&tt(()=>{e.value=!0}),e}function qi(e){const t=Ci();return T(()=>(t.value,Boolean(e())))}function Ti(e,t={}){const{window:n=gt}=t,i=qi(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let l;const r=$(!1),a=()=>{!l||("removeEventListener"in l?l.removeEventListener("change",o):l.removeListener(o))},o=()=>{!i.value||(a(),l=n.matchMedia(ki(e).value),r.value=!!(l!=null&&l.matches),l&&("addEventListener"in l?l.addEventListener("change",o):l.addListener(o)))};return rr(o),wl(()=>a()),r}const Pi={page:e=>[e.pageX,e.pageY],client:e=>[e.clientX,e.clientY],screen:e=>[e.screenX,e.screenY],movement:e=>e instanceof Touch?null:[e.movementX,e.movementY]};function Ri(e={}){const{type:t="page",touch:n=!0,resetOnTouchEnds:i=!1,initialValue:l={x:0,y:0},window:r=gt,target:a=r,eventFilter:o}=e,u=$(l.x),s=$(l.y),d=$(null),y=typeof t=="function"?t:Pi[t],b=P=>{const N=y(P);N&&([u.value,s.value]=N,d.value="mouse")},f=P=>{if(P.touches.length>0){const N=y(P.touches[0]);N&&([u.value,s.value]=N,d.value="touch")}},p=()=>{u.value=l.x,s.value=l.y},q=o?P=>o(()=>b(P),{}):P=>b(P),A=o?P=>o(()=>f(P),{}):P=>f(P);return a&&(Pe(a,"mousemove",q,{passive:!0}),Pe(a,"dragover",q,{passive:!0}),n&&t!=="movement"&&(Pe(a,"touchstart",A,{passive:!0}),Pe(a,"touchmove",A,{passive:!0}),i&&Pe(a,"touchend",p,{passive:!0}))),{x:u,y:s,sourceType:d}}function $i(e={}){const{touch:t=!0,drag:n=!0,initialValue:i=!1,window:l=gt}=e,r=$(i),a=$(null);if(!l)return{pressed:r,sourceType:a};const o=d=>()=>{r.value=!0,a.value=d},u=()=>{r.value=!1,a.value=null},s=T(()=>xl(e.target)||l);return Pe(s,"mousedown",o("mouse"),{passive:!0}),Pe(l,"mouseleave",u,{passive:!0}),Pe(l,"mouseup",u,{passive:!0}),n&&(Pe(s,"dragstart",o("mouse"),{passive:!0}),Pe(l,"drop",u,{passive:!0}),Pe(l,"dragend",u,{passive:!0})),t&&(Pe(s,"touchstart",o("touch"),{passive:!0}),Pe(l,"touchend",u,{passive:!0}),Pe(l,"touchcancel",u,{passive:!0})),{pressed:r,sourceType:a}}function Ei(e={}){const{window:t=gt,initialWidth:n=1/0,initialHeight:i=1/0,listenOrientation:l=!0,includeScrollbar:r=!0}=e,a=$(n),o=$(i),u=()=>{t&&(r?(a.value=t.innerWidth,o.value=t.innerHeight):(a.value=t.document.documentElement.clientWidth,o.value=t.document.documentElement.clientHeight))};if(u(),xi(u),Pe("resize",u,{passive:!0}),l){const s=Ti("(orientation: portrait)");oe(s,()=>u())}return{width:a,height:o}}const Oi=nt({__name:"PanelResizer",props:{maxSize:{},minSize:{},setSize:{type:Function}},setup(e){const t=e,n=Xe(),i=$(),{pressed:l}=$i({target:i}),{y:r}=Ri(),{height:a}=Ei();return oe(()=>l,o=>{n.globalCursor=o?"ns-resize":""}),oe(r,o=>{if(l.value){let u=a.value-o-3;u>t.maxSize&&(u=t.maxSize),u<t.minSize&&(u=t.minSize),t.setSize(u)}}),(o,u)=>(Q(),ie("div",{ref_key:"el",ref:i,style:{height:"3px",cursor:"ns-resize",marginTop:"-3px"}}," \xA0 ",512))}});var qn=_e({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const n=T(()=>parseInt(e.lines,10)),i=T(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(n.value===1?" ellipsis":"")),l=T(()=>e.lines!==void 0&&n.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":n.value}:null);return()=>C("div",{style:l.value,class:i.value},Me(t.default))}});const zi={class:"row"},Ai=["href"],Ni=nt({__name:"NodePreviewTab",props:{label:{},info:{}},setup(e){const t=e,{humanStorageSize:n}=yl,i=Xe(),l=$(null),r=async a=>{l.value=(await Pr({...a,token:i.token})).commit};return oe(()=>t.info,r),tt(()=>{r(t.info)}),(a,o)=>(Q(),ie("div",zi,[D(ct,{dense:"",class:"col-xs-12"},{default:W(()=>[D(De,null,{default:W(()=>[D(qn,null,{default:W(()=>[Ne(Ee(a.info.path)+" ["+Ee(le(n)(a.info.size))+"]",1)]),_:1}),D(qn,null,{default:W(()=>[B("a",{href:`https://github.com/${a.info.repo}/tree/${a.info.branch}/${a.info.path}`},[D(ke,{name:"mdi-github",size:"15px",style:{"vertical-align":"baseline"}}),Ne(Ee(a.info.repo),1)],8,Ai)]),_:1})]),_:1})]),_:1})]))}}),Mi={class:"thumbnail"},Bi=["src"],Li={style:{display:"flex","flex-direction":"column",flex:"1"}},Ii=nt({__name:"NodePreview",props:{node:{},showManagementUI:{type:Boolean}},emits:["action:import","action:open","action:edit"],setup(e,{emit:t}){const n=e,i=Xe(),l=$(""),r=$("step"),a=async u=>{var s,d,y,b;(s=u.meta)!=null&&s.thumb?l.value=(d=u==null?void 0:u.meta)==null?void 0:d.thumb:(y=u.content_types)!=null&&y.thumb?an({url:(b=u==null?void 0:u.content_types)==null?void 0:b.thumb.url,token:i.token}).then(f=>l.value=f):l.value=""},o=u=>{var s;if(((s=u.content_types)==null?void 0:s[r.value])===void 0){const d=u.content_types;r.value=d!=null&&d.step?"step":d!=null&&d.f3d?"f3d":d!=null&&d.dxf?"dxf":d!=null&&d.svg?"svg":r.value}};return tt(()=>{a(n.node),o(n.node)}),oe(()=>n.node,a),oe(()=>n.node,o),(u,s)=>(Q(),ie("div",{class:"previewPane shadow-up-2",style:at([{"z-index":"2"},{maxHeight:`${le(i).preferences.previewSize}px`}])},[D(Oi,{setSize:d=>le(i).preferences.previewSize=d,minSize:64,maxSize:256},null,8,["setSize"]),B("div",{class:"row",style:at({display:"flex",flexDirection:"row",flexWrap:"nowrap",height:`${le(i).preferences.previewSize}px`})},[B("div",Mi,[l.value?(Q(),ie("img",{key:0,src:l.value,style:at({width:`${le(i).preferences.previewSize}px`,height:`${le(i).preferences.previewSize}px`,objectFit:"contain"})},null,12,Bi)):ge("",!0),l.value?ge("",!0):(Q(),Se(ke,{key:1,name:u.node.icon,size:`${le(i).preferences.previewSize}px`},null,8,["name","size"]))]),B("div",Li,[D(di,{breakpoint:50,modelValue:r.value,"onUpdate:modelValue":s[3]||(s[3]=d=>r.value=d),dense:"","narrow-indicator":"",align:"left",class:"shadow-2"},{default:W(()=>{var d,y,b,f,p,q,A,P;return[(Q(!0),ie(Ye,null,Ge(Object.keys(((d=u.node)==null?void 0:d.content_types)||{}).filter(N=>N!=="meta"&&N!=="thumb"),N=>(Q(),Se(oi,{name:N,key:N,dense:"",label:`.${N.toUpperCase()}`},null,8,["name","label"]))),128)),D(bl),((y=u.node.content_types)==null?void 0:y.step)||((b=u.node.content_types)==null?void 0:b.dxf)||((f=u.node.content_types)==null?void 0:f.svg)?(Q(),Se(ye,{key:0,icon:"mdi-import",size:"sm",dense:"",rounded:"",unelevated:"",label:"Import",class:"q-pr-sm q-mr-sm",onClick:s[0]||(s[0]=N=>{N.stopPropagation(),N.preventDefault(),t("action:import",{nodeId:u.node.id,contentType:r.value})})})):ge("",!0),((p=u.node.content_types)==null?void 0:p.step)||((q=u.node.content_types)==null?void 0:q.f3d)?(Q(),Se(ye,{key:1,icon:"mdi-open-in-new",size:"sm",dense:"",rounded:"",unelevated:"",label:"Open",class:"q-pr-sm q-mr-sm",onClick:s[1]||(s[1]=N=>{N.stopPropagation(),N.preventDefault(),t("action:open",{nodeId:u.node.id,contentType:r.value})})})):ge("",!0),n.showManagementUI&&(((A=u.node.content_types)==null?void 0:A.step)||((P=u.node.content_types)==null?void 0:P.f3d))?(Q(),Se(ye,{key:2,icon:"mdi-pencil",size:"sm",dense:"",rounded:"",unelevated:"",label:"edit",class:"q-mr-sm",onClick:s[2]||(s[2]=N=>{N.stopPropagation(),N.preventDefault(),t("action:edit",{nodeId:u.node.id})})})):ge("",!0)]}),_:1},8,["modelValue"]),D(Si,{animated:"",modelValue:r.value,"onUpdate:modelValue":s[4]||(s[4]=d=>r.value=d),style:{flex:"1","overflow-y":"auto",height:"1px"}},{default:W(()=>{var d;return[(Q(!0),ie(Ye,null,Ge(Object.keys(((d=u.node)==null?void 0:d.content_types)||{}).filter(y=>y!=="meta"&&y!=="thumb"),y=>(Q(),Se(wi,{class:"q-pa-xs",key:y,name:y},{default:W(()=>{var b,f;return[D(Ni,{label:y.toUpperCase(),info:(f=(b=u.node)==null?void 0:b.content_types)==null?void 0:f[y]},null,8,["label","info"])]}),_:2},1032,["name"]))),128))]}),_:1},8,["modelValue"])])],4)],4))}}),Di=()=>!0;function Ki(e){const t={};return e.forEach(n=>{t[n]=Di}),t}function Le(){const{emit:e,proxy:t}=Ce(),n=$(null);function i(){n.value.show()}function l(){n.value.hide()}function r(o){e("ok",o),l()}function a(){e("hide")}return Object.assign(t,{show:i,hide:l}),{dialogRef:n,onDialogHide:a,onDialogOK:r,onDialogCancel:l}}const Cl=["ok","hide"];Le.emits=Cl;Le.emitsObject=Ki(Cl);const ji={class:"row q-mb-sm"},Hi=B("label",{for:"token"},"Github API Key: ",-1),Fi={class:"row q-mb-sm"},Ji=B("label",{for:"token"},"Interface URL: ",-1),Ui={class:"row q-mb-sm"},Vi={style:{"margin-left":"17px"}},Qi={class:"row q-mb-sm"},Wi={style:{"margin-left":"17px"}},Xi={__name:"SettingsDialog",emits:[...Le.emits],setup(e){const t=Xe(),n=$(t.token),i={...t.preferences},{dialogRef:l,onDialogHide:r,onDialogOK:a,onDialogCancel:o}=Le();function u(){i.interfaceUrl,t.token=n,t.saveToken(),Object.assign(t.preferences,i),t.savePreferences(),a()}return(s,d)=>(Q(),Se(Nt,{ref_key:"dialogRef",ref:l,onHide:le(r),square:""},{default:W(()=>[D(Lt,{class:"q-dialog-plugin"},{default:W(()=>[D(Mt,null,{default:W(()=>[B("div",ji,[Hi,ue(B("input",{id:"token","bg-color":"white",style:{flex:1},"onUpdate:modelValue":d[0]||(d[0]=y=>n.value=y)},null,512),[[ut,n.value]])]),B("div",Fi,[Ji,ue(B("input",{id:"token","bg-color":"white",style:{flex:1},placeholder:"https://mapleleafmakers.github.io/VoronConstruct360/","onUpdate:modelValue":d[1]||(d[1]=y=>i.interfaceUrl=y)},null,512),[[ut,i.interfaceUrl]])]),B("div",Ui,[B("label",Vi,[Ne(" Show Thumbnails: "),ue(B("input",{type:"checkbox","onUpdate:modelValue":d[2]||(d[2]=y=>i.showThumbnails=y)},null,512),[[ot,i.showThumbnails]])])]),B("div",Qi,[B("label",Wi,[Ne(" Mgmt. Controls: "),ue(B("input",{type:"checkbox","onUpdate:modelValue":d[3]||(d[3]=y=>i.showManagementUI=y)},null,512),[[ot,i.showManagementUI]])])])]),_:1}),D(Bt,{align:"right"},{default:W(()=>[D(ye,{size:"sm",square:"",color:"negative","text-color":"white",label:"Cancel",onClick:le(o)},null,8,["onClick"]),D(ye,{color:"positive","text-color":"white",label:"OK",size:"sm",square:"",onClick:u})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Yi=_e({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:t}){const n=T(()=>{const i=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(l=>e[l]===!0).map(l=>`q-btn-group--${l}`).join(" ");return`q-btn-group row no-wrap${i.length!==0?" "+i:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>C("div",{class:n.value},Me(t.default))}});const Gi={class:"row q-mb-sm"},Zi=B("label",null,"Display Name: ",-1),ea={class:"row q-mb-sm"},ta=B("label",null,"Repositories: ",-1),na={style:{display:"flex","flex-direction":"column",flex:"1"}},la={class:"row q-mb-xs"},ra=["onKeypress"],ia={class:"row"},Tn={__name:"CollectionEditor",props:{initialValue:{type:Object,required:!1,default:null}},emits:[...Le.emits],setup(e){const t=e,n=gl(),i=Xe(),l=$(null),r=$(""),a=rt(JSON.parse(JSON.stringify(t.initialValue||{}))),o=async()=>{const S=d.value-1,k=d.value;[a.repositories[S],a.repositories[k]]=[a.repositories[k],a.repositories[S]]},u=async()=>{const S=d.value+1,k=d.value;[a.repositories[S],a.repositories[k]]=[a.repositories[k],a.repositories[S]]},s=async()=>{let S;try{S=await Sr({input:r.value,token:i.token})}catch(k){alert(k);return}a.repositories=[...a.repositories||[],S],r.value=""},d=T(()=>((a==null?void 0:a.repositories)||[]).findIndex(S=>S.repr===l.value)),y=T(()=>d.value!==null&&d.value!==void 0&&d.value>0),b=T(()=>{const S=d.value>-1&&d.value<((a==null?void 0:a.repositories)||[]).length-1;return console.log("can move down?",S,d.value),S}),f=()=>{const S=a.repositories.findIndex(k=>k.repr===l.value);a.repositories.splice(S,1)},p=()=>{n.dialog({title:"Are you sure?",message:"Are you sure you want to permanently delete this collection?",cancel:!0,persistent:!1,ok:{class:"bordered",square:!0,size:"sm",color:"positive",nocaps:!0},cancel:{class:"bordered",square:!0,size:"sm",push:!0,color:"negative",nocaps:!0}}).onOk(()=>{const S=i.tree.findIndex(k=>(console.log("checking",k.id,"vs",a.id,k.id==a.id),k.id==a.id));S!==-1?(console.log("Found match at idx"),i.tree.splice(S,1),i.saveCollections(),N()):console.log("No match found for",a.id)})};oe(()=>l.value,(S,k)=>{console.log(k,"->",S)});const{dialogRef:q,onDialogHide:A,onDialogOK:P,onDialogCancel:N}=Le();function m(){P(a)}return(S,k)=>(Q(),Se(Nt,{ref_key:"dialogRef",ref:q,onHide:le(A),square:""},{default:W(()=>[D(Lt,{class:"q-dialog-plugin"},{default:W(()=>[D(Mt,null,{default:W(()=>[B("div",Gi,[Zi,ue(B("input",{"bg-color":"white",style:{flex:1},"onUpdate:modelValue":k[0]||(k[0]=R=>a.name=R)},null,512),[[ut,a.name]])]),B("div",ea,[ta,B("div",na,[B("div",la,[ue(B("input",{"onUpdate:modelValue":k[1]||(k[1]=R=>r.value=R),"bg-color":"white",style:{flex:1},onKeypress:Yn(s,["enter"])},null,40,ra),[[ut,r.value]]),D(ye,{class:"bordered",style:{"border-left":"none"},unelevated:"",size:"sm",icon:"add",onClick:s})]),ue(B("select",{"onUpdate:modelValue":k[2]||(k[2]=R=>l.value=R),size:"4",style:{flex:1},class:"q-mb-xs"},[(Q(!0),ie(Ye,null,Ge(a.repositories||[],R=>(Q(),ie("option",{key:R.repr},Ee(R.repr),1))),128))],512),[[kt,l.value]]),B("div",ia,[D(Yi,{square:"",unelevated:""},{default:W(()=>[D(ye,{size:"sm",class:"bordered",style:{"border-right":"none"},unelevated:"",square:"",disable:!y.value,onClick:o,icon:"mdi-arrow-up"},null,8,["disable"]),D(ye,{size:"sm",class:"bordered",unelevated:"",square:"",disable:!b.value,onClick:u,icon:"mdi-arrow-down"},null,8,["disable"])]),_:1}),D(ye,{size:"sm",class:"bordered q-ml-md",square:"",unelevated:"",disable:!l.value,onClick:f,icon:"mdi-delete"},null,8,["disable"])])])])]),_:1}),D(Bt,null,{default:W(()=>{var R;return[D(ye,{square:"",size:"sm",class:"bordered",label:"DELETE",color:"negative","text-color":"yellow",style:{"font-weight":"bold"},onClick:p}),D(bl),D(ye,{square:"",size:"sm",class:"bordered",color:"negative",label:"Cancel",onClick:le(N)},null,8,["onClick"]),D(ye,{square:"",size:"sm",class:"bordered",label:"OK",color:"positive",disable:!(a.name&&((R=a==null?void 0:a.repositories)==null?void 0:R.length)>0),onClick:m},null,8,["disable"])]}),_:1})]),_:1})]),_:1},8,["onHide"]))}},aa=["none","strict","leaf","leaf-filtered"];var ql=_e({name:"QTree",props:{...Qe,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:e=>aa.includes(e)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(e,{slots:t,emit:n}){const{proxy:i}=Ce(),{$q:l}=i,r=We(e,l),a=$({}),o=$(e.ticked||[]),u=$(e.expanded||[]);let s={};Hn(()=>{s={}});const d=T(()=>`q-tree q-tree--${e.dense===!0?"dense":"standard"}`+(e.noConnectors===!0?" q-tree--no-connectors":"")+(r.value===!0?" q-tree--dark":"")+(e.color!==void 0?` text-${e.color}`:"")),y=T(()=>e.selected!==void 0),b=T(()=>e.icon||l.iconSet.tree.icon),f=T(()=>e.controlColor||e.color),p=T(()=>e.textColor!==void 0?` text-${e.textColor}`:""),q=T(()=>{const w=e.selectedColor||e.color;return w?` text-${w}`:""}),A=T(()=>e.filterMethod!==void 0?e.filterMethod:(w,E)=>{const c=E.toLowerCase();return w[e.labelKey]&&w[e.labelKey].toLowerCase().indexOf(c)>-1}),P=T(()=>{const w={},E=(c,g)=>{const v=c.tickStrategy||(g?g.tickStrategy:e.tickStrategy),_=c[e.nodeKey],h=c[e.childrenKey]&&Array.isArray(c[e.childrenKey])&&c[e.childrenKey].length!==0,x=c.disabled!==!0&&y.value===!0&&c.selectable!==!1,L=c.disabled!==!0&&c.expandable!==!1,ne=v!=="none",I=v==="strict",he=v==="leaf-filtered",qe=v==="leaf"||v==="leaf-filtered";let $e=c.disabled!==!0&&c.tickable!==!1;qe===!0&&$e===!0&&g&&g.tickable!==!0&&($e=!1);let ze=c.lazy;ze===!0&&a.value[_]!==void 0&&Array.isArray(c[e.childrenKey])===!0&&(ze=a.value[_]);const Z={key:_,parent:g,isParent:h,lazy:ze,disabled:c.disabled,link:c.disabled!==!0&&(x===!0||L===!0&&(h===!0||ze===!0)),children:[],matchesFilter:e.filter?A.value(c,e.filter):!0,selected:_===e.selected&&x===!0,selectable:x,expanded:h===!0?u.value.includes(_):!1,expandable:L,noTick:c.noTick===!0||I!==!0&&ze&&ze!=="loaded",tickable:$e,tickStrategy:v,hasTicking:ne,strictTicking:I,leafFilteredTicking:he,leafTicking:qe,ticked:I===!0?o.value.includes(_):h===!0?!1:o.value.includes(_)};if(w[_]=Z,h===!0&&(Z.children=c[e.childrenKey].map(ae=>E(ae,Z)),e.filter&&(Z.matchesFilter!==!0?Z.matchesFilter=Z.children.some(ae=>ae.matchesFilter):Z.noTick!==!0&&Z.disabled!==!0&&Z.tickable===!0&&he===!0&&Z.children.every(ae=>ae.matchesFilter!==!0||ae.noTick===!0||ae.tickable!==!0)===!0&&(Z.tickable=!1)),Z.matchesFilter===!0&&(Z.noTick!==!0&&I!==!0&&Z.children.every(ae=>ae.noTick)===!0&&(Z.noTick=!0),qe))){if(Z.ticked=!1,Z.indeterminate=Z.children.some(ae=>ae.indeterminate===!0),Z.tickable=Z.tickable===!0&&Z.children.some(ae=>ae.tickable),Z.indeterminate!==!0){const ae=Z.children.reduce((ee,ce)=>ce.ticked===!0?ee+1:ee,0);ae===Z.children.length?Z.ticked=!0:ae>0&&(Z.indeterminate=!0)}Z.indeterminate===!0&&(Z.indeterminateNextState=Z.children.every(ae=>ae.tickable!==!0||ae.ticked!==!0))}return Z};return e.nodes.forEach(c=>E(c,null)),w});oe(()=>e.ticked,w=>{o.value=w}),oe(()=>e.expanded,w=>{u.value=w});function N(w){const E=[].reduce,c=(g,v)=>{if(g||!v)return g;if(Array.isArray(v)===!0)return E.call(Object(v),c,g);if(v[e.nodeKey]===w)return v;if(v[e.childrenKey])return c(null,v[e.childrenKey])};return c(null,e.nodes)}function m(){return o.value.map(w=>N(w))}function S(){return u.value.map(w=>N(w))}function k(w){return w&&P.value[w]?P.value[w].expanded:!1}function R(){e.expanded!==void 0?n("update:expanded",[]):u.value=[]}function J(){const w=[],E=c=>{c[e.childrenKey]&&c[e.childrenKey].length!==0&&c.expandable!==!1&&c.disabled!==!0&&(w.push(c[e.nodeKey]),c[e.childrenKey].forEach(E))};e.nodes.forEach(E),e.expanded!==void 0?n("update:expanded",w):u.value=w}function X(w,E,c=N(w),g=P.value[w]){if(g.lazy&&g.lazy!=="loaded"){if(g.lazy==="loading")return;a.value[w]="loading",Array.isArray(c[e.childrenKey])!==!0&&(c[e.childrenKey]=[]),n("lazyLoad",{node:c,key:w,done:v=>{a.value[w]="loaded",c[e.childrenKey]=Array.isArray(v)===!0?v:[],ht(()=>{const _=P.value[w];_&&_.isParent===!0&&j(w,!0)})},fail:()=>{delete a.value[w],c[e.childrenKey].length===0&&delete c[e.childrenKey]}})}else g.isParent===!0&&g.expandable===!0&&j(w,E)}function j(w,E){let c=u.value;const g=e.expanded!==void 0;if(g===!0&&(c=c.slice()),E){if(e.accordion&&P.value[w]){const v=[];P.value[w].parent?P.value[w].parent.children.forEach(_=>{_.key!==w&&_.expandable===!0&&v.push(_.key)}):e.nodes.forEach(_=>{const h=_[e.nodeKey];h!==w&&v.push(h)}),v.length!==0&&(c=c.filter(_=>v.includes(_)===!1))}c=c.concat([w]).filter((v,_,h)=>h.indexOf(v)===_)}else c=c.filter(v=>v!==w);g===!0?n("update:expanded",c):u.value=c}function U(w){return w&&P.value[w]?P.value[w].ticked:!1}function z(w,E){let c=o.value;const g=e.ticked!==void 0;g===!0&&(c=c.slice()),E?c=c.concat(w).filter((v,_,h)=>h.indexOf(v)===_):c=c.filter(v=>w.includes(v)===!1),g===!0&&n("update:ticked",c)}function fe(w,E,c){const g={tree:i,node:w,key:c,color:e.color,dark:r.value};return dn(g,"expanded",()=>E.expanded,v=>{v!==E.expanded&&X(c,v)}),dn(g,"ticked",()=>E.ticked,v=>{v!==E.ticked&&z([c],v)}),g}function K(w){return(e.filter?w.filter(E=>P.value[E[e.nodeKey]].matchesFilter):w).map(E=>V(E))}function H(w){if(w.icon!==void 0)return C(ke,{class:"q-tree__icon q-mr-sm",name:w.icon,color:w.iconColor});const E=w.img||w.avatar;if(E)return C("img",{class:`q-tree__${w.img?"img":"avatar"} q-mr-sm`,src:E})}function te(){n("afterShow")}function O(){n("afterHide")}function V(w){const E=w[e.nodeKey],c=P.value[E],g=w.header&&t[`header-${w.header}`]||t["default-header"],v=c.isParent===!0?K(w[e.childrenKey]):[],_=v.length!==0||c.lazy&&c.lazy!=="loaded";let h=w.body&&t[`body-${w.body}`]||t["default-body"];const x=g!==void 0||h!==void 0?fe(w,c,E):null;return h!==void 0&&(h=C("div",{class:"q-tree__node-body relative-position"},[C("div",{class:p.value},[h(x)])])),C("div",{key:E,class:`q-tree__node relative-position q-tree__node--${_===!0?"parent":"child"}`},[C("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(c.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(c.selected===!0?" q-tree__node--selected":"")+(c.disabled===!0?" q-tree__node--disabled":""),tabindex:c.link===!0?0:-1,onClick:L=>{de(w,c,L)},onKeypress(L){tn(L)!==!0&&(L.keyCode===13?de(w,c,L,!0):L.keyCode===32&&be(w,c,L,!0))}},[C("div",{class:"q-focus-helper",tabindex:-1,ref:L=>{s[c.key]=L}}),c.lazy==="loading"?C(Fn,{class:"q-tree__spinner",color:f.value}):_===!0?C(ke,{class:"q-tree__arrow"+(c.expanded===!0?" q-tree__arrow--rotate":""),name:b.value,onClick(L){be(w,c,L)}}):null,c.hasTicking===!0&&c.noTick!==!0?C(ir,{class:"q-tree__tickbox",modelValue:c.indeterminate===!0?null:c.ticked,color:f.value,dark:r.value,dense:!0,keepColor:!0,disable:c.tickable!==!0,onKeydown:Re,"onUpdate:modelValue":L=>{we(c,L)}}):null,C("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(c.selected===!0?q.value:p.value)},[g?g(x):[H(w),C("div",w[e.labelKey])]])]),_===!0?e.noTransition===!0?C("div",{class:"q-tree__node-collapsible"+p.value,key:`${E}__q`},[h,C("div",{class:"q-tree__children"+(c.disabled===!0?" q-tree__node--disabled":"")},c.expanded?v:null)]):C(pl,{duration:e.duration,onShow:te,onHide:O},()=>ue(C("div",{class:"q-tree__node-collapsible"+p.value,key:`${E}__q`},[h,C("div",{class:"q-tree__children"+(c.disabled===!0?" q-tree__node--disabled":"")},v)]),[[Jn,c.expanded]])):h])}function Y(w){const E=s[w];E&&E.focus()}function de(w,E,c,g){g!==!0&&E.selectable!==!1&&Y(E.key),y.value&&E.selectable?e.noSelectionUnset===!1?n("update:selected",E.key!==e.selected?E.key:null):E.key!==e.selected&&n("update:selected",E.key===void 0?null:E.key):be(w,E,c,g),typeof w.handler=="function"&&w.handler(w)}function be(w,E,c,g){c!==void 0&&Re(c),g!==!0&&E.selectable!==!1&&Y(E.key),X(E.key,!E.expanded,w,E)}function we(w,E){if(w.indeterminate===!0&&(E=w.indeterminateNextState),w.strictTicking)z([w.key],E);else if(w.leafTicking){const c=[],g=v=>{v.isParent?(E!==!0&&v.noTick!==!0&&v.tickable===!0&&c.push(v.key),v.leafTicking===!0&&v.children.forEach(g)):v.noTick!==!0&&v.tickable===!0&&(v.leafFilteredTicking!==!0||v.matchesFilter===!0)&&c.push(v.key)};g(w),z(c,E)}}return e.defaultExpandAll===!0&&J(),Object.assign(i,{getNodeByKey:N,getTickedNodes:m,getExpandedNodes:S,isExpanded:k,collapseAll:R,expandAll:J,setExpanded:X,isTicked:U,setTicked:z}),()=>{const w=K(e.nodes);return C("div",{class:d.value},w.length===0?e.filter?e.noResultsLabel||l.lang.tree.noResults:e.noNodesLabel||l.lang.tree.noNodes:w)}}});const oa=[C("g",[C("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}),C("clipPath",{id:"uil-hourglass-clip1"},[C("rect",{x:"15",y:"20",width:" 70",height:"25"},[C("animate",{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}),C("animate",{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"})])]),C("clipPath",{id:"uil-hourglass-clip2"},[C("rect",{x:"15",y:"55",width:" 70",height:"25"},[C("animate",{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}),C("animate",{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"})])]),C("path",{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}),C("path",{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}),C("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"})])];var sa=_e({name:"QSpinnerHourglass",props:ar,setup(e){const{cSize:t,classes:n}=or(e);return()=>C("svg",{class:n.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},oa)}});const ua={class:"row q-mb-sm"},ca=B("label",null,"Name: ",-1),da=["disabled"],fa={class:"row q-mb-sm"},va=B("label",null,"Path: ",-1),ha={style:{flex:"1",position:"relative"}},ma=["id"],pa={key:0},ga=["onBlur","onKeypress"],ya={key:1},ba={class:"row q-mb-sm no-wrap"},_a={style:{"margin-left":"17px","white-space":"nowrap"}},wa={key:0,class:"text-negative"},Sa={class:"row q-mb-sm no-wrap"},ka={style:{"margin-left":"17px","white-space":"nowrap"}},xa={key:0,class:"text-negative"},Ca={class:"row q-mb-sm"},qa=B("label",null,"Thumbnail: ",-1),Ta={class:"thumbnail-edit-wrapper"},Pa={class:"row q-col-gutter-xs"},Ra=["src"],$a={class:"col-6 q-pt-none"},Ea={class:"row"},Oa=B("label",null,"Upload To: ",-1),za=["value"],Aa={key:0,style:{display:"flex","flex-direction":"row",position:"absolute",top:"0px",bottom:"0px",left:"0px",right:"0px","text-align":"center","align-items":"center","justify-content":"center","background-color":"rgba(128, 128, 128, 0.5)"}},Pn=nt({__name:"ContentEditor",props:{initialValue:{},collection:{}},emits:[...Le.emits],setup(e){var E,c,g,v;const t=e,n=$(!1),i=$(null),l=$(!1),r=$(!1),a=Xe(),o=$(!1),u=$(null),s=$("New Folder"),d=$((E=t==null?void 0:t.initialValue)==null?void 0:E.name),y=$(""),b=t.collection||a.getTopLevelNode((g=(c=t.initialValue)==null?void 0:c.id)==null?void 0:g.split("|")[0]);let f="";(v=t==null?void 0:t.initialValue)!=null&&v.path&&(f=t==null?void 0:t.initialValue.path.split("/").slice(0,-1).join("/"));const p=$(f),q=$(["/"]),A=$(p.value),P=$(!1),N=(_,h,x)=>{const L=u.value.getNodeByKey(h.id.split("/").slice(0,-1).join("/"));let ne=!0;x||(ne=!1);const I=L.children.filter(he=>he.name===x);I.length>1&&(console.log("matches",I),ne=!1),h.name=x,h.path=L.path="/"+h.name,ne?h.editing=!1:(_.preventDefault(),_.stopImmediatePropagation(),_.target.focus())},m=_=>btoa(_).replaceAll("=",""),S=_=>_.filter(x=>x.type==="tree").map(x=>({id:x.path,path:x.path,icon:"mdi-folder",selectable:!0,name:x.name,editing:!1,children:x.children?S(x.children):void 0})),k=rt([{name:"/",icon:"mdi-folder",selectable:!0,id:"/",path:"",children:S((b==null?void 0:b.children)||[])}]),R=$((b==null?void 0:b.uploadTo)||(b==null?void 0:b.repositories[0].repr)),J=_=>{s.value="New Folder",_.preventDefault(),_.stopPropagation();const h=u==null?void 0:u.value.getNodeByKey(A.value),x={id:h.path+"/"+nn(),name:"New Folder",path:h.path+"/New Folder",selectable:!0,icon:"mdi-folder-star",editing:!0,children:[]};h.children.push(x),A.value=x.id,u.value.setExpanded(h.id,!0),setTimeout(()=>{var ne;const L=document.querySelector(`#pathTree--${m(x.id)}`);console.log("node",L),L==null||L.scrollIntoView({block:"center"}),(ne=L==null?void 0:L.querySelector("input"))==null||ne.focus()},500)},X=T(()=>{var _,h;if(r.value){const x=(h=(_=t.initialValue)==null?void 0:_.content_types)==null?void 0:h.f3d,L=b.repositories.filter(ne=>ne.repr===R.value)[0];if(x&&x.repo!==L.repo)return"cannot replace the f3d file, it exists in another repository."}return""}),j=T(()=>{var _,h;if(l.value){const x=(h=(_=t.initialValue)==null?void 0:_.content_types)==null?void 0:h.step,L=b.repositories.filter(ne=>ne.repr===R.value)[0];if(x&&x.repo!==L.repo)return"cannot replace the step file, it exists in another repository."}return""}),U=_=>{let h=[..._.clipboardData.items];if(h=h.filter(L=>/image/.test(L.type)),!h.length||h.length===0)return!1;let x=new FileReader;x.onload=L=>{const ne=x.result;console.log("pasted",ne),y.value=ne},x.readAsDataURL(h[0].getAsFile())},z=_=>new Promise(h=>{const x=new window.FileReader;x.onload=()=>{y.value=x.result,o.value=!0,h(y.value)},x.readAsDataURL(_)}),fe=_=>{var h;_.stopPropagation(),_.preventDefault(),z((h=_.dataTransfer)==null?void 0:h.files[0])},K=_=>{var h;_.stopPropagation(),_.preventDefault(),z((h=_.target)==null?void 0:h.files[0]).then(()=>{i.value!==null&&(i.value.value=null)})},H=_=>{var h;_.preventDefault(),_.stopPropagation(),(h=i.value)==null||h.click()},te=async _=>{const h=await xe.request("get_screenshot",{width:256,height:256,transparent:n.value});h?(y.value=h,o.value=!0):alert("Workspace image capture failed.")},O=async()=>{var x,L,ne,I,he,qe;const _=(ne=(L=(x=t==null?void 0:t.initialValue)==null?void 0:x.content_types)==null?void 0:L.thumb)==null?void 0:ne.url,h=(he=(I=t==null?void 0:t.initialValue)==null?void 0:I.meta)==null?void 0:he.thumb;h?y.value=h:_?y.value=await an({url:_,token:a.token}):y.value="",(qe=t==null?void 0:t.initialValue)!=null&&qe.name||await xe.request("export_model",{f3d:!1,step:!1}).then($e=>{d.value=$e==null?void 0:$e.name})},V=()=>{var _;if(d.value!==((_=t.initialValue)==null?void 0:_.name)||o.value||r.value||l.value)return!0};tt(()=>{O()});const{dialogRef:Y,onDialogHide:de,onDialogOK:be,onDialogCancel:we}=Le();function w(){P.value=!0,setTimeout(()=>{xe.request("export_model",{f3d:r.value,step:l.value}).then(_=>{const h=[];P.value=!1,r.value&&h.push({path:`${A.value}/${d.value}.f3d`,content:_.f3d.split(",")[1],encoding:"base64"}),l.value&&h.push({path:`${A.value}/${d.value}.step`,content:_.step.split(",")[1],encoding:"base64"}),o.value&&h.push({path:`${A.value}/${d.value}.png`,content:y.value.split(",")[1],encoding:"base64"});const x=b.repositories.filter(L=>L.repr===R.value)[0];rl({repo:x.repo,branch:x.branch,files:h,message:`Add ${A.value}`,token:a.token}).then(()=>{P.value=!1,be()})})},500)}return(_,h)=>(Q(),Se(Nt,{ref_key:"dialogRef",ref:Y,onHide:le(de),square:""},{default:W(()=>[D(Lt,{class:"q-dialog-plugin"},{default:W(()=>[D(Mt,{style:{position:"relative"}},{default:W(()=>{var x,L,ne;return[B("div",ua,[ca,ue(B("input",{disabled:!!((x=t.initialValue)!=null&&x.name),"bg-color":"white",style:{flex:1},"onUpdate:modelValue":h[0]||(h[0]=I=>d.value=I)},null,8,da),[[ut,d.value]])]),B("div",fa,[va,B("div",ha,[D(ql,{ref_key:"treeRef",ref:u,dense:"","default-expand-all":!!p.value,selected:A.value,"onUpdate:selected":h[3]||(h[3]=I=>A.value=I),expanded:q.value,"onUpdate:expanded":h[4]||(h[4]=I=>q.value=I),"no-selection-unset":"",nodes:k,filter:p.value,"filter-method":(I,he)=>I.path===he,"node-key":"id","label-key":"name",class:"pathTree"},{"default-header":W(({node:I})=>[D(ke,{name:I.icon,class:"q-tree__icon q-mr-sm"},null,8,["name"]),B("div",{id:`pathTree--${m(I.id)}`,onKeypress:h[2]||(h[2]=he=>he.stopImmediatePropagation())},[I.editing?ue((Q(),ie("input",{key:1,"onUpdate:modelValue":h[1]||(h[1]=he=>s.value=he),onBlur:he=>N(he,I,s.value),onKeypress:Yn(he=>N(he,I,s.value),["enter"])},null,40,ga)),[[ut,s.value]]):(Q(),ie("span",pa,Ee(I.name),1))],40,ma)]),_:1},8,["default-expand-all","selected","expanded","nodes","filter","filter-method"]),(L=t.initialValue)!=null&&L.path?(Q(),ie("div",{key:0,class:"pathTree--disabler",onClick:h[5]||(h[5]=I=>{I.preventDefault(),I.stopPropagation()})})):ge("",!0),(ne=t.initialValue)!=null&&ne.path?ge("",!0):(Q(),ie("div",ya,[D(ye,{size:"sm",icon:"mdi-folder-plus-outline",label:"New Folder",flat:"",square:"","no-caps":"",disable:!A.value,class:"bordered q-mt-xs",onClick:J},null,8,["disable"])]))])]),B("div",ba,[B("label",_a,[Ne("Upload .STEP: "),ue(B("input",{type:"checkbox","onUpdate:modelValue":h[6]||(h[6]=I=>l.value=I)},null,512),[[ot,l.value]])]),j.value?(Q(),ie("div",wa,Ee(j.value),1)):ge("",!0)]),B("div",Sa,[B("label",ka,[Ne("Upload .F3D: "),ue(B("input",{type:"checkbox","onUpdate:modelValue":h[7]||(h[7]=I=>r.value=I)},null,512),[[ot,r.value]])]),X.value?(Q(),ie("div",xa,Ee(X.value),1)):ge("",!0)]),B("div",Ca,[qa,B("div",Ta,[B("div",Pa,[B("div",{contenteditable:"true",class:"col-6 q-pa-none editor-thumb",onDragover:h[8]||(h[8]=I=>{I.dataTransfer&&(I.dataTransfer.effectAllowed="all")}),onDrop:fe,onPaste:U,onBeforeinput:h[9]||(h[9]=I=>{I.inputType!=="insertFromPaste"&&(I.preventDefault(),I.stopPropagation()),console.log(I)})},[B("img",{src:y.value||"img/cube-outline.svg"},null,8,Ra)],32),B("div",$a,[D(ye,{dense:"",label:"Choose",size:"sm",flat:"",icon:"upload",class:"full-width bordered q-mb-xs","no-caps":"",onClick:H}),D(ye,{dense:"",onClick:te,label:"Capture",icon:"mdi-monitor-screenshot",size:"sm",flat:"",class:"full-width bordered","no-caps":""}),B("label",null,[ue(B("input",{type:"checkbox","onUpdate:modelValue":h[10]||(h[10]=I=>n.value=I)},null,512),[[ot,n.value]]),Ne(" BG Transparency")])])]),B("input",{ref_key:"filePicker",ref:i,onChange:K,id:"thumbnail",type:"file",style:{display:"none"}},null,544)])]),B("div",Ea,[Oa,ue(B("select",{"onUpdate:modelValue":h[11]||(h[11]=I=>R.value=I),style:{flex:"1"}},[(Q(!0),ie(Ye,null,Ge(le(b).repositories,I=>(Q(),ie("option",{value:I.repr,key:I.repr},Ee(I.repr),9,za))),128))],512),[[kt,R.value]])]),P.value?(Q(),ie("div",Aa,[D(sa,{color:"purple",size:"10em"})])):ge("",!0)]}),_:1}),D(Bt,{align:"right"},{default:W(()=>[D(ye,{square:"",size:"sm",class:"bordered",color:"negative",label:"Cancel",onClick:le(we)},null,8,["onClick"]),D(ye,{square:"",size:"sm",class:"bordered",label:"OK",color:"positive",disable:!V(),onClick:w},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}});function Wt(e,t,n){const i=st(e);let l,r=i.left-t.event.x,a=i.top-t.event.y,o=Math.abs(r),u=Math.abs(a);const s=t.direction;s.horizontal===!0&&s.vertical!==!0?l=r<0?"left":"right":s.horizontal!==!0&&s.vertical===!0?l=a<0?"up":"down":s.up===!0&&a<0?(l="up",o>u&&(s.left===!0&&r<0?l="left":s.right===!0&&r>0&&(l="right"))):s.down===!0&&a>0?(l="down",o>u&&(s.left===!0&&r<0?l="left":s.right===!0&&r>0&&(l="right"))):s.left===!0&&r<0?(l="left",o<u&&(s.up===!0&&a<0?l="up":s.down===!0&&a>0&&(l="down"))):s.right===!0&&r>0&&(l="right",o<u&&(s.up===!0&&a<0?l="up":s.down===!0&&a>0&&(l="down")));let d=!1;if(l===void 0&&n===!1){if(t.event.isFirst===!0||t.event.lastDir===void 0)return{};l=t.event.lastDir,d=!0,l==="left"||l==="right"?(i.left-=r,o=0,r=0):(i.top-=a,u=0,a=0)}return{synthetic:d,payload:{evt:e,touch:t.event.mouse!==!0,mouse:t.event.mouse===!0,position:i,direction:l,isFirst:t.event.isFirst,isFinal:n===!0,duration:Date.now()-t.event.time,distance:{x:o,y:u},offset:{x:r,y:a},delta:{x:i.left-t.event.lastX,y:i.top-t.event.lastY}}}}let Na=0;var Rn=en({name:"touch-pan",beforeMount(e,{value:t,modifiers:n}){if(n.mouse!==!0&&Be.has.touch!==!0)return;function i(r,a){n.mouse===!0&&a===!0?Re(r):(n.stop===!0&&Jt(r),n.prevent===!0&&_t(r))}const l={uid:"qvtp_"+Na++,handler:t,modifiers:n,direction:$t(n),noop:Wn,mouseStart(r){Et(r,l)&&Xn(r)&&(Ae(l,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),l.start(r,!0))},touchStart(r){if(Et(r,l)){const a=r.target;Ae(l,"temp",[[a,"touchmove","move","notPassiveCapture"],[a,"touchcancel","end","passiveCapture"],[a,"touchend","end","passiveCapture"]]),l.start(r)}},start(r,a){if(Be.is.firefox===!0&&it(e,!0),l.lastEvt=r,a===!0||n.stop===!0){if(l.direction.all!==!0&&(a!==!0||l.modifiers.mouseAllDir!==!0&&l.modifiers.mousealldir!==!0)){const s=r.type.indexOf("mouse")>-1?new MouseEvent(r.type,r):new TouchEvent(r.type,r);r.defaultPrevented===!0&&_t(s),r.cancelBubble===!0&&Jt(s),Object.assign(s,{qKeyEvent:r.qKeyEvent,qClickOutside:r.qClickOutside,qAnchorHandled:r.qAnchorHandled,qClonedBy:r.qClonedBy===void 0?[l.uid]:r.qClonedBy.concat(l.uid)}),l.initialEvent={target:r.target,event:s}}Jt(r)}const{left:o,top:u}=st(r);l.event={x:o,y:u,time:Date.now(),mouse:a===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:o,lastY:u}},move(r){if(l.event===void 0)return;const a=st(r),o=a.left-l.event.x,u=a.top-l.event.y;if(o===0&&u===0)return;l.lastEvt=r;const s=l.event.mouse===!0,d=()=>{i(r,s);let f;n.preserveCursor!==!0&&n.preservecursor!==!0&&(f=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),s===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),vt(),l.styleCleanup=p=>{if(l.styleCleanup=void 0,f!==void 0&&(document.documentElement.style.cursor=f),document.body.classList.remove("non-selectable"),s===!0){const q=()=>{document.body.classList.remove("no-pointer-events--children")};p!==void 0?setTimeout(()=>{q(),p()},50):q()}else p!==void 0&&p()}};if(l.event.detected===!0){l.event.isFirst!==!0&&i(r,l.event.mouse);const{payload:f,synthetic:p}=Wt(r,l,!1);f!==void 0&&(l.handler(f)===!1?l.end(r):(l.styleCleanup===void 0&&l.event.isFirst===!0&&d(),l.event.lastX=f.position.left,l.event.lastY=f.position.top,l.event.lastDir=p===!0?void 0:f.direction,l.event.isFirst=!1));return}if(l.direction.all===!0||s===!0&&(l.modifiers.mouseAllDir===!0||l.modifiers.mousealldir===!0)){d(),l.event.detected=!0,l.move(r);return}const y=Math.abs(o),b=Math.abs(u);y!==b&&(l.direction.horizontal===!0&&y>b||l.direction.vertical===!0&&y<b||l.direction.up===!0&&y<b&&u<0||l.direction.down===!0&&y<b&&u>0||l.direction.left===!0&&y>b&&o<0||l.direction.right===!0&&y>b&&o>0?(l.event.detected=!0,l.move(r)):l.end(r,!0))},end(r,a){if(l.event!==void 0){if(Fe(l,"temp"),Be.is.firefox===!0&&it(e,!1),a===!0)l.styleCleanup!==void 0&&l.styleCleanup(),l.event.detected!==!0&&l.initialEvent!==void 0&&l.initialEvent.target.dispatchEvent(l.initialEvent.event);else if(l.event.detected===!0){l.event.isFirst===!0&&l.handler(Wt(r===void 0?l.lastEvt:r,l).payload);const{payload:o}=Wt(r===void 0?l.lastEvt:r,l,!0),u=()=>{l.handler(o)};l.styleCleanup!==void 0?l.styleCleanup(u):u()}l.event=void 0,l.initialEvent=void 0,l.lastEvt=void 0}}};if(e.__qtouchpan=l,n.mouse===!0){const r=n.mouseCapture===!0||n.mousecapture===!0?"Capture":"";Ae(l,"main",[[e,"mousedown","mouseStart",`passive${r}`]])}Be.has.touch===!0&&Ae(l,"main",[[e,"touchstart","touchStart",`passive${n.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const n=e.__qtouchpan;n!==void 0&&(t.oldValue!==t.value&&(typeof value!="function"&&n.end(),n.handler=t.value),n.direction=$t(t.modifiers))},beforeUnmount(e){const t=e.__qtouchpan;t!==void 0&&(t.event!==void 0&&t.end(),Fe(t,"main"),Fe(t,"temp"),Be.is.firefox===!0&&it(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchpan)}});const $n=["vertical","horizontal"],Xt={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},En={prevent:!0,mouse:!0,mouseAllDir:!0},On=e=>e>=250?50:Math.ceil(e/5);var Ma=_e({name:"QScrollArea",props:{...Qe,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:t,emit:n}){const i=$(!1),l=$(!1),r=$(!1),a={vertical:$(0),horizontal:$(0)},o={vertical:{ref:$(null),position:$(0),size:$(0)},horizontal:{ref:$(null),position:$(0),size:$(0)}},{proxy:u}=Ce(),s=We(e,u.$q);let d=null,y;const b=$(null),f=T(()=>"q-scrollarea"+(s.value===!0?" q-scrollarea--dark":""));o.vertical.percentage=T(()=>{const O=o.vertical.size.value-a.vertical.value;if(O<=0)return 0;const V=dt(o.vertical.position.value/O,0,1);return Math.round(V*1e4)/1e4}),o.vertical.thumbHidden=T(()=>(e.visible===null?r.value:e.visible)!==!0&&i.value===!1&&l.value===!1||o.vertical.size.value<=a.vertical.value+1),o.vertical.thumbStart=T(()=>o.vertical.percentage.value*(a.vertical.value-o.vertical.thumbSize.value)),o.vertical.thumbSize=T(()=>Math.round(dt(a.vertical.value*a.vertical.value/o.vertical.size.value,On(a.vertical.value),a.vertical.value))),o.vertical.style=T(()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${o.vertical.thumbStart.value}px`,height:`${o.vertical.thumbSize.value}px`})),o.vertical.thumbClass=T(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(o.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),o.vertical.barClass=T(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(o.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),o.horizontal.percentage=T(()=>{const O=o.horizontal.size.value-a.horizontal.value;if(O<=0)return 0;const V=dt(Math.abs(o.horizontal.position.value)/O,0,1);return Math.round(V*1e4)/1e4}),o.horizontal.thumbHidden=T(()=>(e.visible===null?r.value:e.visible)!==!0&&i.value===!1&&l.value===!1||o.horizontal.size.value<=a.horizontal.value+1),o.horizontal.thumbStart=T(()=>o.horizontal.percentage.value*(a.horizontal.value-o.horizontal.thumbSize.value)),o.horizontal.thumbSize=T(()=>Math.round(dt(a.horizontal.value*a.horizontal.value/o.horizontal.size.value,On(a.horizontal.value),a.horizontal.value))),o.horizontal.style=T(()=>({...e.thumbStyle,...e.horizontalThumbStyle,[u.$q.lang.rtl===!0?"right":"left"]:`${o.horizontal.thumbStart.value}px`,width:`${o.horizontal.thumbSize.value}px`})),o.horizontal.thumbClass=T(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(o.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),o.horizontal.barClass=T(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(o.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const p=T(()=>o.vertical.thumbHidden.value===!0&&o.horizontal.thumbHidden.value===!0?e.contentStyle:e.contentActiveStyle),q=[[Rn,O=>{J(O,"vertical")},void 0,{vertical:!0,...En}]],A=[[Rn,O=>{J(O,"horizontal")},void 0,{horizontal:!0,...En}]];function P(){const O={};return $n.forEach(V=>{const Y=o[V];O[V+"Position"]=Y.position.value,O[V+"Percentage"]=Y.percentage.value,O[V+"Size"]=Y.size.value,O[V+"ContainerSize"]=a[V].value}),O}const N=sr(()=>{const O=P();O.ref=u,n("scroll",O)},0);function m(O,V,Y){if($n.includes(O)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(O==="vertical"?fn:Ut)(b.value,V,Y)}function S({height:O,width:V}){let Y=!1;a.vertical.value!==O&&(a.vertical.value=O,Y=!0),a.horizontal.value!==V&&(a.horizontal.value=V,Y=!0),Y===!0&&z()}function k({position:O}){let V=!1;o.vertical.position.value!==O.top&&(o.vertical.position.value=O.top,V=!0),o.horizontal.position.value!==O.left&&(o.horizontal.position.value=O.left,V=!0),V===!0&&z()}function R({height:O,width:V}){o.horizontal.size.value!==V&&(o.horizontal.size.value=V,z()),o.vertical.size.value!==O&&(o.vertical.size.value=O,z())}function J(O,V){const Y=o[V];if(O.isFirst===!0){if(Y.thumbHidden.value===!0)return;y=Y.position.value,l.value=!0}else if(l.value!==!0)return;O.isFinal===!0&&(l.value=!1);const de=Xt[V],be=a[V].value,we=(Y.size.value-be)/(be-Y.thumbSize.value),w=O.distance[de.dist],E=y+(O.direction===de.dir?1:-1)*w*we;fe(E,V)}function X(O,V){const Y=o[V];if(Y.thumbHidden.value!==!0){const de=O[Xt[V].offset];if(de<Y.thumbStart.value||de>Y.thumbStart.value+Y.thumbSize.value){const be=de-Y.thumbSize.value/2;fe(be/a[V].value*Y.size.value,V)}Y.ref.value!==null&&Y.ref.value.dispatchEvent(new MouseEvent(O.type,O))}}function j(O){X(O,"vertical")}function U(O){X(O,"horizontal")}function z(){i.value=!0,d!==null&&clearTimeout(d),d=setTimeout(()=>{d=null,i.value=!1},e.delay),e.onScroll!==void 0&&N()}function fe(O,V){b.value[Xt[V].scroll]=O}function K(){r.value=!0}function H(){r.value=!1}let te=null;return oe(()=>u.$q.lang.rtl,O=>{b.value!==null&&Ut(b.value,Math.abs(o.horizontal.position.value)*(O===!0?-1:1))}),Vn(()=>{te={top:o.vertical.position.value,left:o.horizontal.position.value}}),Qn(()=>{if(te===null)return;const O=b.value;O!==null&&(Ut(O,te.left),fn(O,te.top))}),Je(N.cancel),Object.assign(u,{getScrollTarget:()=>b.value,getScroll:P,getScrollPosition:()=>({top:o.vertical.position.value,left:o.horizontal.position.value}),getScrollPercentage:()=>({top:o.vertical.percentage.value,left:o.horizontal.percentage.value}),setScrollPosition:m,setScrollPercentage(O,V,Y){m(O,V*(o[O].size.value-a[O].value)*(O==="horizontal"&&u.$q.lang.rtl===!0?-1:1),Y)}}),()=>C("div",{class:f.value,onMouseenter:K,onMouseleave:H},[C("div",{ref:b,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:e.tabindex!==void 0?e.tabindex:void 0},[C("div",{class:"q-scrollarea__content absolute",style:p.value},At(t.default,[C(Gt,{debounce:0,onResize:R})])),C(vr,{axis:"both",onScroll:k})]),C(Gt,{debounce:0,onResize:S}),C("div",{class:o.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:j}),C("div",{class:o.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:U}),ue(C("div",{ref:o.vertical.ref,class:o.vertical.thumbClass.value,style:o.vertical.style.value,"aria-hidden":"true"}),q),ue(C("div",{ref:o.horizontal.ref,class:o.horizontal.thumbClass.value,style:o.horizontal.style.value,"aria-hidden":"true"}),A)])}});const Ba=["top","middle","bottom"];var zn=_e({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Ba.includes(e)}},setup(e,{slots:t}){const n=T(()=>e.align!==void 0?{verticalAlign:e.align}:null),i=T(()=>{const l=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(l!==void 0?` text-${l}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>C("div",{class:i.value,style:n.value,role:"status","aria-label":e.label},At(t.default,e.label!==void 0?[e.label]:[]))}});const La={xs:2,sm:4,md:6,lg:10,xl:14};function An(e,t,n){return{transform:t===!0?`translateX(${n.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var Nn=_e({name:"QLinearProgress",props:{...Qe,...ur,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:t}){const{proxy:n}=Ce(),i=We(e,n.$q),l=cr(e,La),r=T(()=>e.indeterminate===!0||e.query===!0),a=T(()=>e.reverse!==e.query),o=T(()=>({...l.value!==null?l.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),u=T(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),s=T(()=>An(e.buffer!==void 0?e.buffer:1,a.value,n.$q)),d=T(()=>`with${e.instantFeedback===!0?"out":""}-transition`),y=T(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${d.value} q-linear-progress__track--${i.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),b=T(()=>An(r.value===!0?1:e.value,a.value,n.$q)),f=T(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${d.value} q-linear-progress__model--${r.value===!0?"in":""}determinate`),p=T(()=>({width:`${e.value*100}%`})),q=T(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${d.value}`);return()=>{const A=[C("div",{class:y.value,style:s.value}),C("div",{class:f.value,style:b.value})];return e.stripe===!0&&r.value===!1&&A.push(C("div",{class:q.value,style:p.value})),C("div",{class:u.value,style:o.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},At(t.default,A))}}});const Ia=B("div",{class:"row"},[B("div",{class:"col-12"}," AutoThumb will automatically generate any missing thumbnail images in the selected path. Existing thumbnails will not be replaced. ")],-1),Da={key:0,class:"row q-mb-sm"},Ka=B("label",null,"Collection: ",-1),ja=["value"],Ha={key:1,class:"row q-mb-sm"},Fa=B("label",null,"Path: ",-1),Ja={style:{flex:"1",position:"relative"}},Ua={key:2,class:"row q-mb-sm"},Va={style:{"margin-left":"17px"}},Qa={key:3,class:"row q-py-sm"},Wa={class:"col-12"},Xa={key:4,class:"row q-py-sm"},Ya=B("label",null,"Upload To: ",-1),Ga=["value"],Za={key:5,class:"row justify-center q-py-sm"},eo=["src"],to={class:"absolute-full flex flex-center"},no={class:"absolute-full flex flex-center"},lo=nt({__name:"AutoThumb",emits:[...Le.emits],setup(e){const{humanStorageSize:t}=yl,n=$(null),i=$([]),l=Xe(),r=$(null),a=$([]),o=$(0),u=$(""),s=$(null),d=$(null),y=$(!1),b=T(()=>r.value?l.tree.filter(j=>j.id===r.value)[0]:null),f=$([]),p=j=>j.filter(z=>z.type==="tree").map(z=>({id:z.path,path:z.path,icon:"mdi-folder",selectable:!0,name:z.name,children:z.children?p(z.children):void 0})),q=T(()=>{var j;return b.value?rt([{name:"/",icon:"mdi-folder",selectable:!0,id:"/",path:"",children:p(((j=b.value)==null?void 0:j.children)||[])}]):[]}),A=j=>{const U=[];for(let z of j)z.type==="tree"&&z.children&&z.children.length>0?U.push(...A(z.children)):U.push(z);return U.filter(z=>{var fe,K,H;return!((fe=z==null?void 0:z.content_types)!=null&&fe.thumb)&&(((K=z==null?void 0:z.content_types)==null?void 0:K.step)||((H=z==null?void 0:z.content_types)==null?void 0:H.f3d))})},P=async()=>{var j,U,z,fe,K;for(;a.value.length>0;){await new Promise(O=>setTimeout(O,100));const H=a.value.shift(),te=await xe.request("autothumb",{url:((U=(j=H==null?void 0:H.content_types)==null?void 0:j.f3d)==null?void 0:U.url)||((fe=(z=H==null?void 0:H.content_types)==null?void 0:z.step)==null?void 0:fe.url),content_type:(K=H==null?void 0:H.content_types)!=null&&K.f3d?"f3d":"step",transparent:y.value,token:l.token});te&&(f.value.push({path:`${H.path}.png`,content:te.split(",")[1],encoding:"base64"}),u.value=te)}},N=async()=>{const j=b.value.repositories.filter(U=>U.repr===s.value)[0];await rl({repo:j.repo,branch:j.branch,files:[...f.value],token:l.token,message:"Add auto-generated thumbnails.",progressCallback:(U,z)=>{d.value=[U,z],console.log(t(U),"/",t(z))}})},{dialogRef:m,onDialogHide:S,onDialogOK:k,onDialogCancel:R}=Le();function J(){a.value.length?(a.value=[],o.value=0,u.value="",f.value=[]):f.value.length?f.value=[]:R()}function X(){var j;if(f.value.length)N().then(()=>{var U;k((U=b==null?void 0:b.value)==null?void 0:U.id)}).catch(U=>{alert(U)});else{let U=n.value||"";U==="/"&&(U=""),a.value=A(((j=b.value)==null?void 0:j.children)||[]).filter(z=>z.path.startsWith(U)),o.value=a.value.length,P().then(()=>{o.value=0,console.log("done")}).catch(z=>{console.error("Processing Error",z),o.value=0,a.value=[],u.value="",f.value=[]})}}return(j,U)=>(Q(),Se(Nt,{ref_key:"dialogRef",ref:m,onHide:le(S),square:""},{default:W(()=>[D(Lt,{class:"q-dialog-plugin"},{default:W(()=>[D(Mt,null,{default:W(()=>[Ia,D(dr,{class:"q-mb-sm"}),!a.value.length&&!f.value.length?(Q(),ie("div",Da,[Ka,ue(B("select",{"onUpdate:modelValue":U[0]||(U[0]=z=>r.value=z),style:{flex:"1"}},[(Q(!0),ie(Ye,null,Ge(le(l).tree,z=>(Q(),ie("option",{key:z.id,value:z.id},Ee(z.name),9,ja))),128))],512),[[kt,r.value]])])):ge("",!0),!a.value.length&&!f.value.length?(Q(),ie("div",Ha,[Fa,B("div",Ja,[D(ql,{ref:"treeRef",dense:"",selected:n.value,"onUpdate:selected":U[1]||(U[1]=z=>n.value=z),expanded:i.value,"onUpdate:expanded":U[2]||(U[2]=z=>i.value=z),"no-selection-unset":"",nodes:q.value,"node-key":"id","label-key":"name",class:"pathTree"},null,8,["selected","expanded","nodes"])])])):ge("",!0),!a.value.length&&!f.value.length?(Q(),ie("div",Ua,[B("label",Va,[Ne(" BG Transparency: "),ue(B("input",{type:"checkbox","onUpdate:modelValue":U[3]||(U[3]=z=>y.value=z)},null,512),[[ot,y.value]])])])):ge("",!0),f.value.length&&!a.value.length?(Q(),ie("div",Qa,[B("div",Wa,[B("div",null,"Generated "+Ee(f.value.length)+" thumbnails.",1),D(Ma,{class:"thumb-list"},{default:W(()=>[(Q(!0),ie(Ye,null,Ge(f.value,z=>(Q(),ie("div",{key:z.path,style:{"white-space":"nowrap"}},Ee(z.path),1))),128))]),_:1})])])):ge("",!0),f.value.length&&!a.value.length?(Q(),ie("div",Xa,[Ya,ue(B("select",{"onUpdate:modelValue":U[4]||(U[4]=z=>s.value=z),style:{flex:"1"}},[(Q(!0),ie(Ye,null,Ge(b.value.repositories,z=>(Q(),ie("option",{value:z.repr,key:z.repr},Ee(z.repr),9,Ga))),128))],512),[[kt,s.value]])])):ge("",!0),a.value.length?(Q(),ie("div",Za,[u.value?(Q(),ie("img",{key:0,src:u.value,class:"autothumb-preview"},null,8,eo)):ge("",!0)])):ge("",!0),o.value?(Q(),Se(Nn,{key:6,"animation-speed":100,size:"25px",value:(o.value-a.value.length)/o.value,color:"accent"},{default:W(()=>[B("div",to,[D(zn,{color:"white","text-color":"accent",label:`${o.value-a.value.length} / ${o.value}`},null,8,["label"])])]),_:1},8,["value"])):ge("",!0),d.value?(Q(),Se(Nn,{key:7,size:"25px","animation-speed":100,value:d.value[0]/d.value[1],color:"accent"},{default:W(()=>[B("div",no,[D(zn,{color:"white","text-color":"accent",label:`${le(t)(d.value[0])} / ${le(t)(d.value[1])}`},null,8,["label"])])]),_:1},8,["value"])):ge("",!0)]),_:1}),D(Bt,{align:"right"},{default:W(()=>[D(ye,{size:"sm",square:"",color:"negative","text-color":"white",label:"Cancel",onClick:J}),D(ye,{color:"positive","text-color":"white",label:"OK",size:"sm",square:"",disable:!!(!b.value||!n.value||a.value.length||f.value.length&&!s.value),onClick:X},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),ro={style:{flex:"1","overflow-y":"auto","padding-top":"4px","background-color":"white"}},io={class:"row"},ao=["src"],oo={style:{display:"flex","flex-direction":"column","justify-content":"center"}},so=B("div",null,null,-1),vo=nt({__name:"IndexPage",setup(e){const t=gl();wr({async clear(){return await xe.request("kv_mdel",{pattern:"cache:%"})},async get(m,S){let k=await xe.request("kv_get",{key:m});return k===null&&(k=S),k},async set(m,S){return await xe.request("kv_set",{key:m,value:S})}});const n=Xe();n.loadState();const i=$([]),l=$([]),r=$(),a=$([]),o=()=>C("div",{class:"row justify-center q-my-xl"},['Select "Add Repository" from the menu to get started.']),u=m=>{m.map(S=>r.value.getNodeByKey(S)).forEach(S=>{var k;if(S)for(let R of S.children)((k=R==null?void 0:R.content_types)==null?void 0:k.thumb)&&!(R!=null&&R.img)&&n.setNodeThumbnail(R)})},s=T(()=>i.value.length>0?r.value.getNodeByKey(i.value):null);oe(l,(m,S)=>{S.forEach(k=>{if(m.indexOf(k)===-1){const R=r.value.getNodeByKey(k);R.type==="tree"&&(R.icon="mdi-folder")}}),m.forEach(k=>{if(S.indexOf(k)===-1){const R=r.value.getNodeByKey(k);R.type==="tree"&&(R.icon="mdi-folder")}})}),oe(()=>n.search,(m,S)=>{m&&!S?(a.value=[...l.value],r.value.expandAll()):S&&!m&&(l.value=[...a.value])});const d=async({nodeId:m})=>{const k=r.value.getNodeByKey(m).id;l.value=l.value.filter(R=>R!=k&&!R.startsWith(k+"|")),await n.reloadCollection({nodeId:m})},y=()=>{t.dialog({component:Xi})},b=()=>{t.dialog({component:Tn}).onOk(m=>{console.log("OK",m);const S=nn();n.tree.push({...m,id:S,type:"repo",icon:"mdi-github",selectable:!1,children:[]}),n.saveCollections(),d({nodeId:S})})},f=()=>{t.dialog({component:lo}).onOk(m=>{m&&d({nodeId:m})})},p=(m,S)=>S.toLowerCase().split(/\s+/).every(J=>{var X,j,U;return((X=m==null?void 0:m.path)==null?void 0:X.toLowerCase().indexOf(J))!==-1||(((U=(j=m==null?void 0:m.meta)==null?void 0:j.keywords)==null?void 0:U.toLowerCase())||"").indexOf(J)!==-1}),q=({nodeId:m})=>{const S=r.value.getNodeByKey(m);let k=S;S.type==="tree"&&(k=r.value.getNodeByKey(S.id.split("|")[0])),t.dialog({component:Pn,componentProps:{collection:k,initialValue:{content_types:{}}}})},A=({nodeId:m,contentType:S})=>{const R=r.value.getNodeByKey(m).content_types;S=S||(R.f3d?"f3d":R.step?"step":R.dxf?"dxf":R.svg&&"svg"),xe.request("import_model",{url:R[S].url,token:n.token,content_type:S})},P=({nodeId:m,contentType:S})=>{const R=r.value.getNodeByKey(m).content_types;S=S||(R.f3d?"f3d":R.step?"step":R.dxf?"dxf":R.svg&&"svg"),xe.request("open_model",{url:R[S].url,token:n.token,content_type:S})},N=({nodeId:m})=>{const S=r.value.getNodeByKey(m),k=S.type==="repo"?Tn:Pn;t.dialog({component:k,componentProps:{initialValue:S}}).onOk(R=>{S.name=R.name;const J=JSON.stringify(R.repositories),X=JSON.stringify(S.repositories);J!=X&&(S.repositories=R.repositories,d({nodeId:m})),n.saveCollections()})};return(m,S)=>(Q(),Se(_r,{class:"column",style:at({cursor:le(n).globalCursor||void 0})},{default:W(()=>[D(br,{class:"text-white shadow-2",style:{"z-index":"2"}},{default:W(()=>[D(fr,{class:"full-width","bg-color":"white",modelValue:le(n).search,"onUpdate:modelValue":S[1]||(S[1]=k=>le(n).search=k),dense:"",square:"",outlined:"",clearable:""},{prepend:W(()=>[D(ke,{name:"search"})]),after:W(()=>[D(ye,{flat:"",square:"",dense:"",icon:"more_vert"},{default:W(()=>[D(yr,{square:""},{default:W(()=>[D(hr,{dense:"",style:{"min-width":"150px"}},{default:W(()=>[ue((Q(),Se(ct,{dense:"",clickable:"",onClick:y},{default:W(()=>[D(De,{avatar:""},{default:W(()=>[D(ke,{name:"settings"})]),_:1}),D(De,null,{default:W(()=>[Ne("Settings")]),_:1})]),_:1})),[[yt]]),ue((Q(),Se(ct,{dense:"",clickable:"",onClick:b},{default:W(()=>[D(De,{avatar:""},{default:W(()=>[D(ke,{name:"add"})]),_:1}),D(De,null,{default:W(()=>[Ne("Add Repository")]),_:1})]),_:1})),[[yt]]),le(n).preferences.showManagementUI?ue((Q(),Se(ct,{key:0,dense:"",clickable:"",onClick:f},{default:W(()=>[D(De,{avatar:""},{default:W(()=>[D(ke,{name:"image"})]),_:1}),D(De,null,{default:W(()=>[Ne("Auto-Thumb")]),_:1})]),_:1})),[[yt]]):ge("",!0),ue((Q(),Se(ct,{dense:"",clickable:"",onClick:S[0]||(S[0]=()=>{le(xe).request("close",{})})},{default:W(()=>[D(De,{avatar:""},{default:W(()=>[D(ke,{name:"close"})]),_:1}),D(De,null,{default:W(()=>[Ne("Close")]),_:1})]),_:1})),[[yt]])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),B("div",ro,[D(le(Gr),{dense:"",showManagementUI:le(n).preferences.showManagementUI,"no-transition":"",ref_key:"treeRef",ref:r,filter:le(n).search,"filter-method":p,nodes:le(n).tree,"label-key":"name","node-key":"id","no-selection-unset":"","no-nodes-label":o(),selected:i.value,"onUpdate:selected":S[2]||(S[2]=k=>i.value=k),expanded:l.value,"onUpdate:expanded":[S[3]||(S[3]=k=>l.value=k),u],"onAction:import":A,"onAction:open":P,"onAction:reload":d,"onAction:edit":N,"onAction:upload":q,style:{flex:"1"},"show-thumbnails":le(n).preferences.showThumbnails},{"default-header":W(k=>[B("div",io,[k.node.img&&le(n).preferences.showThumbnails?(Q(),ie("img",{key:0,class:"q-tree__img q-mr-sm",style:{"border-style":"solid","border-radius":"4px","border-width":"1px","z-index":"1","background-color":"white"},src:k.node.img},null,8,ao)):(Q(),Se(ke,{key:1,class:"q-tree__icon q-mr-sm",name:k.node.icon,style:at(k.node.type==="blob"?"border-style: solid; border-radius: 4px; border-width: 1px; z-index: 1; background-color: white":""),size:k.node.type==="blob"?le(n).preferences.showThumbnails?"48px":"24px":void 0},null,8,["name","style","size"])),B("div",oo,[B("div",{style:at({fontWeight:k.node.type==="blob"?"bold":"inherit"})},Ee(k.node.name),5),so])])]),_:1},8,["showManagementUI","filter","nodes","no-nodes-label","selected","expanded","show-thumbnails"])]),s.value?(Q(),Se(Ii,{key:0,showManagementUI:le(n).preferences.showManagementUI,node:s.value,"onAction:import":A,"onAction:open":P,"onAction:edit":N},null,8,["showManagementUI","node"])):ge("",!0)]),_:1},8,["style"]))}});export{vo as default};
