var Vr=Object.defineProperty;var Zr=(e,a,t)=>a in e?Vr(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t;var et=(e,a,t)=>(Zr(e,typeof a!="symbol"?a+"":a,t),t);import{c as Ee,a as te,h as ee,n as Wt,d as Fe,G as tt,H as Qr,I as nt,J as Gr,r as oe,g as Re,K as Ht,L as Be,M as Yr,P as Xr,N as Ot,F as kt,O as Me,w as _e,y as ut,z as Ye,Q as Ge,C as ln,R as kn,S as Ue,k as ei,T as Zn,U as Qn,V as Gn,W as _t,X as qt,Y as Yn,Z as Xn,$ as er,a0 as ti,a1 as mt,a2 as ni,a3 as xn,B as tr,a4 as ri,a5 as Jt,a6 as ii,a7 as ai,a8 as oi,i as Bt,e as Ve,l as si,f as li,a9 as vn,aa as ui,ab as ci,ac as di,m as at,ad as Vt,ae as fi,q as rt,af as nr,ag as pn,ah as rr,ai as Ae,aj as we,ak as ir,al as ze,am as hi,an as ar,ao as vi,ap as pi,p as mi,aq as or,ar as sr,A as lr,as as ur,at as ht,au as gi,av as bi,aw as yi,ax as _i,ay as wi,az as be,aA as ki,aB as xi,aC as Si,aD as Ci,t as pe,aE as ye,x as ue,v as ve,aF as qe,aG as Ie,aH as ce,aI as vt,aJ as Se,u as Te,aK as Ze,aL as ot,aM as xt,aN as St,aO as gt,aP as Zt,aQ as Ct,aR as pt,aS as cr,aT as Nt,aU as Ti,aV as zi,aW as Ei,aX as Sn,aY as tn,aZ as Ai,a_ as nn,a$ as Cn,b0 as dr,b1 as fr,b2 as hr,b3 as Ri,b4 as Pi}from"./index.f2246fd7.js";import{a as Ke}from"./axios.7331a07d.js";import{a as un,Q as Oi}from"./QResizeObserver.e4f684b3.js";const qi=["top","middle","bottom"];var cn=Ee({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>qi.includes(e)}},setup(e,{slots:a}){const t=te(()=>e.align!==void 0?{verticalAlign:e.align}:null),s=te(()=>{const r=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(r!==void 0?` text-${r}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>ee("div",{class:s.value,style:t.value,role:"status","aria-label":e.label},Wt(a.default,e.label!==void 0?[e.label]:[]))}}),je=Ee({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:a}){const t=te(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>ee("div",{class:t.value},Fe(a.default))}}),dt=Ee({name:"QItem",props:{...tt,...Qr,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:a,emit:t}){const{proxy:{$q:s}}=Re(),r=nt(e,s),{hasLink:n,linkAttrs:i,linkClass:o,linkTag:l,navigateOnClick:c}=Gr(),v=oe(null),b=oe(null),y=te(()=>e.clickable===!0||n.value===!0||e.tag==="label"),u=te(()=>e.disable!==!0&&y.value===!0),m=te(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(r.value===!0?" q-item--dark":"")+(n.value===!0&&e.active===null?o.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(u.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),h=te(()=>{if(e.insetLevel===void 0)return null;const S=s.lang.rtl===!0?"Right":"Left";return{["padding"+S]:16+e.insetLevel*56+"px"}});function g(S){u.value===!0&&(b.value!==null&&(S.qKeyEvent!==!0&&document.activeElement===v.value?b.value.focus():document.activeElement===b.value&&v.value.focus()),c(S))}function p(S){if(u.value===!0&&Ht(S,13)===!0){Be(S),S.qKeyEvent=!0;const E=new MouseEvent("click",S);E.qKeyEvent=!0,v.value.dispatchEvent(E)}t("keyup",S)}function w(){const S=Yr(a.default,[]);return u.value===!0&&S.unshift(ee("div",{class:"q-focus-helper",tabindex:-1,ref:b})),S}return()=>{const S={ref:v,class:m.value,style:h.value,role:"listitem",onClick:g,onKeyup:p};return u.value===!0?(S.tabindex=e.tabindex||"0",Object.assign(S,i.value)):y.value===!0&&(S["aria-disabled"]="true"),ee(l.value,S,w())}}}),Bi=Ee({name:"QList",props:{...tt,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:a}){const t=Re(),s=nt(e,t.proxy.$q),r=te(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(s.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>ee(e.tag,{class:r.value},Fe(a.default))}});function wt(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),Xr.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const vr={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function pr({showing:e,avoidEmit:a,configureAnchorEl:t}){const{props:s,proxy:r,emit:n}=Re(),i=oe(null);let o=null;function l(u){return i.value===null?!1:u===void 0||u.touches===void 0||u.touches.length<=1}const c={};t===void 0&&(Object.assign(c,{hide(u){r.hide(u)},toggle(u){r.toggle(u),u.qAnchorHandled=!0},toggleKey(u){Ht(u,13)===!0&&c.toggle(u)},contextClick(u){r.hide(u),Ot(u),kt(()=>{r.show(u),u.qAnchorHandled=!0})},prevent:Ot,mobileTouch(u){if(c.mobileCleanup(u),l(u)!==!0)return;r.hide(u),i.value.classList.add("non-selectable");const m=u.target;Me(c,"anchor",[[m,"touchmove","mobileCleanup","passive"],[m,"touchend","mobileCleanup","passive"],[m,"touchcancel","mobileCleanup","passive"],[i.value,"contextmenu","prevent","notPassive"]]),o=setTimeout(()=>{o=null,r.show(u),u.qAnchorHandled=!0},300)},mobileCleanup(u){i.value.classList.remove("non-selectable"),o!==null&&(clearTimeout(o),o=null),e.value===!0&&u!==void 0&&wt()}}),t=function(u=s.contextMenu){if(s.noParentEvent===!0||i.value===null)return;let m;u===!0?r.$q.platform.is.mobile===!0?m=[[i.value,"touchstart","mobileTouch","passive"]]:m=[[i.value,"mousedown","hide","passive"],[i.value,"contextmenu","contextClick","notPassive"]]:m=[[i.value,"click","toggle","passive"],[i.value,"keyup","toggleKey","passive"]],Me(c,"anchor",m)});function v(){Ge(c,"anchor")}function b(u){for(i.value=u;i.value.classList.contains("q-anchor--skip");)i.value=i.value.parentNode;t()}function y(){if(s.target===!1||s.target===""||r.$el.parentNode===null)i.value=null;else if(s.target===!0)b(r.$el.parentNode);else{let u=s.target;if(typeof s.target=="string")try{u=document.querySelector(s.target)}catch{u=void 0}u!=null?(i.value=u.$el||u,t()):(i.value=null,console.error(`Anchor: target "${s.target}" not found`))}}return _e(()=>s.contextMenu,u=>{i.value!==null&&(v(),t(u))}),_e(()=>s.target,()=>{i.value!==null&&v(),y()}),_e(()=>s.noParentEvent,u=>{i.value!==null&&(u===!0?v():t())}),ut(()=>{y(),a!==!0&&s.modelValue===!0&&i.value===null&&n("update:modelValue",!1)}),Ye(()=>{o!==null&&clearTimeout(o),v()}),{anchorEl:i,canShow:l,anchorEvents:c}}function mr(e,a){const t=oe(null);let s;function r(o,l){const c=`${l!==void 0?"add":"remove"}EventListener`,v=l!==void 0?l:s;o!==window&&o[c]("scroll",v,ln.passive),window[c]("scroll",v,ln.passive),s=l}function n(){t.value!==null&&(r(t.value),t.value=null)}const i=_e(()=>e.noParentEvent,()=>{t.value!==null&&(n(),a())});return Ye(i),{localScrollTarget:t,unconfigureScrollTarget:n,changeScrollEvent:r}}const{notPassiveCapture:It}=ln,st=[];function $t(e){const a=e.target;if(a===void 0||a.nodeType===8||a.classList.contains("no-pointer-events")===!0)return;let t=kn.length-1;for(;t>=0;){const s=kn[t].$;if(s.type.name==="QTooltip"){t--;continue}if(s.type.name!=="QDialog")break;if(s.props.seamless!==!0)return;t--}for(let s=st.length-1;s>=0;s--){const r=st[s];if((r.anchorEl.value===null||r.anchorEl.value.contains(a)===!1)&&(a===document.body||r.innerRef.value!==null&&r.innerRef.value.contains(a)===!1))e.qClickOutside=!0,r.onClickOutside(e);else return}}function gr(e){st.push(e),st.length===1&&(document.addEventListener("mousedown",$t,It),document.addEventListener("touchstart",$t,It))}function Dt(e){const a=st.findIndex(t=>t===e);a>-1&&(st.splice(a,1),st.length===0&&(document.removeEventListener("mousedown",$t,It),document.removeEventListener("touchstart",$t,It)))}let Tn,zn;function Mt(e){const a=e.split(" ");return a.length!==2?!1:["top","center","bottom"].includes(a[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(a[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function br(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const dn={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{dn[`${e}#ltr`]=e,dn[`${e}#rtl`]=e});function Lt(e,a){const t=e.split(" ");return{vertical:t[0],horizontal:dn[`${t[1]}#${a===!0?"rtl":"ltr"}`]}}function Ni(e,a){let{top:t,left:s,right:r,bottom:n,width:i,height:o}=e.getBoundingClientRect();return a!==void 0&&(t-=a[1],s-=a[0],n+=a[1],r+=a[0],i+=a[0],o+=a[1]),{top:t,bottom:n,height:o,left:s,right:r,width:i,middle:s+(r-s)/2,center:t+(n-t)/2}}function Ii(e,a,t){let{top:s,left:r}=e.getBoundingClientRect();return s+=a.top,r+=a.left,t!==void 0&&(s+=t[1],r+=t[0]),{top:s,bottom:s+1,height:1,left:r,right:r+1,width:1,middle:r,center:s}}function $i(e,a){return{top:0,center:a/2,bottom:a,left:0,middle:e/2,right:e}}function En(e,a,t,s){return{top:e[t.vertical]-a[s.vertical],left:e[t.horizontal]-a[s.horizontal]}}function mn(e,a=0){if(e.targetEl===null||e.anchorEl===null||a>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{mn(e,a+1)},10);return}const{targetEl:t,offset:s,anchorEl:r,anchorOrigin:n,selfOrigin:i,absoluteOffset:o,fit:l,cover:c,maxHeight:v,maxWidth:b}=e;if(Ue.is.ios===!0&&window.visualViewport!==void 0){const A=document.body.style,{offsetLeft:R,offsetTop:M}=window.visualViewport;R!==Tn&&(A.setProperty("--q-pe-left",R+"px"),Tn=R),M!==zn&&(A.setProperty("--q-pe-top",M+"px"),zn=M)}const{scrollLeft:y,scrollTop:u}=t,m=o===void 0?Ni(r,c===!0?[0,0]:s):Ii(r,o,s);Object.assign(t.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:b||"100vw",maxHeight:v||"100vh",visibility:"visible"});const{offsetWidth:h,offsetHeight:g}=t,{elWidth:p,elHeight:w}=l===!0||c===!0?{elWidth:Math.max(m.width,h),elHeight:c===!0?Math.max(m.height,g):g}:{elWidth:h,elHeight:g};let S={maxWidth:b,maxHeight:v};(l===!0||c===!0)&&(S.minWidth=m.width+"px",c===!0&&(S.minHeight=m.height+"px")),Object.assign(t.style,S);const E=$i(p,w);let C=En(m,E,n,i);if(o===void 0||s===void 0)rn(C,m,E,n,i);else{const{top:A,left:R}=C;rn(C,m,E,n,i);let M=!1;if(C.top!==A){M=!0;const P=2*s[1];m.center=m.top-=P,m.bottom-=P+2}if(C.left!==R){M=!0;const P=2*s[0];m.middle=m.left-=P,m.right-=P+2}M===!0&&(C=En(m,E,n,i),rn(C,m,E,n,i))}S={top:C.top+"px",left:C.left+"px"},C.maxHeight!==void 0&&(S.maxHeight=C.maxHeight+"px",m.height>C.maxHeight&&(S.minHeight=S.maxHeight)),C.maxWidth!==void 0&&(S.maxWidth=C.maxWidth+"px",m.width>C.maxWidth&&(S.minWidth=S.maxWidth)),Object.assign(t.style,S),t.scrollTop!==u&&(t.scrollTop=u),t.scrollLeft!==y&&(t.scrollLeft=y)}function rn(e,a,t,s,r){const n=t.bottom,i=t.right,o=ei(),l=window.innerHeight-o,c=document.body.clientWidth;if(e.top<0||e.top+n>l)if(r.vertical==="center")e.top=a[s.vertical]>l/2?Math.max(0,l-n):0,e.maxHeight=Math.min(n,l);else if(a[s.vertical]>l/2){const v=Math.min(l,s.vertical==="center"?a.center:s.vertical===r.vertical?a.bottom:a.top);e.maxHeight=Math.min(n,v),e.top=Math.max(0,v-n)}else e.top=Math.max(0,s.vertical==="center"?a.center:s.vertical===r.vertical?a.top:a.bottom),e.maxHeight=Math.min(n,l-e.top);if(e.left<0||e.left+i>c)if(e.maxWidth=Math.min(i,c),r.horizontal==="middle")e.left=a[s.horizontal]>c/2?Math.max(0,c-i):0;else if(a[s.horizontal]>c/2){const v=Math.min(c,s.horizontal==="middle"?a.middle:s.horizontal===r.horizontal?a.right:a.left);e.maxWidth=Math.min(i,v),e.left=Math.max(0,v-e.maxWidth)}else e.left=Math.max(0,s.horizontal==="middle"?a.middle:s.horizontal===r.horizontal?a.left:a.right),e.maxWidth=Math.min(i,c-e.left)}var Di=Ee({name:"QMenu",inheritAttrs:!1,props:{...vr,...Zn,...tt,...Qn,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Mt},self:{type:String,validator:Mt},offset:{type:Array,validator:br},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Gn,"click","escapeKey"],setup(e,{slots:a,emit:t,attrs:s}){let r=null,n,i,o;const l=Re(),{proxy:c}=l,{$q:v}=c,b=oe(null),y=oe(!1),u=te(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),m=nt(e,v),{registerTick:h,removeTick:g}=_t(),{registerTimeout:p}=qt(),{transitionProps:w,transitionStyle:S}=Yn(e),{localScrollTarget:E,changeScrollEvent:C,unconfigureScrollTarget:A}=mr(e,J),{anchorEl:R,canShow:M}=pr({showing:y}),{hide:P}=Xn({showing:y,canShow:M,handleShow:de,handleHide:L,hideOnRouteChange:u,processOnMount:!0}),{showPortal:W,hidePortal:Y,renderPortal:z}=er(l,b,I,"menu"),$={anchorEl:R,innerRef:b,onClickOutside(F){if(e.persistent!==!0&&y.value===!0)return P(F),(F.type==="touchstart"||F.target.classList.contains("q-dialog__backdrop"))&&Be(F),!0}},f=te(()=>Lt(e.anchor||(e.cover===!0?"center middle":"bottom start"),v.lang.rtl)),j=te(()=>e.cover===!0?f.value:Lt(e.self||"top start",v.lang.rtl)),Q=te(()=>(e.square===!0?" q-menu--square":"")+(m.value===!0?" q-menu--dark q-dark":"")),K=te(()=>e.autoClose===!0?{onClick:k}:{}),se=te(()=>y.value===!0&&e.persistent!==!0);_e(se,F=>{F===!0?(ii(N),gr($)):(xn(N),Dt($))});function X(){ai(()=>{let F=b.value;F&&F.contains(document.activeElement)!==!0&&(F=F.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||F.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||F.querySelector("[autofocus], [data-autofocus]")||F,F.focus({preventScroll:!0}))})}function de(F){if(r=e.noRefocus===!1?document.activeElement:null,ti(B),W(),J(),n=void 0,F!==void 0&&(e.touchPosition||e.contextMenu)){const ie=mt(F);if(ie.left!==void 0){const{top:fe,left:ae}=R.value.getBoundingClientRect();n={left:ie.left-ae,top:ie.top-fe}}}i===void 0&&(i=_e(()=>v.screen.width+"|"+v.screen.height+"|"+e.self+"|"+e.anchor+"|"+v.lang.rtl,H)),e.noFocus!==!0&&document.activeElement.blur(),h(()=>{H(),e.noFocus!==!0&&X()}),p(()=>{v.platform.is.ios===!0&&(o=e.autoClose,b.value.click()),H(),W(!0),t("show",F)},e.transitionDuration)}function L(F){g(),Y(),T(!0),r!==null&&(F===void 0||F.qClickOutside!==!0)&&(((F&&F.type.indexOf("key")===0?r.closest('[tabindex]:not([tabindex^="-"])'):void 0)||r).focus(),r=null),p(()=>{Y(!0),t("hide",F)},e.transitionDuration)}function T(F){n=void 0,i!==void 0&&(i(),i=void 0),(F===!0||y.value===!0)&&(ni(B),A(),Dt($),xn(N)),F!==!0&&(r=null)}function J(){(R.value!==null||e.scrollTarget!==void 0)&&(E.value=tr(R.value,e.scrollTarget),C(E.value,H))}function k(F){o!==!0?(ri(c,F),t("click",F)):o=!1}function B(F){se.value===!0&&e.noFocus!==!0&&oi(b.value,F.target)!==!0&&X()}function N(F){t("escapeKey"),P(F)}function H(){mn({targetEl:b.value,offset:e.offset,anchorEl:R.value,anchorOrigin:f.value,selfOrigin:j.value,absoluteOffset:n,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function I(){return ee(Jt,w.value,()=>y.value===!0?ee("div",{role:"menu",...s,ref:b,tabindex:-1,class:["q-menu q-position-engine scroll"+Q.value,s.class],style:[s.style,S.value],...K.value},Fe(a.default)):null)}return Ye(T),Object.assign(c,{focus:X,updatePosition:H}),z}}),Mi=Ee({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:a}){const t=te(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>ee("div",{class:t.value,role:"toolbar"},Fe(a.default))}}),Li=Ee({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:a}){const{proxy:{$q:t}}=Re(),s=Bt(si,Ve);if(s===Ve)return console.error("QPage needs to be a deep child of QLayout"),Ve;if(Bt(li,Ve)===Ve)return console.error("QPage needs to be child of QPageContainer"),Ve;const n=te(()=>{const o=(s.header.space===!0?s.header.size:0)+(s.footer.space===!0?s.footer.size:0);if(typeof e.styleFn=="function"){const l=s.isContainer.value===!0?s.containerHeight.value:t.screen.height;return e.styleFn(o,l)}return{minHeight:s.isContainer.value===!0?s.containerHeight.value-o+"px":t.screen.height===0?o!==0?`calc(100vh - ${o}px)`:"100vh":t.screen.height-o+"px"}}),i=te(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>ee("main",{class:i.value,style:n.value},Fe(a.default))}});function An(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const a=parseInt(e,10);return isNaN(a)?0:a}var yt=vn({name:"close-popup",beforeMount(e,{value:a}){const t={depth:An(a),handler(s){t.depth!==0&&setTimeout(()=>{const r=ui(e);r!==void 0&&ci(r,s,t.depth)})},handlerKey(s){Ht(s,13)===!0&&t.handler(s)}};e.__qclosepopup=t,e.addEventListener("click",t.handler),e.addEventListener("keyup",t.handlerKey)},updated(e,{value:a,oldValue:t}){a!==t&&(e.__qclosepopup.depth=An(a))},beforeUnmount(e){const a=e.__qclosepopup;e.removeEventListener("click",a.handler),e.removeEventListener("keyup",a.handlerKey),delete e.__qclosepopup}});const Qe="https://api.github.com";let lt={data:{},async clear(){this.data={}},async get(e,a){return this.data[e]===void 0?a:JSON.parse(this.data[e])},async set(e,a){this.data[e]=JSON.stringify(a)}};function Fi(e){lt=e}const We=(e,a=null)=>({...{Accept:"application/vnd.github+json",Authorization:`Bearer ${e}`},...a}),ji=e=>{var a,t;if((a=e==null?void 0:e.response)!=null&&a.status){const s=(t=e.response)==null?void 0:t.data;throw s.message?new Error(s.message):s.toString()}throw e};async function Ui({input:e,token:a}){e.startsWith("https://github.com/")&&(e=e.substring(19));let t=e.match(/^[^\/]+\/[^\/#]+/)[0];e=e.substring(t.length),e.startsWith("/")&&(e=e.substring(1));let s;s=await gn({repo:t,token:a});let[r,n]=e.split("#");return n&&(n=(await bn({repo:t,branch:n,token:a})).name),{repr:`${s.full_name}${r?`/${r}`:""}${n?`#${n}`:""}`,repo:s.full_name,path:r,branch:n}}async function yr({repo:e,branch:a,token:t,files:s,message:r,progressCallback:n}){const i=s.reduce((u,m)=>u+m.content.length,0);let o=0;n&&n(0,i),s=await Promise.all(s.map(async u=>{let m=await Ke.post(`${Qe}/repos/${e}/git/blobs`,{content:u.content,encoding:u.encoding},{onUploadProgress:h=>{n&&n(o+h.loaded,i)},headers:We(t,{"Content-Type":"application/json"})});return o+=u.content.length,n&&n(o,i),{mode:"100644",type:"blob",sha:m.data.sha,path:u.path}}));const l=await bn({repo:e,branch:a,token:t}),c=l.commit.commit.tree.sha;let v=await Ke.post(`${Qe}/repos/${e}/git/trees`,{base_tree:c,tree:s},{headers:We(t,{"Content-Type":"application/json"})});const b=v.data.sha;v=await Ke.post(`${Qe}/repos/${e}/git/commits`,{message:r,tree:b,parents:[l.commit.sha]},{headers:We(t,{"Content-Type":"application/json"})});const y=v.data.sha;v=await Ke.patch(`${Qe}/repos/${e}/git/refs/heads/${l.name}`,{sha:y},{headers:We(t,{"Content-Type":"application/json"})})}async function gn({repo:e,token:a}){return(await Ke.get(`${Qe}/repos/${e}`,{headers:We(a)})).data}async function _r({url:e,token:a}){let t=await lt.get(`cache:blob:${e}`,null);return t===null&&(t=(await Ke.get(e,{headers:We(a)})).data,await lt.set(`cache:blob:${e}`,t)),t}async function wr({url:e,token:a}){const t=await Ke.get(e,{headers:We(a,{Accept:"application/vnd.github.raw"})});return new Blob([t.data])}async function Rn({url:e,token:a}){const t=await _r({url:e,token:a});let s=t.content;return t.encoding==="base64"&&(s=atob(s)),JSON.parse(s)}async function Ft({url:e,token:a,content_type:t}){const s=await _r({url:e,token:a});return s.encoding!="base64"&&(s.content=btoa(s.content)),`data:${t};base64,${s.content}`}async function kr({org:e,token:a}){return(await Ke.get(`${Qe}/users/${e}/repos`,We(a))).data.map(s=>({name:s.name,icon:"mdi-github",expandable:!0,type:"repo",repositories:[{repo:s.full_name,repr:s.full_name,branch:s.default_branch}],children:[]}))}async function bn({repo:e,branch:a,token:t}){a||(a=(await gn({repo:e,token:t})).default_branch);const s=new Date;return s.setSeconds(s.getSeconds()-30),(await Ke.get(`${Qe}/repos/${e}/branches/${a}`,{headers:We(t,{"If-Modified-Since":s.toUTCString()})})).data}function Ki(e,a){return(a.type==="tree")-(e.type==="tree")||e.path.localeCompare(a.path)}function Wi(e){let a=e.match(/^.*?(\.[^\.]*)?$/)[1];if(!a)return null;if(a=a.toLowerCase(),a==".stp"&&(a=".step"),[".step",".f3d",".svg",".dxf"].indexOf(a)!==-1)return a.substring(1);if(a===".png")return"thumb";if(a===".json")return"meta"}function xr(e,a){return{...e,content_types:{...e.content_types,...a.content_types}}}function Sr(e,a){const t=[...e];return a.forEach(s=>{let r=e.filter(n=>n.name==s.name&&n.type==s.type)[0];if(!r){t.push(s);return}r.sha=[...r.sha,...s.sha],r.type==="tree"?r.children=Sr(r.children,s.children):(t.splice(t.indexOf(r),1),r=xr(r,s),t.push(r))}),t}function Cr(e){const a=[];return e.forEach(t=>{if(t.type==="tree")t.children=Cr(t.children),t.children.length&&a.push(t);else{const s=t.content_types;(s.step||s.f3d||s.dxf||s.svg)&&a.push(t)}}),a}function Tr(e){return e.filter(a=>a.type==="tree").forEach(a=>{Tr(a.children)}),e.sort(Ki),e}function Hi(e,a){if(a){for(const t of a.split("/"))if(Array.isArray(e)?e=e.filter(s=>s.name===t)[0]:e=e.children.filter(s=>s.name===t)[0],!e)return null}return e}function Ji(e,a){e=e||[],a=a||[],e=Array.isArray(e)?e:e.split(/\s+/),a=Array.isArray(a)?a:a.split(/\s+/);const t=e.map(s=>s.toLowerCase());return[...e,...a.filter(s=>t.indexOf(s.toLowerCase())===-1)].join(" ")||void 0}function Vi(e,a){var t;console.log("Applying DirMeta",e,a);for(const[s,r]of Object.entries(a)){const n=Hi(e,s);n.meta={...(n==null?void 0:n.meta)||{},...r||{},keywords:Ji((t=n==null?void 0:n.meta)==null?void 0:t.keywords,r==null?void 0:r.keywords)}}}async function zr({tree:e,token:a,treeShas:t,perNodeFunc:s}){let r=await lt.get(`cache:meta:${t.join(":")}`,null),n=[];for(let o of e){if(s(o),o.type==="tree"){n.push({...o,children:await zr({tree:o.children,token:a,treeShas:o.sha,perNodeFunc:s})});continue}let l;if(r)l=r[o.name]||{};else if(o.content_types.meta)try{l=await Rn({url:o.content_types.meta.url,token:a})}catch{l={}}n.push({...o,meta:l})}const i=n.filter(o=>{var l;return o.name=="_meta"&&((l=o==null?void 0:o.content_types)==null?void 0:l.meta)})[0];if(i){if(!r){console.log("Downloading meta",i.content_types.meta.url);const o=await Rn({url:i.content_types.meta.url,token:a});Vi(n,o)}n=n.filter(o=>o.id!==i.id)}if(!r){const o={};n.forEach(l=>{Object.keys((l==null?void 0:l.meta)||{}).length!=0&&(o[l.name]=l.meta)}),Object.keys(o).length!=0&&lt.set(`cache:meta:${t.join(":")}`,o)}return n}function Er({tree:e,root:a,id_prefix:t,repo:s,branch:r}){const n=[];for(;e.length>0;){let i=e[0];if(!i.path.startsWith(a))break;if(e.shift(),i.id=`${t}|${i.path}`,i.name=i.path.split("/").pop(),i.name=i.name.match(/^(.*?)(\.[^\.]*)?$/)[1],delete i.mode,i.sha=Array.isArray(i.sha)?i.sha:[i.sha],i.type=="tree"){if(i.children=Er({tree:e,root:`${i.path}/`,id_prefix:t,repo:s,branch:r}),i.children.length===0)continue}else if(i.type=="blob"){let o=Wi(i.path);if(!o)continue;if(i.content_types={[o]:{url:i.url,size:i.size,path:i.path,repo:s,branch:r}},i.path=i.path.match(/^(.*?)(\.[^\.]*)?$/)[1],delete i.url,delete i.size,n.length>0){const l=n[n.length-1];l.type==="blob"&&l.path===i.path&&(n.pop(),i=xr(l,i))}}n.push(i)}return n}async function Zi({repo:e,branch:a,path:t,token:s}){return(await Ke.get(`${Qe}/repos/${e}/commits`,{headers:We(s),params:{sha:a,path:t,per_page:"1",page:"1"}})).data[0]}async function Qi({repo:e,branch:a,token:t,id_prefix:s,noCache:r}){var i,o;r=!!r;try{a=await bn({repo:e,branch:a,token:t})}catch(l){if(((o=(i=l==null?void 0:l.response)==null?void 0:i.data)==null?void 0:o.message)==="Branch not found")return[[],null];throw l}let n=r?null:await lt.get(`cache:tree:${e}:${a.name}`);if(!n||n.sha!==a.commit.commit.tree.sha){console.log("cache miss",e,a.commit.commit);try{n=(await Ke.get(`${Qe}/repos/${e}/git/trees/${a.commit.commit.tree.sha}?recursive=1`,{headers:We(t)})).data}catch(l){ji(l)}r||await lt.set(`cache:tree:${e}:${a.name}`,n)}return[Er({tree:n.tree,root:"",id_prefix:s,repo:e,branch:a.name}),a.commit.commit.tree.sha]}function Gi(e,a){a=a.replace(/^\//,"").replace("//$",""),a.split("/").forEach(s=>{var r;if(e=(r=e.filter(n=>n.name===s&&n.type=="tree")[0])==null?void 0:r.children,e===void 0)throw Error("Invalid repository path")});function t(s,r){const n=[];for(let i of s){const o={...i};o.path=o.path.substring(r.length+1);let[l,c]=o.id.split("|");c=c.substring(r.length+1),o.id=`${l}|${c}`,o.type===e&&(o.children=t(o.children,r)),n.push(o)}return n}return e=t(e,a),e}function Yi(e){let a=0;function t(s){if(a++,s.children)for(let r of s.children)t(r)}for(let s of e)t(s);return a}async function Pn({repositories:e,token:a,id_prefix:t,index:s,setLoadingMessage:r,noCache:n}){n=!!n;let i=[],o=[];for(let l of e){r&&r(`Loading ${l}...`);const c=l.match(/^([\w-]+)\/([\w-]+)((?:\/[\w-]+)*)(#.*)?$/);if(c!=null){let[,v,b,y,u]=c;u?u=u.substring(1):u=(await gn({repo:`${v}/${b}`,token:a})).default_branch,r&&r(`Loading ${l}#${u}...`);let[m,h]=await Qi({repo:`${v}/${b}`,branch:u,token:a,id_prefix:t,noCache:n});console.log("NewTree",m),o.push(h),y&&(m=Gi(m,y)),i=Sr(i,m)}}if(s){let l=0;const c=Yi(i);i=await zr({tree:i,token:a,treeShas:o,perNodeFunc:()=>{l++,r&&r(`Indexing trees (${l}/${c})...`)}})}return console.log("Merged trees",i),Tr(Cr(i))}var ke=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Rt(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ar={},Qt={},Tt={};(function(e){var a=ke&&ke.__extends||function(){var u=function(m,h){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,p){g.__proto__=p}||function(g,p){for(var w in p)Object.prototype.hasOwnProperty.call(p,w)&&(g[w]=p[w])},u(m,h)};return function(m,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");u(m,h);function g(){this.constructor=m}m.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.createJSONRPCNotification=e.createJSONRPCRequest=e.createJSONRPCSuccessResponse=e.createJSONRPCErrorResponse=e.JSONRPCErrorCode=e.JSONRPCErrorException=e.isJSONRPCResponses=e.isJSONRPCResponse=e.isJSONRPCRequests=e.isJSONRPCRequest=e.isJSONRPCID=e.JSONRPC=void 0,e.JSONRPC="2.0";var t=function(u){return typeof u=="string"||typeof u=="number"||u===null};e.isJSONRPCID=t;var s=function(u){return u.jsonrpc===e.JSONRPC&&u.method!==void 0&&u.result===void 0&&u.error===void 0};e.isJSONRPCRequest=s;var r=function(u){return Array.isArray(u)&&u.every(e.isJSONRPCRequest)};e.isJSONRPCRequests=r;var n=function(u){return u.jsonrpc===e.JSONRPC&&u.id!==void 0&&(u.result!==void 0||u.error!==void 0)};e.isJSONRPCResponse=n;var i=function(u){return Array.isArray(u)&&u.every(e.isJSONRPCResponse)};e.isJSONRPCResponses=i;var o=function(u,m,h){var g={code:u,message:m};return h!=null&&(g.data=h),g},l=function(u){a(m,u);function m(h,g,p){var w=u.call(this,h)||this;return Object.setPrototypeOf(w,m.prototype),w.code=g,w.data=p,w}return m.prototype.toObject=function(){return o(this.code,this.message,this.data)},m}(Error);e.JSONRPCErrorException=l,function(u){u[u.ParseError=-32700]="ParseError",u[u.InvalidRequest=-32600]="InvalidRequest",u[u.MethodNotFound=-32601]="MethodNotFound",u[u.InvalidParams=-32602]="InvalidParams",u[u.InternalError=-32603]="InternalError"}(e.JSONRPCErrorCode||(e.JSONRPCErrorCode={}));var c=function(u,m,h,g){return{jsonrpc:e.JSONRPC,id:u,error:o(m,h,g)}};e.createJSONRPCErrorResponse=c;var v=function(u,m){return{jsonrpc:e.JSONRPC,id:u,result:m!=null?m:null}};e.createJSONRPCSuccessResponse=v;var b=function(u,m,h){return{jsonrpc:e.JSONRPC,id:u,method:m,params:h}};e.createJSONRPCRequest=b;var y=function(u,m){return{jsonrpc:e.JSONRPC,method:u,params:m}};e.createJSONRPCNotification=y})(Tt);var zt={};Object.defineProperty(zt,"__esModule",{value:!0});zt.DefaultErrorCode=void 0;zt.DefaultErrorCode=0;var On=ke&&ke.__awaiter||function(e,a,t,s){function r(n){return n instanceof t?n:new t(function(i){i(n)})}return new(t||(t=Promise))(function(n,i){function o(v){try{c(s.next(v))}catch(b){i(b)}}function l(v){try{c(s.throw(v))}catch(b){i(b)}}function c(v){v.done?n(v.value):r(v.value).then(o,l)}c((s=s.apply(e,a||[])).next())})},qn=ke&&ke.__generator||function(e,a){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,r,n,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(v){return l([c,v])}}function l(c){if(s)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(t=0)),t;)try{if(s=1,r&&(n=c[0]&2?r.return:c[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,c[1])).done)return n;switch(r=0,n&&(c=[c[0]&2,n.value]),c[0]){case 0:case 1:n=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){t.label=c[1];break}if(c[0]===6&&t.label<n[1]){t.label=n[1],n=c;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(c);break}n[2]&&t.ops.pop(),t.trys.pop();continue}c=a.call(e,t)}catch(v){c=[6,v],r=0}finally{s=n=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.JSONRPCClient=void 0;var ct=Tt,an=zt,Xi=function(){function e(a,t){this._send=a,this.createID=t,this.idToResolveMap=new Map,this.id=0}return e.prototype._createID=function(){return this.createID?this.createID():++this.id},e.prototype.timeout=function(a,t){var s=this;t===void 0&&(t=function(i){return(0,ct.createJSONRPCErrorResponse)(i,an.DefaultErrorCode,"Request timeout")});var r=function(i,o){var l=setTimeout(function(){i.forEach(function(c){var v=s.idToResolveMap.get(c);v&&(s.idToResolveMap.delete(c),v(t(c)))})},a);return o().then(function(c){return clearTimeout(l),c},function(c){return clearTimeout(l),Promise.reject(c)})},n=function(i,o){var l=(Array.isArray(i)?i:[i]).map(function(c){return c.id}).filter(Bn);return r(l,function(){return s.requestAdvanced(i,o)})};return{request:function(i,o,l){var c=s._createID();return r([c],function(){return s.requestWithID(i,o,l,c)})},requestAdvanced:function(i,o){return n(i,o)}}},e.prototype.request=function(a,t,s){return this.requestWithID(a,t,s,this._createID())},e.prototype.requestWithID=function(a,t,s,r){return On(this,void 0,void 0,function(){var n,i;return qn(this,function(o){switch(o.label){case 0:return n=(0,ct.createJSONRPCRequest)(r,a,t),[4,this.requestAdvanced(n,s)];case 1:return i=o.sent(),i.result!==void 0&&!i.error?[2,i.result]:i.result===void 0&&i.error?[2,Promise.reject(new ct.JSONRPCErrorException(i.error.message,i.error.code,i.error.data))]:[2,Promise.reject(new Error("An unexpected error occurred"))]}})})},e.prototype.requestAdvanced=function(a,t){var s=this,r=Array.isArray(a);Array.isArray(a)||(a=[a]);var n=a.filter(function(l){return Bn(l.id)}),i=n.map(function(l){return new Promise(function(c){return s.idToResolveMap.set(l.id,c)})}),o=Promise.all(i).then(function(l){return r||!l.length?l:l[0]});return this.send(r?a:a[0],t).then(function(){return o},function(l){return n.forEach(function(c){s.receive((0,ct.createJSONRPCErrorResponse)(c.id,an.DefaultErrorCode,l&&l.message||"Failed to send a request"))}),o})},e.prototype.notify=function(a,t,s){var r=(0,ct.createJSONRPCNotification)(a,t);this.send(r,s).then(void 0,function(){})},e.prototype.send=function(a,t){return On(this,void 0,void 0,function(){return qn(this,function(s){return[2,this._send(a,t)]})})},e.prototype.rejectAllPendingRequests=function(a){this.idToResolveMap.forEach(function(t,s){return t((0,ct.createJSONRPCErrorResponse)(s,an.DefaultErrorCode,a))}),this.idToResolveMap.clear()},e.prototype.receive=function(a){var t=this;Array.isArray(a)||(a=[a]),a.forEach(function(s){var r=t.idToResolveMap.get(s.id);r&&(t.idToResolveMap.delete(s.id),r(s))})},e}();Qt.JSONRPCClient=Xi;var Bn=function(e){return e!=null},Rr={};Object.defineProperty(Rr,"__esModule",{value:!0});var Gt={},jt=ke&&ke.__assign||function(){return jt=Object.assign||function(e){for(var a,t=1,s=arguments.length;t<s;t++){a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},jt.apply(this,arguments)},Nn=ke&&ke.__awaiter||function(e,a,t,s){function r(n){return n instanceof t?n:new t(function(i){i(n)})}return new(t||(t=Promise))(function(n,i){function o(v){try{c(s.next(v))}catch(b){i(b)}}function l(v){try{c(s.throw(v))}catch(b){i(b)}}function c(v){v.done?n(v.value):r(v.value).then(o,l)}c((s=s.apply(e,a||[])).next())})},In=ke&&ke.__generator||function(e,a){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,r,n,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(v){return l([c,v])}}function l(c){if(s)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(t=0)),t;)try{if(s=1,r&&(n=c[0]&2?r.return:c[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,c[1])).done)return n;switch(r=0,n&&(c=[c[0]&2,n.value]),c[0]){case 0:case 1:n=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){t.label=c[1];break}if(c[0]===6&&t.label<n[1]){t.label=n[1],n=c;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(c);break}n[2]&&t.ops.pop(),t.trys.pop();continue}c=a.call(e,t)}catch(v){c=[6,v],r=0}finally{s=n=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ea=ke&&ke.__spreadArray||function(e,a,t){if(t||arguments.length===2)for(var s=0,r=a.length,n;s<r;s++)(n||!(s in a))&&(n||(n=Array.prototype.slice.call(a,0,s)),n[s]=a[s]);return e.concat(n||Array.prototype.slice.call(a))};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.JSONRPCServer=void 0;var $e=Tt,ta=zt,na=function(){return(0,$e.createJSONRPCErrorResponse)(null,$e.JSONRPCErrorCode.ParseError,"Parse error")},ra=function(e){return(0,$e.createJSONRPCErrorResponse)((0,$e.isJSONRPCID)(e.id)?e.id:null,$e.JSONRPCErrorCode.InvalidRequest,"Invalid Request")},ia=function(e){return(0,$e.createJSONRPCErrorResponse)(e,$e.JSONRPCErrorCode.MethodNotFound,"Method not found")},aa=function(){function e(a){a===void 0&&(a={});var t;this.mapErrorToJSONRPCErrorResponse=ua,this.nameToMethodDictionary={},this.middleware=null,this.errorListener=(t=a.errorListener)!==null&&t!==void 0?t:console.warn}return e.prototype.hasMethod=function(a){return!!this.nameToMethodDictionary[a]},e.prototype.addMethod=function(a,t){this.addMethodAdvanced(a,this.toJSONRPCMethod(t))},e.prototype.toJSONRPCMethod=function(a){return function(t,s){var r=a(t.params,s);return Promise.resolve(r).then(function(n){return la(t.id,n)})}},e.prototype.addMethodAdvanced=function(a,t){var s;this.nameToMethodDictionary=jt(jt({},this.nameToMethodDictionary),(s={},s[a]=t,s))},e.prototype.receiveJSON=function(a,t){var s=this.tryParseRequestJSON(a);return s?this.receive(s,t):Promise.resolve(na())},e.prototype.tryParseRequestJSON=function(a){try{return JSON.parse(a)}catch{return null}},e.prototype.receive=function(a,t){return Array.isArray(a)?this.receiveMultiple(a,t):this.receiveSingle(a,t)},e.prototype.receiveMultiple=function(a,t){return Nn(this,void 0,void 0,function(){var s,r=this;return In(this,function(n){switch(n.label){case 0:return[4,Promise.all(a.map(function(i){return r.receiveSingle(i,t)}))];case 1:return s=n.sent().filter(oa),s.length===1?[2,s[0]]:s.length?[2,s]:[2,null]}})})},e.prototype.receiveSingle=function(a,t){return Nn(this,void 0,void 0,function(){var s,r;return In(this,function(n){switch(n.label){case 0:return s=this.nameToMethodDictionary[a.method],(0,$e.isJSONRPCRequest)(a)?[3,1]:[2,ra(a)];case 1:return[4,this.callMethod(s,a,t)];case 2:return r=n.sent(),[2,ca(a,r)]}})})},e.prototype.applyMiddleware=function(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];this.middleware?this.middleware=this.combineMiddlewares(ea([this.middleware],a,!0)):this.middleware=this.combineMiddlewares(a)},e.prototype.combineMiddlewares=function(a){return a.length?a.reduce(this.middlewareReducer):null},e.prototype.middlewareReducer=function(a,t){return function(s,r,n){return a(function(i,o){return t(s,i,o)},r,n)}},e.prototype.callMethod=function(a,t,s){var r=this,n=function(o,l){return a?a(o,l):o.id!==void 0?Promise.resolve(ia(o.id)):Promise.resolve(null)},i=function(o){return r.errorListener('An unexpected error occurred while executing "'.concat(t.method,'" JSON-RPC method:'),o),Promise.resolve(r.mapErrorToJSONRPCErrorResponseIfNecessary(t.id,o))};try{return(this.middleware||sa)(n,t,s).then(void 0,i)}catch(o){return i(o)}},e.prototype.mapErrorToJSONRPCErrorResponseIfNecessary=function(a,t){return a!==void 0?this.mapErrorToJSONRPCErrorResponse(a,t):null},e}();Gt.JSONRPCServer=aa;var oa=function(e){return e!==null},sa=function(e,a,t){return e(a,t)},la=function(e,a){return e!==void 0?(0,$e.createJSONRPCSuccessResponse)(e,a):null},ua=function(e,a){var t,s=(t=a==null?void 0:a.message)!==null&&t!==void 0?t:"An unexpected error occurred",r=ta.DefaultErrorCode,n;return a instanceof $e.JSONRPCErrorException&&(r=a.code,n=a.data),(0,$e.createJSONRPCErrorResponse)(e,r,s,n)},ca=function(e,a){return a||(e.id!==void 0?(0,$e.createJSONRPCErrorResponse)(e.id,$e.JSONRPCErrorCode.InternalError,"Internal error"):null)},Yt={},da=ke&&ke.__awaiter||function(e,a,t,s){function r(n){return n instanceof t?n:new t(function(i){i(n)})}return new(t||(t=Promise))(function(n,i){function o(v){try{c(s.next(v))}catch(b){i(b)}}function l(v){try{c(s.throw(v))}catch(b){i(b)}}function c(v){v.done?n(v.value):r(v.value).then(o,l)}c((s=s.apply(e,a||[])).next())})},fa=ke&&ke.__generator||function(e,a){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},s,r,n,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(v){return l([c,v])}}function l(c){if(s)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(t=0)),t;)try{if(s=1,r&&(n=c[0]&2?r.return:c[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,c[1])).done)return n;switch(r=0,n&&(c=[c[0]&2,n.value]),c[0]){case 0:case 1:n=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){t.label=c[1];break}if(c[0]===6&&t.label<n[1]){t.label=n[1],n=c;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(c);break}n[2]&&t.ops.pop(),t.trys.pop();continue}c=a.call(e,t)}catch(v){c=[6,v],r=0}finally{s=n=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.JSONRPCServerAndClient=void 0;var Pt=Tt,ha=function(){function e(a,t,s){s===void 0&&(s={});var r;this.server=a,this.client=t,this.errorListener=(r=s.errorListener)!==null&&r!==void 0?r:console.warn}return e.prototype.applyServerMiddleware=function(){for(var a,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];(a=this.server).applyMiddleware.apply(a,t)},e.prototype.hasMethod=function(a){return this.server.hasMethod(a)},e.prototype.addMethod=function(a,t){this.server.addMethod(a,t)},e.prototype.addMethodAdvanced=function(a,t){this.server.addMethodAdvanced(a,t)},e.prototype.timeout=function(a){return this.client.timeout(a)},e.prototype.request=function(a,t,s){return this.client.request(a,t,s)},e.prototype.requestAdvanced=function(a,t){return this.client.requestAdvanced(a,t)},e.prototype.notify=function(a,t,s){this.client.notify(a,t,s)},e.prototype.rejectAllPendingRequests=function(a){this.client.rejectAllPendingRequests(a)},e.prototype.receiveAndSend=function(a,t,s){return da(this,void 0,void 0,function(){var r,n;return fa(this,function(i){switch(i.label){case 0:return(0,Pt.isJSONRPCResponse)(a)||(0,Pt.isJSONRPCResponses)(a)?(this.client.receive(a),[3,4]):[3,1];case 1:return(0,Pt.isJSONRPCRequest)(a)||(0,Pt.isJSONRPCRequests)(a)?[4,this.server.receive(a,t)]:[3,3];case 2:return r=i.sent(),r?[2,this.client.send(r,s)]:[3,4];case 3:return n="Received an invalid JSON-RPC message",this.errorListener(n,a),[2,Promise.reject(new Error(n))];case 4:return[2]}})})},e}();Yt.JSONRPCServerAndClient=ha;(function(e){var a=ke&&ke.__createBinding||(Object.create?function(s,r,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(r,n);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(s,i,o)}:function(s,r,n,i){i===void 0&&(i=n),s[i]=r[n]}),t=ke&&ke.__exportStar||function(s,r){for(var n in s)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&a(r,s,n)};Object.defineProperty(e,"__esModule",{value:!0}),t(Qt,e),t(Rr,e),t(Tt,e),t(Gt,e),t(Yt,e)})(Ar);const Pe=new Ar.JSONRPCClient(e=>{window.adsk.fusionSendData("jsonrpc",JSON.stringify(e))});window.fusionJavaScriptHandler={handle:function(e,a){try{e=="jsonrpc"&&Pe.receive(JSON.parse(a))}catch{console.log("exception caught with command: "+e+", data: "+a)}return"OK"}};class va{constructor(){et(this,"isFusion360");et(this,"version");et(this,"latestVersion",3);et(this,"updateUrl","https://github.com/MapleLeafMakers/VoronConstruct360/releases");this.isFusion360=!0,this.version=-1}async get_version(){if(this.version===-1)try{this.version=await Pe.request("get_version",{})}catch{this.version=1}return this.version}async kv_get({key:a,or:t=null}){const s=await Pe.request("kv_get",{key:a});return s===null?t:s}async kv_mget({keys:a,pattern:t}){return await Pe.request("kv_mget",{keys:a,pattern:t})}async kv_set({key:a,value:t}){await Pe.request("kv_set",{key:a,value:t})}async kv_mset(a){await Pe.request("kv_mset",{obj:a})}async kv_keys({pattern:a}){return await Pe.request("kv_keys",{pattern:a})}async kv_del({key:a}){await Pe.request("kv_del",{key:a})}async kv_mdel({keys:a,pattern:t}){await Pe.request("kv_mdel",{keys:a,pattern:t})}async get_screenshot({width:a,height:t,transparent:s,antialias:r}){return await Pe.request("get_screenshot",{width:a,height:t,transparent:s,antialias:r})}async open_model({url:a,token:t,content_type:s,filename:r}){await Pe.request("open_model",{url:a,token:t,content_type:s,filename:this._version<2?void 0:r})}async import_model({url:a,token:t,content_type:s,filename:r}){await Pe.request("import_model",{url:a,token:t,content_type:s,filename:this._version<2?void 0:r})}async export_model({step:a,f3d:t}){return await Pe.request("export_model",{step:a,f3d:t})}async close(){await Pe.request("close",{})}async autothumb({url:a,content_type:t,token:s,width:r,height:n,transparent:i,antialias:o}){return await Pe.request("autothumb",{url:a,content_type:t,token:s,width:r,height:n,transparent:i,antialias:o})}}function pa(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}class ma{constructor(){et(this,"isFusion360");et(this,"version",1);et(this,"latestVersion",1);this.isFusion360=!1}async get_version(){return this.version}async kv_get({key:a,or:t}){const s=localStorage.getItem(a);return s===null?t:JSON.parse(s)}async kv_mget({keys:a,pattern:t}){const s={},r=[...a||[]];t&&r.push(...await this.kv_keys({pattern:t}));for(const n of r)s[n]=await this.kv_get({key:n});return s}async kv_set({key:a,value:t}){try{localStorage.setItem(a,JSON.stringify(t))}catch(s){if(!a.startsWith("cache:"))throw s}}async kv_mset(a){for(const[t,s]of Object.entries(a))try{localStorage.setItem(t,JSON.stringify(s))}catch(r){if(!t.startsWith("cache:"))throw r}}async kv_keys({pattern:a}){const t=new RegExp(`^${a.split("%").map(pa).join(".*")}$`),s=[];for(let r=0;r<localStorage.length;r++){const n=localStorage.key(r);n&&n.match(t)&&s.push(n)}return s}async kv_del({key:a}){localStorage.removeItem(a)}async kv_mdel({keys:a,pattern:t}){const s=[...a||[]];t&&s.push(...await this.kv_keys({pattern:t}));for(const r of s)localStorage.removeItem(r)}get_screenshot({}){throw new Error("Method not implemented.")}async open_model({url:a,token:t,content_type:s,filename:r}){const n=await wr({url:a,token:t}),i=URL.createObjectURL(n);r||(r="model");const o=document.createElement("a");o.href=i,o.download=`${r}.${s}`,o.setAttribute("target","_blank"),o.click(),URL.revokeObjectURL(i)}import_model({}){throw new Error("Method not implemented.")}export_model({}){throw new Error("Method not implemented.")}close(){throw new Error("Method not implemented.")}autothumb({}){throw new Error("Method not implemented.")}}const ga=async()=>{if(window.adsk===void 0&&(await new Promise(a=>setTimeout(a,100)),window.adsk===void 0))return new ma;const e=new va;try{console.log("Backend Version: ",await e.get_version())}catch(a){console.error(a)}return e};function fn(e){for(const a of e)a.type==="repo"||a.type==="org"?a.icon="mdi-github":a.type==="tree"?a.icon="mdi-folder":a.type==="blob"&&(a.icon="mdi-cube-outline"),a.selectable=a.type==="blob",a.expandable=a.type==="repo"||a.type==="tree"||a.type==="org",a.children&&fn(a.children)}const Xe=di("core",{state:()=>({globalCursor:"",search:"",tree:at([]),token:"",backend:{},preferences:{showThumbnails:!1,previewSize:128,showManagementUI:!1,interfaceUrl:""}}),getters:{},actions:{getTopLevelNode(e){return this.tree.filter(a=>a.id===e)[0]},async loadState(){this.backend=await ga();const{token:e,collections:a,preferences:t}=await this.backend.kv_mget({keys:["token","collections","preferences"]});if(e&&(this.token=e),a){const s=a;for(const r of s)r.selectable=!1,r.icon="mdi-github",Array.isArray(r.repositories)&&r.repositories.length>0&&(r.repositories=r.repositories.map(n=>typeof n=="string"?{repr:n,repo:n.split("/").slice(0,2).join("/"),path:n.split("/").slice(2).join("/"),branch:n.split("#")[1]||null}:n));this.tree=at(s);for(const r of this.tree)if(r.type==="repo")this.reloadCollection({nodeId:r.id});else if(r.type==="org")for(const n of r.children||[])this.reloadCollection({nodeId:n.id})}t&&Object.assign(this.preferences,t)},async saveToken(){this.backend.kv_set({key:"token",value:this.token})},async saveCollections(){this.backend.kv_set({key:"collections",value:this.tree.map(e=>({...e,children:(e.children||[]).filter(a=>a.type==="repo").map(a=>({...a,children:[]}))}))})},async savePreferences(){return this.backend.kv_set({key:"preferences",value:{...this.preferences}})},async reloadCollection({nodeId:e,startup:a}){a===void 0&&(a=!1);let t;for(const r of this.tree){if(r.type==="org"){const n=(r.children||[]).findIndex(i=>i.id===e);if(n!==-1){t=r.children[n];break}}if(r.id===e){t=r;break}}if(!t)throw new Error("Node not found");console.log("reloading collection",t),t.lazy="loading";let s;if(t.type==="repo")s=await Pn({repositories:t==null?void 0:t.repositories.map(r=>r.repr),token:this.token,index:!0,id_prefix:t.id,noCache:!1,setLoadingMessage:()=>null}),t.lazy=!1,fn(s),t.children=at(s);else if(t.type==="org"){s=(await kr({org:t.org,token:this.token})).map(r=>({...r,id:Vt()})),console.log("is org",s);for(const r of s)r.children=await Pn({repositories:r.repositories.map(n=>n.repr),token:this.token,id_prefix:r.id,noCache:!1,index:!0,setLoadingMessage:()=>null});s=s.filter(r=>{var n;return((n=r.children)==null?void 0:n.length)>0}),t.lazy=!1,fn(s),t.children=at(s),await this.saveCollections()}},async setNodeThumbnail(e){var t,s,r,n,i;const a=await Ft({url:((s=(t=e==null?void 0:e.content_types)==null?void 0:t.thumb)==null?void 0:s.url)||((n=(r=e==null?void 0:e.content_types)==null?void 0:r.svg)==null?void 0:n.url),token:this.token,content_type:(i=e==null?void 0:e.content_types)!=null&&i.thumb?"image/png":"image/svg+xml"});e.img=a}}});var Pr=Ee({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:a,emit:t}){let s=!1,r,n,i=null,o=null,l,c;function v(){r&&r(),r=null,s=!1,i!==null&&(clearTimeout(i),i=null),o!==null&&(clearTimeout(o),o=null),n!==void 0&&n.removeEventListener("transitionend",l),l=null}function b(h,g,p){g!==void 0&&(h.style.height=`${g}px`),h.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,s=!0,r=p}function y(h,g){h.style.overflowY=null,h.style.height=null,h.style.transition=null,v(),g!==c&&t(g)}function u(h,g){let p=0;n=h,s===!0?(v(),p=h.offsetHeight===h.scrollHeight?0:void 0):(c="hide",h.style.overflowY="hidden"),b(h,p,g),i=setTimeout(()=>{i=null,h.style.height=`${h.scrollHeight}px`,l=w=>{o=null,(Object(w)!==w||w.target===h)&&y(h,"show")},h.addEventListener("transitionend",l),o=setTimeout(l,e.duration*1.1)},100)}function m(h,g){let p;n=h,s===!0?v():(c="show",h.style.overflowY="hidden",p=h.scrollHeight),b(h,p,g),i=setTimeout(()=>{i=null,h.style.height=0,l=w=>{o=null,(Object(w)!==w||w.target===h)&&y(h,"hide")},h.addEventListener("transitionend",l),o=setTimeout(l,e.duration*1.1)},100)}return Ye(()=>{s===!0&&v()}),()=>ee(Jt,{css:!1,appear:e.appear,onEnter:u,onLeave:m},a.default)}}),ba=Ee({name:"QTooltip",inheritAttrs:!1,props:{...vr,...Zn,...Qn,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Mt},self:{type:String,default:"top middle",validator:Mt},offset:{type:Array,default:()=>[14,14],validator:br},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...Gn],setup(e,{slots:a,emit:t,attrs:s}){let r,n;const i=Re(),{proxy:{$q:o}}=i,l=oe(null),c=oe(!1),v=te(()=>Lt(e.anchor,o.lang.rtl)),b=te(()=>Lt(e.self,o.lang.rtl)),y=te(()=>e.persistent!==!0),{registerTick:u,removeTick:m}=_t(),{registerTimeout:h}=qt(),{transitionProps:g,transitionStyle:p}=Yn(e),{localScrollTarget:w,changeScrollEvent:S,unconfigureScrollTarget:E}=mr(e,de),{anchorEl:C,canShow:A,anchorEvents:R}=pr({showing:c,configureAnchorEl:X}),{show:M,hide:P}=Xn({showing:c,canShow:A,handleShow:$,handleHide:f,hideOnRouteChange:y,processOnMount:!0});Object.assign(R,{delayShow:K,delayHide:se});const{showPortal:W,hidePortal:Y,renderPortal:z}=er(i,l,T,"tooltip");if(o.platform.is.mobile===!0){const J={anchorEl:C,innerRef:l,onClickOutside(B){return P(B),B.target.classList.contains("q-dialog__backdrop")&&Be(B),!0}},k=te(()=>e.modelValue===null&&e.persistent!==!0&&c.value===!0);_e(k,B=>{(B===!0?gr:Dt)(J)}),Ye(()=>{Dt(J)})}function $(J){W(),u(()=>{n=new MutationObserver(()=>Q()),n.observe(l.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),Q(),de()}),r===void 0&&(r=_e(()=>o.screen.width+"|"+o.screen.height+"|"+e.self+"|"+e.anchor+"|"+o.lang.rtl,Q)),h(()=>{W(!0),t("show",J)},e.transitionDuration)}function f(J){m(),Y(),j(),h(()=>{Y(!0),t("hide",J)},e.transitionDuration)}function j(){n!==void 0&&(n.disconnect(),n=void 0),r!==void 0&&(r(),r=void 0),E(),Ge(R,"tooltipTemp")}function Q(){mn({targetEl:l.value,offset:e.offset,anchorEl:C.value,anchorOrigin:v.value,selfOrigin:b.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function K(J){if(o.platform.is.mobile===!0){wt(),document.body.classList.add("non-selectable");const k=C.value,B=["touchmove","touchcancel","touchend","click"].map(N=>[k,N,"delayHide","passiveCapture"]);Me(R,"tooltipTemp",B)}h(()=>{M(J)},e.delay)}function se(J){o.platform.is.mobile===!0&&(Ge(R,"tooltipTemp"),wt(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),h(()=>{P(J)},e.hideDelay)}function X(){if(e.noParentEvent===!0||C.value===null)return;const J=o.platform.is.mobile===!0?[[C.value,"touchstart","delayShow","passive"]]:[[C.value,"mouseenter","delayShow","passive"],[C.value,"mouseleave","delayHide","passive"]];Me(R,"anchor",J)}function de(){if(C.value!==null||e.scrollTarget!==void 0){w.value=tr(C.value,e.scrollTarget);const J=e.noParentEvent===!0?Q:P;S(w.value,J)}}function L(){return c.value===!0?ee("div",{...s,ref:l,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",s.class],style:[s.style,p.value],role:"tooltip"},Fe(a.default)):null}function T(){return ee(Jt,g.value,L)}return Ye(j),Object.assign(i.proxy,{updatePosition:Q}),z}});const ya=["none","strict","leaf","leaf-filtered"];function $n(e,a,t,s){return Object.defineProperty(e,a,{get:t,set:s,enumerable:!0}),e}var _a=fi(rt({name:"RepoTree",props:{...tt,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:e=>ya.includes(e)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String,showThumbnails:Boolean,showManagementUI:Boolean,isFusionBackend:Boolean},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide","action:import","action:reload","action:open","action:upload","action:folder-download"],setup(e,{slots:a,emit:t}){const{proxy:s}=Re(),{$q:r}=s,n=nt(e,r),i=oe({}),o=oe(e.ticked||[]),l=oe(e.expanded||[]);let c={};nr(()=>{c={}});const v=te(()=>`q-tree q-tree--${e.dense===!0?"dense":"standard"}`+(e.noConnectors===!0?" q-tree--no-connectors":"")+(n.value===!0?" q-tree--dark":"")+(e.color!==void 0?` text-${e.color}`:"")),b=te(()=>e.selected!==void 0),y=te(()=>e.icon||r.iconSet.tree.icon),u=te(()=>e.controlColor||e.color),m=te(()=>e.textColor!==void 0?` text-${e.textColor}`:""),h=te(()=>{const k=e.selectedColor||e.color;return k?` text-${k}`:""}),g=te(()=>e.filterMethod!==void 0?e.filterMethod:(k,B)=>{const N=B.toLowerCase();return k[e.labelKey]&&k[e.labelKey].toLowerCase().indexOf(N)>-1}),p=te(()=>{const k={},B=(N,H)=>{const I=N.tickStrategy||(H?H.tickStrategy:e.tickStrategy),F=N[e.nodeKey],ie=N[e.childrenKey]&&Array.isArray(N[e.childrenKey])&&N[e.childrenKey].length!==0,fe=N.disabled!==!0&&b.value===!0&&N.selectable!==!1,ae=N.disabled!==!0&&N.expandable!==!1,ge=I!=="none",d=I==="strict",V=I==="leaf-filtered",U=I==="leaf"||I==="leaf-filtered";let x=N.disabled!==!0&&N.tickable!==!1;U===!0&&x===!0&&H&&H.tickable!==!0&&(x=!1);let _=N.lazy;_===!0&&i.value[F]!==void 0&&Array.isArray(N[e.childrenKey])===!0&&(_=i.value[F]);const O={key:F,parent:H,isParent:ie,lazy:_,disabled:N.disabled,link:N.disabled!==!0&&(fe===!0||ae===!0&&(ie===!0||_===!0)),children:[],matchesFilter:e.filter?g.value(N,e.filter):!0,selected:F===e.selected&&fe===!0,selectable:fe,expanded:ie===!0?l.value.includes(F):!1,expandable:ae,noTick:N.noTick===!0||d!==!0&&_&&_!=="loaded",tickable:x,tickStrategy:I,hasTicking:ge,strictTicking:d,leafFilteredTicking:V,leafTicking:U,ticked:d===!0?o.value.includes(F):ie===!0?!1:o.value.includes(F)};if(k[F]=O,ie===!0&&(O.children=N[e.childrenKey].map(Z=>B(Z,O)),e.filter&&(O.matchesFilter!==!0?O.matchesFilter=O.children.some(Z=>Z.matchesFilter):O.noTick!==!0&&O.disabled!==!0&&O.tickable===!0&&V===!0&&O.children.every(Z=>Z.matchesFilter!==!0||Z.noTick===!0||Z.tickable!==!0)===!0&&(O.tickable=!1)),O.matchesFilter===!0&&(O.noTick!==!0&&d!==!0&&O.children.every(Z=>Z.noTick)===!0&&(O.noTick=!0),U))){if(O.ticked=!1,O.indeterminate=O.children.some(Z=>Z.indeterminate===!0),O.tickable=O.tickable===!0&&O.children.some(Z=>Z.tickable),O.indeterminate!==!0){const Z=O.children.reduce((D,q)=>q.ticked===!0?D+1:D,0);Z===O.children.length?O.ticked=!0:Z>0&&(O.indeterminate=!0)}O.indeterminate===!0&&(O.indeterminateNextState=O.children.every(Z=>Z.tickable!==!0||Z.ticked!==!0))}return O};return e.nodes.forEach(N=>B(N,null)),k});_e(()=>e.ticked,k=>{o.value=k}),_e(()=>e.expanded,k=>{l.value=k});function w(k){const B=[].reduce,N=(H,I)=>{if(H||!I)return H;if(Array.isArray(I)===!0)return B.call(Object(I),N,H);if(I[e.nodeKey]===k)return I;if(I[e.childrenKey])return N(null,I[e.childrenKey])};return N(null,e.nodes)}function S(){return o.value.map(k=>w(k))}function E(){return l.value.map(k=>w(k))}function C(k){return k&&p.value[k]?p.value[k].expanded:!1}function A(){e.expanded!==void 0?t("update:expanded",[]):l.value=[]}function R(){const k=[],B=N=>{N[e.childrenKey]&&N[e.childrenKey].length!==0&&N.expandable!==!1&&N.disabled!==!0&&(k.push(N[e.nodeKey]),N[e.childrenKey].forEach(B))};e.nodes.forEach(B),e.expanded!==void 0?t("update:expanded",k):l.value=k}function M(k,B,N=w(k),H=p.value[k]){if(H.lazy&&H.lazy!=="loaded"){if(H.lazy==="loading")return;i.value[k]="loading",Array.isArray(N[e.childrenKey])!==!0&&(N[e.childrenKey]=[]),t("lazyLoad",{node:N,key:k,done:I=>{i.value[k]="loaded",N[e.childrenKey]=Array.isArray(I)===!0?I:[],kt(()=>{const F=p.value[k];F&&F.isParent===!0&&P(k,!0)})},fail:()=>{delete i.value[k],N[e.childrenKey].length===0&&delete N[e.childrenKey]}})}else H.isParent===!0&&H.expandable===!0&&P(k,B)}function P(k,B){let N=l.value;const H=e.expanded!==void 0;if(H===!0&&(N=N.slice()),B){if(e.accordion&&p.value[k]){const I=[];p.value[k].parent?p.value[k].parent.children.forEach(F=>{F.key!==k&&F.expandable===!0&&I.push(F.key)}):e.nodes.forEach(F=>{const ie=F[e.nodeKey];ie!==k&&I.push(ie)}),I.length!==0&&(N=N.filter(F=>I.includes(F)===!1))}N=N.concat([k]).filter((I,F,ie)=>ie.indexOf(I)===F)}else N=N.filter(I=>I!==k);H===!0?t("update:expanded",N):l.value=N}function W(k){return k&&p.value[k]?p.value[k].ticked:!1}function Y(k,B){let N=o.value;const H=e.ticked!==void 0;H===!0&&(N=N.slice()),B?N=N.concat(k).filter((I,F,ie)=>ie.indexOf(I)===F):N=N.filter(I=>k.includes(I)===!1),H===!0&&t("update:ticked",N)}function z(k,B,N){const H={tree:s,node:k,key:N,color:e.color,dark:n.value};return $n(H,"expanded",()=>B.expanded,I=>{I!==B.expanded&&M(N,I)}),$n(H,"ticked",()=>B.ticked,I=>{I!==B.ticked&&Y([N],I)}),H}function $(k){return(e.filter?k.filter(B=>p.value[B[e.nodeKey]].matchesFilter):k).map(B=>X(B))}function f(k,B,N,H){return ee(ze,{onClick:I=>{Be(I),t(k,{nodeId:B})},tabindex:-1,size:"xs",padding:"none",style:{margin:0},flat:!0,stretch:!0},()=>[ee(Ae,{size:"xs",name:H}),ee(ba,{anchor:"center left",self:"center right",transitionShow:"jump-left",transitionHide:"jump-right"},()=>N)])}function j(k){const B=[];return k.type==="blob"?e.isFusionBackend?(B.push(f("action:import",k.id,"Import","mdi-import")),B.push(f("action:open",k.id,"Open","mdi-open-in-new"))):B.push(f("action:open",k.id,"Download","mdi-download")):k.type==="repo"||k.type=="org"?(B.push(f("action:edit",k.id,"Edit","mdi-pencil")),B.push(f("action:reload",k.id,"Reload","mdi-reload"))):k.type=="tree"&&!e.isFusionBackend&&B.push(f("action:folder-download",k.id,"Download","mdi-folder-download")),(k.type==="repo"||k.type==="tree")&&e.showManagementUI&&B.push(f("action:upload",k.id,"Upload","mdi-upload")),B}function Q(k){const B=k.img||k.avatar;if(B&&e.showThumbnails)return ee("img",{class:`q-tree__${k.img?"img":"avatar"} q-mr-sm`,src:B});if(k.icon!==void 0)return ee(Ae,{class:"q-tree__icon q-mr-sm",name:k.icon,color:k.iconColor,size:k.type==="blob"?e.showThumbnails?"42px":"24px":void 0})}function K(){t("afterShow")}function se(){t("afterHide")}function X(k){const B=k[e.nodeKey],N=p.value[B],H=k.header&&a[`header-${k.header}`]||a["default-header"],I=N.isParent===!0?$(k[e.childrenKey]):[],F=I.length!==0||N.lazy&&N.lazy!=="loaded";let ie=k.body&&a[`body-${k.body}`]||a["default-body"];const fe=H!==void 0||ie!==void 0?z(k,N,B):null;return ie!==void 0&&(ie=ee("div",{class:"q-tree__node-body relative-position"},[ee("div",{class:m.value},[ie(fe)])])),ee("div",{key:B,class:`q-tree__node relative-position q-tree__node--${F===!0?"parent":"child"}`},[ee("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(N.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(N.selected===!0?" q-tree__node--selected":"")+(N.disabled===!0?" q-tree__node--disabled":""),tabindex:N.link===!0?0:-1,onClick:ae=>{L(k,N,ae)},onKeypress(ae){pn(ae)!==!0&&(ae.keyCode===13?L(k,N,ae,!0):ae.keyCode===32&&T(k,N,ae,!0))}},[ee("div",{class:"q-focus-helper",tabindex:-1,ref:ae=>{c[N.key]=ae}}),N.lazy==="loading"?ee(rr,{class:"q-tree__spinner",color:u.value}):F===!0?ee(Ae,{class:"q-tree__arrow"+(N.expanded===!0?" q-tree__arrow--rotate":""),name:y.value,onClick(ae){T(k,N,ae)}}):null,N.hasTicking===!0&&N.noTick!==!0?ee(QCheckbox,{class:"q-tree__tickbox",modelValue:N.indeterminate===!0?null:N.ticked,color:u.value,dark:n.value,dense:!0,keepColor:!0,disable:N.tickable!==!0,onKeydown:Be,"onUpdate:modelValue":ae=>{J(N,ae)}}):null,ee("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(N.selected===!0?h.value:m.value)},[H?H(fe):[Q(k),ee("div",k[e.labelKey])],ee("div",{style:{flex:1}}),ee("div",{class:"q-tree__hovercontrol"},j(k))])]),F===!0?e.noTransition===!0?ee("div",{class:"q-tree__node-collapsible"+m.value,key:`${B}__q`},[ie,ee("div",{class:"q-tree__children"+(N.disabled===!0?" q-tree__node--disabled":"")},N.expanded?I:null)]):ee(Pr,{duration:e.duration,onShow:K,onHide:se},()=>we(ee("div",{class:"q-tree__node-collapsible"+m.value,key:`${B}__q`},[ie,ee("div",{class:"q-tree__children"+(N.disabled===!0?" q-tree__node--disabled":"")},I)]),[[ir,N.expanded]])):ie])}function de(k){const B=c[k];B&&B.focus()}function L(k,B,N,H){H!==!0&&B.selectable!==!1&&de(B.key),b.value&&B.selectable?e.noSelectionUnset===!1?t("update:selected",B.key!==e.selected?B.key:null):B.key!==e.selected&&t("update:selected",B.key===void 0?null:B.key):T(k,B,N,H),typeof k.handler=="function"&&k.handler(k)}function T(k,B,N,H){N!==void 0&&Be(N),H!==!0&&B.selectable!==!1&&de(B.key),M(B.key,!B.expanded,k,B)}function J(k,B){if(k.indeterminate===!0&&(B=k.indeterminateNextState),k.strictTicking)Y([k.key],B);else if(k.leafTicking){const N=[],H=I=>{I.isParent?(B!==!0&&I.noTick!==!0&&I.tickable===!0&&N.push(I.key),I.leafTicking===!0&&I.children.forEach(H)):I.noTick!==!0&&I.tickable===!0&&(I.leafFilteredTicking!==!0||I.matchesFilter===!0)&&N.push(I.key)};H(k),Y(N,B)}}return e.defaultExpandAll===!0&&R(),Object.assign(s,{getNodeByKey:w,getTickedNodes:S,getExpandedNodes:E,isExpanded:C,collapseAll:A,expandAll:R,setExpanded:M,isTicked:W,setTicked:Y}),()=>{const k=$(e.nodes);return ee("div",{class:v.value},k.length===0?e.filter?e.noResultsLabel||r.lang.tree.noResults:e.noNodesLabel||r.lang.tree.noNodes:k)}}}));function Or(){return Bt(hi)}let wa=0;const ka=["click","keydown"],xa={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${wa++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Sa(e,a,t,s){const r=Bt(ar,Ve);if(r===Ve)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Ve;const{proxy:n}=Re(),i=oe(null),o=oe(null),l=oe(null),c=te(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),v=te(()=>r.currentModel.value===e.name),b=te(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(v.value===!0?" q-tab--active"+(r.tabProps.value.activeClass?" "+r.tabProps.value.activeClass:"")+(r.tabProps.value.activeColor?` text-${r.tabProps.value.activeColor}`:"")+(r.tabProps.value.activeBgColor?` bg-${r.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&r.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||r.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(s!==void 0?s.linkClass.value:"")),y=te(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(r.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),u=te(()=>e.disable===!0||r.hasFocus.value===!0||v.value===!1&&r.hasActiveTab.value===!0?-1:e.tabindex||0);function m(S,E){if(E!==!0&&i.value!==null&&i.value.focus(),e.disable===!0){s!==void 0&&s.hasRouterLink.value===!0&&Be(S);return}if(s===void 0){r.updateModel({name:e.name}),t("click",S);return}if(s.hasRouterLink.value===!0){const C=(A={})=>{let R;const M=A.to===void 0||pi(A.to,e.to)===!0?r.avoidRouteWatcher=Vt():null;return s.navigateToRouterLink(S,{...A,returnRouterError:!0}).catch(P=>{R=P}).then(P=>{if(M===r.avoidRouteWatcher&&(r.avoidRouteWatcher=!1,R===void 0&&(P===void 0||P.message.startsWith("Avoided redundant navigation")===!0)&&r.updateModel({name:e.name})),A.returnRouterError===!0)return R!==void 0?Promise.reject(R):P})};t("click",S,C),S.defaultPrevented!==!0&&C();return}t("click",S)}function h(S){Ht(S,[13,32])?m(S,!0):pn(S)!==!0&&S.keyCode>=35&&S.keyCode<=40&&S.altKey!==!0&&S.metaKey!==!0&&r.onKbdNavigate(S.keyCode,n.$el)===!0&&Be(S),t("keydown",S)}function g(){const S=r.tabProps.value.narrowIndicator,E=[],C=ee("div",{ref:l,class:["q-tab__indicator",r.tabProps.value.indicatorClass]});e.icon!==void 0&&E.push(ee(Ae,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&E.push(ee("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&E.push(e.alertIcon!==void 0?ee(Ae,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):ee("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),S===!0&&E.push(C);const A=[ee("div",{class:"q-focus-helper",tabindex:-1,ref:i}),ee("div",{class:y.value},Wt(a.default,E))];return S===!1&&A.push(C),A}const p={name:te(()=>e.name),rootRef:o,tabIndicatorRef:l,routeData:s};Ye(()=>{r.unregisterTab(p)}),ut(()=>{r.registerTab(p)});function w(S,E){const C={ref:o,class:b.value,tabindex:u.value,role:"tab","aria-selected":v.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:m,onKeydown:h,...E};return we(ee(S,C,g()),[[vi,c.value]])}return{renderTab:w,$tabs:r}}var Ca=Ee({name:"QTab",props:xa,emits:ka,setup(e,{slots:a,emit:t}){const{renderTab:s}=Sa(e,a,t);return()=>s("div")}});const Ta=ee("div",{class:"q-space"});var qr=Ee({name:"QSpace",setup(){return()=>Ta}});let Br=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const a=document.createElement("div");Object.assign(a.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(a),e.scrollLeft=-1e3,Br=e.scrollLeft>=0,e.remove()}function za(e,a,t){const s=t===!0?["left","right"]:["top","bottom"];return`absolute-${a===!0?s[0]:s[1]}${e?` text-${e}`:""}`}const Ea=["left","center","right","justify"];var Aa=Ee({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>Ea.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:a,emit:t}){const{proxy:s}=Re(),{$q:r}=s,{registerTick:n}=_t(),{registerTick:i}=_t(),{registerTick:o}=_t(),{registerTimeout:l,removeTimeout:c}=qt(),{registerTimeout:v,removeTimeout:b}=qt(),y=oe(null),u=oe(null),m=oe(e.modelValue),h=oe(!1),g=oe(!0),p=oe(!1),w=oe(!1),S=[],E=oe(0),C=oe(!1);let A=null,R=null,M;const P=te(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:za(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),W=te(()=>{const D=E.value,q=m.value;for(let G=0;G<D;G++)if(S[G].name.value===q)return!0;return!1}),Y=te(()=>`q-tabs__content--align-${h.value===!0?"left":w.value===!0?"justify":e.align}`),z=te(()=>`q-tabs row no-wrap items-center q-tabs--${h.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),$=te(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+Y.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),f=te(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),j=te(()=>e.vertical!==!0&&r.lang.rtl===!0),Q=te(()=>Br===!1&&j.value===!0);_e(j,T),_e(()=>e.modelValue,D=>{K({name:D,setCurrent:!0,skipEmit:!0})}),_e(()=>e.outsideArrows,se);function K({name:D,setCurrent:q,skipEmit:G}){m.value!==D&&(G!==!0&&e["onUpdate:modelValue"]!==void 0&&t("update:modelValue",D),(q===!0||e["onUpdate:modelValue"]===void 0)&&(de(m.value,D),m.value=D))}function se(){n(()=>{X({width:y.value.offsetWidth,height:y.value.offsetHeight})})}function X(D){if(f.value===void 0||u.value===null)return;const q=D[f.value.container],G=Math.min(u.value[f.value.scroll],Array.prototype.reduce.call(u.value.children,(ne,le)=>ne+(le[f.value.content]||0),0)),re=q>0&&G>q;h.value=re,re===!0&&i(T),w.value=q<parseInt(e.breakpoint,10)}function de(D,q){const G=D!=null&&D!==""?S.find(ne=>ne.name.value===D):null,re=q!=null&&q!==""?S.find(ne=>ne.name.value===q):null;if(G&&re){const ne=G.tabIndicatorRef.value,le=re.tabIndicatorRef.value;A!==null&&(clearTimeout(A),A=null),ne.style.transition="none",ne.style.transform="none",le.style.transition="none",le.style.transform="none";const he=ne.getBoundingClientRect(),me=le.getBoundingClientRect();le.style.transform=e.vertical===!0?`translate3d(0,${he.top-me.top}px,0) scale3d(1,${me.height?he.height/me.height:1},1)`:`translate3d(${he.left-me.left}px,0,0) scale3d(${me.width?he.width/me.width:1},1,1)`,o(()=>{A=setTimeout(()=>{A=null,le.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",le.style.transform="none"},70)})}re&&h.value===!0&&L(re.rootRef.value)}function L(D){const{left:q,width:G,top:re,height:ne}=u.value.getBoundingClientRect(),le=D.getBoundingClientRect();let he=e.vertical===!0?le.top-re:le.left-q;if(he<0){u.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(he),T();return}he+=e.vertical===!0?le.height-ne:le.width-G,he>0&&(u.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(he),T())}function T(){const D=u.value;if(D===null)return;const q=D.getBoundingClientRect(),G=e.vertical===!0?D.scrollTop:Math.abs(D.scrollLeft);j.value===!0?(g.value=Math.ceil(G+q.width)<D.scrollWidth-1,p.value=G>0):(g.value=G>0,p.value=e.vertical===!0?Math.ceil(G+q.height)<D.scrollHeight:Math.ceil(G+q.width)<D.scrollWidth)}function J(D){R!==null&&clearInterval(R),R=setInterval(()=>{F(D)===!0&&N()},5)}function k(){J(Q.value===!0?Number.MAX_SAFE_INTEGER:0)}function B(){J(Q.value===!0?0:Number.MAX_SAFE_INTEGER)}function N(){R!==null&&(clearInterval(R),R=null)}function H(D,q){const G=Array.prototype.filter.call(u.value.children,me=>me===q||me.matches&&me.matches(".q-tab.q-focusable")===!0),re=G.length;if(re===0)return;if(D===36)return L(G[0]),G[0].focus(),!0;if(D===35)return L(G[re-1]),G[re-1].focus(),!0;const ne=D===(e.vertical===!0?38:37),le=D===(e.vertical===!0?40:39),he=ne===!0?-1:le===!0?1:void 0;if(he!==void 0){const me=j.value===!0?-1:1,Ce=G.indexOf(q)+he*me;return Ce>=0&&Ce<re&&(L(G[Ce]),G[Ce].focus({preventScroll:!0})),!0}}const I=te(()=>Q.value===!0?{get:D=>Math.abs(D.scrollLeft),set:(D,q)=>{D.scrollLeft=-q}}:e.vertical===!0?{get:D=>D.scrollTop,set:(D,q)=>{D.scrollTop=q}}:{get:D=>D.scrollLeft,set:(D,q)=>{D.scrollLeft=q}});function F(D){const q=u.value,{get:G,set:re}=I.value;let ne=!1,le=G(q);const he=D<le?-1:1;return le+=he*5,le<0?(ne=!0,le=0):(he===-1&&le<=D||he===1&&le>=D)&&(ne=!0,le=D),re(q,le),T(),ne}function ie(D,q){for(const G in D)if(D[G]!==q[G])return!1;return!0}function fe(){let D=null,q={matchedLen:0,queryDiff:9999,hrefLen:0};const G=S.filter(he=>he.routeData!==void 0&&he.routeData.hasRouterLink.value===!0),{hash:re,query:ne}=s.$route,le=Object.keys(ne).length;for(const he of G){const me=he.routeData.exact.value===!0;if(he.routeData[me===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Ce,query:He,matched:De,href:it}=he.routeData.resolvedLink.value,xe=Object.keys(He).length;if(me===!0){if(Ce!==re||xe!==le||ie(ne,He)===!1)continue;D=he.name.value;break}if(Ce!==""&&Ce!==re||xe!==0&&ie(He,ne)===!1)continue;const Ne={matchedLen:De.length,queryDiff:le-xe,hrefLen:it.length-Ce.length};if(Ne.matchedLen>q.matchedLen){D=he.name.value,q=Ne;continue}else if(Ne.matchedLen!==q.matchedLen)continue;if(Ne.queryDiff<q.queryDiff)D=he.name.value,q=Ne;else if(Ne.queryDiff!==q.queryDiff)continue;Ne.hrefLen>q.hrefLen&&(D=he.name.value,q=Ne)}D===null&&S.some(he=>he.routeData===void 0&&he.name.value===m.value)===!0||K({name:D,setCurrent:!0})}function ae(D){if(c(),C.value!==!0&&y.value!==null&&D.target&&typeof D.target.closest=="function"){const q=D.target.closest(".q-tab");q&&y.value.contains(q)===!0&&(C.value=!0,h.value===!0&&L(q))}}function ge(){l(()=>{C.value=!1},30)}function d(){_.avoidRouteWatcher===!1?v(fe):b()}function V(){if(M===void 0){const D=_e(()=>s.$route.fullPath,d);M=()=>{D(),M=void 0}}}function U(D){S.push(D),E.value++,se(),D.routeData===void 0||s.$route===void 0?v(()=>{if(h.value===!0){const q=m.value,G=q!=null&&q!==""?S.find(re=>re.name.value===q):null;G&&L(G.rootRef.value)}}):(V(),D.routeData.hasRouterLink.value===!0&&d())}function x(D){S.splice(S.indexOf(D),1),E.value--,se(),M!==void 0&&D.routeData!==void 0&&(S.every(q=>q.routeData===void 0)===!0&&M(),d())}const _={currentModel:m,tabProps:P,hasFocus:C,hasActiveTab:W,registerTab:U,unregisterTab:x,verifyRouteModel:d,updateModel:K,onKbdNavigate:H,avoidRouteWatcher:!1};mi(ar,_);function O(){A!==null&&clearTimeout(A),N(),M!==void 0&&M()}let Z;return Ye(O),or(()=>{Z=M!==void 0,O()}),sr(()=>{Z===!0&&V(),se()}),()=>ee("div",{ref:y,class:z.value,role:"tablist",onFocusin:ae,onFocusout:ge},[ee(un,{onResize:X}),ee("div",{ref:u,class:$.value,onScroll:T},Fe(a.default)),ee(Ae,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(g.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||r.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:k,onTouchstartPassive:k,onMouseupPassive:N,onMouseleavePassive:N,onTouchendPassive:N}),ee(Ae,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(p.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||r.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:B,onTouchstartPassive:B,onMouseupPassive:N,onMouseleavePassive:N,onTouchendPassive:N})])}});const yn={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Ra=Object.keys(yn);yn.all=!0;function Ut(e){const a={};for(const t of Ra)e[t]===!0&&(a[t]=!0);return Object.keys(a).length===0?yn:(a.horizontal===!0?a.left=a.right=!0:a.left===!0&&a.right===!0&&(a.horizontal=!0),a.vertical===!0?a.up=a.down=!0:a.up===!0&&a.down===!0&&(a.vertical=!0),a.horizontal===!0&&a.vertical===!0&&(a.all=!0),a)}const Pa=["INPUT","TEXTAREA"];function Kt(e,a){return a.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof a.handler=="function"&&Pa.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(a.uid)===-1)}function Oa(e){const a=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((t,s)=>{const r=parseFloat(t);r&&(a[s]=r)}),a}var qa=vn({name:"touch-swipe",beforeMount(e,{value:a,arg:t,modifiers:s}){if(s.mouse!==!0&&Ue.has.touch!==!0)return;const r=s.mouseCapture===!0?"Capture":"",n={handler:a,sensitivity:Oa(t),direction:Ut(s),noop:lr,mouseStart(i){Kt(i,n)&&ur(i)&&(Me(n,"temp",[[document,"mousemove","move",`notPassive${r}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(i,!0))},touchStart(i){if(Kt(i,n)){const o=i.target;Me(n,"temp",[[o,"touchmove","move","notPassiveCapture"],[o,"touchcancel","end","notPassiveCapture"],[o,"touchend","end","notPassiveCapture"]]),n.start(i)}},start(i,o){Ue.is.firefox===!0&&ht(e,!0);const l=mt(i);n.event={x:l.left,y:l.top,time:Date.now(),mouse:o===!0,dir:!1}},move(i){if(n.event===void 0)return;if(n.event.dir!==!1){Be(i);return}const o=Date.now()-n.event.time;if(o===0)return;const l=mt(i),c=l.left-n.event.x,v=Math.abs(c),b=l.top-n.event.y,y=Math.abs(b);if(n.event.mouse!==!0){if(v<n.sensitivity[1]&&y<n.sensitivity[1]){n.end(i);return}}else if(window.getSelection().toString()!==""){n.end(i);return}else if(v<n.sensitivity[2]&&y<n.sensitivity[2])return;const u=v/o,m=y/o;n.direction.vertical===!0&&v<y&&v<100&&m>n.sensitivity[0]&&(n.event.dir=b<0?"up":"down"),n.direction.horizontal===!0&&v>y&&y<100&&u>n.sensitivity[0]&&(n.event.dir=c<0?"left":"right"),n.direction.up===!0&&v<y&&b<0&&v<100&&m>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&v<y&&b>0&&v<100&&m>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&v>y&&c<0&&y<100&&u>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&v>y&&c>0&&y<100&&u>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(Be(i),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),wt(),n.styleCleanup=h=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const g=()=>{document.body.classList.remove("no-pointer-events--children")};h===!0?setTimeout(g,50):g()}),n.handler({evt:i,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:o,distance:{x:v,y}})):n.end(i)},end(i){n.event!==void 0&&(Ge(n,"temp"),Ue.is.firefox===!0&&ht(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),i!==void 0&&n.event.dir!==!1&&Be(i),n.event=void 0)}};if(e.__qtouchswipe=n,s.mouse===!0){const i=s.mouseCapture===!0||s.mousecapture===!0?"Capture":"";Me(n,"main",[[e,"mousedown","mouseStart",`passive${i}`]])}Ue.has.touch===!0&&Me(n,"main",[[e,"touchstart","touchStart",`passive${s.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const t=e.__qtouchswipe;t!==void 0&&(a.oldValue!==a.value&&(typeof a.value!="function"&&t.end(),t.handler=a.value),t.direction=Ut(a.modifiers))},beforeUnmount(e){const a=e.__qtouchswipe;a!==void 0&&(Ge(a,"main"),Ge(a,"temp"),Ue.is.firefox===!0&&ht(e,!1),a.styleCleanup!==void 0&&a.styleCleanup(),delete e.__qtouchswipe)}});function Ba(){const e=new Map;return{getCache:function(a,t){return e[a]===void 0?e[a]=t:e[a]},getCacheWithFn:function(a,t){return e[a]===void 0?e[a]=t():e[a]}}}const Na={name:{required:!0},disable:Boolean},Dn={setup(e,{slots:a}){return()=>ee("div",{class:"q-panel scroll",role:"tabpanel"},Fe(a.default))}},Ia={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},$a=["update:modelValue","beforeTransition","transition"];function Da(){const{props:e,emit:a,proxy:t}=Re(),{getCacheWithFn:s}=Ba();let r,n;const i=oe(null),o=oe(null);function l($){const f=e.vertical===!0?"up":"left";R((t.$q.lang.rtl===!0?-1:1)*($.direction===f?1:-1))}const c=te(()=>[[qa,l,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),v=te(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),b=te(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),y=te(()=>`--q-transition-duration: ${e.transitionDuration}ms`),u=te(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),m=te(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),h=te(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);_e(()=>e.modelValue,($,f)=>{const j=S($)===!0?E($):-1;n!==!0&&A(j===-1?0:j<E(f)?-1:1),i.value!==j&&(i.value=j,a("beforeTransition",$,f),kt(()=>{a("transition",$,f)}))});function g(){R(1)}function p(){R(-1)}function w($){a("update:modelValue",$)}function S($){return $!=null&&$!==""}function E($){return r.findIndex(f=>f.props.name===$&&f.props.disable!==""&&f.props.disable!==!0)}function C(){return r.filter($=>$.props.disable!==""&&$.props.disable!==!0)}function A($){const f=$!==0&&e.animated===!0&&i.value!==-1?"q-transition--"+($===-1?v.value:b.value):null;o.value!==f&&(o.value=f)}function R($,f=i.value){let j=f+$;for(;j>-1&&j<r.length;){const Q=r[j];if(Q!==void 0&&Q.props.disable!==""&&Q.props.disable!==!0){A($),n=!0,a("update:modelValue",Q.props.name),setTimeout(()=>{n=!1});return}j+=$}e.infinite===!0&&r.length!==0&&f!==-1&&f!==r.length&&R($,$===-1?r.length:-1)}function M(){const $=E(e.modelValue);return i.value!==$&&(i.value=$),!0}function P(){const $=S(e.modelValue)===!0&&M()&&r[i.value];return e.keepAlive===!0?[ee(bi,m.value,[ee(h.value===!0?s(u.value,()=>({...Dn,name:u.value})):Dn,{key:u.value,style:y.value},()=>$)])]:[ee("div",{class:"q-panel scroll",style:y.value,key:u.value,role:"tabpanel"},[$])]}function W(){if(r.length!==0)return e.animated===!0?[ee(Jt,{name:o.value},P)]:P()}function Y($){return r=gi(Fe($.default,[])).filter(f=>f.props!==null&&f.props.slot===void 0&&S(f.props.name)===!0),r.length}function z(){return r}return Object.assign(t,{next:g,previous:p,goTo:w}),{panelIndex:i,panelDirectives:c,updatePanelsList:Y,updatePanelIndex:M,getPanelContent:W,getEnabledPanels:C,getPanels:z,isValidPanelName:S,keepAliveProps:m,needsUniqueKeepAliveWrapper:h,goToPanelByOffset:R,goToPanel:w,nextPanel:g,previousPanel:p}}var Ma=Ee({name:"QTabPanel",props:Na,setup(e,{slots:a}){return()=>ee("div",{class:"q-tab-panel",role:"tabpanel"},Fe(a.default))}}),La=Ee({name:"QTabPanels",props:{...Ia,...tt},emits:$a,setup(e,{slots:a}){const t=Re(),s=nt(e,t.proxy.$q),{updatePanelsList:r,getPanelContent:n,panelDirectives:i}=Da(),o=te(()=>"q-tab-panels q-panel-parent"+(s.value===!0?" q-tab-panels--dark q-dark":""));return()=>(r(a),yi("div",{class:o.value},n(),"pan",e.swipeable,()=>i.value))}});function Nr(e){return _i()?(wi(e),!0):!1}function Ir(e){return typeof e=="function"?e():be(e)}const Xt=typeof window!="undefined",$r=()=>{};function Fa(...e){if(e.length!==1)return ki(...e);const a=e[0];return typeof a=="function"?xi(Si(()=>({get:a,set:$r}))):oe(a)}function ja(e,a=!0){Re()?ut(e):a?e():kt(e)}function Dr(e){var a;const t=Ir(e);return(a=t==null?void 0:t.$el)!=null?a:t}const Et=Xt?window:void 0;Xt&&window.document;Xt&&window.navigator;Xt&&window.location;function Oe(...e){let a,t,s,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,s,r]=e,a=Et):[a,t,s,r]=e,!a)return $r;Array.isArray(t)||(t=[t]),Array.isArray(s)||(s=[s]);const n=[],i=()=>{n.forEach(v=>v()),n.length=0},o=(v,b,y,u)=>(v.addEventListener(b,y,u),()=>v.removeEventListener(b,y,u)),l=_e(()=>[Dr(a),Ir(r)],([v,b])=>{i(),v&&n.push(...t.flatMap(y=>s.map(u=>o(v,y,u,b))))},{immediate:!0,flush:"post"}),c=()=>{l(),i()};return Nr(c),c}function Ua(){const e=oe(!1);return Re()&&ut(()=>{e.value=!0}),e}function Ka(e){const a=Ua();return te(()=>(a.value,Boolean(e())))}function Wa(e,a={}){const{window:t=Et}=a,s=Ka(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function");let r;const n=oe(!1),i=()=>{!r||("removeEventListener"in r?r.removeEventListener("change",o):r.removeListener(o))},o=()=>{!s.value||(i(),r=t.matchMedia(Fa(e).value),n.value=!!(r!=null&&r.matches),r&&("addEventListener"in r?r.addEventListener("change",o):r.addListener(o)))};return Ci(o),Nr(()=>i()),n}const Ha={page:e=>[e.pageX,e.pageY],client:e=>[e.clientX,e.clientY],screen:e=>[e.screenX,e.screenY],movement:e=>e instanceof Touch?null:[e.movementX,e.movementY]};function Ja(e={}){const{type:a="page",touch:t=!0,resetOnTouchEnds:s=!1,initialValue:r={x:0,y:0},window:n=Et,target:i=n,eventFilter:o}=e,l=oe(r.x),c=oe(r.y),v=oe(null),b=typeof a=="function"?a:Ha[a],y=p=>{const w=b(p);w&&([l.value,c.value]=w,v.value="mouse")},u=p=>{if(p.touches.length>0){const w=b(p.touches[0]);w&&([l.value,c.value]=w,v.value="touch")}},m=()=>{l.value=r.x,c.value=r.y},h=o?p=>o(()=>y(p),{}):p=>y(p),g=o?p=>o(()=>u(p),{}):p=>u(p);return i&&(Oe(i,"mousemove",h,{passive:!0}),Oe(i,"dragover",h,{passive:!0}),t&&a!=="movement"&&(Oe(i,"touchstart",g,{passive:!0}),Oe(i,"touchmove",g,{passive:!0}),s&&Oe(i,"touchend",m,{passive:!0}))),{x:l,y:c,sourceType:v}}function Va(e={}){const{touch:a=!0,drag:t=!0,initialValue:s=!1,window:r=Et}=e,n=oe(s),i=oe(null);if(!r)return{pressed:n,sourceType:i};const o=v=>()=>{n.value=!0,i.value=v},l=()=>{n.value=!1,i.value=null},c=te(()=>Dr(e.target)||r);return Oe(c,"mousedown",o("mouse"),{passive:!0}),Oe(r,"mouseleave",l,{passive:!0}),Oe(r,"mouseup",l,{passive:!0}),t&&(Oe(c,"dragstart",o("mouse"),{passive:!0}),Oe(r,"drop",l,{passive:!0}),Oe(r,"dragend",l,{passive:!0})),a&&(Oe(c,"touchstart",o("touch"),{passive:!0}),Oe(r,"touchend",l,{passive:!0}),Oe(r,"touchcancel",l,{passive:!0})),{pressed:n,sourceType:i}}function Za(e={}){const{window:a=Et,initialWidth:t=1/0,initialHeight:s=1/0,listenOrientation:r=!0,includeScrollbar:n=!0}=e,i=oe(t),o=oe(s),l=()=>{a&&(n?(i.value=a.innerWidth,o.value=a.innerHeight):(i.value=a.document.documentElement.clientWidth,o.value=a.document.documentElement.clientHeight))};if(l(),ja(l),Oe("resize",l,{passive:!0}),r){const c=Wa("(orientation: portrait)");_e(c,()=>l())}return{width:i,height:o}}const Qa=rt({__name:"PanelResizer",props:{maxSize:{},minSize:{},setSize:{type:Function}},setup(e){const a=e,t=Xe(),s=oe(),{pressed:r}=Va({target:s}),{y:n}=Ja(),{height:i}=Za();return _e(()=>r,o=>{t.globalCursor=o?"ns-resize":""}),_e(n,o=>{if(r.value){let l=i.value-o-3;l>a.maxSize&&(l=a.maxSize),l<a.minSize&&(l=a.minSize),a.setSize(l)}}),(o,l)=>(pe(),ye("div",{ref_key:"el",ref:s,style:{height:"3px",cursor:"ns-resize",marginTop:"-3px"}}," \xA0 ",512))}});var Mn=Ee({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:a}){const t=te(()=>parseInt(e.lines,10)),s=te(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(t.value===1?" ellipsis":"")),r=te(()=>e.lines!==void 0&&t.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":t.value}:null);return()=>ee("div",{style:r.value,class:s.value},Fe(a.default))}});const Ln=["B","KB","MB","GB","TB","PB"];function Ga(e){let a=0;for(;parseInt(e,10)>=1024&&a<Ln.length-1;)e/=1024,++a;return`${e.toFixed(1)}${Ln[a]}`}function Ya(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ft(e,a,t){return t<=a?a:Math.min(t,Math.max(a,e))}function Xa(e,a,t){if(t<=a)return a;const s=t-a+1;let r=a+(e-a)%s;return r<a&&(r=s+r),r===0?0:r}function eo(e,a=2,t="0"){if(e==null)return e;const s=""+e;return s.length>=a?s:new Array(a-s.length+1).join(t)+s}var Mr={humanStorageSize:Ga,capitalize:Ya,between:ft,normalizeToInterval:Xa,pad:eo};const to={class:"row"},no=["href"],ro=rt({__name:"NodePreviewTab",props:{label:{},info:{}},setup(e){const a=e,{humanStorageSize:t}=Mr,s=Xe(),r=oe(null),n=async i=>{r.value=(await Zi({...i,token:s.token})).commit};return _e(()=>a.info,n),ut(()=>{n(a.info)}),(i,o)=>(pe(),ye("div",to,[ue(dt,{dense:"",class:"col-xs-12"},{default:ve(()=>[ue(je,null,{default:ve(()=>[ue(Mn,null,{default:ve(()=>[qe(Ie(i.info.path)+" ["+Ie(be(t)(i.info.size))+"]",1)]),_:1}),ue(Mn,null,{default:ve(()=>[ce("a",{href:`https://github.com/${i.info.repo}/tree/${i.info.branch}/${i.info.path}`},[ue(Ae,{name:"mdi-github",size:"15px",style:{"vertical-align":"baseline"}}),qe(Ie(i.info.repo),1)],8,no)]),_:1})]),_:1})]),_:1})]))}}),io={class:"thumbnail"},ao=["src"],oo={style:{display:"flex","flex-direction":"column",flex:"1"}},so=rt({__name:"NodePreview",props:{node:{},showManagementUI:{type:Boolean}},emits:["action:import","action:open","action:edit"],setup(e,{emit:a}){const t=e,s=Xe(),r=oe(""),n=oe("step"),i=async l=>{var c,v,b,y,u,m,h;(c=l.meta)!=null&&c.thumb?r.value=(v=l==null?void 0:l.meta)==null?void 0:v.thumb:(b=l.content_types)!=null&&b.thumb?Ft({url:(y=l==null?void 0:l.content_types)==null?void 0:y.thumb.url,token:s.token,content_type:"image/png"}).then(g=>r.value=g):(m=(u=l==null?void 0:l.content_types)==null?void 0:u.svg)!=null&&m.url?Ft({url:(h=l==null?void 0:l.content_types)==null?void 0:h.svg.url,token:s.token,content_type:"image/svg+xml"}).then(g=>r.value=g):r.value=""},o=l=>{var c;if(((c=l.content_types)==null?void 0:c[n.value])===void 0){const v=l.content_types;n.value=v!=null&&v.step?"step":v!=null&&v.f3d?"f3d":v!=null&&v.dxf?"dxf":v!=null&&v.svg?"svg":n.value}};return ut(()=>{i(t.node),o(t.node)}),_e(()=>t.node,i),_e(()=>t.node,o),(l,c)=>(pe(),ye("div",{class:"previewPane shadow-up-2",style:vt([{"z-index":"2"},{maxHeight:`${be(s).preferences.previewSize}px`}])},[ue(Qa,{setSize:v=>be(s).preferences.previewSize=v,minSize:64,maxSize:256},null,8,["setSize"]),ce("div",{class:"row",style:vt({display:"flex",flexDirection:"row",flexWrap:"nowrap",height:`${be(s).preferences.previewSize}px`})},[ce("div",io,[r.value?(pe(),ye("img",{key:0,src:r.value,style:vt({width:`${be(s).preferences.previewSize}px`,height:`${be(s).preferences.previewSize}px`,objectFit:"contain"})},null,12,ao)):Se("",!0),r.value?Se("",!0):(pe(),Te(Ae,{key:1,name:l.node.icon,size:`${be(s).preferences.previewSize}px`},null,8,["name","size"]))]),ce("div",oo,[ue(Aa,{breakpoint:50,modelValue:n.value,"onUpdate:modelValue":c[4]||(c[4]=v=>n.value=v),dense:"","narrow-indicator":"",align:"left",class:"shadow-2"},{default:ve(()=>{var v,b,y,u,m,h,g;return[(pe(!0),ye(Ze,null,ot(Object.keys(((v=l.node)==null?void 0:v.content_types)||{}).filter(p=>p!=="meta"&&p!=="thumb"),p=>(pe(),Te(Ca,{name:p,key:p,dense:"",label:`.${p.toUpperCase()}`},null,8,["name","label"]))),128)),ue(qr),be(s).backend.isFusion360?(pe(),ye(Ze,{key:0},[ue(ze,{icon:"mdi-import",size:"sm",dense:"",rounded:"",unelevated:"",label:"Import",class:"q-pr-sm q-mr-sm",onClick:c[0]||(c[0]=p=>{p.stopPropagation(),p.preventDefault(),a("action:import",{nodeId:l.node.id,contentType:n.value})})}),((b=l.node.content_types)==null?void 0:b.step)||((y=l.node.content_types)==null?void 0:y.f3d)?(pe(),Te(ze,{key:0,icon:"mdi-open-in-new",size:"sm",dense:"",rounded:"",unelevated:"",label:"Open",class:"q-pr-sm q-mr-sm",onClick:c[1]||(c[1]=p=>{p.stopPropagation(),p.preventDefault(),a("action:open",{nodeId:l.node.id,contentType:n.value})})})):Se("",!0)],64)):(pe(),ye(Ze,{key:1},[((u=l.node.content_types)==null?void 0:u.step)||((m=l.node.content_types)==null?void 0:m.f3d)?(pe(),Te(ze,{key:0,icon:"mdi-download",size:"sm",dense:"",rounded:"",unelevated:"",label:"Download",class:"q-pr-sm q-mr-sm",onClick:c[2]||(c[2]=p=>{p.stopPropagation(),p.preventDefault(),a("action:open",{nodeId:l.node.id,contentType:n.value})})})):Se("",!0)],64)),t.showManagementUI&&(((h=l.node.content_types)==null?void 0:h.step)||((g=l.node.content_types)==null?void 0:g.f3d))?(pe(),Te(ze,{key:2,icon:"mdi-pencil",size:"sm",dense:"",rounded:"",unelevated:"",label:"edit",class:"q-mr-sm",onClick:c[3]||(c[3]=p=>{p.stopPropagation(),p.preventDefault(),a("action:edit",{nodeId:l.node.id})})})):Se("",!0)]}),_:1},8,["modelValue"]),ue(La,{animated:"",modelValue:n.value,"onUpdate:modelValue":c[5]||(c[5]=v=>n.value=v),style:{flex:"1","overflow-y":"auto",height:"1px"}},{default:ve(()=>{var v;return[(pe(!0),ye(Ze,null,ot(Object.keys(((v=l.node)==null?void 0:v.content_types)||{}).filter(b=>b!=="meta"&&b!=="thumb"),b=>(pe(),Te(Ma,{class:"q-pa-xs",key:b,name:b},{default:ve(()=>{var y,u;return[ue(ro,{label:b.toUpperCase(),info:(u=(y=l.node)==null?void 0:y.content_types)==null?void 0:u[b]},null,8,["label","info"])]}),_:2},1032,["name"]))),128))]}),_:1},8,["modelValue"])])],4)],4))}}),lo=()=>!0;function uo(e){const a={};return e.forEach(t=>{a[t]=lo}),a}function Le(){const{emit:e,proxy:a}=Re(),t=oe(null);function s(){t.value.show()}function r(){t.value.hide()}function n(o){e("ok",o),r()}function i(){e("hide")}return Object.assign(a,{show:s,hide:r}),{dialogRef:t,onDialogHide:i,onDialogOK:n,onDialogCancel:r}}const Lr=["ok","hide"];Le.emits=Lr;Le.emitsObject=uo(Lr);const co={class:"row q-mb-sm"},fo=ce("label",{for:"token"},"Github API Key: ",-1),ho={class:"row q-mb-sm"},vo=ce("label",{for:"token"},"Interface URL: ",-1),po={class:"row q-mb-sm"},mo={style:{"margin-left":"17px"}},go={class:"row q-mb-sm"},bo={style:{"margin-left":"17px"}},yo={__name:"SettingsDialog",emits:[...Le.emits],setup(e){const a=Xe(),t=oe(a.token),s={...a.preferences},{dialogRef:r,onDialogHide:n,onDialogOK:i,onDialogCancel:o}=Le();function l(){s.interfaceUrl,a.token=t,a.saveToken(),Object.assign(a.preferences,s),a.savePreferences(),i()}return(c,v)=>(pe(),Te(xt,{ref_key:"dialogRef",ref:r,onHide:be(n),square:""},{default:ve(()=>[ue(Ct,{class:"q-dialog-plugin"},{default:ve(()=>[ue(St,null,{default:ve(()=>[ce("div",co,[fo,we(ce("input",{id:"token","bg-color":"white",style:{flex:1},"onUpdate:modelValue":v[0]||(v[0]=b=>t.value=b)},null,512),[[gt,t.value]])]),ce("div",ho,[vo,we(ce("input",{id:"token","bg-color":"white",style:{flex:1},placeholder:"https://mapleleafmakers.github.io/VoronConstruct360/","onUpdate:modelValue":v[1]||(v[1]=b=>s.interfaceUrl=b)},null,512),[[gt,s.interfaceUrl]])]),ce("div",po,[ce("label",mo,[qe(" Show Thumbnails: "),we(ce("input",{type:"checkbox","onUpdate:modelValue":v[2]||(v[2]=b=>s.showThumbnails=b)},null,512),[[pt,s.showThumbnails]])])]),ce("div",go,[ce("label",bo,[qe(" Mgmt. Controls: "),we(ce("input",{type:"checkbox","onUpdate:modelValue":v[3]||(v[3]=b=>s.showManagementUI=b)},null,512),[[pt,s.showManagementUI]])])])]),_:1}),ue(Zt,{align:"right"},{default:ve(()=>[ue(ze,{size:"sm",square:"",color:"negative","text-color":"white",label:"Cancel",onClick:be(o)},null,8,["onClick"]),ue(ze,{color:"positive","text-color":"white",label:"OK",size:"sm",square:"",onClick:l})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var _o=Ee({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:a}){const t=te(()=>{const s=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(r=>e[r]===!0).map(r=>`q-btn-group--${r}`).join(" ");return`q-btn-group row no-wrap${s.length!==0?" "+s:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>ee("div",{class:t.value},Fe(a.default))}});const wo={class:"row q-mb-sm"},ko=ce("label",null,"Display Name: ",-1),xo={class:"row q-mb-sm"},So=ce("label",null,"Repositories: ",-1),Co={style:{display:"flex","flex-direction":"column",flex:"1"}},To={class:"row q-mb-xs"},zo=["disabled","onKeypress"],Eo=["disabled"],Ao={class:"row"},Fn={__name:"CollectionEditor",props:{initialValue:{type:Object,required:!1,default:null}},emits:[...Le.emits],setup(e){const a=e,t=Or(),s=Xe(),r=oe(null),n=oe(""),i=at(JSON.parse(JSON.stringify(a.initialValue||{})));i.type||(i.type="repo");const o=async()=>{const E=v.value-1,C=v.value;[i.repositories[E],i.repositories[C]]=[i.repositories[C],i.repositories[E]]},l=async()=>{const E=v.value+1,C=v.value;[i.repositories[E],i.repositories[C]]=[i.repositories[C],i.repositories[E]]},c=async()=>{let E;if(n.value.match(/[\w-]+\/\*/)){const C=(await kr({org:n.value.split("/")[0],token:s.token})).map(A=>A.repositories[0]);i.repositories=[...C],i.org=n.value.split("/")[0],i.type="org",n.value=""}else{try{E=await Ui({input:n.value,token:s.token})}catch(C){alert(C);return}i.repositories=[...i.repositories||[],E],n.value=""}},v=te(()=>((i==null?void 0:i.repositories)||[]).findIndex(E=>E.repr===r.value)),b=te(()=>v.value!==null&&v.value!==void 0&&v.value>0),y=te(()=>v.value>-1&&v.value<((i==null?void 0:i.repositories)||[]).length-1),u=()=>{const E=i.repositories.findIndex(C=>C.repr===r.value);i.repositories.splice(E,1)},m=()=>{t.dialog({title:"Are you sure?",message:"Are you sure you want to permanently delete this collection?",cancel:!0,persistent:!1,ok:{class:"bordered",square:!0,size:"sm",color:"positive",nocaps:!0},cancel:{class:"bordered",square:!0,size:"sm",push:!0,color:"negative",nocaps:!0}}).onOk(()=>{const E=s.tree.findIndex(C=>C.id==i.id);E!==-1?(s.tree.splice(E,1),s.saveCollections(),w()):console.log("No match found for",i.id)})},{dialogRef:h,onDialogHide:g,onDialogOK:p,onDialogCancel:w}=Le();function S(){p(i)}return(E,C)=>(pe(),Te(xt,{ref_key:"dialogRef",ref:h,onHide:be(g),square:""},{default:ve(()=>[ue(Ct,{class:"q-dialog-plugin"},{default:ve(()=>[ue(St,null,{default:ve(()=>[ce("div",wo,[ko,we(ce("input",{"bg-color":"white",style:{flex:1},"onUpdate:modelValue":C[0]||(C[0]=A=>i.name=A)},null,512),[[gt,i.name]])]),ce("div",xo,[So,ce("div",Co,[ce("div",To,[we(ce("input",{disabled:i.type==="org","onUpdate:modelValue":C[1]||(C[1]=A=>n.value=A),"bg-color":"white",style:{flex:1},onKeypress:cr(c,["enter"])},null,40,zo),[[gt,n.value]]),ue(ze,{disable:i.type==="org",class:"bordered",style:{"border-left":"none"},unelevated:"",size:"sm",icon:"add",onClick:c},null,8,["disable"])]),we(ce("select",{disabled:i.type==="org","onUpdate:modelValue":C[2]||(C[2]=A=>r.value=A),size:"4",style:{flex:1,overflowY:"auto"},class:"q-mb-xs"},[(pe(!0),ye(Ze,null,ot(i.repositories||[],A=>(pe(),ye("option",{key:A.repr},Ie(A.repr),1))),128))],8,Eo),[[Nt,r.value]]),ce("div",Ao,[ue(_o,{square:"",unelevated:""},{default:ve(()=>[ue(ze,{size:"sm",class:"bordered",style:{"border-right":"none"},unelevated:"",square:"",disable:!b.value,onClick:o,icon:"mdi-arrow-up"},null,8,["disable"]),ue(ze,{size:"sm",class:"bordered",unelevated:"",square:"",disable:!y.value,onClick:l,icon:"mdi-arrow-down"},null,8,["disable"])]),_:1}),ue(ze,{size:"sm",class:"bordered q-ml-md",square:"",unelevated:"",disable:!r.value,onClick:u,icon:"mdi-delete"},null,8,["disable"])])])])]),_:1}),ue(Zt,null,{default:ve(()=>{var A;return[ue(ze,{square:"",size:"sm",class:"bordered",label:"DELETE",color:"negative","text-color":"yellow",style:{"font-weight":"bold"},onClick:m}),ue(qr),ue(ze,{square:"",size:"sm",class:"bordered",color:"negative",label:"Cancel",onClick:be(w)},null,8,["onClick"]),ue(ze,{square:"",size:"sm",class:"bordered",label:"OK",color:"positive",disable:!(i.name&&((A=i==null?void 0:i.repositories)==null?void 0:A.length)>0),onClick:S},null,8,["disable"])]}),_:1})]),_:1})]),_:1},8,["onHide"]))}},Ro=[ee("g",[ee("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}),ee("clipPath",{id:"uil-hourglass-clip1"},[ee("rect",{x:"15",y:"20",width:" 70",height:"25"},[ee("animate",{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}),ee("animate",{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"})])]),ee("clipPath",{id:"uil-hourglass-clip2"},[ee("rect",{x:"15",y:"55",width:" 70",height:"25"},[ee("animate",{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}),ee("animate",{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"})])]),ee("path",{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}),ee("path",{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}),ee("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"})])];var Po=Ee({name:"QSpinnerHourglass",props:Ti,setup(e){const{cSize:a,classes:t}=zi(e);return()=>ee("svg",{class:t.value,width:a.value,height:a.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Ro)}});const Oo=["none","strict","leaf","leaf-filtered"];var Fr=Ee({name:"QTree",props:{...tt,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:e=>Oo.includes(e)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(e,{slots:a,emit:t}){const{proxy:s}=Re(),{$q:r}=s,n=nt(e,r),i=oe({}),o=oe(e.ticked||[]),l=oe(e.expanded||[]);let c={};nr(()=>{c={}});const v=te(()=>`q-tree q-tree--${e.dense===!0?"dense":"standard"}`+(e.noConnectors===!0?" q-tree--no-connectors":"")+(n.value===!0?" q-tree--dark":"")+(e.color!==void 0?` text-${e.color}`:"")),b=te(()=>e.selected!==void 0),y=te(()=>e.icon||r.iconSet.tree.icon),u=te(()=>e.controlColor||e.color),m=te(()=>e.textColor!==void 0?` text-${e.textColor}`:""),h=te(()=>{const T=e.selectedColor||e.color;return T?` text-${T}`:""}),g=te(()=>e.filterMethod!==void 0?e.filterMethod:(T,J)=>{const k=J.toLowerCase();return T[e.labelKey]&&T[e.labelKey].toLowerCase().indexOf(k)>-1}),p=te(()=>{const T={},J=(k,B)=>{const N=k.tickStrategy||(B?B.tickStrategy:e.tickStrategy),H=k[e.nodeKey],I=k[e.childrenKey]&&Array.isArray(k[e.childrenKey])&&k[e.childrenKey].length!==0,F=k.disabled!==!0&&b.value===!0&&k.selectable!==!1,ie=k.disabled!==!0&&k.expandable!==!1,fe=N!=="none",ae=N==="strict",ge=N==="leaf-filtered",d=N==="leaf"||N==="leaf-filtered";let V=k.disabled!==!0&&k.tickable!==!1;d===!0&&V===!0&&B&&B.tickable!==!0&&(V=!1);let U=k.lazy;U===!0&&i.value[H]!==void 0&&Array.isArray(k[e.childrenKey])===!0&&(U=i.value[H]);const x={key:H,parent:B,isParent:I,lazy:U,disabled:k.disabled,link:k.disabled!==!0&&(F===!0||ie===!0&&(I===!0||U===!0)),children:[],matchesFilter:e.filter?g.value(k,e.filter):!0,selected:H===e.selected&&F===!0,selectable:F,expanded:I===!0?l.value.includes(H):!1,expandable:ie,noTick:k.noTick===!0||ae!==!0&&U&&U!=="loaded",tickable:V,tickStrategy:N,hasTicking:fe,strictTicking:ae,leafFilteredTicking:ge,leafTicking:d,ticked:ae===!0?o.value.includes(H):I===!0?!1:o.value.includes(H)};if(T[H]=x,I===!0&&(x.children=k[e.childrenKey].map(_=>J(_,x)),e.filter&&(x.matchesFilter!==!0?x.matchesFilter=x.children.some(_=>_.matchesFilter):x.noTick!==!0&&x.disabled!==!0&&x.tickable===!0&&ge===!0&&x.children.every(_=>_.matchesFilter!==!0||_.noTick===!0||_.tickable!==!0)===!0&&(x.tickable=!1)),x.matchesFilter===!0&&(x.noTick!==!0&&ae!==!0&&x.children.every(_=>_.noTick)===!0&&(x.noTick=!0),d))){if(x.ticked=!1,x.indeterminate=x.children.some(_=>_.indeterminate===!0),x.tickable=x.tickable===!0&&x.children.some(_=>_.tickable),x.indeterminate!==!0){const _=x.children.reduce((O,Z)=>Z.ticked===!0?O+1:O,0);_===x.children.length?x.ticked=!0:_>0&&(x.indeterminate=!0)}x.indeterminate===!0&&(x.indeterminateNextState=x.children.every(_=>_.tickable!==!0||_.ticked!==!0))}return x};return e.nodes.forEach(k=>J(k,null)),T});_e(()=>e.ticked,T=>{o.value=T}),_e(()=>e.expanded,T=>{l.value=T});function w(T){const J=[].reduce,k=(B,N)=>{if(B||!N)return B;if(Array.isArray(N)===!0)return J.call(Object(N),k,B);if(N[e.nodeKey]===T)return N;if(N[e.childrenKey])return k(null,N[e.childrenKey])};return k(null,e.nodes)}function S(){return o.value.map(T=>w(T))}function E(){return l.value.map(T=>w(T))}function C(T){return T&&p.value[T]?p.value[T].expanded:!1}function A(){e.expanded!==void 0?t("update:expanded",[]):l.value=[]}function R(){const T=[],J=k=>{k[e.childrenKey]&&k[e.childrenKey].length!==0&&k.expandable!==!1&&k.disabled!==!0&&(T.push(k[e.nodeKey]),k[e.childrenKey].forEach(J))};e.nodes.forEach(J),e.expanded!==void 0?t("update:expanded",T):l.value=T}function M(T,J,k=w(T),B=p.value[T]){if(B.lazy&&B.lazy!=="loaded"){if(B.lazy==="loading")return;i.value[T]="loading",Array.isArray(k[e.childrenKey])!==!0&&(k[e.childrenKey]=[]),t("lazyLoad",{node:k,key:T,done:N=>{i.value[T]="loaded",k[e.childrenKey]=Array.isArray(N)===!0?N:[],kt(()=>{const H=p.value[T];H&&H.isParent===!0&&P(T,!0)})},fail:()=>{delete i.value[T],k[e.childrenKey].length===0&&delete k[e.childrenKey]}})}else B.isParent===!0&&B.expandable===!0&&P(T,J)}function P(T,J){let k=l.value;const B=e.expanded!==void 0;if(B===!0&&(k=k.slice()),J){if(e.accordion&&p.value[T]){const N=[];p.value[T].parent?p.value[T].parent.children.forEach(H=>{H.key!==T&&H.expandable===!0&&N.push(H.key)}):e.nodes.forEach(H=>{const I=H[e.nodeKey];I!==T&&N.push(I)}),N.length!==0&&(k=k.filter(H=>N.includes(H)===!1))}k=k.concat([T]).filter((N,H,I)=>I.indexOf(N)===H)}else k=k.filter(N=>N!==T);B===!0?t("update:expanded",k):l.value=k}function W(T){return T&&p.value[T]?p.value[T].ticked:!1}function Y(T,J){let k=o.value;const B=e.ticked!==void 0;B===!0&&(k=k.slice()),J?k=k.concat(T).filter((N,H,I)=>I.indexOf(N)===H):k=k.filter(N=>T.includes(N)===!1),B===!0&&t("update:ticked",k)}function z(T,J,k){const B={tree:s,node:T,key:k,color:e.color,dark:n.value};return Sn(B,"expanded",()=>J.expanded,N=>{N!==J.expanded&&M(k,N)}),Sn(B,"ticked",()=>J.ticked,N=>{N!==J.ticked&&Y([k],N)}),B}function $(T){return(e.filter?T.filter(J=>p.value[J[e.nodeKey]].matchesFilter):T).map(J=>K(J))}function f(T){if(T.icon!==void 0)return ee(Ae,{class:"q-tree__icon q-mr-sm",name:T.icon,color:T.iconColor});const J=T.img||T.avatar;if(J)return ee("img",{class:`q-tree__${T.img?"img":"avatar"} q-mr-sm`,src:J})}function j(){t("afterShow")}function Q(){t("afterHide")}function K(T){const J=T[e.nodeKey],k=p.value[J],B=T.header&&a[`header-${T.header}`]||a["default-header"],N=k.isParent===!0?$(T[e.childrenKey]):[],H=N.length!==0||k.lazy&&k.lazy!=="loaded";let I=T.body&&a[`body-${T.body}`]||a["default-body"];const F=B!==void 0||I!==void 0?z(T,k,J):null;return I!==void 0&&(I=ee("div",{class:"q-tree__node-body relative-position"},[ee("div",{class:m.value},[I(F)])])),ee("div",{key:J,class:`q-tree__node relative-position q-tree__node--${H===!0?"parent":"child"}`},[ee("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(k.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(k.selected===!0?" q-tree__node--selected":"")+(k.disabled===!0?" q-tree__node--disabled":""),tabindex:k.link===!0?0:-1,onClick:ie=>{X(T,k,ie)},onKeypress(ie){pn(ie)!==!0&&(ie.keyCode===13?X(T,k,ie,!0):ie.keyCode===32&&de(T,k,ie,!0))}},[ee("div",{class:"q-focus-helper",tabindex:-1,ref:ie=>{c[k.key]=ie}}),k.lazy==="loading"?ee(rr,{class:"q-tree__spinner",color:u.value}):H===!0?ee(Ae,{class:"q-tree__arrow"+(k.expanded===!0?" q-tree__arrow--rotate":""),name:y.value,onClick(ie){de(T,k,ie)}}):null,k.hasTicking===!0&&k.noTick!==!0?ee(Ei,{class:"q-tree__tickbox",modelValue:k.indeterminate===!0?null:k.ticked,color:u.value,dark:n.value,dense:!0,keepColor:!0,disable:k.tickable!==!0,onKeydown:Be,"onUpdate:modelValue":ie=>{L(k,ie)}}):null,ee("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(k.selected===!0?h.value:m.value)},[B?B(F):[f(T),ee("div",T[e.labelKey])]])]),H===!0?e.noTransition===!0?ee("div",{class:"q-tree__node-collapsible"+m.value,key:`${J}__q`},[I,ee("div",{class:"q-tree__children"+(k.disabled===!0?" q-tree__node--disabled":"")},k.expanded?N:null)]):ee(Pr,{duration:e.duration,onShow:j,onHide:Q},()=>we(ee("div",{class:"q-tree__node-collapsible"+m.value,key:`${J}__q`},[I,ee("div",{class:"q-tree__children"+(k.disabled===!0?" q-tree__node--disabled":"")},N)]),[[ir,k.expanded]])):I])}function se(T){const J=c[T];J&&J.focus()}function X(T,J,k,B){B!==!0&&J.selectable!==!1&&se(J.key),b.value&&J.selectable?e.noSelectionUnset===!1?t("update:selected",J.key!==e.selected?J.key:null):J.key!==e.selected&&t("update:selected",J.key===void 0?null:J.key):de(T,J,k,B),typeof T.handler=="function"&&T.handler(T)}function de(T,J,k,B){k!==void 0&&Be(k),B!==!0&&J.selectable!==!1&&se(J.key),M(J.key,!J.expanded,T,J)}function L(T,J){if(T.indeterminate===!0&&(J=T.indeterminateNextState),T.strictTicking)Y([T.key],J);else if(T.leafTicking){const k=[],B=N=>{N.isParent?(J!==!0&&N.noTick!==!0&&N.tickable===!0&&k.push(N.key),N.leafTicking===!0&&N.children.forEach(B)):N.noTick!==!0&&N.tickable===!0&&(N.leafFilteredTicking!==!0||N.matchesFilter===!0)&&k.push(N.key)};B(T),Y(k,J)}}return e.defaultExpandAll===!0&&R(),Object.assign(s,{getNodeByKey:w,getTickedNodes:S,getExpandedNodes:E,isExpanded:C,collapseAll:A,expandAll:R,setExpanded:M,isTicked:W,setTicked:Y}),()=>{const T=$(e.nodes);return ee("div",{class:v.value},T.length===0?e.filter?e.noResultsLabel||r.lang.tree.noResults:e.noNodesLabel||r.lang.tree.noNodes:T)}}});const qo={class:"row q-mb-sm"},Bo=ce("label",null,"Name: ",-1),No=["disabled"],Io={class:"row q-mb-sm"},$o=ce("label",null,"Path: ",-1),Do={style:{flex:"1",position:"relative"}},Mo=["id"],Lo={key:0},Fo=["onBlur","onKeypress"],jo={key:1},Uo={class:"row q-mb-sm no-wrap"},Ko={style:{"margin-left":"17px","white-space":"nowrap"}},Wo={key:0,class:"text-negative"},Ho={class:"row q-mb-sm no-wrap"},Jo={style:{"margin-left":"17px","white-space":"nowrap"}},Vo={key:0,class:"text-negative"},Zo={class:"row q-mb-sm"},Qo=ce("label",null,"Thumbnail: ",-1),Go={class:"thumbnail-edit-wrapper"},Yo={class:"row q-col-gutter-xs"},Xo=["src"],es={class:"col-6 q-pt-none"},ts={class:"row"},ns=ce("label",null,"Upload To: ",-1),rs=["value"],is={key:0,style:{display:"flex","flex-direction":"row",position:"absolute",top:"0px",bottom:"0px",left:"0px",right:"0px","text-align":"center","align-items":"center","justify-content":"center","background-color":"rgba(128, 128, 128, 0.5)"}},jn=rt({__name:"ContentEditor",props:{initialValue:{},collection:{}},emits:[...Le.emits],setup(e){var J,k,B,N;const a=e,t=oe(!1),s=oe(null),r=oe(!1),n=oe(!1),i=Xe(),o=oe(!1),l=oe(),c=oe("New Folder"),v=oe((J=a==null?void 0:a.initialValue)==null?void 0:J.name),b=oe(""),y=a.collection||i.getTopLevelNode((B=(k=a.initialValue)==null?void 0:k.id)==null?void 0:B.split("|")[0]);let u="";(N=a==null?void 0:a.initialValue)!=null&&N.path&&(u=a==null?void 0:a.initialValue.path.split("/").slice(0,-1).join("/"));const m=oe(u),h=oe(["/"]),g=oe(m.value),p=oe(!1),w=(H,I,F)=>{var ge,d;const ie=(ge=l.value)==null?void 0:ge.getNodeByKey(I.id.split("/").slice(0,-1).join("/"));let fe=!0;F||(fe=!1),ie.children.filter(V=>V.name===F).length>1&&(fe=!1),I.name=F,I.path=ie.path="/"+I.name,fe?I.editing=!1:(H.preventDefault(),H.stopImmediatePropagation(),(d=H.target)==null||d.focus())},S=H=>btoa(H).replaceAll("=",""),E=H=>H.filter(F=>F.type==="tree").map(F=>({id:F.path,path:F.path,icon:"mdi-folder",selectable:!0,name:F.name,editing:!1,children:F.children?E(F.children):[]})),C=at([{name:"/",icon:"mdi-folder",selectable:!0,id:"/",path:"",children:E((y==null?void 0:y.children)||[])}]),A=oe((y==null?void 0:y.uploadTo)||(y==null?void 0:y.repositories[0].repr)),R=H=>{var ie,fe;c.value="New Folder",H.preventDefault(),H.stopPropagation();const I=(ie=l.value)==null?void 0:ie.getNodeByKey(g.value),F={id:I.path+"/"+Vt(),name:"New Folder",path:I.path+"/New Folder",selectable:!0,icon:"mdi-folder-star",editing:!0,children:[]};I.children.push(F),g.value=F.id,(fe=l.value)==null||fe.setExpanded(I.id,!0),setTimeout(()=>{var ge;const ae=document.querySelector(`#pathTree--${S(F.id)}`);ae==null||ae.scrollIntoView({block:"center"}),(ge=ae==null?void 0:ae.querySelector("input"))==null||ge.focus()},500)},M=te(()=>{var H,I;if(n.value){const F=(I=(H=a.initialValue)==null?void 0:H.content_types)==null?void 0:I.f3d,ie=y.repositories.filter(fe=>fe.repr===A.value)[0];if(F&&F.repo!==ie.repo)return"cannot replace the f3d file, it exists in another repository."}return""}),P=te(()=>{var H,I;if(r.value){const F=(I=(H=a.initialValue)==null?void 0:H.content_types)==null?void 0:I.step,ie=y.repositories.filter(fe=>fe.repr===A.value)[0];if(F&&F.repo!==ie.repo)return"cannot replace the step file, it exists in another repository."}return""}),W=H=>{var ie;let I=[...(ie=H.clipboardData)==null?void 0:ie.items];if(I=I.filter(fe=>/image/.test(fe.type)),!I.length||I.length===0)return!1;let F=new FileReader;F.onload=()=>{const fe=F.result;b.value=fe},F.readAsDataURL(I[0].getAsFile())},Y=H=>new Promise(I=>{const F=new window.FileReader;F.onload=()=>{b.value=F.result,o.value=!0,I(b.value)},F.readAsDataURL(H)}),z=H=>{var I;H.stopPropagation(),H.preventDefault(),Y((I=H.dataTransfer)==null?void 0:I.files[0])},$=H=>{var F;H.stopPropagation(),H.preventDefault();const I=H.target;Y((F=I.files)==null?void 0:F[0]).then(()=>{s.value!==null&&(s.value.value="")})},f=H=>{var I;H.preventDefault(),H.stopPropagation(),(I=s.value)==null||I.click()},j=async()=>{const H=await i.backend.get_screenshot({width:256,height:256,transparent:t.value});H?(b.value=H,o.value=!0):alert("Workspace image capture failed.")},Q=async()=>{var F,ie,fe,ae,ge,d;const H=(fe=(ie=(F=a==null?void 0:a.initialValue)==null?void 0:F.content_types)==null?void 0:ie.thumb)==null?void 0:fe.url,I=(ge=(ae=a==null?void 0:a.initialValue)==null?void 0:ae.meta)==null?void 0:ge.thumb;I?b.value=I:H?b.value=await Ft({url:H,token:i.token}):b.value="",(d=a==null?void 0:a.initialValue)!=null&&d.name||await i.backend.export_model({f3d:!1,step:!1}).then(V=>{v.value=V==null?void 0:V.name})},K=()=>{var H;if(v.value!==((H=a.initialValue)==null?void 0:H.name)||o.value||n.value||r.value)return!0};ut(()=>{Q()});const{dialogRef:se,onDialogHide:X,onDialogOK:de,onDialogCancel:L}=Le();function T(){p.value=!0,setTimeout(()=>{const H=y.repositories.filter(F=>F.repr===A.value)[0];let I=H.path||"";I&&g.value?I=`${I}/${g.value}`:g.value&&(I=`${g.value}`),I=I===""?`${v.value}`:`${I}/${v.value}`,i.backend.export_model({f3d:n.value,step:r.value}).then(F=>{var fe,ae;const ie=[];p.value=!1,n.value&&ie.push({path:`${I}.f3d`,content:(fe=F.f3d)==null?void 0:fe.split(",")[1],encoding:"base64"}),r.value&&ie.push({path:`${I}.step`,content:(ae=F.step)==null?void 0:ae.split(",")[1],encoding:"base64"}),o.value&&ie.push({path:`${I}.png`,content:b.value.split(",")[1],encoding:"base64"}),yr({repo:H.repo,branch:H.branch,files:ie,message:`Add ${I}`,token:i.token,progressCallback:null}).then(()=>{p.value=!1,de(y)})})},500)}return(H,I)=>(pe(),Te(xt,{ref_key:"dialogRef",ref:se,onHide:be(X),square:""},{default:ve(()=>[ue(Ct,{class:"q-dialog-plugin"},{default:ve(()=>[ue(St,{style:{position:"relative"}},{default:ve(()=>{var F,ie,fe;return[ce("div",qo,[Bo,we(ce("input",{disabled:!!((F=a.initialValue)!=null&&F.name),"bg-color":"white",style:{flex:1},"onUpdate:modelValue":I[0]||(I[0]=ae=>v.value=ae)},null,8,No),[[gt,v.value]])]),ce("div",Io,[$o,ce("div",Do,[ue(be(Fr),{ref_key:"treeRef",ref:l,dense:"","default-expand-all":!!m.value,selected:g.value,"onUpdate:selected":I[3]||(I[3]=ae=>g.value=ae),expanded:h.value,"onUpdate:expanded":I[4]||(I[4]=ae=>h.value=ae),"no-selection-unset":"",nodes:C,filter:m.value,"filter-method":(ae,ge)=>ae.path===ge,"node-key":"id","label-key":"name",class:"pathTree"},{"default-header":ve(({node:ae})=>[ue(Ae,{name:ae.icon,class:"q-tree__icon q-mr-sm"},null,8,["name"]),ce("div",{id:`pathTree--${S(ae.id)}`,onKeypress:I[2]||(I[2]=ge=>ge.stopImmediatePropagation())},[ae.editing?we((pe(),ye("input",{key:1,"onUpdate:modelValue":I[1]||(I[1]=ge=>c.value=ge),onBlur:ge=>w(ge,ae,c.value),onKeypress:cr(ge=>w(ge,ae,c.value),["enter"])},null,40,Fo)),[[gt,c.value]]):(pe(),ye("span",Lo,Ie(ae.name),1))],40,Mo)]),_:1},8,["default-expand-all","selected","expanded","nodes","filter","filter-method"]),(ie=a.initialValue)!=null&&ie.path?(pe(),ye("div",{key:0,class:"pathTree--disabler",onClick:I[5]||(I[5]=ae=>{ae.preventDefault(),ae.stopPropagation()})})):Se("",!0),(fe=a.initialValue)!=null&&fe.path?Se("",!0):(pe(),ye("div",jo,[ue(ze,{size:"sm",icon:"mdi-folder-plus-outline",label:"New Folder",flat:"",square:"","no-caps":"",disable:!g.value,class:"bordered q-mt-xs",onClick:R},null,8,["disable"])]))])]),ce("div",Uo,[ce("label",Ko,[qe("Upload .STEP: "),we(ce("input",{type:"checkbox","onUpdate:modelValue":I[6]||(I[6]=ae=>r.value=ae)},null,512),[[pt,r.value]])]),P.value?(pe(),ye("div",Wo,Ie(P.value),1)):Se("",!0)]),ce("div",Ho,[ce("label",Jo,[qe("Upload .F3D: "),we(ce("input",{type:"checkbox","onUpdate:modelValue":I[7]||(I[7]=ae=>n.value=ae)},null,512),[[pt,n.value]])]),M.value?(pe(),ye("div",Vo,Ie(M.value),1)):Se("",!0)]),ce("div",Zo,[Qo,ce("div",Go,[ce("div",Yo,[ce("div",{contenteditable:"true",class:"col-6 q-pa-none editor-thumb",onDragover:I[8]||(I[8]=ae=>{ae.dataTransfer&&(ae.dataTransfer.effectAllowed="all")}),onDrop:z,onPaste:W,onBeforeinput:I[9]||(I[9]=ae=>{ae.inputType!=="insertFromPaste"&&(ae.preventDefault(),ae.stopPropagation())})},[ce("img",{src:b.value||"img/cube-outline.svg"},null,8,Xo)],32),ce("div",es,[ue(ze,{dense:"",label:"Choose",size:"sm",flat:"",icon:"upload",class:"full-width bordered q-mb-xs","no-caps":"",onClick:f}),ue(ze,{dense:"",onClick:j,label:"Capture",icon:"mdi-monitor-screenshot",size:"sm",flat:"",class:"full-width bordered","no-caps":""}),ce("label",null,[we(ce("input",{type:"checkbox","onUpdate:modelValue":I[10]||(I[10]=ae=>t.value=ae)},null,512),[[pt,t.value]]),qe(" BG Transparency")])])]),ce("input",{ref_key:"filePicker",ref:s,onChange:$,id:"thumbnail",type:"file",style:{display:"none"}},null,544)])]),ce("div",ts,[ns,we(ce("select",{"onUpdate:modelValue":I[11]||(I[11]=ae=>A.value=ae),style:{flex:"1"}},[(pe(!0),ye(Ze,null,ot(be(y).repositories,ae=>(pe(),ye("option",{value:ae.repr,key:ae.repr},Ie(ae.repr),9,rs))),128))],512),[[Nt,A.value]])]),p.value?(pe(),ye("div",is,[ue(Po,{color:"purple",size:"10em"})])):Se("",!0)]}),_:1}),ue(Zt,{align:"right"},{default:ve(()=>[ue(ze,{square:"",size:"sm",class:"bordered",color:"negative",label:"Cancel",onClick:be(L)},null,8,["onClick"]),ue(ze,{square:"",size:"sm",class:"bordered",label:"OK",color:"positive",disable:!K(),onClick:T},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}});function on(e,a,t){const s=mt(e);let r,n=s.left-a.event.x,i=s.top-a.event.y,o=Math.abs(n),l=Math.abs(i);const c=a.direction;c.horizontal===!0&&c.vertical!==!0?r=n<0?"left":"right":c.horizontal!==!0&&c.vertical===!0?r=i<0?"up":"down":c.up===!0&&i<0?(r="up",o>l&&(c.left===!0&&n<0?r="left":c.right===!0&&n>0&&(r="right"))):c.down===!0&&i>0?(r="down",o>l&&(c.left===!0&&n<0?r="left":c.right===!0&&n>0&&(r="right"))):c.left===!0&&n<0?(r="left",o<l&&(c.up===!0&&i<0?r="up":c.down===!0&&i>0&&(r="down"))):c.right===!0&&n>0&&(r="right",o<l&&(c.up===!0&&i<0?r="up":c.down===!0&&i>0&&(r="down")));let v=!1;if(r===void 0&&t===!1){if(a.event.isFirst===!0||a.event.lastDir===void 0)return{};r=a.event.lastDir,v=!0,r==="left"||r==="right"?(s.left-=n,o=0,n=0):(s.top-=i,l=0,i=0)}return{synthetic:v,payload:{evt:e,touch:a.event.mouse!==!0,mouse:a.event.mouse===!0,position:s,direction:r,isFirst:a.event.isFirst,isFinal:t===!0,duration:Date.now()-a.event.time,distance:{x:o,y:l},offset:{x:n,y:i},delta:{x:s.left-a.event.lastX,y:s.top-a.event.lastY}}}}let as=0;var Un=vn({name:"touch-pan",beforeMount(e,{value:a,modifiers:t}){if(t.mouse!==!0&&Ue.has.touch!==!0)return;function s(n,i){t.mouse===!0&&i===!0?Be(n):(t.stop===!0&&tn(n),t.prevent===!0&&Ot(n))}const r={uid:"qvtp_"+as++,handler:a,modifiers:t,direction:Ut(t),noop:lr,mouseStart(n){Kt(n,r)&&ur(n)&&(Me(r,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),r.start(n,!0))},touchStart(n){if(Kt(n,r)){const i=n.target;Me(r,"temp",[[i,"touchmove","move","notPassiveCapture"],[i,"touchcancel","end","passiveCapture"],[i,"touchend","end","passiveCapture"]]),r.start(n)}},start(n,i){if(Ue.is.firefox===!0&&ht(e,!0),r.lastEvt=n,i===!0||t.stop===!0){if(r.direction.all!==!0&&(i!==!0||r.modifiers.mouseAllDir!==!0&&r.modifiers.mousealldir!==!0)){const c=n.type.indexOf("mouse")>-1?new MouseEvent(n.type,n):new TouchEvent(n.type,n);n.defaultPrevented===!0&&Ot(c),n.cancelBubble===!0&&tn(c),Object.assign(c,{qKeyEvent:n.qKeyEvent,qClickOutside:n.qClickOutside,qAnchorHandled:n.qAnchorHandled,qClonedBy:n.qClonedBy===void 0?[r.uid]:n.qClonedBy.concat(r.uid)}),r.initialEvent={target:n.target,event:c}}tn(n)}const{left:o,top:l}=mt(n);r.event={x:o,y:l,time:Date.now(),mouse:i===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:o,lastY:l}},move(n){if(r.event===void 0)return;const i=mt(n),o=i.left-r.event.x,l=i.top-r.event.y;if(o===0&&l===0)return;r.lastEvt=n;const c=r.event.mouse===!0,v=()=>{s(n,c);let u;t.preserveCursor!==!0&&t.preservecursor!==!0&&(u=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),c===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),wt(),r.styleCleanup=m=>{if(r.styleCleanup=void 0,u!==void 0&&(document.documentElement.style.cursor=u),document.body.classList.remove("non-selectable"),c===!0){const h=()=>{document.body.classList.remove("no-pointer-events--children")};m!==void 0?setTimeout(()=>{h(),m()},50):h()}else m!==void 0&&m()}};if(r.event.detected===!0){r.event.isFirst!==!0&&s(n,r.event.mouse);const{payload:u,synthetic:m}=on(n,r,!1);u!==void 0&&(r.handler(u)===!1?r.end(n):(r.styleCleanup===void 0&&r.event.isFirst===!0&&v(),r.event.lastX=u.position.left,r.event.lastY=u.position.top,r.event.lastDir=m===!0?void 0:u.direction,r.event.isFirst=!1));return}if(r.direction.all===!0||c===!0&&(r.modifiers.mouseAllDir===!0||r.modifiers.mousealldir===!0)){v(),r.event.detected=!0,r.move(n);return}const b=Math.abs(o),y=Math.abs(l);b!==y&&(r.direction.horizontal===!0&&b>y||r.direction.vertical===!0&&b<y||r.direction.up===!0&&b<y&&l<0||r.direction.down===!0&&b<y&&l>0||r.direction.left===!0&&b>y&&o<0||r.direction.right===!0&&b>y&&o>0?(r.event.detected=!0,r.move(n)):r.end(n,!0))},end(n,i){if(r.event!==void 0){if(Ge(r,"temp"),Ue.is.firefox===!0&&ht(e,!1),i===!0)r.styleCleanup!==void 0&&r.styleCleanup(),r.event.detected!==!0&&r.initialEvent!==void 0&&r.initialEvent.target.dispatchEvent(r.initialEvent.event);else if(r.event.detected===!0){r.event.isFirst===!0&&r.handler(on(n===void 0?r.lastEvt:n,r).payload);const{payload:o}=on(n===void 0?r.lastEvt:n,r,!0),l=()=>{r.handler(o)};r.styleCleanup!==void 0?r.styleCleanup(l):l()}r.event=void 0,r.initialEvent=void 0,r.lastEvt=void 0}}};if(e.__qtouchpan=r,t.mouse===!0){const n=t.mouseCapture===!0||t.mousecapture===!0?"Capture":"";Me(r,"main",[[e,"mousedown","mouseStart",`passive${n}`]])}Ue.has.touch===!0&&Me(r,"main",[[e,"touchstart","touchStart",`passive${t.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const t=e.__qtouchpan;t!==void 0&&(a.oldValue!==a.value&&(typeof value!="function"&&t.end(),t.handler=a.value),t.direction=Ut(a.modifiers))},beforeUnmount(e){const a=e.__qtouchpan;a!==void 0&&(a.event!==void 0&&a.end(),Ge(a,"main"),Ge(a,"temp"),Ue.is.firefox===!0&&ht(e,!1),a.styleCleanup!==void 0&&a.styleCleanup(),delete e.__qtouchpan)}});const Kn=["vertical","horizontal"],sn={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},Wn={prevent:!0,mouse:!0,mouseAllDir:!0},Hn=e=>e>=250?50:Math.ceil(e/5);var os=Ee({name:"QScrollArea",props:{...tt,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:a,emit:t}){const s=oe(!1),r=oe(!1),n=oe(!1),i={vertical:oe(0),horizontal:oe(0)},o={vertical:{ref:oe(null),position:oe(0),size:oe(0)},horizontal:{ref:oe(null),position:oe(0),size:oe(0)}},{proxy:l}=Re(),c=nt(e,l.$q);let v=null,b;const y=oe(null),u=te(()=>"q-scrollarea"+(c.value===!0?" q-scrollarea--dark":""));o.vertical.percentage=te(()=>{const Q=o.vertical.size.value-i.vertical.value;if(Q<=0)return 0;const K=ft(o.vertical.position.value/Q,0,1);return Math.round(K*1e4)/1e4}),o.vertical.thumbHidden=te(()=>(e.visible===null?n.value:e.visible)!==!0&&s.value===!1&&r.value===!1||o.vertical.size.value<=i.vertical.value+1),o.vertical.thumbStart=te(()=>o.vertical.percentage.value*(i.vertical.value-o.vertical.thumbSize.value)),o.vertical.thumbSize=te(()=>Math.round(ft(i.vertical.value*i.vertical.value/o.vertical.size.value,Hn(i.vertical.value),i.vertical.value))),o.vertical.style=te(()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${o.vertical.thumbStart.value}px`,height:`${o.vertical.thumbSize.value}px`})),o.vertical.thumbClass=te(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(o.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),o.vertical.barClass=te(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(o.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),o.horizontal.percentage=te(()=>{const Q=o.horizontal.size.value-i.horizontal.value;if(Q<=0)return 0;const K=ft(Math.abs(o.horizontal.position.value)/Q,0,1);return Math.round(K*1e4)/1e4}),o.horizontal.thumbHidden=te(()=>(e.visible===null?n.value:e.visible)!==!0&&s.value===!1&&r.value===!1||o.horizontal.size.value<=i.horizontal.value+1),o.horizontal.thumbStart=te(()=>o.horizontal.percentage.value*(i.horizontal.value-o.horizontal.thumbSize.value)),o.horizontal.thumbSize=te(()=>Math.round(ft(i.horizontal.value*i.horizontal.value/o.horizontal.size.value,Hn(i.horizontal.value),i.horizontal.value))),o.horizontal.style=te(()=>({...e.thumbStyle,...e.horizontalThumbStyle,[l.$q.lang.rtl===!0?"right":"left"]:`${o.horizontal.thumbStart.value}px`,width:`${o.horizontal.thumbSize.value}px`})),o.horizontal.thumbClass=te(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(o.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),o.horizontal.barClass=te(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(o.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const m=te(()=>o.vertical.thumbHidden.value===!0&&o.horizontal.thumbHidden.value===!0?e.contentStyle:e.contentActiveStyle),h=[[Un,Q=>{R(Q,"vertical")},void 0,{vertical:!0,...Wn}]],g=[[Un,Q=>{R(Q,"horizontal")},void 0,{horizontal:!0,...Wn}]];function p(){const Q={};return Kn.forEach(K=>{const se=o[K];Q[K+"Position"]=se.position.value,Q[K+"Percentage"]=se.percentage.value,Q[K+"Size"]=se.size.value,Q[K+"ContainerSize"]=i[K].value}),Q}const w=Ai(()=>{const Q=p();Q.ref=l,t("scroll",Q)},0);function S(Q,K,se){if(Kn.includes(Q)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(Q==="vertical"?Cn:nn)(y.value,K,se)}function E({height:Q,width:K}){let se=!1;i.vertical.value!==Q&&(i.vertical.value=Q,se=!0),i.horizontal.value!==K&&(i.horizontal.value=K,se=!0),se===!0&&Y()}function C({position:Q}){let K=!1;o.vertical.position.value!==Q.top&&(o.vertical.position.value=Q.top,K=!0),o.horizontal.position.value!==Q.left&&(o.horizontal.position.value=Q.left,K=!0),K===!0&&Y()}function A({height:Q,width:K}){o.horizontal.size.value!==K&&(o.horizontal.size.value=K,Y()),o.vertical.size.value!==Q&&(o.vertical.size.value=Q,Y())}function R(Q,K){const se=o[K];if(Q.isFirst===!0){if(se.thumbHidden.value===!0)return;b=se.position.value,r.value=!0}else if(r.value!==!0)return;Q.isFinal===!0&&(r.value=!1);const X=sn[K],de=i[K].value,L=(se.size.value-de)/(de-se.thumbSize.value),T=Q.distance[X.dist],J=b+(Q.direction===X.dir?1:-1)*T*L;z(J,K)}function M(Q,K){const se=o[K];if(se.thumbHidden.value!==!0){const X=Q[sn[K].offset];if(X<se.thumbStart.value||X>se.thumbStart.value+se.thumbSize.value){const de=X-se.thumbSize.value/2;z(de/i[K].value*se.size.value,K)}se.ref.value!==null&&se.ref.value.dispatchEvent(new MouseEvent(Q.type,Q))}}function P(Q){M(Q,"vertical")}function W(Q){M(Q,"horizontal")}function Y(){s.value=!0,v!==null&&clearTimeout(v),v=setTimeout(()=>{v=null,s.value=!1},e.delay),e.onScroll!==void 0&&w()}function z(Q,K){y.value[sn[K].scroll]=Q}function $(){n.value=!0}function f(){n.value=!1}let j=null;return _e(()=>l.$q.lang.rtl,Q=>{y.value!==null&&nn(y.value,Math.abs(o.horizontal.position.value)*(Q===!0?-1:1))}),or(()=>{j={top:o.vertical.position.value,left:o.horizontal.position.value}}),sr(()=>{if(j===null)return;const Q=y.value;Q!==null&&(nn(Q,j.left),Cn(Q,j.top))}),Ye(w.cancel),Object.assign(l,{getScrollTarget:()=>y.value,getScroll:p,getScrollPosition:()=>({top:o.vertical.position.value,left:o.horizontal.position.value}),getScrollPercentage:()=>({top:o.vertical.percentage.value,left:o.horizontal.percentage.value}),setScrollPosition:S,setScrollPercentage(Q,K,se){S(Q,K*(o[Q].size.value-i[Q].value)*(Q==="horizontal"&&l.$q.lang.rtl===!0?-1:1),se)}}),()=>ee("div",{class:u.value,onMouseenter:$,onMouseleave:f},[ee("div",{ref:y,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:e.tabindex!==void 0?e.tabindex:void 0},[ee("div",{class:"q-scrollarea__content absolute",style:m.value},Wt(a.default,[ee(un,{debounce:0,onResize:A})])),ee(Oi,{axis:"both",onScroll:C})]),ee(un,{debounce:0,onResize:E}),ee("div",{class:o.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:P}),ee("div",{class:o.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:W}),we(ee("div",{ref:o.vertical.ref,class:o.vertical.thumbClass.value,style:o.vertical.style.value,"aria-hidden":"true"}),h),we(ee("div",{ref:o.horizontal.ref,class:o.horizontal.thumbClass.value,style:o.horizontal.style.value,"aria-hidden":"true"}),g)])}});const ss={xs:2,sm:4,md:6,lg:10,xl:14};function Jn(e,a,t){return{transform:a===!0?`translateX(${t.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var Vn=Ee({name:"QLinearProgress",props:{...tt,...dr,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:a}){const{proxy:t}=Re(),s=nt(e,t.$q),r=fr(e,ss),n=te(()=>e.indeterminate===!0||e.query===!0),i=te(()=>e.reverse!==e.query),o=te(()=>({...r.value!==null?r.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),l=te(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),c=te(()=>Jn(e.buffer!==void 0?e.buffer:1,i.value,t.$q)),v=te(()=>`with${e.instantFeedback===!0?"out":""}-transition`),b=te(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${v.value} q-linear-progress__track--${s.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),y=te(()=>Jn(n.value===!0?1:e.value,i.value,t.$q)),u=te(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${v.value} q-linear-progress__model--${n.value===!0?"in":""}determinate`),m=te(()=>({width:`${e.value*100}%`})),h=te(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${v.value}`);return()=>{const g=[ee("div",{class:b.value,style:c.value}),ee("div",{class:u.value,style:y.value})];return e.stripe===!0&&n.value===!1&&g.push(ee("div",{class:h.value,style:m.value})),ee("div",{class:l.value,style:o.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},Wt(a.default,g))}}});const ls=ce("div",{class:"row"},[ce("div",{class:"col-12"}," AutoThumb will automatically generate any missing thumbnail images in the selected path. Existing thumbnails will not be replaced. ")],-1),us={key:0,class:"row q-mb-sm"},cs=ce("label",null,"Collection: ",-1),ds=["value"],fs={key:1,class:"row q-mb-sm"},hs=ce("label",null,"Path: ",-1),vs={style:{flex:"1",position:"relative"}},ps={key:2,class:"row q-mb-sm"},ms={style:{"margin-left":"17px"}},gs={key:3,class:"row q-py-sm"},bs={class:"col-12"},ys={key:4,class:"row q-py-sm"},_s=ce("label",null,"Upload To: ",-1),ws=["value"],ks={key:5,class:"row justify-center q-py-sm"},xs=["src"],Ss={class:"absolute-full flex flex-center"},Cs={class:"absolute-full flex flex-center"},Ts=rt({__name:"AutoThumb",emits:[...Le.emits],setup(e){const{humanStorageSize:a}=Mr,t=oe(null),s=oe([]),r=Xe(),n=oe(null),i=oe([]),o=oe(0),l=oe(""),c=oe(null),v=oe([]),b=oe(!1),y=te(()=>n.value?r.tree.filter(P=>P.id===n.value)[0]:null),u=oe([]),m=P=>P.filter(Y=>Y.type==="tree").map(Y=>({id:Y.path,path:Y.path,icon:"mdi-folder",selectable:!0,name:Y.name,children:Y.children?m(Y.children):void 0})),h=te(()=>{var P;return y.value?at([{name:"/",icon:"mdi-folder",selectable:!0,id:"/",path:"",children:m(((P=y.value)==null?void 0:P.children)||[])}]):[]}),g=P=>{const W=[];for(let Y of P)Y.type==="tree"&&Y.children&&Y.children.length>0?W.push(...g(Y.children)):W.push(Y);return W.filter(Y=>{var $,f,j;let z=Y;!(($=z==null?void 0:z.content_types)!=null&&$.thumb)&&((f=z==null?void 0:z.content_types)!=null&&f.step||((j=z==null?void 0:z.content_types)==null||j.f3d))})},p=async()=>{var P,W,Y,z,$;for(;i.value.length>0;){await new Promise(Q=>setTimeout(Q,100));const f=i.value.shift(),j=await r.backend.autothumb({url:((W=(P=f==null?void 0:f.content_types)==null?void 0:P.f3d)==null?void 0:W.url)||((z=(Y=f==null?void 0:f.content_types)==null?void 0:Y.step)==null?void 0:z.url),content_type:($=f==null?void 0:f.content_types)!=null&&$.f3d?"f3d":"step",transparent:b.value,token:r.token});j&&(u.value.push({path:`${f.path}.png`,content:j.split(",")[1],encoding:"base64"}),l.value=j)}},w=async()=>{var W;const P=(W=y.value)==null?void 0:W.repositories.filter(Y=>Y.repr===c.value)[0];await yr({repo:P.repo,branch:P.branch,files:[...u.value],token:r.token,message:"Add auto-generated thumbnails.",progressCallback:(Y,z)=>{v.value=[Y,z],console.log(a(Y),"/",a(z))}})},{dialogRef:S,onDialogHide:E,onDialogOK:C,onDialogCancel:A}=Le();function R(){i.value.length?(i.value=[],o.value=0,l.value="",u.value=[]):u.value.length?u.value=[]:A()}function M(){var P;if(u.value.length)w().then(()=>{var W;C((W=y==null?void 0:y.value)==null?void 0:W.id)}).catch(W=>{alert(W)});else{let W=t.value||"";W==="/"&&(W=""),i.value=g(((P=y.value)==null?void 0:P.children)||[]).filter(Y=>Y.path.startsWith(W)),o.value=i.value.length,p().then(()=>{o.value=0,console.log("done")}).catch(Y=>{console.error("Processing Error",Y),o.value=0,i.value=[],l.value="",u.value=[]})}}return(P,W)=>(pe(),Te(xt,{ref_key:"dialogRef",ref:S,onHide:be(E),square:""},{default:ve(()=>[ue(Ct,{class:"q-dialog-plugin"},{default:ve(()=>[ue(St,null,{default:ve(()=>{var Y;return[ls,ue(hr,{class:"q-mb-sm"}),!i.value.length&&!u.value.length?(pe(),ye("div",us,[cs,we(ce("select",{"onUpdate:modelValue":W[0]||(W[0]=z=>n.value=z),style:{flex:"1"}},[(pe(!0),ye(Ze,null,ot(be(r).tree,z=>(pe(),ye("option",{key:z.id,value:z.id},Ie(z.name),9,ds))),128))],512),[[Nt,n.value]])])):Se("",!0),!i.value.length&&!u.value.length?(pe(),ye("div",fs,[hs,ce("div",vs,[ue(Fr,{ref:"treeRef",dense:"",selected:t.value,"onUpdate:selected":W[1]||(W[1]=z=>t.value=z),expanded:s.value,"onUpdate:expanded":W[2]||(W[2]=z=>s.value=z),"no-selection-unset":"",nodes:h.value,"node-key":"id","label-key":"name",class:"pathTree"},null,8,["selected","expanded","nodes"])])])):Se("",!0),!i.value.length&&!u.value.length?(pe(),ye("div",ps,[ce("label",ms,[qe(" BG Transparency: "),we(ce("input",{type:"checkbox","onUpdate:modelValue":W[3]||(W[3]=z=>b.value=z)},null,512),[[pt,b.value]])])])):Se("",!0),u.value.length&&!i.value.length?(pe(),ye("div",gs,[ce("div",bs,[ce("div",null,"Generated "+Ie(u.value.length)+" thumbnails.",1),ue(os,{class:"thumb-list"},{default:ve(()=>[(pe(!0),ye(Ze,null,ot(u.value,z=>(pe(),ye("div",{key:z.path,style:{"white-space":"nowrap"}},Ie(z.path),1))),128))]),_:1})])])):Se("",!0),u.value.length&&!i.value.length?(pe(),ye("div",ys,[_s,we(ce("select",{"onUpdate:modelValue":W[4]||(W[4]=z=>c.value=z),style:{flex:"1"}},[(pe(!0),ye(Ze,null,ot((Y=y.value)==null?void 0:Y.repositories,z=>(pe(),ye("option",{value:z.repr,key:z.repr},Ie(z.repr),9,ws))),128))],512),[[Nt,c.value]])])):Se("",!0),i.value.length?(pe(),ye("div",ks,[l.value?(pe(),ye("img",{key:0,src:l.value,class:"autothumb-preview"},null,8,xs)):Se("",!0)])):Se("",!0),o.value?(pe(),Te(Vn,{key:6,"animation-speed":100,size:"25px",value:(o.value-i.value.length)/o.value,color:"accent"},{default:ve(()=>[ce("div",Ss,[ue(cn,{color:"white","text-color":"accent",label:`${o.value-i.value.length} / ${o.value}`},null,8,["label"])])]),_:1},8,["value"])):Se("",!0),v.value?(pe(),Te(Vn,{key:7,size:"25px","animation-speed":100,value:v.value[0]/v.value[1],color:"accent"},{default:ve(()=>[ce("div",Cs,[ue(cn,{color:"white","text-color":"accent",label:`${be(a)(v.value[0])} / ${be(a)(v.value[1])}`},null,8,["label"])])]),_:1},8,["value"])):Se("",!0)]}),_:1}),ue(Zt,{align:"right"},{default:ve(()=>[ue(ze,{size:"sm",square:"",color:"negative","text-color":"white",label:"Cancel",onClick:R}),ue(ze,{color:"positive","text-color":"white",label:"OK",size:"sm",square:"",disable:!!(!y.value||!t.value||i.value.length||u.value.length&&!c.value),onClick:M},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),zs={...dr,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},hn=50,jr=2*hn,Ur=jr*Math.PI,Es=Math.round(Ur*1e3)/1e3;var As=Ee({name:"QCircularProgress",props:{...zs,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:a}){const{proxy:{$q:t}}=Re(),s=fr(e),r=te(()=>{const y=(t.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(t.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-y}deg)`:`rotate3d(0, 0, 1, ${y-90}deg)`}}),n=te(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),i=te(()=>jr/(1-e.thickness/2)),o=te(()=>`${i.value/2} ${i.value/2} ${i.value} ${i.value}`),l=te(()=>ft(e.value,e.min,e.max)),c=te(()=>Ur*(1-(l.value-e.min)/(e.max-e.min))),v=te(()=>e.thickness/2*i.value);function b({thickness:y,offset:u,color:m,cls:h,rounded:g}){return ee("circle",{class:"q-circular-progress__"+h+(m!==void 0?` text-${m}`:""),style:n.value,fill:"transparent",stroke:"currentColor","stroke-width":y,"stroke-dasharray":Es,"stroke-dashoffset":u,"stroke-linecap":g,cx:i.value,cy:i.value,r:hn})}return()=>{const y=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&y.push(ee("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:hn-v.value/2,cx:i.value,cy:i.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&y.push(b({cls:"track",thickness:v.value,offset:0,color:e.trackColor})),y.push(b({cls:"circle",thickness:v.value,offset:c.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const u=[ee("svg",{class:"q-circular-progress__svg",style:r.value,viewBox:o.value,"aria-hidden":"true"},y)];return e.showValue===!0&&u.push(ee("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},a.default!==void 0?a.default():[ee("div",l.value)])),ee("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:s.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:l.value},Ri(a.internal,u))}}}),Kr={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,a){(function(t){e.exports=t()})(function(){return function t(s,r,n){function i(c,v){if(!r[c]){if(!s[c]){var b=typeof Rt=="function"&&Rt;if(!v&&b)return b(c,!0);if(o)return o(c,!0);var y=new Error("Cannot find module '"+c+"'");throw y.code="MODULE_NOT_FOUND",y}var u=r[c]={exports:{}};s[c][0].call(u.exports,function(m){var h=s[c][1][m];return i(h||m)},u,u.exports,t,s,r,n)}return r[c].exports}for(var o=typeof Rt=="function"&&Rt,l=0;l<n.length;l++)i(n[l]);return i}({1:[function(t,s,r){var n=t("./utils"),i=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(l){for(var c,v,b,y,u,m,h,g=[],p=0,w=l.length,S=w,E=n.getTypeOf(l)!=="string";p<l.length;)S=w-p,b=E?(c=l[p++],v=p<w?l[p++]:0,p<w?l[p++]:0):(c=l.charCodeAt(p++),v=p<w?l.charCodeAt(p++):0,p<w?l.charCodeAt(p++):0),y=c>>2,u=(3&c)<<4|v>>4,m=1<S?(15&v)<<2|b>>6:64,h=2<S?63&b:64,g.push(o.charAt(y)+o.charAt(u)+o.charAt(m)+o.charAt(h));return g.join("")},r.decode=function(l){var c,v,b,y,u,m,h=0,g=0,p="data:";if(l.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var w,S=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&S--,l.charAt(l.length-2)===o.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=i.uint8array?new Uint8Array(0|S):new Array(0|S);h<l.length;)c=o.indexOf(l.charAt(h++))<<2|(y=o.indexOf(l.charAt(h++)))>>4,v=(15&y)<<4|(u=o.indexOf(l.charAt(h++)))>>2,b=(3&u)<<6|(m=o.indexOf(l.charAt(h++))),w[g++]=c,u!==64&&(w[g++]=v),m!==64&&(w[g++]=b);return w}},{"./support":30,"./utils":32}],2:[function(t,s,r){var n=t("./external"),i=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function c(v,b,y,u,m){this.compressedSize=v,this.uncompressedSize=b,this.crc32=y,this.compression=u,this.compressedContent=m}c.prototype={getContentWorker:function(){var v=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),b=this;return v.on("end",function(){if(this.streamInfo.data_length!==b.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),v},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(v,b,y){return v.pipe(new o).pipe(new l("uncompressedSize")).pipe(b.compressWorker(y)).pipe(new l("compressedSize")).withStreamInfo("compression",b)},s.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,s,r){var n=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,s,r){var n=t("./utils"),i=function(){for(var o,l=[],c=0;c<256;c++){o=c;for(var v=0;v<8;v++)o=1&o?3988292384^o>>>1:o>>>1;l[c]=o}return l}();s.exports=function(o,l){return o!==void 0&&o.length?n.getTypeOf(o)!=="string"?function(c,v,b,y){var u=i,m=y+b;c^=-1;for(var h=y;h<m;h++)c=c>>>8^u[255&(c^v[h])];return-1^c}(0|l,o,o.length,0):function(c,v,b,y){var u=i,m=y+b;c^=-1;for(var h=y;h<m;h++)c=c>>>8^u[255&(c^v.charCodeAt(h))];return-1^c}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(t,s,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,s,r){var n=null;n=typeof Promise!="undefined"?Promise:t("lie"),s.exports={Promise:n}},{lie:37}],7:[function(t,s,r){var n=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",i=t("pako"),o=t("./utils"),l=t("./stream/GenericWorker"),c=n?"uint8array":"array";function v(b,y){l.call(this,"FlateWorker/"+b),this._pako=null,this._pakoAction=b,this._pakoOptions=y,this.meta={}}r.magic="\b\0",o.inherits(v,l),v.prototype.processChunk=function(b){this.meta=b.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(c,b.data),!1)},v.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},v.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},v.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var b=this;this._pako.onData=function(y){b.push({data:y,meta:b.meta})}},r.compressWorker=function(b){return new v("Deflate",b)},r.uncompressWorker=function(){return new v("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,s,r){function n(u,m){var h,g="";for(h=0;h<m;h++)g+=String.fromCharCode(255&u),u>>>=8;return g}function i(u,m,h,g,p,w){var S,E,C=u.file,A=u.compression,R=w!==c.utf8encode,M=o.transformTo("string",w(C.name)),P=o.transformTo("string",c.utf8encode(C.name)),W=C.comment,Y=o.transformTo("string",w(W)),z=o.transformTo("string",c.utf8encode(W)),$=P.length!==C.name.length,f=z.length!==W.length,j="",Q="",K="",se=C.dir,X=C.date,de={crc32:0,compressedSize:0,uncompressedSize:0};m&&!h||(de.crc32=u.crc32,de.compressedSize=u.compressedSize,de.uncompressedSize=u.uncompressedSize);var L=0;m&&(L|=8),R||!$&&!f||(L|=2048);var T=0,J=0;se&&(T|=16),p==="UNIX"?(J=798,T|=function(B,N){var H=B;return B||(H=N?16893:33204),(65535&H)<<16}(C.unixPermissions,se)):(J=20,T|=function(B){return 63&(B||0)}(C.dosPermissions)),S=X.getUTCHours(),S<<=6,S|=X.getUTCMinutes(),S<<=5,S|=X.getUTCSeconds()/2,E=X.getUTCFullYear()-1980,E<<=4,E|=X.getUTCMonth()+1,E<<=5,E|=X.getUTCDate(),$&&(Q=n(1,1)+n(v(M),4)+P,j+="up"+n(Q.length,2)+Q),f&&(K=n(1,1)+n(v(Y),4)+z,j+="uc"+n(K.length,2)+K);var k="";return k+=`
\0`,k+=n(L,2),k+=A.magic,k+=n(S,2),k+=n(E,2),k+=n(de.crc32,4),k+=n(de.compressedSize,4),k+=n(de.uncompressedSize,4),k+=n(M.length,2),k+=n(j.length,2),{fileRecord:b.LOCAL_FILE_HEADER+k+M+j,dirRecord:b.CENTRAL_FILE_HEADER+n(J,2)+k+n(Y.length,2)+"\0\0\0\0"+n(T,4)+n(g,4)+M+j+Y}}var o=t("../utils"),l=t("../stream/GenericWorker"),c=t("../utf8"),v=t("../crc32"),b=t("../signature");function y(u,m,h,g){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=h,this.encodeFileName=g,this.streamFiles=u,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(y,l),y.prototype.push=function(u){var m=u.meta.percent||0,h=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(u):(this.bytesWritten+=u.data.length,l.prototype.push.call(this,{data:u.data,meta:{currentFile:this.currentFile,percent:h?(m+100*(h-g-1))/h:100}}))},y.prototype.openedSource=function(u){this.currentSourceOffset=this.bytesWritten,this.currentFile=u.file.name;var m=this.streamFiles&&!u.file.dir;if(m){var h=i(u,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:h.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(u){this.accumulate=!1;var m=this.streamFiles&&!u.file.dir,h=i(u,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),m)this.push({data:function(g){return b.DATA_DESCRIPTOR+n(g.crc32,4)+n(g.compressedSize,4)+n(g.uncompressedSize,4)}(u),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var u=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var h=this.bytesWritten-u,g=function(p,w,S,E,C){var A=o.transformTo("string",C(E));return b.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(p,2)+n(p,2)+n(w,4)+n(S,4)+n(A.length,2)+A}(this.dirRecords.length,h,u,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(u){this._sources.push(u);var m=this;return u.on("data",function(h){m.processChunk(h)}),u.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),u.on("error",function(h){m.error(h)}),this},y.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(u){var m=this._sources;if(!l.prototype.error.call(this,u))return!1;for(var h=0;h<m.length;h++)try{m[h].error(u)}catch{}return!0},y.prototype.lock=function(){l.prototype.lock.call(this);for(var u=this._sources,m=0;m<u.length;m++)u[m].lock()},s.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,s,r){var n=t("../compressions"),i=t("./ZipFileWorker");r.generateWorker=function(o,l,c){var v=new i(l.streamFiles,c,l.platform,l.encodeFileName),b=0;try{o.forEach(function(y,u){b++;var m=function(w,S){var E=w||S,C=n[E];if(!C)throw new Error(E+" is not a valid compression method !");return C}(u.options.compression,l.compression),h=u.options.compressionOptions||l.compressionOptions||{},g=u.dir,p=u.date;u._compressWorker(m,h).withStreamInfo("file",{name:y,dir:g,date:p,comment:u.comment||"",unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions}).pipe(v)}),v.entriesCount=b}catch(y){v.error(y)}return v}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,s,r){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new n;for(var o in this)typeof this[o]!="function"&&(i[o]=this[o]);return i}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.10.1",n.loadAsync=function(i,o){return new n().loadAsync(i,o)},n.external=t("./external"),s.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,s,r){var n=t("./utils"),i=t("./external"),o=t("./utf8"),l=t("./zipEntries"),c=t("./stream/Crc32Probe"),v=t("./nodejsUtils");function b(y){return new i.Promise(function(u,m){var h=y.decompressed.getContentWorker().pipe(new c);h.on("error",function(g){m(g)}).on("end",function(){h.streamInfo.crc32!==y.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):u()}).resume()})}s.exports=function(y,u){var m=this;return u=n.extend(u||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),v.isNode&&v.isStream(y)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",y,!0,u.optimizedBinaryString,u.base64).then(function(h){var g=new l(u);return g.load(h),g}).then(function(h){var g=[i.Promise.resolve(h)],p=h.files;if(u.checkCRC32)for(var w=0;w<p.length;w++)g.push(b(p[w]));return i.Promise.all(g)}).then(function(h){for(var g=h.shift(),p=g.files,w=0;w<p.length;w++){var S=p[w],E=S.fileNameStr,C=n.resolve(S.fileNameStr);m.file(C,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:u.createFolders}),S.dir||(m.file(C).unsafeOriginalName=E)}return g.zipComment.length&&(m.comment=g.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,s,r){var n=t("../utils"),i=t("../stream/GenericWorker");function o(l,c){i.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}n.inherits(o,i),o.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(v){c.push({data:v,meta:{percent:0}})}).on("error",function(v){c.isPaused?this.generatedError=v:c.error(v)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,s,r){var n=t("readable-stream").Readable;function i(o,l,c){n.call(this,l),this._helper=o;var v=this;o.on("data",function(b,y){v.push(b)||v._helper.pause(),c&&c(y)}).on("error",function(b){v.emit("error",b)}).on("end",function(){v.push(null)})}t("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},s.exports=i},{"../utils":32,"readable-stream":16}],14:[function(t,s,r){s.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(n,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,i);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,i)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var i=new Buffer(n);return i.fill(0),i},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(t,s,r){function n(C,A,R){var M,P=o.getTypeOf(A),W=o.extend(R||{},v);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(C=p(C)),W.createFolders&&(M=g(C))&&w.call(this,M,!0);var Y=P==="string"&&W.binary===!1&&W.base64===!1;R&&R.binary!==void 0||(W.binary=!Y),(A instanceof b&&A.uncompressedSize===0||W.dir||!A||A.length===0)&&(W.base64=!1,W.binary=!0,A="",W.compression="STORE",P="string");var z=null;z=A instanceof b||A instanceof l?A:m.isNode&&m.isStream(A)?new h(C,A):o.prepareContent(C,A,W.binary,W.optimizedBinaryString,W.base64);var $=new y(C,z,W);this.files[C]=$}var i=t("./utf8"),o=t("./utils"),l=t("./stream/GenericWorker"),c=t("./stream/StreamHelper"),v=t("./defaults"),b=t("./compressedObject"),y=t("./zipObject"),u=t("./generate"),m=t("./nodejsUtils"),h=t("./nodejs/NodejsStreamInputAdapter"),g=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var A=C.lastIndexOf("/");return 0<A?C.substring(0,A):""},p=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},w=function(C,A){return A=A!==void 0?A:v.createFolders,C=p(C),this.files[C]||n.call(this,C,null,{dir:!0,createFolders:A}),this.files[C]};function S(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var A,R,M;for(A in this.files)M=this.files[A],(R=A.slice(this.root.length,A.length))&&A.slice(0,this.root.length)===this.root&&C(R,M)},filter:function(C){var A=[];return this.forEach(function(R,M){C(R,M)&&A.push(M)}),A},file:function(C,A,R){if(arguments.length!==1)return C=this.root+C,n.call(this,C,A,R),this;if(S(C)){var M=C;return this.filter(function(W,Y){return!Y.dir&&M.test(W)})}var P=this.files[this.root+C];return P&&!P.dir?P:null},folder:function(C){if(!C)return this;if(S(C))return this.filter(function(P,W){return W.dir&&C.test(P)});var A=this.root+C,R=w.call(this,A),M=this.clone();return M.root=R.name,M},remove:function(C){C=this.root+C;var A=this.files[C];if(A||(C.slice(-1)!=="/"&&(C+="/"),A=this.files[C]),A&&!A.dir)delete this.files[C];else for(var R=this.filter(function(P,W){return W.name.slice(0,C.length)===C}),M=0;M<R.length;M++)delete this.files[R[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var A,R={};try{if((R=o.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");o.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var M=R.comment||this.comment||"";A=u.generateWorker(this,R,M)}catch(P){(A=new l("error")).error(P)}return new c(A,R.type||"string",R.mimeType)},generateAsync:function(C,A){return this.generateInternalStream(C).accumulate(A)},generateNodeStream:function(C,A){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(A)}};s.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,s,r){s.exports=t("stream")},{stream:void 0}],17:[function(t,s,r){var n=t("./DataReader");function i(o){n.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}t("../utils").inherits(i,n),i.prototype.byteAt=function(o){return this.data[this.zero+o]},i.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),c=o.charCodeAt(1),v=o.charCodeAt(2),b=o.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===l&&this.data[y+1]===c&&this.data[y+2]===v&&this.data[y+3]===b)return y-this.zero;return-1},i.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),c=o.charCodeAt(1),v=o.charCodeAt(2),b=o.charCodeAt(3),y=this.readData(4);return l===y[0]&&c===y[1]&&v===y[2]&&b===y[3]},i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=i},{"../utils":32,"./DataReader":18}],18:[function(t,s,r){var n=t("../utils");function i(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,c=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=o,c},readString:function(o){return n.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},s.exports=i},{"../utils":32}],19:[function(t,s,r){var n=t("./Uint8ArrayReader");function i(o){n.call(this,o)}t("../utils").inherits(i,n),i.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,s,r){var n=t("./DataReader");function i(o){n.call(this,o)}t("../utils").inherits(i,n),i.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},i.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},i.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},i.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=i},{"../utils":32,"./DataReader":18}],21:[function(t,s,r){var n=t("./ArrayReader");function i(o){n.call(this,o)}t("../utils").inherits(i,n),i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(t,s,r){var n=t("../utils"),i=t("../support"),o=t("./ArrayReader"),l=t("./StringReader"),c=t("./NodeBufferReader"),v=t("./Uint8ArrayReader");s.exports=function(b){var y=n.getTypeOf(b);return n.checkSupport(y),y!=="string"||i.uint8array?y==="nodebuffer"?new c(b):i.uint8array?new v(n.transformTo("uint8array",b)):new o(n.transformTo("array",b)):new l(b)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,s,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,s,r){var n=t("./GenericWorker"),i=t("../utils");function o(l){n.call(this,"ConvertWorker to "+l),this.destType=l}i.inherits(o,n),o.prototype.processChunk=function(l){this.push({data:i.transformTo(this.destType,l.data),meta:l.meta})},s.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,s,r){var n=t("./GenericWorker"),i=t("../crc32");function o(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,n),o.prototype.processChunk=function(l){this.streamInfo.crc32=i(l.data,this.streamInfo.crc32||0),this.push(l)},s.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,s,r){var n=t("../utils"),i=t("./GenericWorker");function o(l){i.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}n.inherits(o,i),o.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}i.prototype.processChunk.call(this,l)},s.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,s,r){var n=t("../utils"),i=t("./GenericWorker");function o(l){i.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(v){c.dataIsReady=!0,c.data=v,c.max=v&&v.length||0,c.type=n.getTypeOf(v),c.isPaused||c._tickAndRepeat()},function(v){c.error(v)})}n.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,s,r){function n(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,o){return this._listeners[i].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,o){if(this._listeners[i])for(var l=0;l<this._listeners[i].length;l++)this._listeners[i][l].call(this,o)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var o=this;return i.on("data",function(l){o.processChunk(l)}),i.on("end",function(){o.end()}),i.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,o){return this.extraStreamInfo[i]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},s.exports=n},{}],29:[function(t,s,r){var n=t("../utils"),i=t("./ConvertWorker"),o=t("./GenericWorker"),l=t("../base64"),c=t("../support"),v=t("../external"),b=null;if(c.nodestream)try{b=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(m,h){return new v.Promise(function(g,p){var w=[],S=m._internalType,E=m._outputType,C=m._mimeType;m.on("data",function(A,R){w.push(A),h&&h(R)}).on("error",function(A){w=[],p(A)}).on("end",function(){try{var A=function(R,M,P){switch(R){case"blob":return n.newBlob(n.transformTo("arraybuffer",M),P);case"base64":return l.encode(M);default:return n.transformTo(R,M)}}(E,function(R,M){var P,W=0,Y=null,z=0;for(P=0;P<M.length;P++)z+=M[P].length;switch(R){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(Y=new Uint8Array(z),P=0;P<M.length;P++)Y.set(M[P],W),W+=M[P].length;return Y;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+R+"'")}}(S,w),C);g(A)}catch(R){p(R)}w=[]}).resume()})}function u(m,h,g){var p=h;switch(h){case"blob":case"arraybuffer":p="uint8array";break;case"base64":p="string"}try{this._internalType=p,this._outputType=h,this._mimeType=g,n.checkSupport(p),this._worker=m.pipe(new i(p)),m.lock()}catch(w){this._worker=new o("error"),this._worker.error(w)}}u.prototype={accumulate:function(m){return y(this,m)},on:function(m,h){var g=this;return m==="data"?this._worker.on(m,function(p){h.call(g,p.data,p.meta)}):this._worker.on(m,function(){n.delay(h,arguments,g)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new b(this,{objectMode:this._outputType!=="nodebuffer"},m)}},s.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,s,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",r.nodebuffer=typeof Buffer!="undefined",r.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=i.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(t,s,r){for(var n=t("./utils"),i=t("./support"),o=t("./nodejsUtils"),l=t("./stream/GenericWorker"),c=new Array(256),v=0;v<256;v++)c[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;c[254]=c[254]=1;function b(){l.call(this,"utf-8 decode"),this.leftOver=null}function y(){l.call(this,"utf-8 encode")}r.utf8encode=function(u){return i.nodebuffer?o.newBufferFrom(u,"utf-8"):function(m){var h,g,p,w,S,E=m.length,C=0;for(w=0;w<E;w++)(64512&(g=m.charCodeAt(w)))==55296&&w+1<E&&(64512&(p=m.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(p-56320),w++),C+=g<128?1:g<2048?2:g<65536?3:4;for(h=i.uint8array?new Uint8Array(C):new Array(C),w=S=0;S<C;w++)(64512&(g=m.charCodeAt(w)))==55296&&w+1<E&&(64512&(p=m.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(p-56320),w++),g<128?h[S++]=g:(g<2048?h[S++]=192|g>>>6:(g<65536?h[S++]=224|g>>>12:(h[S++]=240|g>>>18,h[S++]=128|g>>>12&63),h[S++]=128|g>>>6&63),h[S++]=128|63&g);return h}(u)},r.utf8decode=function(u){return i.nodebuffer?n.transformTo("nodebuffer",u).toString("utf-8"):function(m){var h,g,p,w,S=m.length,E=new Array(2*S);for(h=g=0;h<S;)if((p=m[h++])<128)E[g++]=p;else if(4<(w=c[p]))E[g++]=65533,h+=w-1;else{for(p&=w===2?31:w===3?15:7;1<w&&h<S;)p=p<<6|63&m[h++],w--;1<w?E[g++]=65533:p<65536?E[g++]=p:(p-=65536,E[g++]=55296|p>>10&1023,E[g++]=56320|1023&p)}return E.length!==g&&(E.subarray?E=E.subarray(0,g):E.length=g),n.applyFromCharCode(E)}(u=n.transformTo(i.uint8array?"uint8array":"array",u))},n.inherits(b,l),b.prototype.processChunk=function(u){var m=n.transformTo(i.uint8array?"uint8array":"array",u.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var h=m;(m=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),m.set(h,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var g=function(w,S){var E;for((S=S||w.length)>w.length&&(S=w.length),E=S-1;0<=E&&(192&w[E])==128;)E--;return E<0||E===0?S:E+c[w[E]]>S?E:S}(m),p=m;g!==m.length&&(i.uint8array?(p=m.subarray(0,g),this.leftOver=m.subarray(g,m.length)):(p=m.slice(0,g),this.leftOver=m.slice(g,m.length))),this.push({data:r.utf8decode(p),meta:u.meta})},b.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=b,n.inherits(y,l),y.prototype.processChunk=function(u){this.push({data:r.utf8encode(u.data),meta:u.meta})},r.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,s,r){var n=t("./support"),i=t("./base64"),o=t("./nodejsUtils"),l=t("./external");function c(h){return h}function v(h,g){for(var p=0;p<h.length;++p)g[p]=255&h.charCodeAt(p);return g}t("setimmediate"),r.newBlob=function(h,g){r.checkSupport("blob");try{return new Blob([h],{type:g})}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return p.append(h),p.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var b={stringifyByChunk:function(h,g,p){var w=[],S=0,E=h.length;if(E<=p)return String.fromCharCode.apply(null,h);for(;S<E;)g==="array"||g==="nodebuffer"?w.push(String.fromCharCode.apply(null,h.slice(S,Math.min(S+p,E)))):w.push(String.fromCharCode.apply(null,h.subarray(S,Math.min(S+p,E)))),S+=p;return w.join("")},stringifyByChar:function(h){for(var g="",p=0;p<h.length;p++)g+=String.fromCharCode(h[p]);return g},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function y(h){var g=65536,p=r.getTypeOf(h),w=!0;if(p==="uint8array"?w=b.applyCanBeUsed.uint8array:p==="nodebuffer"&&(w=b.applyCanBeUsed.nodebuffer),w)for(;1<g;)try{return b.stringifyByChunk(h,p,g)}catch{g=Math.floor(g/2)}return b.stringifyByChar(h)}function u(h,g){for(var p=0;p<h.length;p++)g[p]=h[p];return g}r.applyFromCharCode=y;var m={};m.string={string:c,array:function(h){return v(h,new Array(h.length))},arraybuffer:function(h){return m.string.uint8array(h).buffer},uint8array:function(h){return v(h,new Uint8Array(h.length))},nodebuffer:function(h){return v(h,o.allocBuffer(h.length))}},m.array={string:y,array:c,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return o.newBufferFrom(h)}},m.arraybuffer={string:function(h){return y(new Uint8Array(h))},array:function(h){return u(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:c,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return o.newBufferFrom(new Uint8Array(h))}},m.uint8array={string:y,array:function(h){return u(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:c,nodebuffer:function(h){return o.newBufferFrom(h)}},m.nodebuffer={string:y,array:function(h){return u(h,new Array(h.length))},arraybuffer:function(h){return m.nodebuffer.uint8array(h).buffer},uint8array:function(h){return u(h,new Uint8Array(h.length))},nodebuffer:c},r.transformTo=function(h,g){if(g=g||"",!h)return g;r.checkSupport(h);var p=r.getTypeOf(g);return m[p][h](g)},r.resolve=function(h){for(var g=h.split("/"),p=[],w=0;w<g.length;w++){var S=g[w];S==="."||S===""&&w!==0&&w!==g.length-1||(S===".."?p.pop():p.push(S))}return p.join("/")},r.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":n.nodebuffer&&o.isBuffer(h)?"nodebuffer":n.uint8array&&h instanceof Uint8Array?"uint8array":n.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(h){if(!n[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(h){var g,p,w="";for(p=0;p<(h||"").length;p++)w+="\\x"+((g=h.charCodeAt(p))<16?"0":"")+g.toString(16).toUpperCase();return w},r.delay=function(h,g,p){setImmediate(function(){h.apply(p||null,g||[])})},r.inherits=function(h,g){function p(){}p.prototype=g.prototype,h.prototype=new p},r.extend=function(){var h,g,p={};for(h=0;h<arguments.length;h++)for(g in arguments[h])Object.prototype.hasOwnProperty.call(arguments[h],g)&&p[g]===void 0&&(p[g]=arguments[h][g]);return p},r.prepareContent=function(h,g,p,w,S){return l.Promise.resolve(g).then(function(E){return n.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader!="undefined"?new l.Promise(function(C,A){var R=new FileReader;R.onload=function(M){C(M.target.result)},R.onerror=function(M){A(M.target.error)},R.readAsArrayBuffer(E)}):E}).then(function(E){var C=r.getTypeOf(E);return C?(C==="arraybuffer"?E=r.transformTo("uint8array",E):C==="string"&&(S?E=i.decode(E):p&&w!==!0&&(E=function(A){return v(A,n.uint8array?new Uint8Array(A.length):new Array(A.length))}(E))),E):l.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,s,r){var n=t("./reader/readerFor"),i=t("./utils"),o=t("./signature"),l=t("./zipEntry"),c=t("./support");function v(b){this.files=[],this.loadOptions=b}v.prototype={checkSignature:function(b){if(!this.reader.readAndCheckSignature(b)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(y)+", expected "+i.pretty(b)+")")}},isSignature:function(b,y){var u=this.reader.index;this.reader.setIndex(b);var m=this.reader.readString(4)===y;return this.reader.setIndex(u),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var b=this.reader.readData(this.zipCommentLength),y=c.uint8array?"uint8array":"array",u=i.transformTo(y,b);this.zipComment=this.loadOptions.decodeFileName(u)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var b,y,u,m=this.zip64EndOfCentralSize-44;0<m;)b=this.reader.readInt(2),y=this.reader.readInt(4),u=this.reader.readData(y),this.zip64ExtensibleData[b]={id:b,length:y,value:u}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var b,y;for(b=0;b<this.files.length;b++)y=this.files[b],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var b;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(b=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(b);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var b=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(b<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(b);var y=b;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(b=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(b),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var u=this.centralDirOffset+this.centralDirSize;this.zip64&&(u+=20,u+=12+this.zip64EndOfCentralSize);var m=y-u;if(0<m)this.isSignature(y,o.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(b){this.reader=n(b)},load:function(b){this.prepareReader(b),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=v},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,s,r){var n=t("./reader/readerFor"),i=t("./utils"),o=t("./compressedObject"),l=t("./crc32"),c=t("./utf8"),v=t("./compressions"),b=t("./support");function y(u,m){this.options=u,this.loadOptions=m}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(u){var m,h;if(u.skip(22),this.fileNameLength=u.readInt(2),h=u.readInt(2),this.fileName=u.readData(this.fileNameLength),u.skip(h),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(g){for(var p in v)if(Object.prototype.hasOwnProperty.call(v,p)&&v[p].magic===g)return v[p];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,m,u.readData(this.compressedSize))},readCentralPart:function(u){this.versionMadeBy=u.readInt(2),u.skip(2),this.bitFlag=u.readInt(2),this.compressionMethod=u.readString(2),this.date=u.readDate(),this.crc32=u.readInt(4),this.compressedSize=u.readInt(4),this.uncompressedSize=u.readInt(4);var m=u.readInt(2);if(this.extraFieldsLength=u.readInt(2),this.fileCommentLength=u.readInt(2),this.diskNumberStart=u.readInt(2),this.internalFileAttributes=u.readInt(2),this.externalFileAttributes=u.readInt(4),this.localHeaderOffset=u.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");u.skip(m),this.readExtraFields(u),this.parseZIP64ExtraField(u),this.fileComment=u.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var u=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),u==0&&(this.dosPermissions=63&this.externalFileAttributes),u==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var u=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=u.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=u.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=u.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=u.readInt(4))}},readExtraFields:function(u){var m,h,g,p=u.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});u.index+4<p;)m=u.readInt(2),h=u.readInt(2),g=u.readData(h),this.extraFields[m]={id:m,length:h,value:g};u.setIndex(p)},handleUTF8:function(){var u=b.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var h=i.transformTo(u,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(h)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var p=i.transformTo(u,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(p)}}},findExtraFieldUnicodePath:function(){var u=this.extraFields[28789];if(u){var m=n(u.value);return m.readInt(1)!==1||l(this.fileName)!==m.readInt(4)?null:c.utf8decode(m.readData(u.length-5))}return null},findExtraFieldUnicodeComment:function(){var u=this.extraFields[25461];if(u){var m=n(u.value);return m.readInt(1)!==1||l(this.fileComment)!==m.readInt(4)?null:c.utf8decode(m.readData(u.length-5))}return null}},s.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,s,r){function n(m,h,g){this.name=m,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=h,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var i=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),l=t("./utf8"),c=t("./compressedObject"),v=t("./stream/GenericWorker");n.prototype={internalStream:function(m){var h=null,g="string";try{if(!m)throw new Error("No output type specified.");var p=(g=m.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),h=this._decompressWorker();var w=!this._dataBinary;w&&!p&&(h=h.pipe(new l.Utf8EncodeWorker)),!w&&p&&(h=h.pipe(new l.Utf8DecodeWorker))}catch(S){(h=new v("error")).error(S)}return new i(h,g,"")},async:function(m,h){return this.internalStream(m).accumulate(h)},nodeStream:function(m,h){return this.internalStream(m||"nodebuffer").toNodejsStream(h)},_compressWorker:function(m,h){if(this._data instanceof c&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(g,m,h)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof v?this._data:new o(this._data)}};for(var b=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<b.length;u++)n.prototype[b[u]]=y;s.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,s,r){(function(n){var i,o,l=n.MutationObserver||n.WebKitMutationObserver;if(l){var c=0,v=new l(m),b=n.document.createTextNode("");v.observe(b,{characterData:!0}),i=function(){b.data=c=++c%2}}else if(n.setImmediate||n.MessageChannel===void 0)i="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var h=n.document.createElement("script");h.onreadystatechange=function(){m(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},n.document.documentElement.appendChild(h)}:function(){setTimeout(m,0)};else{var y=new n.MessageChannel;y.port1.onmessage=m,i=function(){y.port2.postMessage(0)}}var u=[];function m(){var h,g;o=!0;for(var p=u.length;p;){for(g=u,u=[],h=-1;++h<p;)g[h]();p=u.length}o=!1}s.exports=function(h){u.push(h)!==1||o||i()}}).call(this,typeof ke!="undefined"?ke:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(t,s,r){var n=t("immediate");function i(){}var o={},l=["REJECTED"],c=["FULFILLED"],v=["PENDING"];function b(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,p!==i&&h(this,p)}function y(p,w,S){this.promise=p,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function u(p,w,S){n(function(){var E;try{E=w(S)}catch(C){return o.reject(p,C)}E===p?o.reject(p,new TypeError("Cannot resolve promise with itself")):o.resolve(p,E)})}function m(p){var w=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof w=="function")return function(){w.apply(p,arguments)}}function h(p,w){var S=!1;function E(R){S||(S=!0,o.reject(p,R))}function C(R){S||(S=!0,o.resolve(p,R))}var A=g(function(){w(C,E)});A.status==="error"&&E(A.value)}function g(p,w){var S={};try{S.value=p(w),S.status="success"}catch(E){S.status="error",S.value=E}return S}(s.exports=b).prototype.finally=function(p){if(typeof p!="function")return this;var w=this.constructor;return this.then(function(S){return w.resolve(p()).then(function(){return S})},function(S){return w.resolve(p()).then(function(){throw S})})},b.prototype.catch=function(p){return this.then(null,p)},b.prototype.then=function(p,w){if(typeof p!="function"&&this.state===c||typeof w!="function"&&this.state===l)return this;var S=new this.constructor(i);return this.state!==v?u(S,this.state===c?p:w,this.outcome):this.queue.push(new y(S,p,w)),S},y.prototype.callFulfilled=function(p){o.resolve(this.promise,p)},y.prototype.otherCallFulfilled=function(p){u(this.promise,this.onFulfilled,p)},y.prototype.callRejected=function(p){o.reject(this.promise,p)},y.prototype.otherCallRejected=function(p){u(this.promise,this.onRejected,p)},o.resolve=function(p,w){var S=g(m,w);if(S.status==="error")return o.reject(p,S.value);var E=S.value;if(E)h(p,E);else{p.state=c,p.outcome=w;for(var C=-1,A=p.queue.length;++C<A;)p.queue[C].callFulfilled(w)}return p},o.reject=function(p,w){p.state=l,p.outcome=w;for(var S=-1,E=p.queue.length;++S<E;)p.queue[S].callRejected(w);return p},b.resolve=function(p){return p instanceof this?p:o.resolve(new this(i),p)},b.reject=function(p){var w=new this(i);return o.reject(w,p)},b.all=function(p){var w=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=p.length,E=!1;if(!S)return this.resolve([]);for(var C=new Array(S),A=0,R=-1,M=new this(i);++R<S;)P(p[R],R);return M;function P(W,Y){w.resolve(W).then(function(z){C[Y]=z,++A!==S||E||(E=!0,o.resolve(M,C))},function(z){E||(E=!0,o.reject(M,z))})}},b.race=function(p){var w=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=p.length,E=!1;if(!S)return this.resolve([]);for(var C=-1,A=new this(i);++C<S;)R=p[C],w.resolve(R).then(function(M){E||(E=!0,o.resolve(A,M))},function(M){E||(E=!0,o.reject(A,M))});var R;return A}},{immediate:36}],38:[function(t,s,r){var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),s.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,s,r){var n=t("./zlib/deflate"),i=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/messages"),c=t("./zlib/zstream"),v=Object.prototype.toString,b=0,y=-1,u=0,m=8;function h(p){if(!(this instanceof h))return new h(p);this.options=i.assign({level:y,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},p||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var S=n.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(S!==b)throw new Error(l[S]);if(w.header&&n.deflateSetHeader(this.strm,w.header),w.dictionary){var E;if(E=typeof w.dictionary=="string"?o.string2buf(w.dictionary):v.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(S=n.deflateSetDictionary(this.strm,E))!==b)throw new Error(l[S]);this._dict_set=!0}}function g(p,w){var S=new h(w);if(S.push(p,!0),S.err)throw S.msg||l[S.err];return S.result}h.prototype.push=function(p,w){var S,E,C=this.strm,A=this.options.chunkSize;if(this.ended)return!1;E=w===~~w?w:w===!0?4:0,typeof p=="string"?C.input=o.string2buf(p):v.call(p)==="[object ArrayBuffer]"?C.input=new Uint8Array(p):C.input=p,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new i.Buf8(A),C.next_out=0,C.avail_out=A),(S=n.deflate(C,E))!==1&&S!==b)return this.onEnd(S),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(i.shrinkBuf(C.output,C.next_out))):this.onData(i.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&S!==1);return E===4?(S=n.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===b):E!==2||(this.onEnd(b),!(C.avail_out=0))},h.prototype.onData=function(p){this.chunks.push(p)},h.prototype.onEnd=function(p){p===b&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},r.Deflate=h,r.deflate=g,r.deflateRaw=function(p,w){return(w=w||{}).raw=!0,g(p,w)},r.gzip=function(p,w){return(w=w||{}).gzip=!0,g(p,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,s,r){var n=t("./zlib/inflate"),i=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/constants"),c=t("./zlib/messages"),v=t("./zlib/zstream"),b=t("./zlib/gzheader"),y=Object.prototype.toString;function u(h){if(!(this instanceof u))return new u(h);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},h||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||h&&h.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&(15&g.windowBits)==0&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var p=n.inflateInit2(this.strm,g.windowBits);if(p!==l.Z_OK)throw new Error(c[p]);this.header=new b,n.inflateGetHeader(this.strm,this.header)}function m(h,g){var p=new u(g);if(p.push(h,!0),p.err)throw p.msg||c[p.err];return p.result}u.prototype.push=function(h,g){var p,w,S,E,C,A,R=this.strm,M=this.options.chunkSize,P=this.options.dictionary,W=!1;if(this.ended)return!1;w=g===~~g?g:g===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof h=="string"?R.input=o.binstring2buf(h):y.call(h)==="[object ArrayBuffer]"?R.input=new Uint8Array(h):R.input=h,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new i.Buf8(M),R.next_out=0,R.avail_out=M),(p=n.inflate(R,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&P&&(A=typeof P=="string"?o.string2buf(P):y.call(P)==="[object ArrayBuffer]"?new Uint8Array(P):P,p=n.inflateSetDictionary(this.strm,A)),p===l.Z_BUF_ERROR&&W===!0&&(p=l.Z_OK,W=!1),p!==l.Z_STREAM_END&&p!==l.Z_OK)return this.onEnd(p),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&p!==l.Z_STREAM_END&&(R.avail_in!==0||w!==l.Z_FINISH&&w!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=o.utf8border(R.output,R.next_out),E=R.next_out-S,C=o.buf2string(R.output,S),R.next_out=E,R.avail_out=M-E,E&&i.arraySet(R.output,R.output,S,E,0),this.onData(C)):this.onData(i.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(W=!0)}while((0<R.avail_in||R.avail_out===0)&&p!==l.Z_STREAM_END);return p===l.Z_STREAM_END&&(w=l.Z_FINISH),w===l.Z_FINISH?(p=n.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===l.Z_OK):w!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(R.avail_out=0))},u.prototype.onData=function(h){this.chunks.push(h)},u.prototype.onEnd=function(h){h===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},r.Inflate=u,r.inflate=m,r.inflateRaw=function(h,g){return(g=g||{}).raw=!0,m(h,g)},r.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,s,r){var n=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";r.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var v=c.shift();if(v){if(typeof v!="object")throw new TypeError(v+"must be non-object");for(var b in v)v.hasOwnProperty(b)&&(l[b]=v[b])}}return l},r.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var i={arraySet:function(l,c,v,b,y){if(c.subarray&&l.subarray)l.set(c.subarray(v,v+b),y);else for(var u=0;u<b;u++)l[y+u]=c[v+u]},flattenChunks:function(l){var c,v,b,y,u,m;for(c=b=0,v=l.length;c<v;c++)b+=l[c].length;for(m=new Uint8Array(b),c=y=0,v=l.length;c<v;c++)u=l[c],m.set(u,y),y+=u.length;return m}},o={arraySet:function(l,c,v,b,y){for(var u=0;u<b;u++)l[y+u]=c[v+u]},flattenChunks:function(l){return[].concat.apply([],l)}};r.setTyped=function(l){l?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(n)},{}],42:[function(t,s,r){var n=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new n.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function v(b,y){if(y<65537&&(b.subarray&&o||!b.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(b,y));for(var u="",m=0;m<y;m++)u+=String.fromCharCode(b[m]);return u}l[254]=l[254]=1,r.string2buf=function(b){var y,u,m,h,g,p=b.length,w=0;for(h=0;h<p;h++)(64512&(u=b.charCodeAt(h)))==55296&&h+1<p&&(64512&(m=b.charCodeAt(h+1)))==56320&&(u=65536+(u-55296<<10)+(m-56320),h++),w+=u<128?1:u<2048?2:u<65536?3:4;for(y=new n.Buf8(w),h=g=0;g<w;h++)(64512&(u=b.charCodeAt(h)))==55296&&h+1<p&&(64512&(m=b.charCodeAt(h+1)))==56320&&(u=65536+(u-55296<<10)+(m-56320),h++),u<128?y[g++]=u:(u<2048?y[g++]=192|u>>>6:(u<65536?y[g++]=224|u>>>12:(y[g++]=240|u>>>18,y[g++]=128|u>>>12&63),y[g++]=128|u>>>6&63),y[g++]=128|63&u);return y},r.buf2binstring=function(b){return v(b,b.length)},r.binstring2buf=function(b){for(var y=new n.Buf8(b.length),u=0,m=y.length;u<m;u++)y[u]=b.charCodeAt(u);return y},r.buf2string=function(b,y){var u,m,h,g,p=y||b.length,w=new Array(2*p);for(u=m=0;u<p;)if((h=b[u++])<128)w[m++]=h;else if(4<(g=l[h]))w[m++]=65533,u+=g-1;else{for(h&=g===2?31:g===3?15:7;1<g&&u<p;)h=h<<6|63&b[u++],g--;1<g?w[m++]=65533:h<65536?w[m++]=h:(h-=65536,w[m++]=55296|h>>10&1023,w[m++]=56320|1023&h)}return v(w,m)},r.utf8border=function(b,y){var u;for((y=y||b.length)>b.length&&(y=b.length),u=y-1;0<=u&&(192&b[u])==128;)u--;return u<0||u===0?y:u+l[b[u]]>y?u:y}},{"./common":41}],43:[function(t,s,r){s.exports=function(n,i,o,l){for(var c=65535&n|0,v=n>>>16&65535|0,b=0;o!==0;){for(o-=b=2e3<o?2e3:o;v=v+(c=c+i[l++]|0)|0,--b;);c%=65521,v%=65521}return c|v<<16|0}},{}],44:[function(t,s,r){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,s,r){var n=function(){for(var i,o=[],l=0;l<256;l++){i=l;for(var c=0;c<8;c++)i=1&i?3988292384^i>>>1:i>>>1;o[l]=i}return o}();s.exports=function(i,o,l,c){var v=n,b=c+l;i^=-1;for(var y=c;y<b;y++)i=i>>>8^v[255&(i^o[y])];return-1^i}},{}],46:[function(t,s,r){var n,i=t("../utils/common"),o=t("./trees"),l=t("./adler32"),c=t("./crc32"),v=t("./messages"),b=0,y=4,u=0,m=-2,h=-1,g=4,p=2,w=8,S=9,E=286,C=30,A=19,R=2*E+1,M=15,P=3,W=258,Y=W+P+1,z=42,$=113,f=1,j=2,Q=3,K=4;function se(d,V){return d.msg=v[V],V}function X(d){return(d<<1)-(4<d?9:0)}function de(d){for(var V=d.length;0<=--V;)d[V]=0}function L(d){var V=d.state,U=V.pending;U>d.avail_out&&(U=d.avail_out),U!==0&&(i.arraySet(d.output,V.pending_buf,V.pending_out,U,d.next_out),d.next_out+=U,V.pending_out+=U,d.total_out+=U,d.avail_out-=U,V.pending-=U,V.pending===0&&(V.pending_out=0))}function T(d,V){o._tr_flush_block(d,0<=d.block_start?d.block_start:-1,d.strstart-d.block_start,V),d.block_start=d.strstart,L(d.strm)}function J(d,V){d.pending_buf[d.pending++]=V}function k(d,V){d.pending_buf[d.pending++]=V>>>8&255,d.pending_buf[d.pending++]=255&V}function B(d,V){var U,x,_=d.max_chain_length,O=d.strstart,Z=d.prev_length,D=d.nice_match,q=d.strstart>d.w_size-Y?d.strstart-(d.w_size-Y):0,G=d.window,re=d.w_mask,ne=d.prev,le=d.strstart+W,he=G[O+Z-1],me=G[O+Z];d.prev_length>=d.good_match&&(_>>=2),D>d.lookahead&&(D=d.lookahead);do if(G[(U=V)+Z]===me&&G[U+Z-1]===he&&G[U]===G[O]&&G[++U]===G[O+1]){O+=2,U++;do;while(G[++O]===G[++U]&&G[++O]===G[++U]&&G[++O]===G[++U]&&G[++O]===G[++U]&&G[++O]===G[++U]&&G[++O]===G[++U]&&G[++O]===G[++U]&&G[++O]===G[++U]&&O<le);if(x=W-(le-O),O=le-W,Z<x){if(d.match_start=V,D<=(Z=x))break;he=G[O+Z-1],me=G[O+Z]}}while((V=ne[V&re])>q&&--_!=0);return Z<=d.lookahead?Z:d.lookahead}function N(d){var V,U,x,_,O,Z,D,q,G,re,ne=d.w_size;do{if(_=d.window_size-d.lookahead-d.strstart,d.strstart>=ne+(ne-Y)){for(i.arraySet(d.window,d.window,ne,ne,0),d.match_start-=ne,d.strstart-=ne,d.block_start-=ne,V=U=d.hash_size;x=d.head[--V],d.head[V]=ne<=x?x-ne:0,--U;);for(V=U=ne;x=d.prev[--V],d.prev[V]=ne<=x?x-ne:0,--U;);_+=ne}if(d.strm.avail_in===0)break;if(Z=d.strm,D=d.window,q=d.strstart+d.lookahead,G=_,re=void 0,re=Z.avail_in,G<re&&(re=G),U=re===0?0:(Z.avail_in-=re,i.arraySet(D,Z.input,Z.next_in,re,q),Z.state.wrap===1?Z.adler=l(Z.adler,D,re,q):Z.state.wrap===2&&(Z.adler=c(Z.adler,D,re,q)),Z.next_in+=re,Z.total_in+=re,re),d.lookahead+=U,d.lookahead+d.insert>=P)for(O=d.strstart-d.insert,d.ins_h=d.window[O],d.ins_h=(d.ins_h<<d.hash_shift^d.window[O+1])&d.hash_mask;d.insert&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[O+P-1])&d.hash_mask,d.prev[O&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=O,O++,d.insert--,!(d.lookahead+d.insert<P)););}while(d.lookahead<Y&&d.strm.avail_in!==0)}function H(d,V){for(var U,x;;){if(d.lookahead<Y){if(N(d),d.lookahead<Y&&V===b)return f;if(d.lookahead===0)break}if(U=0,d.lookahead>=P&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+P-1])&d.hash_mask,U=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),U!==0&&d.strstart-U<=d.w_size-Y&&(d.match_length=B(d,U)),d.match_length>=P)if(x=o._tr_tally(d,d.strstart-d.match_start,d.match_length-P),d.lookahead-=d.match_length,d.match_length<=d.max_lazy_match&&d.lookahead>=P){for(d.match_length--;d.strstart++,d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+P-1])&d.hash_mask,U=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart,--d.match_length!=0;);d.strstart++}else d.strstart+=d.match_length,d.match_length=0,d.ins_h=d.window[d.strstart],d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+1])&d.hash_mask;else x=o._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++;if(x&&(T(d,!1),d.strm.avail_out===0))return f}return d.insert=d.strstart<P-1?d.strstart:P-1,V===y?(T(d,!0),d.strm.avail_out===0?Q:K):d.last_lit&&(T(d,!1),d.strm.avail_out===0)?f:j}function I(d,V){for(var U,x,_;;){if(d.lookahead<Y){if(N(d),d.lookahead<Y&&V===b)return f;if(d.lookahead===0)break}if(U=0,d.lookahead>=P&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+P-1])&d.hash_mask,U=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),d.prev_length=d.match_length,d.prev_match=d.match_start,d.match_length=P-1,U!==0&&d.prev_length<d.max_lazy_match&&d.strstart-U<=d.w_size-Y&&(d.match_length=B(d,U),d.match_length<=5&&(d.strategy===1||d.match_length===P&&4096<d.strstart-d.match_start)&&(d.match_length=P-1)),d.prev_length>=P&&d.match_length<=d.prev_length){for(_=d.strstart+d.lookahead-P,x=o._tr_tally(d,d.strstart-1-d.prev_match,d.prev_length-P),d.lookahead-=d.prev_length-1,d.prev_length-=2;++d.strstart<=_&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+P-1])&d.hash_mask,U=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),--d.prev_length!=0;);if(d.match_available=0,d.match_length=P-1,d.strstart++,x&&(T(d,!1),d.strm.avail_out===0))return f}else if(d.match_available){if((x=o._tr_tally(d,0,d.window[d.strstart-1]))&&T(d,!1),d.strstart++,d.lookahead--,d.strm.avail_out===0)return f}else d.match_available=1,d.strstart++,d.lookahead--}return d.match_available&&(x=o._tr_tally(d,0,d.window[d.strstart-1]),d.match_available=0),d.insert=d.strstart<P-1?d.strstart:P-1,V===y?(T(d,!0),d.strm.avail_out===0?Q:K):d.last_lit&&(T(d,!1),d.strm.avail_out===0)?f:j}function F(d,V,U,x,_){this.good_length=d,this.max_lazy=V,this.nice_length=U,this.max_chain=x,this.func=_}function ie(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*R),this.dyn_dtree=new i.Buf16(2*(2*C+1)),this.bl_tree=new i.Buf16(2*(2*A+1)),de(this.dyn_ltree),de(this.dyn_dtree),de(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(M+1),this.heap=new i.Buf16(2*E+1),de(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*E+1),de(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function fe(d){var V;return d&&d.state?(d.total_in=d.total_out=0,d.data_type=p,(V=d.state).pending=0,V.pending_out=0,V.wrap<0&&(V.wrap=-V.wrap),V.status=V.wrap?z:$,d.adler=V.wrap===2?0:1,V.last_flush=b,o._tr_init(V),u):se(d,m)}function ae(d){var V=fe(d);return V===u&&function(U){U.window_size=2*U.w_size,de(U.head),U.max_lazy_match=n[U.level].max_lazy,U.good_match=n[U.level].good_length,U.nice_match=n[U.level].nice_length,U.max_chain_length=n[U.level].max_chain,U.strstart=0,U.block_start=0,U.lookahead=0,U.insert=0,U.match_length=U.prev_length=P-1,U.match_available=0,U.ins_h=0}(d.state),V}function ge(d,V,U,x,_,O){if(!d)return m;var Z=1;if(V===h&&(V=6),x<0?(Z=0,x=-x):15<x&&(Z=2,x-=16),_<1||S<_||U!==w||x<8||15<x||V<0||9<V||O<0||g<O)return se(d,m);x===8&&(x=9);var D=new ie;return(d.state=D).strm=d,D.wrap=Z,D.gzhead=null,D.w_bits=x,D.w_size=1<<D.w_bits,D.w_mask=D.w_size-1,D.hash_bits=_+7,D.hash_size=1<<D.hash_bits,D.hash_mask=D.hash_size-1,D.hash_shift=~~((D.hash_bits+P-1)/P),D.window=new i.Buf8(2*D.w_size),D.head=new i.Buf16(D.hash_size),D.prev=new i.Buf16(D.w_size),D.lit_bufsize=1<<_+6,D.pending_buf_size=4*D.lit_bufsize,D.pending_buf=new i.Buf8(D.pending_buf_size),D.d_buf=1*D.lit_bufsize,D.l_buf=3*D.lit_bufsize,D.level=V,D.strategy=O,D.method=U,ae(d)}n=[new F(0,0,0,0,function(d,V){var U=65535;for(U>d.pending_buf_size-5&&(U=d.pending_buf_size-5);;){if(d.lookahead<=1){if(N(d),d.lookahead===0&&V===b)return f;if(d.lookahead===0)break}d.strstart+=d.lookahead,d.lookahead=0;var x=d.block_start+U;if((d.strstart===0||d.strstart>=x)&&(d.lookahead=d.strstart-x,d.strstart=x,T(d,!1),d.strm.avail_out===0)||d.strstart-d.block_start>=d.w_size-Y&&(T(d,!1),d.strm.avail_out===0))return f}return d.insert=0,V===y?(T(d,!0),d.strm.avail_out===0?Q:K):(d.strstart>d.block_start&&(T(d,!1),d.strm.avail_out),f)}),new F(4,4,8,4,H),new F(4,5,16,8,H),new F(4,6,32,32,H),new F(4,4,16,16,I),new F(8,16,32,32,I),new F(8,16,128,128,I),new F(8,32,128,256,I),new F(32,128,258,1024,I),new F(32,258,258,4096,I)],r.deflateInit=function(d,V){return ge(d,V,w,15,8,0)},r.deflateInit2=ge,r.deflateReset=ae,r.deflateResetKeep=fe,r.deflateSetHeader=function(d,V){return d&&d.state?d.state.wrap!==2?m:(d.state.gzhead=V,u):m},r.deflate=function(d,V){var U,x,_,O;if(!d||!d.state||5<V||V<0)return d?se(d,m):m;if(x=d.state,!d.output||!d.input&&d.avail_in!==0||x.status===666&&V!==y)return se(d,d.avail_out===0?-5:m);if(x.strm=d,U=x.last_flush,x.last_flush=V,x.status===z)if(x.wrap===2)d.adler=0,J(x,31),J(x,139),J(x,8),x.gzhead?(J(x,(x.gzhead.text?1:0)+(x.gzhead.hcrc?2:0)+(x.gzhead.extra?4:0)+(x.gzhead.name?8:0)+(x.gzhead.comment?16:0)),J(x,255&x.gzhead.time),J(x,x.gzhead.time>>8&255),J(x,x.gzhead.time>>16&255),J(x,x.gzhead.time>>24&255),J(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),J(x,255&x.gzhead.os),x.gzhead.extra&&x.gzhead.extra.length&&(J(x,255&x.gzhead.extra.length),J(x,x.gzhead.extra.length>>8&255)),x.gzhead.hcrc&&(d.adler=c(d.adler,x.pending_buf,x.pending,0)),x.gzindex=0,x.status=69):(J(x,0),J(x,0),J(x,0),J(x,0),J(x,0),J(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),J(x,3),x.status=$);else{var Z=w+(x.w_bits-8<<4)<<8;Z|=(2<=x.strategy||x.level<2?0:x.level<6?1:x.level===6?2:3)<<6,x.strstart!==0&&(Z|=32),Z+=31-Z%31,x.status=$,k(x,Z),x.strstart!==0&&(k(x,d.adler>>>16),k(x,65535&d.adler)),d.adler=1}if(x.status===69)if(x.gzhead.extra){for(_=x.pending;x.gzindex<(65535&x.gzhead.extra.length)&&(x.pending!==x.pending_buf_size||(x.gzhead.hcrc&&x.pending>_&&(d.adler=c(d.adler,x.pending_buf,x.pending-_,_)),L(d),_=x.pending,x.pending!==x.pending_buf_size));)J(x,255&x.gzhead.extra[x.gzindex]),x.gzindex++;x.gzhead.hcrc&&x.pending>_&&(d.adler=c(d.adler,x.pending_buf,x.pending-_,_)),x.gzindex===x.gzhead.extra.length&&(x.gzindex=0,x.status=73)}else x.status=73;if(x.status===73)if(x.gzhead.name){_=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>_&&(d.adler=c(d.adler,x.pending_buf,x.pending-_,_)),L(d),_=x.pending,x.pending===x.pending_buf_size)){O=1;break}O=x.gzindex<x.gzhead.name.length?255&x.gzhead.name.charCodeAt(x.gzindex++):0,J(x,O)}while(O!==0);x.gzhead.hcrc&&x.pending>_&&(d.adler=c(d.adler,x.pending_buf,x.pending-_,_)),O===0&&(x.gzindex=0,x.status=91)}else x.status=91;if(x.status===91)if(x.gzhead.comment){_=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>_&&(d.adler=c(d.adler,x.pending_buf,x.pending-_,_)),L(d),_=x.pending,x.pending===x.pending_buf_size)){O=1;break}O=x.gzindex<x.gzhead.comment.length?255&x.gzhead.comment.charCodeAt(x.gzindex++):0,J(x,O)}while(O!==0);x.gzhead.hcrc&&x.pending>_&&(d.adler=c(d.adler,x.pending_buf,x.pending-_,_)),O===0&&(x.status=103)}else x.status=103;if(x.status===103&&(x.gzhead.hcrc?(x.pending+2>x.pending_buf_size&&L(d),x.pending+2<=x.pending_buf_size&&(J(x,255&d.adler),J(x,d.adler>>8&255),d.adler=0,x.status=$)):x.status=$),x.pending!==0){if(L(d),d.avail_out===0)return x.last_flush=-1,u}else if(d.avail_in===0&&X(V)<=X(U)&&V!==y)return se(d,-5);if(x.status===666&&d.avail_in!==0)return se(d,-5);if(d.avail_in!==0||x.lookahead!==0||V!==b&&x.status!==666){var D=x.strategy===2?function(q,G){for(var re;;){if(q.lookahead===0&&(N(q),q.lookahead===0)){if(G===b)return f;break}if(q.match_length=0,re=o._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++,re&&(T(q,!1),q.strm.avail_out===0))return f}return q.insert=0,G===y?(T(q,!0),q.strm.avail_out===0?Q:K):q.last_lit&&(T(q,!1),q.strm.avail_out===0)?f:j}(x,V):x.strategy===3?function(q,G){for(var re,ne,le,he,me=q.window;;){if(q.lookahead<=W){if(N(q),q.lookahead<=W&&G===b)return f;if(q.lookahead===0)break}if(q.match_length=0,q.lookahead>=P&&0<q.strstart&&(ne=me[le=q.strstart-1])===me[++le]&&ne===me[++le]&&ne===me[++le]){he=q.strstart+W;do;while(ne===me[++le]&&ne===me[++le]&&ne===me[++le]&&ne===me[++le]&&ne===me[++le]&&ne===me[++le]&&ne===me[++le]&&ne===me[++le]&&le<he);q.match_length=W-(he-le),q.match_length>q.lookahead&&(q.match_length=q.lookahead)}if(q.match_length>=P?(re=o._tr_tally(q,1,q.match_length-P),q.lookahead-=q.match_length,q.strstart+=q.match_length,q.match_length=0):(re=o._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++),re&&(T(q,!1),q.strm.avail_out===0))return f}return q.insert=0,G===y?(T(q,!0),q.strm.avail_out===0?Q:K):q.last_lit&&(T(q,!1),q.strm.avail_out===0)?f:j}(x,V):n[x.level].func(x,V);if(D!==Q&&D!==K||(x.status=666),D===f||D===Q)return d.avail_out===0&&(x.last_flush=-1),u;if(D===j&&(V===1?o._tr_align(x):V!==5&&(o._tr_stored_block(x,0,0,!1),V===3&&(de(x.head),x.lookahead===0&&(x.strstart=0,x.block_start=0,x.insert=0))),L(d),d.avail_out===0))return x.last_flush=-1,u}return V!==y?u:x.wrap<=0?1:(x.wrap===2?(J(x,255&d.adler),J(x,d.adler>>8&255),J(x,d.adler>>16&255),J(x,d.adler>>24&255),J(x,255&d.total_in),J(x,d.total_in>>8&255),J(x,d.total_in>>16&255),J(x,d.total_in>>24&255)):(k(x,d.adler>>>16),k(x,65535&d.adler)),L(d),0<x.wrap&&(x.wrap=-x.wrap),x.pending!==0?u:1)},r.deflateEnd=function(d){var V;return d&&d.state?(V=d.state.status)!==z&&V!==69&&V!==73&&V!==91&&V!==103&&V!==$&&V!==666?se(d,m):(d.state=null,V===$?se(d,-3):u):m},r.deflateSetDictionary=function(d,V){var U,x,_,O,Z,D,q,G,re=V.length;if(!d||!d.state||(O=(U=d.state).wrap)===2||O===1&&U.status!==z||U.lookahead)return m;for(O===1&&(d.adler=l(d.adler,V,re,0)),U.wrap=0,re>=U.w_size&&(O===0&&(de(U.head),U.strstart=0,U.block_start=0,U.insert=0),G=new i.Buf8(U.w_size),i.arraySet(G,V,re-U.w_size,U.w_size,0),V=G,re=U.w_size),Z=d.avail_in,D=d.next_in,q=d.input,d.avail_in=re,d.next_in=0,d.input=V,N(U);U.lookahead>=P;){for(x=U.strstart,_=U.lookahead-(P-1);U.ins_h=(U.ins_h<<U.hash_shift^U.window[x+P-1])&U.hash_mask,U.prev[x&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=x,x++,--_;);U.strstart=x,U.lookahead=P-1,N(U)}return U.strstart+=U.lookahead,U.block_start=U.strstart,U.insert=U.lookahead,U.lookahead=0,U.match_length=U.prev_length=P-1,U.match_available=0,d.next_in=D,d.input=q,d.avail_in=Z,U.wrap=O,u},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,s,r){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,s,r){s.exports=function(n,i){var o,l,c,v,b,y,u,m,h,g,p,w,S,E,C,A,R,M,P,W,Y,z,$,f,j;o=n.state,l=n.next_in,f=n.input,c=l+(n.avail_in-5),v=n.next_out,j=n.output,b=v-(i-n.avail_out),y=v+(n.avail_out-257),u=o.dmax,m=o.wsize,h=o.whave,g=o.wnext,p=o.window,w=o.hold,S=o.bits,E=o.lencode,C=o.distcode,A=(1<<o.lenbits)-1,R=(1<<o.distbits)-1;e:do{S<15&&(w+=f[l++]<<S,S+=8,w+=f[l++]<<S,S+=8),M=E[w&A];t:for(;;){if(w>>>=P=M>>>24,S-=P,(P=M>>>16&255)===0)j[v++]=65535&M;else{if(!(16&P)){if((64&P)==0){M=E[(65535&M)+(w&(1<<P)-1)];continue t}if(32&P){o.mode=12;break e}n.msg="invalid literal/length code",o.mode=30;break e}W=65535&M,(P&=15)&&(S<P&&(w+=f[l++]<<S,S+=8),W+=w&(1<<P)-1,w>>>=P,S-=P),S<15&&(w+=f[l++]<<S,S+=8,w+=f[l++]<<S,S+=8),M=C[w&R];n:for(;;){if(w>>>=P=M>>>24,S-=P,!(16&(P=M>>>16&255))){if((64&P)==0){M=C[(65535&M)+(w&(1<<P)-1)];continue n}n.msg="invalid distance code",o.mode=30;break e}if(Y=65535&M,S<(P&=15)&&(w+=f[l++]<<S,(S+=8)<P&&(w+=f[l++]<<S,S+=8)),u<(Y+=w&(1<<P)-1)){n.msg="invalid distance too far back",o.mode=30;break e}if(w>>>=P,S-=P,(P=v-b)<Y){if(h<(P=Y-P)&&o.sane){n.msg="invalid distance too far back",o.mode=30;break e}if($=p,(z=0)===g){if(z+=m-P,P<W){for(W-=P;j[v++]=p[z++],--P;);z=v-Y,$=j}}else if(g<P){if(z+=m+g-P,(P-=g)<W){for(W-=P;j[v++]=p[z++],--P;);if(z=0,g<W){for(W-=P=g;j[v++]=p[z++],--P;);z=v-Y,$=j}}}else if(z+=g-P,P<W){for(W-=P;j[v++]=p[z++],--P;);z=v-Y,$=j}for(;2<W;)j[v++]=$[z++],j[v++]=$[z++],j[v++]=$[z++],W-=3;W&&(j[v++]=$[z++],1<W&&(j[v++]=$[z++]))}else{for(z=v-Y;j[v++]=j[z++],j[v++]=j[z++],j[v++]=j[z++],2<(W-=3););W&&(j[v++]=j[z++],1<W&&(j[v++]=j[z++]))}break}}break}}while(l<c&&v<y);l-=W=S>>3,w&=(1<<(S-=W<<3))-1,n.next_in=l,n.next_out=v,n.avail_in=l<c?c-l+5:5-(l-c),n.avail_out=v<y?y-v+257:257-(v-y),o.hold=w,o.bits=S}},{}],49:[function(t,s,r){var n=t("../utils/common"),i=t("./adler32"),o=t("./crc32"),l=t("./inffast"),c=t("./inftrees"),v=1,b=2,y=0,u=-2,m=1,h=852,g=592;function p(z){return(z>>>24&255)+(z>>>8&65280)+((65280&z)<<8)+((255&z)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(z){var $;return z&&z.state?($=z.state,z.total_in=z.total_out=$.total=0,z.msg="",$.wrap&&(z.adler=1&$.wrap),$.mode=m,$.last=0,$.havedict=0,$.dmax=32768,$.head=null,$.hold=0,$.bits=0,$.lencode=$.lendyn=new n.Buf32(h),$.distcode=$.distdyn=new n.Buf32(g),$.sane=1,$.back=-1,y):u}function E(z){var $;return z&&z.state?(($=z.state).wsize=0,$.whave=0,$.wnext=0,S(z)):u}function C(z,$){var f,j;return z&&z.state?(j=z.state,$<0?(f=0,$=-$):(f=1+($>>4),$<48&&($&=15)),$&&($<8||15<$)?u:(j.window!==null&&j.wbits!==$&&(j.window=null),j.wrap=f,j.wbits=$,E(z))):u}function A(z,$){var f,j;return z?(j=new w,(z.state=j).window=null,(f=C(z,$))!==y&&(z.state=null),f):u}var R,M,P=!0;function W(z){if(P){var $;for(R=new n.Buf32(512),M=new n.Buf32(32),$=0;$<144;)z.lens[$++]=8;for(;$<256;)z.lens[$++]=9;for(;$<280;)z.lens[$++]=7;for(;$<288;)z.lens[$++]=8;for(c(v,z.lens,0,288,R,0,z.work,{bits:9}),$=0;$<32;)z.lens[$++]=5;c(b,z.lens,0,32,M,0,z.work,{bits:5}),P=!1}z.lencode=R,z.lenbits=9,z.distcode=M,z.distbits=5}function Y(z,$,f,j){var Q,K=z.state;return K.window===null&&(K.wsize=1<<K.wbits,K.wnext=0,K.whave=0,K.window=new n.Buf8(K.wsize)),j>=K.wsize?(n.arraySet(K.window,$,f-K.wsize,K.wsize,0),K.wnext=0,K.whave=K.wsize):(j<(Q=K.wsize-K.wnext)&&(Q=j),n.arraySet(K.window,$,f-j,Q,K.wnext),(j-=Q)?(n.arraySet(K.window,$,f-j,j,0),K.wnext=j,K.whave=K.wsize):(K.wnext+=Q,K.wnext===K.wsize&&(K.wnext=0),K.whave<K.wsize&&(K.whave+=Q))),0}r.inflateReset=E,r.inflateReset2=C,r.inflateResetKeep=S,r.inflateInit=function(z){return A(z,15)},r.inflateInit2=A,r.inflate=function(z,$){var f,j,Q,K,se,X,de,L,T,J,k,B,N,H,I,F,ie,fe,ae,ge,d,V,U,x,_=0,O=new n.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!z||!z.state||!z.output||!z.input&&z.avail_in!==0)return u;(f=z.state).mode===12&&(f.mode=13),se=z.next_out,Q=z.output,de=z.avail_out,K=z.next_in,j=z.input,X=z.avail_in,L=f.hold,T=f.bits,J=X,k=de,V=y;e:for(;;)switch(f.mode){case m:if(f.wrap===0){f.mode=13;break}for(;T<16;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if(2&f.wrap&&L===35615){O[f.check=0]=255&L,O[1]=L>>>8&255,f.check=o(f.check,O,2,0),T=L=0,f.mode=2;break}if(f.flags=0,f.head&&(f.head.done=!1),!(1&f.wrap)||(((255&L)<<8)+(L>>8))%31){z.msg="incorrect header check",f.mode=30;break}if((15&L)!=8){z.msg="unknown compression method",f.mode=30;break}if(T-=4,d=8+(15&(L>>>=4)),f.wbits===0)f.wbits=d;else if(d>f.wbits){z.msg="invalid window size",f.mode=30;break}f.dmax=1<<d,z.adler=f.check=1,f.mode=512&L?10:12,T=L=0;break;case 2:for(;T<16;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if(f.flags=L,(255&f.flags)!=8){z.msg="unknown compression method",f.mode=30;break}if(57344&f.flags){z.msg="unknown header flags set",f.mode=30;break}f.head&&(f.head.text=L>>8&1),512&f.flags&&(O[0]=255&L,O[1]=L>>>8&255,f.check=o(f.check,O,2,0)),T=L=0,f.mode=3;case 3:for(;T<32;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}f.head&&(f.head.time=L),512&f.flags&&(O[0]=255&L,O[1]=L>>>8&255,O[2]=L>>>16&255,O[3]=L>>>24&255,f.check=o(f.check,O,4,0)),T=L=0,f.mode=4;case 4:for(;T<16;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}f.head&&(f.head.xflags=255&L,f.head.os=L>>8),512&f.flags&&(O[0]=255&L,O[1]=L>>>8&255,f.check=o(f.check,O,2,0)),T=L=0,f.mode=5;case 5:if(1024&f.flags){for(;T<16;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}f.length=L,f.head&&(f.head.extra_len=L),512&f.flags&&(O[0]=255&L,O[1]=L>>>8&255,f.check=o(f.check,O,2,0)),T=L=0}else f.head&&(f.head.extra=null);f.mode=6;case 6:if(1024&f.flags&&(X<(B=f.length)&&(B=X),B&&(f.head&&(d=f.head.extra_len-f.length,f.head.extra||(f.head.extra=new Array(f.head.extra_len)),n.arraySet(f.head.extra,j,K,B,d)),512&f.flags&&(f.check=o(f.check,j,B,K)),X-=B,K+=B,f.length-=B),f.length))break e;f.length=0,f.mode=7;case 7:if(2048&f.flags){if(X===0)break e;for(B=0;d=j[K+B++],f.head&&d&&f.length<65536&&(f.head.name+=String.fromCharCode(d)),d&&B<X;);if(512&f.flags&&(f.check=o(f.check,j,B,K)),X-=B,K+=B,d)break e}else f.head&&(f.head.name=null);f.length=0,f.mode=8;case 8:if(4096&f.flags){if(X===0)break e;for(B=0;d=j[K+B++],f.head&&d&&f.length<65536&&(f.head.comment+=String.fromCharCode(d)),d&&B<X;);if(512&f.flags&&(f.check=o(f.check,j,B,K)),X-=B,K+=B,d)break e}else f.head&&(f.head.comment=null);f.mode=9;case 9:if(512&f.flags){for(;T<16;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if(L!==(65535&f.check)){z.msg="header crc mismatch",f.mode=30;break}T=L=0}f.head&&(f.head.hcrc=f.flags>>9&1,f.head.done=!0),z.adler=f.check=0,f.mode=12;break;case 10:for(;T<32;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}z.adler=f.check=p(L),T=L=0,f.mode=11;case 11:if(f.havedict===0)return z.next_out=se,z.avail_out=de,z.next_in=K,z.avail_in=X,f.hold=L,f.bits=T,2;z.adler=f.check=1,f.mode=12;case 12:if($===5||$===6)break e;case 13:if(f.last){L>>>=7&T,T-=7&T,f.mode=27;break}for(;T<3;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}switch(f.last=1&L,T-=1,3&(L>>>=1)){case 0:f.mode=14;break;case 1:if(W(f),f.mode=20,$!==6)break;L>>>=2,T-=2;break e;case 2:f.mode=17;break;case 3:z.msg="invalid block type",f.mode=30}L>>>=2,T-=2;break;case 14:for(L>>>=7&T,T-=7&T;T<32;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if((65535&L)!=(L>>>16^65535)){z.msg="invalid stored block lengths",f.mode=30;break}if(f.length=65535&L,T=L=0,f.mode=15,$===6)break e;case 15:f.mode=16;case 16:if(B=f.length){if(X<B&&(B=X),de<B&&(B=de),B===0)break e;n.arraySet(Q,j,K,B,se),X-=B,K+=B,de-=B,se+=B,f.length-=B;break}f.mode=12;break;case 17:for(;T<14;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if(f.nlen=257+(31&L),L>>>=5,T-=5,f.ndist=1+(31&L),L>>>=5,T-=5,f.ncode=4+(15&L),L>>>=4,T-=4,286<f.nlen||30<f.ndist){z.msg="too many length or distance symbols",f.mode=30;break}f.have=0,f.mode=18;case 18:for(;f.have<f.ncode;){for(;T<3;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}f.lens[Z[f.have++]]=7&L,L>>>=3,T-=3}for(;f.have<19;)f.lens[Z[f.have++]]=0;if(f.lencode=f.lendyn,f.lenbits=7,U={bits:f.lenbits},V=c(0,f.lens,0,19,f.lencode,0,f.work,U),f.lenbits=U.bits,V){z.msg="invalid code lengths set",f.mode=30;break}f.have=0,f.mode=19;case 19:for(;f.have<f.nlen+f.ndist;){for(;F=(_=f.lencode[L&(1<<f.lenbits)-1])>>>16&255,ie=65535&_,!((I=_>>>24)<=T);){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if(ie<16)L>>>=I,T-=I,f.lens[f.have++]=ie;else{if(ie===16){for(x=I+2;T<x;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if(L>>>=I,T-=I,f.have===0){z.msg="invalid bit length repeat",f.mode=30;break}d=f.lens[f.have-1],B=3+(3&L),L>>>=2,T-=2}else if(ie===17){for(x=I+3;T<x;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}T-=I,d=0,B=3+(7&(L>>>=I)),L>>>=3,T-=3}else{for(x=I+7;T<x;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}T-=I,d=0,B=11+(127&(L>>>=I)),L>>>=7,T-=7}if(f.have+B>f.nlen+f.ndist){z.msg="invalid bit length repeat",f.mode=30;break}for(;B--;)f.lens[f.have++]=d}}if(f.mode===30)break;if(f.lens[256]===0){z.msg="invalid code -- missing end-of-block",f.mode=30;break}if(f.lenbits=9,U={bits:f.lenbits},V=c(v,f.lens,0,f.nlen,f.lencode,0,f.work,U),f.lenbits=U.bits,V){z.msg="invalid literal/lengths set",f.mode=30;break}if(f.distbits=6,f.distcode=f.distdyn,U={bits:f.distbits},V=c(b,f.lens,f.nlen,f.ndist,f.distcode,0,f.work,U),f.distbits=U.bits,V){z.msg="invalid distances set",f.mode=30;break}if(f.mode=20,$===6)break e;case 20:f.mode=21;case 21:if(6<=X&&258<=de){z.next_out=se,z.avail_out=de,z.next_in=K,z.avail_in=X,f.hold=L,f.bits=T,l(z,k),se=z.next_out,Q=z.output,de=z.avail_out,K=z.next_in,j=z.input,X=z.avail_in,L=f.hold,T=f.bits,f.mode===12&&(f.back=-1);break}for(f.back=0;F=(_=f.lencode[L&(1<<f.lenbits)-1])>>>16&255,ie=65535&_,!((I=_>>>24)<=T);){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if(F&&(240&F)==0){for(fe=I,ae=F,ge=ie;F=(_=f.lencode[ge+((L&(1<<fe+ae)-1)>>fe)])>>>16&255,ie=65535&_,!(fe+(I=_>>>24)<=T);){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}L>>>=fe,T-=fe,f.back+=fe}if(L>>>=I,T-=I,f.back+=I,f.length=ie,F===0){f.mode=26;break}if(32&F){f.back=-1,f.mode=12;break}if(64&F){z.msg="invalid literal/length code",f.mode=30;break}f.extra=15&F,f.mode=22;case 22:if(f.extra){for(x=f.extra;T<x;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}f.length+=L&(1<<f.extra)-1,L>>>=f.extra,T-=f.extra,f.back+=f.extra}f.was=f.length,f.mode=23;case 23:for(;F=(_=f.distcode[L&(1<<f.distbits)-1])>>>16&255,ie=65535&_,!((I=_>>>24)<=T);){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if((240&F)==0){for(fe=I,ae=F,ge=ie;F=(_=f.distcode[ge+((L&(1<<fe+ae)-1)>>fe)])>>>16&255,ie=65535&_,!(fe+(I=_>>>24)<=T);){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}L>>>=fe,T-=fe,f.back+=fe}if(L>>>=I,T-=I,f.back+=I,64&F){z.msg="invalid distance code",f.mode=30;break}f.offset=ie,f.extra=15&F,f.mode=24;case 24:if(f.extra){for(x=f.extra;T<x;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}f.offset+=L&(1<<f.extra)-1,L>>>=f.extra,T-=f.extra,f.back+=f.extra}if(f.offset>f.dmax){z.msg="invalid distance too far back",f.mode=30;break}f.mode=25;case 25:if(de===0)break e;if(B=k-de,f.offset>B){if((B=f.offset-B)>f.whave&&f.sane){z.msg="invalid distance too far back",f.mode=30;break}N=B>f.wnext?(B-=f.wnext,f.wsize-B):f.wnext-B,B>f.length&&(B=f.length),H=f.window}else H=Q,N=se-f.offset,B=f.length;for(de<B&&(B=de),de-=B,f.length-=B;Q[se++]=H[N++],--B;);f.length===0&&(f.mode=21);break;case 26:if(de===0)break e;Q[se++]=f.length,de--,f.mode=21;break;case 27:if(f.wrap){for(;T<32;){if(X===0)break e;X--,L|=j[K++]<<T,T+=8}if(k-=de,z.total_out+=k,f.total+=k,k&&(z.adler=f.check=f.flags?o(f.check,Q,k,se-k):i(f.check,Q,k,se-k)),k=de,(f.flags?L:p(L))!==f.check){z.msg="incorrect data check",f.mode=30;break}T=L=0}f.mode=28;case 28:if(f.wrap&&f.flags){for(;T<32;){if(X===0)break e;X--,L+=j[K++]<<T,T+=8}if(L!==(4294967295&f.total)){z.msg="incorrect length check",f.mode=30;break}T=L=0}f.mode=29;case 29:V=1;break e;case 30:V=-3;break e;case 31:return-4;case 32:default:return u}return z.next_out=se,z.avail_out=de,z.next_in=K,z.avail_in=X,f.hold=L,f.bits=T,(f.wsize||k!==z.avail_out&&f.mode<30&&(f.mode<27||$!==4))&&Y(z,z.output,z.next_out,k-z.avail_out)?(f.mode=31,-4):(J-=z.avail_in,k-=z.avail_out,z.total_in+=J,z.total_out+=k,f.total+=k,f.wrap&&k&&(z.adler=f.check=f.flags?o(f.check,Q,k,z.next_out-k):i(f.check,Q,k,z.next_out-k)),z.data_type=f.bits+(f.last?64:0)+(f.mode===12?128:0)+(f.mode===20||f.mode===15?256:0),(J==0&&k===0||$===4)&&V===y&&(V=-5),V)},r.inflateEnd=function(z){if(!z||!z.state)return u;var $=z.state;return $.window&&($.window=null),z.state=null,y},r.inflateGetHeader=function(z,$){var f;return z&&z.state?(2&(f=z.state).wrap)==0?u:((f.head=$).done=!1,y):u},r.inflateSetDictionary=function(z,$){var f,j=$.length;return z&&z.state?(f=z.state).wrap!==0&&f.mode!==11?u:f.mode===11&&i(1,$,j,0)!==f.check?-3:Y(z,$,j,j)?(f.mode=31,-4):(f.havedict=1,y):u},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,s,r){var n=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(v,b,y,u,m,h,g,p){var w,S,E,C,A,R,M,P,W,Y=p.bits,z=0,$=0,f=0,j=0,Q=0,K=0,se=0,X=0,de=0,L=0,T=null,J=0,k=new n.Buf16(16),B=new n.Buf16(16),N=null,H=0;for(z=0;z<=15;z++)k[z]=0;for($=0;$<u;$++)k[b[y+$]]++;for(Q=Y,j=15;1<=j&&k[j]===0;j--);if(j<Q&&(Q=j),j===0)return m[h++]=20971520,m[h++]=20971520,p.bits=1,0;for(f=1;f<j&&k[f]===0;f++);for(Q<f&&(Q=f),z=X=1;z<=15;z++)if(X<<=1,(X-=k[z])<0)return-1;if(0<X&&(v===0||j!==1))return-1;for(B[1]=0,z=1;z<15;z++)B[z+1]=B[z]+k[z];for($=0;$<u;$++)b[y+$]!==0&&(g[B[b[y+$]]++]=$);if(R=v===0?(T=N=g,19):v===1?(T=i,J-=257,N=o,H-=257,256):(T=l,N=c,-1),z=f,A=h,se=$=L=0,E=-1,C=(de=1<<(K=Q))-1,v===1&&852<de||v===2&&592<de)return 1;for(;;){for(M=z-se,W=g[$]<R?(P=0,g[$]):g[$]>R?(P=N[H+g[$]],T[J+g[$]]):(P=96,0),w=1<<z-se,f=S=1<<K;m[A+(L>>se)+(S-=w)]=M<<24|P<<16|W|0,S!==0;);for(w=1<<z-1;L&w;)w>>=1;if(w!==0?(L&=w-1,L+=w):L=0,$++,--k[z]==0){if(z===j)break;z=b[y+g[$]]}if(Q<z&&(L&C)!==E){for(se===0&&(se=Q),A+=f,X=1<<(K=z-se);K+se<j&&!((X-=k[K+se])<=0);)K++,X<<=1;if(de+=1<<K,v===1&&852<de||v===2&&592<de)return 1;m[E=L&C]=Q<<24|K<<16|A-h|0}}return L!==0&&(m[A+L]=z-se<<24|64<<16|0),p.bits=Q,0}},{"../utils/common":41}],51:[function(t,s,r){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,s,r){var n=t("../utils/common"),i=0,o=1;function l(_){for(var O=_.length;0<=--O;)_[O]=0}var c=0,v=29,b=256,y=b+1+v,u=30,m=19,h=2*y+1,g=15,p=16,w=7,S=256,E=16,C=17,A=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(y+2));l(Y);var z=new Array(2*u);l(z);var $=new Array(512);l($);var f=new Array(256);l(f);var j=new Array(v);l(j);var Q,K,se,X=new Array(u);function de(_,O,Z,D,q){this.static_tree=_,this.extra_bits=O,this.extra_base=Z,this.elems=D,this.max_length=q,this.has_stree=_&&_.length}function L(_,O){this.dyn_tree=_,this.max_code=0,this.stat_desc=O}function T(_){return _<256?$[_]:$[256+(_>>>7)]}function J(_,O){_.pending_buf[_.pending++]=255&O,_.pending_buf[_.pending++]=O>>>8&255}function k(_,O,Z){_.bi_valid>p-Z?(_.bi_buf|=O<<_.bi_valid&65535,J(_,_.bi_buf),_.bi_buf=O>>p-_.bi_valid,_.bi_valid+=Z-p):(_.bi_buf|=O<<_.bi_valid&65535,_.bi_valid+=Z)}function B(_,O,Z){k(_,Z[2*O],Z[2*O+1])}function N(_,O){for(var Z=0;Z|=1&_,_>>>=1,Z<<=1,0<--O;);return Z>>>1}function H(_,O,Z){var D,q,G=new Array(g+1),re=0;for(D=1;D<=g;D++)G[D]=re=re+Z[D-1]<<1;for(q=0;q<=O;q++){var ne=_[2*q+1];ne!==0&&(_[2*q]=N(G[ne]++,ne))}}function I(_){var O;for(O=0;O<y;O++)_.dyn_ltree[2*O]=0;for(O=0;O<u;O++)_.dyn_dtree[2*O]=0;for(O=0;O<m;O++)_.bl_tree[2*O]=0;_.dyn_ltree[2*S]=1,_.opt_len=_.static_len=0,_.last_lit=_.matches=0}function F(_){8<_.bi_valid?J(_,_.bi_buf):0<_.bi_valid&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0}function ie(_,O,Z,D){var q=2*O,G=2*Z;return _[q]<_[G]||_[q]===_[G]&&D[O]<=D[Z]}function fe(_,O,Z){for(var D=_.heap[Z],q=Z<<1;q<=_.heap_len&&(q<_.heap_len&&ie(O,_.heap[q+1],_.heap[q],_.depth)&&q++,!ie(O,D,_.heap[q],_.depth));)_.heap[Z]=_.heap[q],Z=q,q<<=1;_.heap[Z]=D}function ae(_,O,Z){var D,q,G,re,ne=0;if(_.last_lit!==0)for(;D=_.pending_buf[_.d_buf+2*ne]<<8|_.pending_buf[_.d_buf+2*ne+1],q=_.pending_buf[_.l_buf+ne],ne++,D===0?B(_,q,O):(B(_,(G=f[q])+b+1,O),(re=R[G])!==0&&k(_,q-=j[G],re),B(_,G=T(--D),Z),(re=M[G])!==0&&k(_,D-=X[G],re)),ne<_.last_lit;);B(_,S,O)}function ge(_,O){var Z,D,q,G=O.dyn_tree,re=O.stat_desc.static_tree,ne=O.stat_desc.has_stree,le=O.stat_desc.elems,he=-1;for(_.heap_len=0,_.heap_max=h,Z=0;Z<le;Z++)G[2*Z]!==0?(_.heap[++_.heap_len]=he=Z,_.depth[Z]=0):G[2*Z+1]=0;for(;_.heap_len<2;)G[2*(q=_.heap[++_.heap_len]=he<2?++he:0)]=1,_.depth[q]=0,_.opt_len--,ne&&(_.static_len-=re[2*q+1]);for(O.max_code=he,Z=_.heap_len>>1;1<=Z;Z--)fe(_,G,Z);for(q=le;Z=_.heap[1],_.heap[1]=_.heap[_.heap_len--],fe(_,G,1),D=_.heap[1],_.heap[--_.heap_max]=Z,_.heap[--_.heap_max]=D,G[2*q]=G[2*Z]+G[2*D],_.depth[q]=(_.depth[Z]>=_.depth[D]?_.depth[Z]:_.depth[D])+1,G[2*Z+1]=G[2*D+1]=q,_.heap[1]=q++,fe(_,G,1),2<=_.heap_len;);_.heap[--_.heap_max]=_.heap[1],function(me,Ce){var He,De,it,xe,Ne,en,Je=Ce.dyn_tree,_n=Ce.max_code,Wr=Ce.stat_desc.static_tree,Hr=Ce.stat_desc.has_stree,Jr=Ce.stat_desc.extra_bits,wn=Ce.stat_desc.extra_base,bt=Ce.stat_desc.max_length,At=0;for(xe=0;xe<=g;xe++)me.bl_count[xe]=0;for(Je[2*me.heap[me.heap_max]+1]=0,He=me.heap_max+1;He<h;He++)bt<(xe=Je[2*Je[2*(De=me.heap[He])+1]+1]+1)&&(xe=bt,At++),Je[2*De+1]=xe,_n<De||(me.bl_count[xe]++,Ne=0,wn<=De&&(Ne=Jr[De-wn]),en=Je[2*De],me.opt_len+=en*(xe+Ne),Hr&&(me.static_len+=en*(Wr[2*De+1]+Ne)));if(At!==0){do{for(xe=bt-1;me.bl_count[xe]===0;)xe--;me.bl_count[xe]--,me.bl_count[xe+1]+=2,me.bl_count[bt]--,At-=2}while(0<At);for(xe=bt;xe!==0;xe--)for(De=me.bl_count[xe];De!==0;)_n<(it=me.heap[--He])||(Je[2*it+1]!==xe&&(me.opt_len+=(xe-Je[2*it+1])*Je[2*it],Je[2*it+1]=xe),De--)}}(_,O),H(G,he,_.bl_count)}function d(_,O,Z){var D,q,G=-1,re=O[1],ne=0,le=7,he=4;for(re===0&&(le=138,he=3),O[2*(Z+1)+1]=65535,D=0;D<=Z;D++)q=re,re=O[2*(D+1)+1],++ne<le&&q===re||(ne<he?_.bl_tree[2*q]+=ne:q!==0?(q!==G&&_.bl_tree[2*q]++,_.bl_tree[2*E]++):ne<=10?_.bl_tree[2*C]++:_.bl_tree[2*A]++,G=q,he=(ne=0)===re?(le=138,3):q===re?(le=6,3):(le=7,4))}function V(_,O,Z){var D,q,G=-1,re=O[1],ne=0,le=7,he=4;for(re===0&&(le=138,he=3),D=0;D<=Z;D++)if(q=re,re=O[2*(D+1)+1],!(++ne<le&&q===re)){if(ne<he)for(;B(_,q,_.bl_tree),--ne!=0;);else q!==0?(q!==G&&(B(_,q,_.bl_tree),ne--),B(_,E,_.bl_tree),k(_,ne-3,2)):ne<=10?(B(_,C,_.bl_tree),k(_,ne-3,3)):(B(_,A,_.bl_tree),k(_,ne-11,7));G=q,he=(ne=0)===re?(le=138,3):q===re?(le=6,3):(le=7,4)}}l(X);var U=!1;function x(_,O,Z,D){k(_,(c<<1)+(D?1:0),3),function(q,G,re,ne){F(q),ne&&(J(q,re),J(q,~re)),n.arraySet(q.pending_buf,q.window,G,re,q.pending),q.pending+=re}(_,O,Z,!0)}r._tr_init=function(_){U||(function(){var O,Z,D,q,G,re=new Array(g+1);for(q=D=0;q<v-1;q++)for(j[q]=D,O=0;O<1<<R[q];O++)f[D++]=q;for(f[D-1]=q,q=G=0;q<16;q++)for(X[q]=G,O=0;O<1<<M[q];O++)$[G++]=q;for(G>>=7;q<u;q++)for(X[q]=G<<7,O=0;O<1<<M[q]-7;O++)$[256+G++]=q;for(Z=0;Z<=g;Z++)re[Z]=0;for(O=0;O<=143;)Y[2*O+1]=8,O++,re[8]++;for(;O<=255;)Y[2*O+1]=9,O++,re[9]++;for(;O<=279;)Y[2*O+1]=7,O++,re[7]++;for(;O<=287;)Y[2*O+1]=8,O++,re[8]++;for(H(Y,y+1,re),O=0;O<u;O++)z[2*O+1]=5,z[2*O]=N(O,5);Q=new de(Y,R,b+1,y,g),K=new de(z,M,0,u,g),se=new de(new Array(0),P,0,m,w)}(),U=!0),_.l_desc=new L(_.dyn_ltree,Q),_.d_desc=new L(_.dyn_dtree,K),_.bl_desc=new L(_.bl_tree,se),_.bi_buf=0,_.bi_valid=0,I(_)},r._tr_stored_block=x,r._tr_flush_block=function(_,O,Z,D){var q,G,re=0;0<_.level?(_.strm.data_type===2&&(_.strm.data_type=function(ne){var le,he=4093624447;for(le=0;le<=31;le++,he>>>=1)if(1&he&&ne.dyn_ltree[2*le]!==0)return i;if(ne.dyn_ltree[18]!==0||ne.dyn_ltree[20]!==0||ne.dyn_ltree[26]!==0)return o;for(le=32;le<b;le++)if(ne.dyn_ltree[2*le]!==0)return o;return i}(_)),ge(_,_.l_desc),ge(_,_.d_desc),re=function(ne){var le;for(d(ne,ne.dyn_ltree,ne.l_desc.max_code),d(ne,ne.dyn_dtree,ne.d_desc.max_code),ge(ne,ne.bl_desc),le=m-1;3<=le&&ne.bl_tree[2*W[le]+1]===0;le--);return ne.opt_len+=3*(le+1)+5+5+4,le}(_),q=_.opt_len+3+7>>>3,(G=_.static_len+3+7>>>3)<=q&&(q=G)):q=G=Z+5,Z+4<=q&&O!==-1?x(_,O,Z,D):_.strategy===4||G===q?(k(_,2+(D?1:0),3),ae(_,Y,z)):(k(_,4+(D?1:0),3),function(ne,le,he,me){var Ce;for(k(ne,le-257,5),k(ne,he-1,5),k(ne,me-4,4),Ce=0;Ce<me;Ce++)k(ne,ne.bl_tree[2*W[Ce]+1],3);V(ne,ne.dyn_ltree,le-1),V(ne,ne.dyn_dtree,he-1)}(_,_.l_desc.max_code+1,_.d_desc.max_code+1,re+1),ae(_,_.dyn_ltree,_.dyn_dtree)),I(_),D&&F(_)},r._tr_tally=function(_,O,Z){return _.pending_buf[_.d_buf+2*_.last_lit]=O>>>8&255,_.pending_buf[_.d_buf+2*_.last_lit+1]=255&O,_.pending_buf[_.l_buf+_.last_lit]=255&Z,_.last_lit++,O===0?_.dyn_ltree[2*Z]++:(_.matches++,O--,_.dyn_ltree[2*(f[Z]+b+1)]++,_.dyn_dtree[2*T(O)]++),_.last_lit===_.lit_bufsize-1},r._tr_align=function(_){k(_,2,3),B(_,S,Y),function(O){O.bi_valid===16?(J(O,O.bi_buf),O.bi_buf=0,O.bi_valid=0):8<=O.bi_valid&&(O.pending_buf[O.pending++]=255&O.bi_buf,O.bi_buf>>=8,O.bi_valid-=8)}(_)}},{"../utils/common":41}],53:[function(t,s,r){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,s,r){(function(n){(function(i,o){if(!i.setImmediate){var l,c,v,b,y=1,u={},m=!1,h=i.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(i);g=g&&g.setTimeout?g:i,l={}.toString.call(i.process)==="[object process]"?function(E){process.nextTick(function(){w(E)})}:function(){if(i.postMessage&&!i.importScripts){var E=!0,C=i.onmessage;return i.onmessage=function(){E=!1},i.postMessage("","*"),i.onmessage=C,E}}()?(b="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",S,!1):i.attachEvent("onmessage",S),function(E){i.postMessage(b+E,"*")}):i.MessageChannel?((v=new MessageChannel).port1.onmessage=function(E){w(E.data)},function(E){v.port2.postMessage(E)}):h&&"onreadystatechange"in h.createElement("script")?(c=h.documentElement,function(E){var C=h.createElement("script");C.onreadystatechange=function(){w(E),C.onreadystatechange=null,c.removeChild(C),C=null},c.appendChild(C)}):function(E){setTimeout(w,0,E)},g.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var C=new Array(arguments.length-1),A=0;A<C.length;A++)C[A]=arguments[A+1];var R={callback:E,args:C};return u[y]=R,l(y),y++},g.clearImmediate=p}function p(E){delete u[E]}function w(E){if(m)setTimeout(w,0,E);else{var C=u[E];if(C){m=!0;try{(function(A){var R=A.callback,M=A.args;switch(M.length){case 0:R();break;case 1:R(M[0]);break;case 2:R(M[0],M[1]);break;case 3:R(M[0],M[1],M[2]);break;default:R.apply(o,M)}})(C)}finally{p(E),m=!1}}}}function S(E){E.source===i&&typeof E.data=="string"&&E.data.indexOf(b)===0&&w(+E.data.slice(b.length))}})(typeof self=="undefined"?n===void 0?this:n:self)}).call(this,typeof ke!="undefined"?ke:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[10])(10)})})(Kr);var Rs=Kr.exports;const Ps=rt({__name:"FolderDownloader",props:{node:{}},emits:[...Le.emits],setup(e){const a=e,t=oe(0),s=Xe(),r=v=>{const b=[];for(let y of v)y.type==="blob"?b.push(y):y.type==="tree"&&b.push(...r(y.children||[]));return b};(async()=>{const v=a.node.path,b=r(a.node.children||[]),y=[].concat(...b.map(p=>{const w=[];for(const[S,E]of Object.entries(p.content_types))S==="meta"||S==="thumb"||w.push(E);return w})),u=y.length,m=Rs();for(const[p,w]of y.entries()){const S=await wr({url:w.url,token:s.token});m.file(w.path.substring(v.length+1),S),t.value=Math.ceil((p+1)/u*100)}const h=await m.generateAsync({type:"blob"}),g=document.createElement("a");g.href=URL.createObjectURL(h),g.download=`${a.node.name}.zip`,g.click(),URL.revokeObjectURL(g.href)})().then(()=>{l()});const{dialogRef:i,onDialogHide:o,onDialogOK:l,onDialogCancel:c}=Le();return(v,b)=>(pe(),Te(xt,{ref_key:"dialogRef",ref:i,onHide:be(o),square:""},{default:ve(()=>[ue(Ct,{class:"q-dialog-plugin"},{default:ve(()=>[ue(St,{style:{"text-align":"center"}},{default:ve(()=>[ue(As,{"show-value":"",value:t.value,size:"90px",color:"accent","center-color":"white","track-color":"transparent","animation-speed":10},{default:ve(()=>[ue(Ae,{name:"mdi-folder-download"})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}}),Os={style:{flex:"1","overflow-y":"auto","padding-top":"4px","background-color":"white"}},qs={class:"row"},Bs=["src"],Ns={style:{display:"flex","flex-direction":"column","justify-content":"center"}},Is=ce("div",null,null,-1),Fs=rt({__name:"IndexPage",setup(e){const a=Or();Fi({async clear(){return await t.backend.kv_mdel({pattern:"cache:%"})},async get(C,A=null){let R=await t.backend.kv_get({key:C,or:A});return R===null&&(R=A),R},async set(C,A){return await t.backend.kv_set({key:C,value:A})}});const t=Xe();t.loadState();const s=oe([]),r=oe([]),n=oe(),i=oe([]),o=()=>ee("div",{class:"row justify-center q-my-xl"},['Select "Add Repository" from the menu to get started.']),l=C=>{C.map(A=>{var R;return(R=n.value)==null?void 0:R.getNodeByKey(A)}).forEach(A=>{var R,M;if(A)for(let P of A.children)(((R=P==null?void 0:P.content_types)==null?void 0:R.thumb)||((M=P==null?void 0:P.content_types)==null?void 0:M.svg))&&!(P!=null&&P.img)&&t.setNodeThumbnail(P)})},c=te(()=>{var C;return s.value.length>0?(C=n.value)==null?void 0:C.getNodeByKey(s.value):null});_e(r,(C,A)=>{A.forEach(R=>{var M;if(C.indexOf(R)===-1){const P=(M=n.value)==null?void 0:M.getNodeByKey(R);P.type==="tree"&&(P.icon="mdi-folder")}}),C.forEach(R=>{var M;if(A.indexOf(R)===-1){const P=(M=n.value)==null?void 0:M.getNodeByKey(R);P.type==="tree"&&(P.icon="mdi-folder")}})}),_e(()=>t.search,(C,A)=>{var R;C&&!A?(i.value=[...r.value],(R=n.value)==null||R.expandAll()):A&&!C&&(r.value=[...i.value])});const v=async({nodeId:C})=>{var M;const R=((M=n.value)==null?void 0:M.getNodeByKey(C)).id;r.value=r.value.filter(P=>P!=R&&!P.startsWith(R+"|")),await t.reloadCollection({nodeId:C})},b=()=>{a.dialog({component:yo})},y=()=>{a.dialog({component:Fn}).onOk(C=>{console.log("OK",C);const A=Vt();t.tree.push({...C,id:A,icon:"mdi-github",selectable:!1,children:[]}),v({nodeId:A}).then(()=>{t.saveCollections()})})},u=()=>{a.dialog({component:Ts}).onOk(C=>{C&&v({nodeId:C})})},m=(C,A)=>C.type==="repo"||C.type==="org"?!1:A.toLowerCase().split(/\s+/).every(P=>{var Y;if(C.path.toLowerCase().indexOf(P)!==-1)return!0;let W=(Y=C.meta)==null?void 0:Y.keywords;return W||(W=""),W.indexOf(P)!==-1}),h=({nodeId:C})=>{var M,P;const A=(M=n.value)==null?void 0:M.getNodeByKey(C);let R=A;A.type==="tree"&&(R=(P=n.value)==null?void 0:P.getNodeByKey(A.id.split("|")[0])),a.dialog({component:jn,componentProps:{collection:R,initialValue:{content_types:{}}}}).onOk(W=>{v({nodeId:W.id})})},g=({nodeId:C,contentType:A})=>{var P;const R=(P=n.value)==null?void 0:P.getNodeByKey(C),M=R.content_types;A=A||(M.f3d?"f3d":M.step?"step":M.dxf?"dxf":M.svg&&"svg"),t.backend.import_model({url:M[A].url,token:t.token,filename:R.name,content_type:A})},p=({nodeId:C,contentType:A})=>{var P;const R=(P=n.value)==null?void 0:P.getNodeByKey(C),M=R.content_types;A=A||(M.f3d?"f3d":M.step?"step":M.dxf?"dxf":M.svg&&"svg"),t.backend.open_model({url:M[A].url,token:t.token,filename:R.name,content_type:A})},w=({nodeId:C})=>{var M;const A=(M=n.value)==null?void 0:M.getNodeByKey(C),R=A.type==="repo"||A.type==="org"?Fn:jn;a.dialog({component:R,componentProps:{initialValue:A}}).onOk(P=>{A.name=P.name;const W=JSON.stringify(P.repositories),Y=JSON.stringify(A.repositories);W!=Y&&(A.repositories=P.repositories,v({nodeId:P.id})),t.saveCollections()})},S=async({nodeId:C})=>{var R;const A=(R=n.value)==null?void 0:R.getNodeByKey(C);a.dialog({component:Ps,componentProps:{node:A},persistent:!0})},E=te(()=>{var C,A;return((C=t.backend)==null?void 0:C.version)<((A=t.backend)==null?void 0:A.latestVersion)});return(C,A)=>(pe(),Te(Li,{class:"column",style:vt({cursor:be(t).globalCursor||void 0})},{default:ve(()=>[ue(Mi,{class:"text-white shadow-2",style:{"z-index":"2"}},{default:ve(()=>[ue(Pi,{class:"full-width","bg-color":"white",modelValue:be(t).search,"onUpdate:modelValue":A[1]||(A[1]=R=>be(t).search=R),dense:"",square:"",outlined:"",clearable:""},{prepend:ve(()=>[ue(Ae,{name:"search"})]),after:ve(()=>[ue(ze,{flat:"",square:"",dense:"",icon:"more_vert"},{default:ve(()=>[E.value?(pe(),Te(cn,{key:0,color:"orange",floating:""},{default:ve(()=>[qe("!")]),_:1})):Se("",!0),ue(Di,{square:""},{default:ve(()=>[ue(Bi,{dense:"",style:{"min-width":"150px"}},{default:ve(()=>[we((pe(),Te(dt,{dense:"",clickable:"",onClick:b},{default:ve(()=>[ue(je,{avatar:""},{default:ve(()=>[ue(Ae,{name:"settings"})]),_:1}),ue(je,null,{default:ve(()=>[qe("Settings")]),_:1})]),_:1})),[[yt]]),we((pe(),Te(dt,{dense:"",clickable:"",onClick:y},{default:ve(()=>[ue(je,{avatar:""},{default:ve(()=>[ue(Ae,{name:"add"})]),_:1}),ue(je,null,{default:ve(()=>[qe("Add Repository")]),_:1})]),_:1})),[[yt]]),be(t).preferences.showManagementUI?we((pe(),Te(dt,{key:0,dense:"",clickable:"",onClick:u},{default:ve(()=>[ue(je,{avatar:""},{default:ve(()=>[ue(Ae,{name:"image"})]),_:1}),ue(je,null,{default:ve(()=>[qe("Auto-Thumb")]),_:1})]),_:1})),[[yt]]):Se("",!0),E.value?we((pe(),Te(dt,{key:1,dense:"",clickable:"",class:"bg-orange",href:be(t).backend.updateUrl},{default:ve(()=>[ue(je,{avatar:""},{default:ve(()=>[ue(Ae,{name:"upgrade",color:"white"})]),_:1}),ue(je,{class:"text-white"},{default:ve(()=>[qe("Update Available")]),_:1})]),_:1},8,["href"])),[[yt]]):Se("",!0),ue(hr),we((pe(),Te(dt,{dense:"",clickable:"",onClick:A[0]||(A[0]=()=>{be(t).backend.close()})},{default:ve(()=>[ue(je,{avatar:""},{default:ve(()=>[ue(Ae,{name:"close"})]),_:1}),ue(je,null,{default:ve(()=>[qe("Close")]),_:1})]),_:1})),[[yt]])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),ce("div",Os,[ue(be(_a),{dense:"",showManagementUI:be(t).preferences.showManagementUI,"no-transition":"",ref_key:"treeRef",ref:n,filter:be(t).search,"filter-method":m,nodes:be(t).tree,"label-key":"name","node-key":"id","no-selection-unset":"","no-nodes-label":o(),selected:s.value,"onUpdate:selected":A[2]||(A[2]=R=>s.value=R),expanded:r.value,"onUpdate:expanded":[A[3]||(A[3]=R=>r.value=R),l],"onAction:import":g,"onAction:open":p,"onAction:reload":v,"onAction:edit":w,"onAction:upload":h,"onAction:folderDownload":S,style:{flex:"1"},"show-thumbnails":be(t).preferences.showThumbnails,"is-fusion-backend":be(t).backend.isFusion360},{"default-header":ve(R=>[ce("div",qs,[R.node.img&&be(t).preferences.showThumbnails?(pe(),ye("img",{key:0,class:"q-tree__img q-mr-sm",style:{"border-style":"solid","border-radius":"4px","border-width":"1px","z-index":"1","background-color":"white"},src:R.node.img},null,8,Bs)):(pe(),Te(Ae,{key:1,class:"q-tree__icon q-mr-sm",name:R.node.icon,style:vt(R.node.type==="blob"?"border-style: solid; border-radius: 4px; border-width: 1px; z-index: 1; background-color: white":""),size:R.node.type==="blob"?be(t).preferences.showThumbnails?"48px":"24px":void 0},null,8,["name","style","size"])),ce("div",Ns,[ce("div",{style:vt({fontWeight:R.node.type==="blob"?"bold":"inherit"})},Ie(R.node.name),5),Is])])]),_:1},8,["showManagementUI","filter","nodes","no-nodes-label","selected","expanded","show-thumbnails","is-fusion-backend"])]),c.value?(pe(),Te(so,{key:0,showManagementUI:be(t).preferences.showManagementUI,node:c.value,"onAction:import":g,"onAction:open":p,"onAction:edit":w},null,8,["showManagementUI","node"])):Se("",!0)]),_:1},8,["style"]))}});export{Fs as default};
